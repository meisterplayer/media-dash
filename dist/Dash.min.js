module.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=173)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){var i=o(r);!i[e]&&t&&(i[e]={instance:t,override:n})}function t(e,t){for(var n in l){var r=l[n];if(r.context===e&&r.name===t)return r.instance}return null}function n(e,t,n){for(var r in l){var i=l[r];if(i.context===e&&i.name===t)return void(l[r].instance=n)}l.push({name:t,context:e,instance:n})}function r(e){return function(t){return void 0===t&&(t={}),{create:function(){return a(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function i(e){return function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=t(n,e.__dashjs_factory_name)),r||(r=a(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),l.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}}}function a(e,t,n,r){var i=o(n),a=i[e];if(a){var u=a.instance;if(!a.override)return u.apply({context:n,factory:s},r);u=u.apply({context:n,factory:s,parent:t},r);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function o(e){var t=void 0;return u.forEach(function(n){n===e&&(t=n)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:i,getClassFactory:r}}();t.default=r},function(e,t,n){"use strict";function r(){function e(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o;if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(r(e,t,n)>=0)){a[e]=a[e]||[];var s={callback:t,scope:n,priority:i};a[e].some(function(t,n){if(t&&i>t.priority)return a[e].splice(n,0,s),!0})||a[e].push(s)}}function t(e,t,n){if(e&&t&&a[e]){var i=r(e,t,n);i<0||(a[e][i]=null)}}function n(e,t){if(e&&a[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e]=a[e].filter(function(e){return e}),a[e].forEach(function(e){return e.callback.call(e.scope,t)})}}function r(e,t,n){var r=-1;return a[e]?(a[e].some(function(e,i){if(e&&e.callback===t&&(!n||n===e.scope))return r=i,!0}),r):r}function i(){a={}}var a={};return{on:e,off:t,trigger:n,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=0;r.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(r);s.EVENT_PRIORITY_LOW=o,s.EVENT_PRIORITY_HIGH=5e3,t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(63),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(s.default),l=new u;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){d=e}function t(e){l=e}function n(){return l}function r(){var e="",t=null;d&&(t=(new Date).getTime(),e+="["+(t-f)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),l&&console.log(e),a.trigger(u.default.LOG,{message:e})}var i=this.context,a=(0,o.default)(i).getInstance(),s=void 0,l=void 0,d=void 0,f=void 0;return s={log:r,setLogTimestampVisible:e,setLogToBrowserConsole:t,getLogToBrowserConsole:n},function(){l=!0,d=!0,f=(new Date).getTime()}(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="Debug",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){function e(e){He=e}function t(){return He}function n(e){Le=e}function i(){return Le}function a(e){Be=e}function o(){return Be}function u(e){De=e}function P(){return isNaN(De)?qe?_:m:De}function D(e){Oe=e}function O(){return Oe}function F(e){Fe=e}function x(){return Fe}function N(e){xe=e}function L(){return xe}function B(e){Ne=e}function U(){return Ne}function k(e){Re=e}function j(){return Re}function H(e,t){we.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(we.ttl=t)}function z(){return we}function q(e,t){Pe.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Pe.ttl=t)}function V(){return Pe}function G(e){Ce=e}function Y(){return Ce}function K(e){Ue[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Q(e,t){Ue[e]=t}function W(){return Ue[s.HTTPRequest.MEDIA_SEGMENT_TYPE]}function X(e){return Ue[e]}function $(e){ke[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Z(e,t){ke[e]=t}function J(){return ke[s.HTTPRequest.MEDIA_SEGMENT_TYPE]}function ee(e){return ke[e]}function te(e){je=e}function ne(){return je}function re(e){Me=e}function ie(){return Me}function ae(e){Ie=e}function oe(e){Ae=e}function se(){return Ie}function ue(){return Ae}function le(e){Ee=e}function de(){return Ee}function fe(e){be=e}function ce(){return be}function he(e){Se=e}function pe(){return Se}function ge(e,t){e?ze[e]=!!t:Object.keys(ze).forEach(function(e){ge(e,t)})}function me(e){var t=ze[e];return void 0===t?ze.default:t}function _e(){return qe}function ve(e){qe=e}function ye(){}var Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Ae=void 0,Me=void 0,Re=void 0,Ce=void 0,we=void 0,Pe=void 0,De=void 0,Oe=void 0,Fe=void 0,xe=void 0,Ne=void 0,Le=void 0,Be=void 0,Ue=void 0,ke=void 0,je=void 0,He=void 0,ze=void 0,qe=void 0;return Te={setBufferOccupancyABREnabled:e,getBufferOccupancyABREnabled:t,setBandwidthSafetyFactor:n,getBandwidthSafetyFactor:i,setAbandonLoadTimeout:a,getAbandonLoadTimeout:o,setLastBitrateCachingInfo:H,getLastBitrateCachingInfo:z,setLastMediaSettingsCachingInfo:q,getLastMediaSettingsCachingInfo:V,setStableBufferTime:u,getStableBufferTime:P,setBufferTimeAtTopQuality:D,getBufferTimeAtTopQuality:O,setBufferTimeAtTopQualityLongForm:F,getBufferTimeAtTopQualityLongForm:x,setLongFormContentDurationThreshold:N,getLongFormContentDurationThreshold:L,setRichBufferThreshold:B,getRichBufferThreshold:U,setBufferToKeep:k,getBufferToKeep:j,setBufferPruningInterval:G,getBufferPruningInterval:Y,setFragmentRetryAttempts:K,getFragmentRetryAttempts:W,setRetryAttemptsForType:Q,getRetryAttemptsForType:X,setFragmentRetryInterval:$,getFragmentRetryInterval:J,setRetryIntervalForType:Z,getRetryIntervalForType:ee,setWallclockTimeUpdateInterval:te,getWallclockTimeUpdateInterval:ne,setScheduleWhilePaused:re,getScheduleWhilePaused:ie,getUseSuggestedPresentationDelay:ce,setUseSuggestedPresentationDelay:fe,setLiveDelayFragmentCount:ae,getLiveDelayFragmentCount:se,getLiveDelay:ue,setLiveDelay:oe,setUseManifestDateHeaderTimeSource:le,getUseManifestDateHeaderTimeSource:de,setUTCTimingSources:he,getUTCTimingSources:pe,setXHRWithCredentialsForType:ge,getXHRWithCredentialsForType:me,setFastSwitchEnabled:ve,getFastSwitchEnabled:_e,reset:ye},function(){var e,t;Se=[],be=!1,Ee=!0,Me=!0,He=!1,qe=!1,we={enabled:!0,ttl:d},Pe={enabled:!0,ttl:f},Ie=l,Ae=void 0,Re=p,Ce=g,De=NaN,Oe=v,Fe=y,xe=T,Ne=E,Le=c,Be=h,je=C,ze={default:w},e={},r(e,s.HTTPRequest.MPD_TYPE,I),r(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,M),r(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,b),r(e,s.HTTPRequest.INIT_SEGMENT_TYPE,b),r(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,b),r(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,b),r(e,s.HTTPRequest.OTHER_TYPE,b),Ue=e,t={},r(t,s.HTTPRequest.MPD_TYPE,A),r(t,s.HTTPRequest.XLINK_EXPANSION_TYPE,R),r(t,s.HTTPRequest.MEDIA_SEGMENT_TYPE,S),r(t,s.HTTPRequest.INIT_SEGMENT_TYPE,S),r(t,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,S),r(t,s.HTTPRequest.INDEX_SEGMENT_TYPE,S),r(t,s.HTTPRequest.OTHER_TYPE,S),ke=t}(),Te}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(5),u={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},l=4,d=36e4,f=36e4,c=.9,h=1e4,p=30,g=30,m=12,_=20,v=30,y=60,T=600,E=20,b=3,S=1e3,I=3,A=500,M=1,R=500,C=50,w=!1;i.__dashjs_factory_name="MediaPlayerModel";var P=o.default.getSingletonFactory(i);P.DEFAULT_UTC_TIMING_SOURCE=u,t.default=P},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},a=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",t.HTTPRequest=i,t.HTTPRequestTrace=a},function(e,t,n){"use strict";function r(e,t){return{value:void 0===e?o:e,reason:void 0===t?null:t}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=-1;r.__dashjs_factory_name="SwitchRequest";var s=a.default.getClassFactory(r);s.NO_CHANGE=o,t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.code=t||null,this.message=n||null,this.data=i||null};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.adapter&&(Y=e.adapter)}function t(){V.trigger(C.default.METRICS_CHANGED)}function n(e){V.trigger(C.default.METRIC_CHANGED,{mediaType:e}),t()}function r(e,t,r){V.trigger(C.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),n(e)}function i(e,t,r){V.trigger(C.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),n(e)}function a(e){delete K[e],n(e)}function s(){K={},t()}function d(e){return K.hasOwnProperty(e)?K[e]:null}function c(e){var t;return K.hasOwnProperty(e)?t=K[e]:(t=new o.default,K[e]=t),t}function p(e,t,n){var r=c(e);r[t].push(n),r[t].length>z&&r[t].shift()}function m(e,t,n,r,i,a){var o=new u.default;return o.tcpid=t,o.dest=n,o.topen=r,o.tclose=i,o.tconnect=a,A(e,Y.metricsList.TCP_CONNECTION,o),o}function v(e,t,n,r){var i=new l.HTTPRequestTrace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function E(e,t,n,r,i,a,o,s,u,d,f,c,h,p){var g=new l.HTTPRequest;return i&&i!==r&&(E(e,null,n,r,null,null,o,s,null,null,null,c,null,null),g.actualurl=i),g.tcpid=t,g.type=n,g.url=r,g.range=o,g.trequest=s,g.tresponse=u,g.responsecode=f,g._tfinish=d,g._stream=e,g._mediaduration=c,g._responseHeaders=h,g._serviceLocation=a,p?p.forEach(function(e){v(g,e.s,e.d,e.b)}):(delete g.interval,delete g.trace),A(e,Y.metricsList.HTTP_REQUEST,g),g}function S(e,t,n,r,i){var a=new f.default;return a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,A(e,Y.metricsList.TRACK_SWITCH,a),a}function A(e,t,n){p(e,t,n),i(e,t,n)}function R(e,t,n){var r=new h.default;return r.t=t,r.level=n,A(e,Y.metricsList.BUFFER_LEVEL,r),r}function w(e,t,n){var r=new g.default;return r.target=n,r.state=t,A(e,Y.metricsList.BUFFER_STATE,r),r}function P(e,t,n,r){var i=new _.default;return i.time=t,i.range=r,i.manifestInfo=n,A(e,Y.metricsList.DVR_INFO,i),i}function D(e,t){var n=new y.default,r=c(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n?r[r.length-1]:(A(e,Y.metricsList.DROPPED_FRAMES,n),n)}function F(e,t,n,r,i,a,o,s,u){var l=new b.default;return l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,A(e,Y.metricsList.SCHEDULING_INFO,l),l}function x(e,t,n){var r=new M.default;r.loadingRequests=t,r.executedRequests=n,c(e).RequestsQueue=r,i(e,Y.metricsList.REQUESTS_QUEUE,r)}function N(e,t,n,r,a,o,s,u,l,d){var f=new T.ManifestUpdate;return f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=a,f.presentationStartTime=o,f.clientTimeOffset=s,f.currentTime=u,f.buffered=l,f.latency=d,p("stream","ManifestUpdate",f),i(e,Y.metricsList.MANIFEST_UPDATE,f),f}function L(e,t){if(e){for(var n in t)e[n]=t[n];r(e.mediaType,Y.metricsList.MANIFEST_UPDATE,e)}}function B(e,t,n,i,a){if(e){var o=new T.ManifestUpdateStreamInfo;return o.id=t,o.index=n,o.start=i,o.duration=a,e.streamInfo.push(o),r(e.mediaType,Y.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),o}return null}function U(e,t,n,i,a,o,s,u){if(e){var l=new T.ManifestUpdateTrackInfo;return l.id=t,l.index=n,l.streamIndex=i,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.trackInfo.push(l),r(e.mediaType,Y.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function k(e){return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,A("stream",Y.metricsList.PLAY_LIST,e),e}function j(e){return A("stream",Y.metricsList.DVB_ERRORS,e),e}function H(e,t){var n=new O.default;return n._s=t,c(e).BolaState=[n],i(e,"BolaState",n),n}var z=1e3,q=this.context,V=(0,I.default)(q).getInstance(),G=void 0,Y=void 0,K=void 0;return G={metricsChanged:t,metricChanged:n,metricUpdated:r,metricAdded:i,clearCurrentMetricsForType:a,clearAllCurrentMetrics:s,getReadOnlyMetricsFor:d,getMetricsFor:c,addTcpConnection:m,addHttpRequest:E,addRepresentationSwitch:S,addBufferLevel:R,addBufferState:w,addDVRInfo:P,addDroppedFrames:D,addSchedulingInfo:F,addRequestsQueue:x,addManifestUpdate:N,updateManifestUpdateInfo:L,addManifestUpdateStreamInfo:B,addManifestUpdateRepresentationInfo:U,addPlayList:k,addDVBErrors:j,updateBolaState:H,setConfig:e},function(){K={}}(),G}Object.defineProperty(t,"__esModule",{value:!0});var a=n(153),o=r(a),s=n(167),u=r(s),l=n(5),d=n(164),f=r(d),c=n(159),h=r(c),p=n(160),g=r(p),m=n(161),_=r(m),v=n(162),y=r(v),T=n(163),E=n(166),b=r(E),S=n(1),I=r(S),A=n(165),M=r(A),R=n(2),C=r(R),w=n(0),P=r(w),D=n(158),O=r(D);i.__dashjs_factory_name="MetricsModel",t.default=P.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){d.trigger(u.default.ERROR,{error:"capability",event:e})}function t(e,t,n){d.trigger(u.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n,r){d.trigger(u.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:r}})}function r(e,t,n){d.trigger(u.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function i(e){d.trigger(u.default.ERROR,{error:"mediasource",event:e})}function a(e){d.trigger(u.default.ERROR,{error:"key_session",event:e})}function s(e){d.trigger(u.default.ERROR,{error:"key_message",event:e})}var l=this.context,d=(0,o.default)(l).getInstance();return{capabilityError:e,downloadError:t,manifestError:n,timedTextError:r,mediaSourceError:i,mediaKeySessionError:a,mediaKeyMessageError:s}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="ErrorHandler";var f=d.default.getSingletonFactory(i);f.CAPABILITY_ERROR_MEDIASOURCE="mediasource",f.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",f.DOWNLOAD_ERROR_ID_MANIFEST="manifest",f.DOWNLOAD_ERROR_ID_SIDX="SIDX",f.DOWNLOAD_ERROR_ID_CONTENT="content",f.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",f.DOWNLOAD_ERROR_ID_XLINK="xlink",f.MANIFEST_ERROR_ID_CODEC="codec",f.MANIFEST_ERROR_ID_PARSE="parse",f.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",f.TIMED_TEXT_ERROR_ID_PARSE="parse",t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n;return n=S(R.getValue().Period_asArray[t],e),null===n?null:n.bandwidth}function t(e,t){return b(R.getValue().Period_asArray[t],e)}function n(e,t){return A(R.getValue().Period_asArray[t],e)}function r(e){return c(e,h.TRACK_SWITCH)}function i(e){return c(e,h.BUFFER_LEVEL)}function o(e){var t=i(e);return t?(0,p.round10)(t.level/1e3,-3):0}function u(e){return e.RequestsQueue}function d(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;for(t=r.length,n=t-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function f(e){return null===e?[]:e.HttpList?e.HttpList:[]}function c(e,t){if(null===e)return null;var n=e[t];if(null===n)return null;var r=n.length;return r<=0?null:n[r-1]}function g(e){return c(e,h.DROPPED_FRAMES)}function m(e){return c(e,h.SCHEDULING_INFO)}function _(e){return c(e,h.MANIFEST_UPDATE)}function v(e){return c(e,h.DVR_INFO)}function y(e,t){var n,r,i,o={};if(null===e)return null;for(n=f(e),i=n.length-1;i>=0;i--)if(r=n[i],r.type===a.HTTPRequest.MPD_TYPE){o=E(r._responseHeaders);break}return void 0===o[t]?null:o[t]}function T(e,t){if(null===e)return null;var n,r=d(e);return null===r||null===r._responseHeaders?null:(n=E(r._responseHeaders),void 0===n[t]?null:n[t])}function E(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function b(e,t){var n=S(e,t,!0);return null!==n?n:-1}function S(e,t,n){var r,i,a,o,s,u;if(e)for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(r=i[s],o=r.Representation_asArray,u=0;u<o.length;u+=1)if(a=o[u],t===a.id)return n?u:a;return null}function I(e,t){return(0,l.default)(M).getInstance().getIsTypeOf(e,t)}function A(e,t){var n,r,i,a;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)if(n=r[a],i=n.Representation_asArray,I(n,t))return i.length;return-1}var M=this.context,R=(0,s.default)(M).getInstance();return{getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:n,getCurrentRepresentationSwitch:r,getLatestBufferLevelVO:i,getCurrentBufferLevel:o,getCurrentHttpRequest:d,getHttpRequests:f,getCurrentDroppedFrames:g,getCurrentSchedulingInfo:m,getCurrentDVRInfo:v,getCurrentManifestUpdate:_,getLatestFragmentRequestHeaderValueByID:T,getLatestMPDRequestHeaderValueByID:y,getRequestsQueue:u}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=n(27),s=r(o),u=n(11),l=r(u),d=n(0),f=r(d),c=n(46),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(168);i.__dashjs_factory_name="DashMetrics",t.default=f.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n,r,i,a=!1,o=!1,s=e.ContentComponent_asArray,u="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")){var l=e.Representation_asArray[0].codecs;if(0===l.search("stpp")||0===l.search("wvtt"))return"fragmentedText"===t}if(s){if(s.length>1)return"muxed"===t;s[0]&&s[0].contentType===t&&(a=!0,o=!0)}if(e.hasOwnProperty("mimeType")&&(a=u.test(e.mimeType),o=!0),!o)for(n=0,r=e.Representation_asArray.length;!o&&n<r;)i=e.Representation_asArray[n],i.hasOwnProperty("mimeType")&&(a=u.test(i.mimeType),o=!0),n++;return a}function t(t){return e(t,"audio")}function n(t){return e(t,"video")}function r(t){return e(t,"fragmentedText")}function i(t){return e(t,"text")}function a(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function f(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function h(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function g(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function _(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function y(e){return h(e).filter(function(e){return"main"===e.value})[0]}function E(){return function(e,t){return e.bandwidth-t.bandwidth}}function S(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(E()),e}function A(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;r<i;r++)if(a[r].hasOwnProperty("id")&&a[r].id===e)return a[r];return null}function R(e,t,n){return t.Period_asArray[n].AdaptationSet_asArray[e]}function w(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;r<i;r++)if(a[r]===e)return r;return-1}function P(t,n,r){var i,a,o=t.Period_asArray[n].AdaptationSet_asArray,s=[];for(i=0,a=o.length;i<a;i++)e(o[i],r)&&s.push(S(o[i]));return s}function D(e,t,n,r){var i=P(e,t,n);if(!i||0===i.length)return null;if(i.length>1&&r)for(var a=ue.getCurrentTrackFor(n,r),o=le.getAllMediaInfoForType(e,r,n),s=0,u=i.length;s<u;s++){if(a&&ue.isTracksEqual(a,o[s]))return i[s];if(y(i[s]))return i[s]}return i[0]}function O(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function F(e){return e.Representation_asArray[0].mimeType}function x(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function N(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function L(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function B(e){var t,n=L(e);return t=!isNaN(e.timeShiftBufferDepth),n&&t}function U(e,t){var n=!1;return e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function k(e){return U(e,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function j(e){return U(e,"urn:dvb:dash:profile:dvb-dash:2014")}function H(e){return e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function z(e){return e.bandwidth}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function V(e){return e.Representation_asArray.length}function G(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=S(e),n=t.Representation_asArray,r=n.length,i=[],a=0;a<r;a++)i.push({bandwidth:n[a].bandwidth,width:n[a].width||0,height:n[a].height||0});return i}function Y(e,t){return t.Representation_asArray[e]}function K(e,t){for(var n,r,i,a,u,l=S(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),d=[],f=0;f<l.Representation_asArray.length;f++)a=l.Representation_asArray[f],n=new o.default,n.index=f,n.adaptation=t,a.hasOwnProperty("id")&&(n.id=a.id),a.hasOwnProperty("codecs")&&(n.codecs=a.codecs),a.hasOwnProperty("codecPrivateData")&&(n.codecPrivateData=a.codecPrivateData),a.hasOwnProperty("bandwidth")&&(n.bandwidth=a.bandwidth),a.hasOwnProperty("width")&&(n.width=a.width),a.hasOwnProperty("height")&&(n.height=a.height),a.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=a.maxPlayoutRate),a.hasOwnProperty("SegmentBase")?(i=a.SegmentBase,n.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(i=a.SegmentList,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):(n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0)):a.hasOwnProperty("SegmentTemplate")?(i=a.SegmentTemplate,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",i.hasOwnProperty("initialization")&&(n.initialization=i.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):n.segmentInfoType="BaseURL",i&&(i.hasOwnProperty("Initialization")?(r=i.Initialization,r.hasOwnProperty("sourceURL")?n.initialization=r.sourceURL:r.hasOwnProperty("range")&&(n.range=r.range)):a.hasOwnProperty("mimeType")&&s(a.mimeType)&&(n.range=0),i.hasOwnProperty("timescale")&&(n.timescale=i.timescale),i.hasOwnProperty("duration")&&(n.segmentDuration=i.duration/n.timescale),i.hasOwnProperty("startNumber")&&(n.startNumber=i.startNumber),i.hasOwnProperty("indexRange")&&(n.indexRange=i.indexRange),i.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=i.presentationTimeOffset/n.timescale)),n.MSETimeOffset=se.calcMSETimeOffset(n),n.path=[t.period.index,t.index,f],d.push(n);return d}function Q(e,i){for(var o,s,l=e.Period_asArray[i.index],d=[],f=0;f<l.AdaptationSet_asArray.length;f++)s=l.AdaptationSet_asArray[f],o=new u.default,s.hasOwnProperty("id")&&(o.id=s.id),o.index=f,o.period=i,a(s)?o.type="muxed":t(s)?o.type="audio":n(s)?o.type="video":r(s)?o.type="fragmentedText":o.type="text",d.push(o);return d}function W(e,t){var n,r,i=L(e),a=[],o=null,s=null,u=null,l=null;for(r=0,n=e.Period_asArray.length;r<n;r++)s=e.Period_asArray[r],s.hasOwnProperty("start")?(l=new d.default,l.start=s.start):null!==o&&s.hasOwnProperty("duration")&&null!==u?(l=new d.default,l.start=u.start+u.duration,l.duration=s.duration):0!==r||i||(l=new d.default,l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=X(s,r)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=r,l.mpd=t,a.push(l),o=s,u=l),s=null,l=null;return 0===a.length?a:(null!==u&&isNaN(u.duration)&&(u.duration=Z(e,u)-u.start),a)}function X(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=d.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(n=e.id),n}function $(e){var t=new c.default;return t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("minimumUpdatePeriod")&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty("mediaPresentationDuration")&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function Z(e,t){var n=L(e),r=void 0;if(e.mediaPresentationDuration)r=e.mediaPresentationDuration;else if(t.duration)r=t.duration;else{if(!n)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");r=Number.POSITIVE_INFINITY}return r}function J(e,t){var n=e.Period_asArray,r=n[t.index].EventStream_asArray,i=[];if(r)for(var a=0;a<r.length;a++){var o=new M.default;if(o.period=t,o.timescale=1,!r[a].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty("timescale")&&(o.timescale=r[a].timescale),r[a].hasOwnProperty("value")&&(o.value=r[a].value);for(var s=0;s<r[a].Event_asArray.length;s++){var u=new b.default;u.presentationTime=0,u.eventStream=o,r[a].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[a].Event_asArray[s].presentationTime),r[a].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[a].Event_asArray[s].duration),r[a].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[a].Event_asArray[s].id),i.push(u)}}return i}function ee(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=new M.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty("timescale")&&(i.timescale=e[r].timescale),e[r].hasOwnProperty("value")&&(i.value=e[r].value),n.push(i)}return n}function te(e,t){return t&&e?ee(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray,null):[]}function ne(e,t){return ee(e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray,t)}function re(e){var t=L(e),n=e.hasOwnProperty("availabilityStartTime"),r=e.UTCTiming_asArray,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new p.default;e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),i.push(t)))}),i}function ie(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some(function(n){if(n){var i=new I.default,a=n.__text||n;return de.isRelative(a)&&(r=!0,e.baseUri&&(a=e.baseUri+a)),i.url=a,n.hasOwnProperty("serviceLocation")&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=a,n.hasOwnProperty("dvb:priority")&&(i.dvb_priority=n["dvb:priority"]),n.hasOwnProperty("dvb:weight")&&(i.dvb_weight=n["dvb:weight"]),t.push(i),r}}),t}function ae(e){return e.hasOwnProperty("Location")&&(e.Location=e.Location_asArray[0]),e.Location}var oe=this.context,se=(0,m.default)(oe).getInstance(),ue=(0,v.default)(oe).getInstance(),le=(0,T.default)(oe).getInstance(),de=(0,C.default)(oe).getInstance();return{getIsTypeOf:e,getIsAudio:t,getIsVideo:n,getIsText:i,getIsMuxed:a,getIsTextTrack:s,getIsFragmentedText:r,getIsMain:y,getLanguageForAdaptation:l,getViewpointForAdaptation:f,getRolesForAdaptation:h,getAccessibilityForAdaptation:g,getAudioChannelConfigurationForAdaptation:_,processAdaptation:S,getAdaptationForIndex:R,getIndexForAdaptation:w,getAdaptationForId:A,getAdaptationsForType:P,getAdaptationForType:D,getCodec:O,getMimeType:F,getKID:x,getContentProtectionData:N,getIsDynamic:L,getIsDVR:B,getIsOnDemand:k,getIsDVB:j,getDuration:H,getBandwidth:z,getManifestUpdatePeriod:q,getRepresentationCount:V,getBitrateListForAdaptation:G,getRepresentationFor:Y,getRepresentationsForAdaptation:K,getAdaptationsForPeriod:Q,getRegularPeriods:W,getMpd:$,getEventsForPeriod:J,getEventStreams:ee,getEventStreamForAdaptationSet:te,getEventStreamForRepresentation:ne,getUTCTimingSources:re,getBaseURLsFromElement:ie,getRepresentationSortFunction:E,getLocation:ae}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(34),o=r(a),s=n(81),u=r(s),l=n(84),d=r(l),f=n(83),c=r(f),h=n(50),p=r(h),g=n(33),m=r(g),_=n(17),v=r(_),y=n(32),T=r(y),E=n(49),b=r(E),S=n(48),I=r(S),A=n(82),M=r(A),R=n(21),C=r(R),w=n(0),P=r(w);i.__dashjs_factory_name="DashManifestModel",t.default=P.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){ve={video:!0,audio:!0},ye={},Te={},Ee={},be={},Se={},Ae={},Ie={},Ue={},Re=!1,Ce=!1,void 0===we&&(we=!1),Le=(0,u.default)(fe).getInstance(),Ne=(0,d.default)(fe).getInstance(),Oe=(0,b.default)(fe).getInstance(),Fe=(0,I.default)(fe).getInstance(),xe=(0,M.default)(fe).getInstance(),je=(0,L.default)(fe).getInstance(),He=(0,U.default)(fe).getInstance(),ze=(new Date).getTime()/1e3}function t(e,t){Ue[e]=(0,O.default)(fe).create(),Ie[e]=t,Ae[e]=Ae[e]||{},Ae[e].state=z,pe.on(m.default.LOADING_PROGRESS,de,this),"video"==e&&(pe.on(v.default.QUALITY_CHANGE_RENDERED,i,this),ke=(0,x.default)(fe).create(),ue())}function n(){pe.off(m.default.LOADING_PROGRESS,de,this),pe.off(v.default.QUALITY_CHANGE_RENDERED,i,this),Be=void 0,ke=void 0,clearTimeout(Me),Me=null,e()}function r(e){e&&(e.abrRulesCollection&&(me=e.abrRulesCollection),e.streamController&&(_e=e.streamController))}function i(e){"video"===e.mediaType&&(Be=e.newQuality,ke.push(Be,xe.getPlaybackQuality()))}function a(e,t){var n;return ye[t]=ye[t]||{},ye[t].hasOwnProperty(e)||(ye[t][e]=0),n=ae(ye[t][e],e),n=oe(n,e,ye[t][e]),n=le(n,e)}function s(e){var t=Le.getSavedBitrateSettings(e);if(!Ee.hasOwnProperty(e))if(be.hasOwnProperty(e)){var n=Oe.getValue(),r=Fe.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*be[e])-1,0);Ee[e]=r[i].bandwidth}else Ee[e]=0}else isNaN(t)?Ee[e]="video"===e?q:V:Ee[e]=t;return Ee[e]}function l(e,t){Ee[e]=t}function f(e){return be.hasOwnProperty(e)?be[e]:null}function h(e,t){be[e]=t}function g(e){return Ee.hasOwnProperty("max")&&Ee.max.hasOwnProperty(e)?Ee.max[e]:NaN}function _(e){return Ee.hasOwnProperty("min")&&Ee.min.hasOwnProperty(e)?Ee.min[e]:NaN}function y(e,t){Ee.max=Ee.max||{},Ee.max[e]=t}function T(e,t){Ee.min=Ee.min||{},Ee.min[e]=t}function E(e){return be.hasOwnProperty("max")&&be.max.hasOwnProperty(e)?be.max[e]:1}function S(e,t){be.max=be.max||{},be.max[e]=t}function A(e){return ve[e]}function R(e,t){ve[e]=t}function w(){return Re}function D(e){Re=e}function F(){return Ce}function N(e){Ce=e}function B(e){var t=e.getType(),n=e.getStreamInfo(),r=n.id,i=ne(t,n),o=(0,C.default)(fe).create({streamProcessor:e,currentValue:i,playbackIndex:Be,switchHistory:Ue[t],droppedFramesHistory:ke,hasRichBuffer:$(t)});if(ke&&ke.push(Be,xe.getPlaybackQuality()),A(t)){var s=a(t,r),u=me.getMaxQuality(o),l=u.value;if(l>s&&(l=s),Ue[t].push({oldValue:i,newValue:l}),l>P.default.NO_CHANGE&&l!=i)(Ae[t].state===z||l>i)&&Y(t,n,i,l,s,u.reason);else if(ce.getLogToBrowserConsole()){var d=He.getCurrentBufferLevel(je.getReadOnlyMetricsFor(t));he("AbrController ("+t+") stay on "+i+"/"+s+" (buffer: "+d+")")}}}function k(e,t,n,r){var i=t.id,o=ne(e,t);if(null===n||isNaN(n)||n%1!=0)throw new Error("argument is not an integer");var s=a(e,i);n!==o&&n>=0&&n<=s&&Y(e,t,o,n,s,r)}function Y(e,t,n,r,i,a){if(ce.getLogToBrowserConsole()){var o=He.getCurrentBufferLevel(je.getReadOnlyMetricsFor(e));he("AbrController ("+e+") switch from "+n+" to "+r+"/"+i+" (buffer: "+o+")\n"+JSON.stringify(a))}re(e,t.id,r),pe.trigger(m.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:t,oldQuality:n,newQuality:r,reason:a})}function K(e,t){Ae[e].state=t}function Q(e){return Ae[e].state}function W(e,t,n){if(n&&Ie[e.type].getCurrentRepresentationInfo()&&Ie[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var r=Ie[e.type].getCurrentRepresentationInfo().fragmentDuration;if(n>r)return 0;t*=1-n/r}var i=X(e);if(!i||0===i.length)return G;for(var a=i.length-1;a>=0;a--){if(1e3*t>=i[a].bitrate)return a}return 0}function X(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,r=e.type,i=[],a=0,s=n.length;a<s;a++)t=new o.default,t.mediaType=r,t.qualityIndex=a,t.bitrate=n[a].bandwidth,t.width=n[a].width,t.height=n[a].height,i.push(t);return i}function $(e){var t=je.getReadOnlyMetricsFor(e),n=He.getCurrentBufferLevel(t),r=t.BufferState.length>0?t.BufferState[t.BufferState.length-1]:null,i=!1;return r&&n>r.target&&(i=n>r.target+Ne.getRichBufferThreshold()),i}function Z(e,t){Se[e]=t}function J(e){return Se[e]}function ee(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return ie(t,n,r),r}function te(e){var t=e.id,n=ne("audio",e),r=ne("video",e);return n===a("audio",t)&&r===a("video",t)}function ne(e,t){var n=t.id;return Te[n]=Te[n]||{},Te[n].hasOwnProperty(e)||(Te[n][e]=G),Te[n][e]}function re(e,t,n){Te[t]=Te[t]||{},Te[t][e]=n}function ie(e,t,n){ye[t]=ye[t]||{},ye[t][e]=n}function ae(e,t){var n=e;if(!Ie[t])return n;var r=_(t);if(r){var i=W(Ie[t].getMediaInfo(),r);n=Math.max(e,i)}var a=g(t);if(a){var o=W(Ie[t].getMediaInfo(),a);n=Math.min(n,o)}return n}function oe(e,t,n){var r=E(t);return isNaN(r)||r>=1||r<0?e:Math.min(e,Math.round(n*r))}function se(e){we=e}function ue(){var e=xe.getElement();if(void 0!==e){var t=Ce&&window.hasOwnProperty("devicePixelRatio"),n=t?window.devicePixelRatio:1;Pe=e.clientWidth*n,De=e.clientHeight*n}}function le(e,t){if("video"!==t||!Re||!Ie[t])return e;we||ue();var n=Oe.getValue(),r=Fe.getAdaptationForType(n,0,t).Representation,i=e;if(Pe>0&&De>0){for(;i>0&&r[i]&&Pe<r[i].width&&Pe-r[i-1].width<r[i].width-Pe;)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}function de(e){var t=e.request.mediaType;if(A(t)){var n=Ie[t].getScheduleController();if(!n)return;var r=(0,C.default)(fe).create({streamProcessor:Ie[t],currentRequest:e.request,currentValue:ne(t,_e.getActiveStreamInfo()),hasRichBuffer:$(t)}),i=me.shouldAbandonFragment(r);if(i.value>P.default.NO_CHANGE){var a=n.getFragmentModel(),o=a.getRequests({state:c.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0];o&&(a.abortRequests(),K(t,H),Ue[t].reset(),Ue[t].push({oldValue:ne(t,_e.getActiveStreamInfo()),newValue:i.value,confidence:1,reason:i.reason}),k(t,_e.getActiveStreamInfo(),i.value,i.reason),pe.trigger(m.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:Ie[t],request:o,mediaType:t}),clearTimeout(Me),Me=setTimeout(function(){K(t,z),Me=null},Ne.getAbandonLoadTimeout()))}}}var fe=this.context,ce=(0,j.default)(fe).getInstance(),he=ce.log,pe=(0,p.default)(fe).getInstance(),ge=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Ae=void 0,Me=void 0,Re=void 0,Ce=void 0,we=void 0,Pe=void 0,De=void 0,Oe=void 0,Fe=void 0,xe=void 0,Ne=void 0,Le=void 0,Be=void 0,Ue=void 0,ke=void 0,je=void 0,He=void 0,ze=void 0;return ge={isPlayingAtTopQuality:te,updateTopQualityIndex:ee,getAverageThroughput:J,getBitrateList:X,getQualityForBitrate:W,getMaxAllowedBitrateFor:g,getMinAllowedBitrateFor:_,setMaxAllowedBitrateFor:y,setMinAllowedBitrateFor:T,getMaxAllowedRepresentationRatioFor:E,setMaxAllowedRepresentationRatioFor:S,getInitialBitrateFor:s,setInitialBitrateFor:l,getInitialRepresentationRatioFor:f,setInitialRepresentationRatioFor:h,setAutoSwitchBitrateFor:R,getAutoSwitchBitrateFor:A,setLimitBitrateByPortal:D,getLimitBitrateByPortal:w,getUsePixelRatioInLimitBitrateByPortal:F,setUsePixelRatioInLimitBitrateByPortal:N,getQualityFor:ne,getAbandonmentStateFor:Q,setAbandonmentStateFor:K,setPlaybackQuality:k,getPlaybackQuality:B,setAverageThroughput:Z,getTopQualityIndexFor:a,setElementSize:ue,setWindowResizeEventCalled:se,initialize:t,setConfig:r,reset:n},e(),ge}Object.defineProperty(t,"__esModule",{value:!0});var a=n(148),o=r(a),s=n(40),u=r(s),l=n(4),d=r(l),f=n(26),c=r(f),h=n(1),p=r(h),g=n(2),m=r(g),_=n(16),v=r(_),y=n(0),T=r(y),E=n(27),b=r(E),S=n(11),I=r(S),A=n(20),M=r(A),R=n(124),C=r(R),w=n(6),P=r(w),D=n(125),O=r(D),F=n(123),x=r(F),N=n(8),L=r(N),B=n(10),U=r(B),k=n(3),j=r(k),H="abandonload",z="allowload",q=1e3,V=100,G=0;i.__dashjs_factory_name="AbrController";var Y=T.default.getSingletonFactory(i);Y.ABANDON_LOAD=H,Y.QUALITY_DEFAULT=G,t.default=Y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){Te=e,$(t),Pe=n,Fe=(0,u.default)(te).getInstance(),we=(0,p.default)(te).getInstance(),De=(0,c.default)(te).getInstance(),xe=(0,C.default)(te).getInstance(),Oe=Pe.getScheduleController(),he=De.getQualityFor(Te,Pe.getStreamInfo()),re.on(T.default.DATA_UPDATE_COMPLETED,k,this),re.on(T.default.INIT_FRAGMENT_LOADED,i,this),re.on(T.default.MEDIA_FRAGMENT_LOADED,s,this),re.on(T.default.QUALITY_CHANGE_REQUESTED,h,this),re.on(T.default.STREAM_COMPLETED,j,this),re.on(T.default.PLAYBACK_PROGRESS,_,this),re.on(T.default.PLAYBACK_TIME_UPDATED,_,this),re.on(T.default.PLAYBACK_RATE_CHANGED,q,this),re.on(T.default.PLAYBACK_SEEKING,g,this),re.on(T.default.WALLCLOCK_TIME_UPDATED,z,this),re.on(T.default.CURRENT_TRACK_CHANGED,H,this,v.default.EVENT_PRIORITY_HIGH),re.on(T.default.SOURCEBUFFER_APPEND_COMPLETED,f,this),re.on(T.default.SOURCEBUFFER_REMOVE_COMPLETED,B,this)}function n(e){if(!e||!_e||!Pe)return null;var t=null;try{t=oe.createSourceBuffer(_e,e),t&&t.hasOwnProperty("initialize")&&t.initialize(Te,this)}catch(e){se.mediaSourceError("Error creating "+Te+" source buffer.")}return Q(t),U(Pe.getRepresentationInfoForQuality(he).MSETimeOffset),t}function r(){return!(!Pe||!ue)&&Pe.getStreamInfo().id===ue.getActiveStreamInfo().id}function i(e){e.fragmentModel===Pe.getFragmentModel()&&(ne("Init fragment finished loading saving to",Te+"'s init cache"),xe.save(e.chunk),l(e.chunk))}function a(e,t){var n=xe.extract(e,t);n?l(n):re.trigger(T.default.INIT_REQUESTED,{sender:ce})}function s(e){if(e.fragmentModel===Pe.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=Pe.getRepresentationInfoForQuality(r),a=ae.getValue(),s=de.getEventsFor(a,i.mediaInfo,Pe),u=de.getEventsFor(a,i,Pe);if(s&&s.length>0||u&&u.length>0){var d=Pe.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],f=R(n,d,s,u);Pe.getEventController().addInbandEvents(f)}t.bytes=O(n),l(t)}}function l(e){Me=!0,Se=e,oe.append(Ee,e),"video"===e.mediaInfo.type&&re.trigger(T.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function f(e){if(Ee===e.buffer){if(e.error||!F())return e.error.code===d.default.QUOTA_EXCEEDED_ERROR_CODE&&(me=.8*oe.getTotalBufferedTime(Ee)),void(e.error.code!==d.default.QUOTA_EXCEEDED_ERROR_CODE&&F()||(re.trigger(T.default.QUOTA_EXCEEDED,{sender:ce,criticalBufferLevel:me}),L(N())));Se&&!isNaN(Se.index)&&(ve=Math.max(Se.index,ve),S());var t=oe.getAllRanges(Ee);if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)ne("Buffered Range for type:",Te,":",t.start(n)," - ",t.end(n));_(),Me=!1,Se&&re.trigger(T.default.BYTES_APPENDED,{sender:ce,quality:Se.quality,startTime:Se.start,index:Se.index,bufferedRanges:t})}}function h(e){he!==e.newQuality&&Te===e.mediaType&&Pe.getStreamInfo().id===e.streamInfo.id&&(U(Pe.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),he=e.newQuality)}function g(){ye=Number.POSITIVE_INFINITY,pe=!1,_()}function _(){y(),E()}function y(){we&&(ge=oe.getBufferLength(Ee,we.getTime()),re.trigger(T.default.BUFFER_LEVEL_UPDATED,{sender:ce,bufferLevel:ge}),I())}function E(){r()&&(ie.addBufferState(Te,be,Oe.getBufferTarget()),ie.addBufferLevel(Te,new Date,1e3*ge))}function S(){ve>=ye-1&&!pe&&(pe=!0,re.trigger(T.default.BUFFERING_COMPLETED,{sender:ce,streamInfo:Pe.getStreamInfo()}))}function I(){A(ge<D&&!pe?P:w)}function A(e){be===e||"fragmentedText"===Te&&fe.getAllTracksAreDisabled()||(be=e,E(),re.trigger(T.default.BUFFER_LEVEL_STATE_CHANGED,{sender:ce,state:e,mediaType:Te,streamInfo:Pe.getStreamInfo()}),re.trigger(e===w?T.default.BUFFER_LOADED:T.default.BUFFER_EMPTY,{mediaType:Te}),ne(e===w?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function R(e,t,n,r){var i=Math.max(isNaN(t.startTime)?0:t.startTime,0),a=[],o=[];Ce=!1;for(var s=n.concat(r),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri]=s[u];for(var d=(0,b.default)(te).getInstance().parse(e),f=d.getBoxes("emsg"),c=0,h=f.length;c<h;c++){var p=de.getEvent(f[c],a,i);p&&o.push(p)}return o}function O(e){if(!Ce)return e;for(var t=e.length,n=Math.pow(256,2),r=Math.pow(256,3),i=new Uint8Array(e.length),a=0,o=0;a<t;){var s=String.fromCharCode(e[a+4],e[a+5],e[a+6],e[a+7]),u=e[a]*r+e[a+1]*n+256*e[a+2]+1*e[a+3];if("emsg"!=s)for(var l=a;l<a+u;l++)i[o]=e[l],o++;a+=u}return i.subarray(0,o)}function F(){return oe.getTotalBufferedTime(Ee)<me}function x(){if(Ee&&"fragmentedText"!==Te){var e=Ee.buffered.length?Ee.buffered.start(0):0,t=we.getTime()-e-Fe.getBufferToKeep();t>0&&(ne("pruning buffer: "+t+" seconds."),Re=!0,oe.remove(Ee,0,Math.round(e+t),_e))}}function N(e){if(!Ee)return null;var t=we.getTime(),n=Pe.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:t,threshold:e})[0],r=oe.getBufferRange(Ee,t),i=n&&!isNaN(n.startTime)?n.startTime:Math.floor(t);return null===r&&Ee.buffered.length>0&&(i=Ee.buffered.end(Ee.buffered.length-1)),{start:Ee.buffered.start(0),end:i}}function L(e){e&&Ee&&oe.remove(Ee,e.start,e.end,_e)}function B(e){Ee===e.buffer&&(Re&&(Re=!1),y(),re.trigger(T.default.BUFFER_CLEARED,{sender:ce,from:e.from,to:e.to,hasEnoughSpaceToAppend:F()}))}function U(e){Ee&&Ee.timestampOffset!==e&&!isNaN(e)&&(Ee.timestampOffset=e)}function k(e){e.sender.getStreamProcessor()!==Pe||e.error||U(e.currentRepresentation.MSETimeOffset)}function j(e){e.fragmentModel===Pe.getFragmentModel()&&(ye=e.request.index,S())}function H(e){Ee&&e.newMediaInfo.type===Te&&e.newMediaInfo.streamInfo.id===Pe.getStreamInfo().id&&le.getSwitchMode(Te)===m.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&L(N(0))}function z(){++Ie*(Fe.getWallclockTimeUpdateInterval()/1e3)>=Fe.getBufferPruningInterval()&&!Me&&(Ie=0,x())}function q(){I()}function V(){return Te}function G(){return Pe}function Y(e){Pe=e}function K(){return Ee}function Q(e){Ee=e}function W(){return ge}function X(){return me}function $(e){_e=e}function Z(){return _e}function J(){return pe}function ee(e){re.off(T.default.DATA_UPDATE_COMPLETED,k,this),re.off(T.default.QUALITY_CHANGE_REQUESTED,h,this),re.off(T.default.INIT_FRAGMENT_LOADED,i,this),re.off(T.default.MEDIA_FRAGMENT_LOADED,s,this),re.off(T.default.STREAM_COMPLETED,j,this),re.off(T.default.CURRENT_TRACK_CHANGED,H,this),re.off(T.default.PLAYBACK_PROGRESS,_,this),re.off(T.default.PLAYBACK_TIME_UPDATED,_,this),re.off(T.default.PLAYBACK_RATE_CHANGED,q,this),re.off(T.default.PLAYBACK_SEEKING,g,this),re.off(T.default.WALLCLOCK_TIME_UPDATED,z,this),re.off(T.default.SOURCEBUFFER_APPEND_COMPLETED,f,this),re.off(T.default.SOURCEBUFFER_REMOVE_COMPLETED,B,this),me=Number.POSITIVE_INFINITY,be=P,he=c.default.QUALITY_DEFAULT,ye=Number.POSITIVE_INFINITY,ve=0,Se=null,Ae=!1,pe=!1,Me=!1,Re=!1,we=null,Pe=null,De=null,Oe=null,e||(oe.abort(_e,Ee),oe.removeSourceBuffer(_e,Ee)),Ee=null}var te=this.context,ne=(0,M.default)(te).getInstance().log,re=(0,v.default)(te).getInstance(),ie=e.metricsModel,ae=e.manifestModel,oe=e.sourceBufferController,se=e.errHandler,ue=e.streamController,le=e.mediaController,de=e.adapter,fe=e.textController,ce=void 0,he=void 0,pe=void 0,ge=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Ae=void 0,Me=void 0,Re=void 0,Ce=void 0,we=void 0,Pe=void 0,De=void 0,Oe=void 0,Fe=void 0,xe=void 0;return ce={initialize:t,createBuffer:n,getType:V,getStreamProcessor:G,setStreamProcessor:Y,getBuffer:K,setBuffer:Q,getBufferLevel:W,getCriticalBufferLevel:X,setMediaSource:$,getMediaSource:Z,getIsBufferingCompleted:J,switchInitData:a,reset:ee},function(){he=c.default.QUALITY_DEFAULT,pe=!1,ge=0,me=Number.POSITIVE_INFINITY,ve=0,ye=Number.POSITIVE_INFINITY,Ee=null,be=P,Ie=0,Ae=!1,Me=!1,Re=!1,Ce=!1}(),ce}Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),o=r(a),s=n(4),u=r(s),l=n(24),d=r(l),f=n(12),c=r(f),h=n(14),p=r(h),g=n(17),m=r(g),_=n(1),v=r(_),y=n(2),T=r(y),E=n(39),b=r(E),S=n(0),I=r(S),A=n(3),M=r(A),R=n(41),C=r(R),w="bufferLoaded",P="bufferStalled",D=.5;i.__dashjs_factory_name="BufferController";var O=I.default.getClassFactory(i);O.BUFFER_LOADED=w,O.BUFFER_EMPTY=P,t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){de=0,fe=NaN,ce=null,ge=null,_e=!1,he={},me=(0,d.default)($).getInstance()}function t(e){pe=e,te=le.getElement(),W(),ge=pe.manifestInfo.isDynamic,fe=pe.start,J.on(p.default.DATA_UPDATE_COMPLETED,F,this),J.on(p.default.BYTES_APPENDED,K,this),J.on(p.default.BUFFER_LEVEL_STATE_CHANGED,Q,this),J.on(p.default.PERIOD_SWITCH_STARTED,n,this),_e&&(_e=!1,s())}function n(e){!ge&&e.fromStreamInfo&&he[e.fromStreamInfo.id]&&delete he[e.fromStreamInfo.id]}function r(){var e=R(!0),t=ge?e-pe.start:0;return e+(pe.duration-t)-m()}function i(){return m()>0}function a(){return pe.id}function s(){if(te){te.autoplay=!0;var e=te.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&J.trigger(p.default.PLAYBACK_NOT_ALLOWED),Z("Caught pending play exception - continuing ("+e+")")})}else _e=!0}function l(){if(te)return te.paused}function f(){te&&(te.pause(),te.autoplay=!1)}function h(){if(te)return te.seeking}function g(e){le&&(Z("Requesting seek to time: "+e),le.setCurrentTime(e))}function m(){if(te)return te.currentTime}function _(){if(te)return te.playbackRate}function y(){if(te)return te.played}function T(){if(te)return te.ended}function E(){return ge}function b(e){fe=e}function S(){return fe}function I(e,t){var n=se.getMpd(oe.getValue()),r=void 0;r=me.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:me.getLiveDelay()?me.getLiveDelay():isNaN(e)?2*pe.manifestInfo.minBufferTime:e*me.getLiveDelayFragmentCount();var i=Math.max(t-10,t/2);return Math.min(r,i)}function A(){le&&te&&(J.off(p.default.DATA_UPDATE_COMPLETED,F,this),J.off(p.default.BUFFER_LEVEL_STATE_CHANGED,Q,this),J.off(p.default.BYTES_APPENDED,K,this),P(),X()),le=null,pe=null,te=null,ge=null,e()}function M(e){e&&(e.streamController&&(ne=e.streamController),e.timelineConverter&&(re=e.timelineConverter),e.metricsModel&&(ie=e.metricsModel),e.dashMetrics&&(ae=e.dashMetrics),e.manifestModel&&(oe=e.manifestModel),e.dashManifestModel&&(se=e.dashManifestModel),e.adapter&&(ue=e.adapter),e.videoModel&&(le=e.videoModel))}function R(e){var t=void 0,n=(0,u.default)($).getInstance().getURIFragmentData(),r=parseInt(n.s,10),i=parseInt(n.t,10),a=NaN;if(e||(a=isNaN(r)?i:r),ge)!isNaN(a)&&a>1262304e3&&((t=a-pe.manifestInfo.availableFrom.getTime()/1e3)>fe||t<fe-pe.manifestInfo.DVRWindowSize)&&(t=null),t=t||fe;else if(!isNaN(a)&&a<Math.max(pe.manifestInfo.duration,pe.duration)&&a>=0)t=a;else{var o=he[pe.id];void 0===o&&(o=ne.getActiveStreamCommonEarliestTime()),t=Math.max(o,pe.start)}return t}function C(e){var t,n=ie.getReadOnlyMetricsFor("video")||ie.getReadOnlyMetricsFor("audio"),r=ae.getCurrentDVRInfo(n),i=r?r.range:null;if(!i)return NaN;if(e>i.end)t=Math.max(i.end-2*pe.manifestInfo.minBufferTime,i.start);else{if(!(e<i.start))return e;t=i.start}return t}function w(){if(null===ce){var e=function(){Y()};ce=setInterval(e,me.getWallclockTimeUpdateInterval())}}function P(){clearInterval(ce),ce=null}function D(){var e=R(!1);e>0&&(g(e),Z("Starting playback at offset: "+e))}function O(){if(!l()&&ge&&0!==te.readyState){var e=m(),t=C(e);!isNaN(t)&&t!==e&&g(t)}}function F(e){if(!e.error){var t=ue.convertDataToTrack(oe.getValue(),e.currentRepresentation),n=t.mediaInfo.streamInfo;pe.id===n.id&&(pe=n,O())}}function x(){J.trigger(p.default.CAN_PLAY)}function N(){Z("Native video element event: play"),O(),w(),J.trigger(p.default.PLAYBACK_STARTED,{startTime:m()})}function L(){Z("Native video element event: playing"),J.trigger(p.default.PLAYBACK_PLAYING,{playingTime:m()})}function B(){Z("Native video element event: pause"),J.trigger(p.default.PLAYBACK_PAUSED,{ended:T()})}function U(){var e=m();Z("Seeking to: "+e),w(),J.trigger(p.default.PLAYBACK_SEEKING,{seekTime:e})}function k(){Z("Native video element event: seeked"),J.trigger(p.default.PLAYBACK_SEEKED)}function j(){var e=m();e!==de&&(de=e,J.trigger(p.default.PLAYBACK_TIME_UPDATED,{timeToEnd:r(),time:e}))}function H(){J.trigger(p.default.PLAYBACK_PROGRESS)}function z(){var e=_();Z("Native video element event: ratechange: ",e),J.trigger(p.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function q(){Z("Native video element event: loadedmetadata"),(!ge&&pe.isFirst||re.isTimeSyncCompleted())&&D(),J.trigger(p.default.PLAYBACK_METADATA_LOADED),w()}function V(){Z("Native video element event: ended"),f(),P(),J.trigger(p.default.PLAYBACK_ENDED)}function G(e){var t=e.target||e.srcElement;J.trigger(p.default.PLAYBACK_ERROR,{error:t.error})}function Y(){J.trigger(p.default.WALLCLOCK_TIME_UPDATED,{isDynamic:ge,time:new Date})}function K(e){var t=e.bufferedRanges;if(t&&t.length){var n=Math.max(t.start(0),pe.start),r=void 0===he[pe.id]?n:Math.max(he[pe.id],n);r!==he[pe.id]&&(!ge&&R(!0)<r&&m()<r&&g(r),he[pe.id]=r)}}function Q(e){e.streamInfo.id===pe.id&&le.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY)}function W(){te.addEventListener("canplay",x),te.addEventListener("play",N),te.addEventListener("playing",L),te.addEventListener("pause",B),te.addEventListener("error",G),te.addEventListener("seeking",U),te.addEventListener("seeked",k),te.addEventListener("timeupdate",j),te.addEventListener("progress",H),te.addEventListener("ratechange",z),te.addEventListener("loadedmetadata",q),te.addEventListener("ended",V)}function X(){te.removeEventListener("canplay",x),te.removeEventListener("play",N),te.removeEventListener("playing",L),te.removeEventListener("pause",B),te.removeEventListener("error",G),te.removeEventListener("seeking",U),te.removeEventListener("seeked",k),te.removeEventListener("timeupdate",j),te.removeEventListener("progress",H),te.removeEventListener("ratechange",z),te.removeEventListener("loadedmetadata",q),te.removeEventListener("ended",V)}var $=this.context,Z=(0,v.default)($).getInstance().log,J=(0,c.default)($).getInstance(),ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,pe=void 0,ge=void 0,me=void 0,_e=void 0;return ee={initialize:t,setConfig:M,getStreamStartTime:R,getTimeToStreamEnd:r,isPlaybackStarted:i,getStreamId:a,getTime:m,getPlaybackRate:_,getPlayedRanges:y,getEnded:T,getIsDynamic:E,setLiveStartTime:b,getLiveStartTime:S,computeLiveDelay:I,play:s,isPaused:l,pause:f,isSeeking:h,seek:g,reset:A},e(),ee}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=r(a),s=n(37),u=r(s),l=n(4),d=r(l),f=n(1),c=r(f),h=n(2),p=r(h),g=n(0),m=r(g),_=n(3),v=r(_);i.__dashjs_factory_name="PlaybackController",t.default=m.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.STREAM_INITIALIZED="streamInitialized",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.CAN_PLAY="canPlay",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e}return a(t,e),t}(s.default),l=new u;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){U={},P(),w()}function t(e,t){var n=d(e),i=r(e,t),a=[];if("fragmentedText"===e)return void s(i[0]);n||(n=B.getSavedMediaSettings(e),l(e,n)),i&&0!==i.length&&(n&&i.forEach(function(e){C(n,e)&&a.push(e)}),s(0===a.length?D(i):a.length>1?D(a):a[0]))}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,r=d(t);return!(!e||!S(t))&&(U[n]=U[n]||O(),!(U[n][t].list.indexOf(e)>=0)&&(U[n][t].list.push(e),r&&C(r,e)&&!i(t,e.streamInfo)&&s(e),!0))}function r(e,t){if(!e||!t)return[];var n=t.id;return U[n]&&U[n][e]?U[n][e].list:[]}function i(e,t){return!e||!t||t&&!U[t.id]?null:U[t.id][e].current}function a(e){var t=e.type,n=e.streamInfo.id;return U[n]&&U[n][t]&&I(U[n][t].current,e)}function s(e){if(e){var t=e.type,n=e.streamInfo,r=n.id,a=i(t,n);if(U[r]&&U[r][t]&&(!a||!I(e,a))){U[r][t].current=e,a&&N.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:H[t]});var s=R(e);s&&U[r][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),B.setSavedMediaSettings(t,s))}}}function l(e,t){e&&t&&(k[e]=t)}function d(e){return e?k[e]:null}function f(e,t){if(-1===q.indexOf(t))return void x("track switch mode is not supported: "+t);H[e]=t}function h(e){return H[e]}function g(e){if(-1===V.indexOf(e))return void x("track selection mode is not supported: "+e);j=e}function b(){return j||E}function S(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function I(e,t){var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function A(e){e&&e.errHandler&&(z=e.errHandler)}function M(){e(),L.reset()}function R(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}function C(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function w(){H={audio:v,video:_}}function P(){k={audio:null,video:null}}function D(e){var t=b(),n=[],r=function(e){var t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>n?(n=t,r=[e]):t===n&&r.push(e)}),r},i=function(e){var t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,r=[e]):t===n&&r.push(e)}),r};switch(t){case y:n=r(e),n.length>1&&(n=i(n));break;case T:n=i(e),n.length>1&&(n=r(e));break;default:x("track selection mode is not supported: "+t)}return n[0]}function O(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var F=this.context,x=(0,c.default)(F).getInstance().log,N=(0,u.default)(F).getInstance(),L=(0,p.default)(F).getInstance(),B=(0,m.default)(F).getInstance(),U=void 0,k=void 0,j=void 0,H=void 0,z=void 0,q=[v,_],V=[y,T];return{initialize:e,checkInitialMediaSettingsForType:t,addTrack:n,getTracksFor:r,getCurrentTrackFor:i,isCurrentTrack:a,setTrack:s,setInitialSettings:l,getInitialSettings:d,setSwitchMode:f,getSwitchMode:h,setSelectionModeForInitialTrack:g,getSelectionModeForInitialTrack:b,isMultiTrackSupportedByType:S,isTracksEqual:I,setConfig:A,reset:M}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(1),u=r(s),l=n(0),d=r(l),f=n(3),c=r(f),h=n(18),p=r(h),g=n(40),m=r(g),_="neverReplace",v="alwaysReplace",y="highestBitrate",T="widestRange",E=y;i.__dashjs_factory_name="MediaController";var b=d.default.getSingletonFactory(i);b.TRACK_SWITCH_MODE_NEVER_REPLACE=_,b.TRACK_SWITCH_MODE_ALWAYS_REPLACE=v,b.TRACK_SELECTION_MODE_HIGHEST_BITRATE=y,b.TRACK_SELECTION_MODE_WIDEST_RANGE=T,b.DEFAULT_INIT_TRACK_SELECTION_MODE=E,t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&(e.errHandler&&(g=e.errHandler),e.dashManifestModel&&(m=e.dashManifestModel),e.mediaController&&(_=e.mediaController),e.videoModel&&(v=e.videoModel),e.streamController&&(y=e.streamController),e.textTracks&&(T=e.textTracks),e.vttParser&&(E=e.vttParser),e.ttmlParser&&(b=e.ttmlParser),f.setConfig({errHandler:g,dashManifestModel:m,mediaController:_,videoModel:v,streamController:y,textTracks:T,vttParser:E,ttmlParser:b}))}function t(){return f}function n(){return h}function r(e){f.addEmbeddedTrack(e)}function i(){for(var e=f.getConfig(),t=e.fragmentModel,n=e.embeddedTracks,r=e.isFragmented,i=e.fragmentedTracks,a=e.allTracksAreDisabled,o=v.getElement(),s=o.textTracks,u=s.length,l=u-n.length,d=T.getCurrentTrackIdx(),c=0;c<u;c++){var h=s[c];if(a="showing"!==h.mode,"showing"===h.mode){if(d!==c&&(T.setCurrentTrackIdx(c),T.addCaptions(c,0,null),r&&c<l)){var p=_.getCurrentTrackFor("fragmentedText",y.getActiveStreamInfo()),g=i[c];g!==p&&(t.abortRequests(),T.deleteTrackCues(p),_.setTrack(g),f.setCurrentFragmentedTrackIdx(c))}break}}a&&T.setCurrentTrackIdx(-1)}function a(){return f.getConfig().textTracks.getCurrentTrackIdx()}function o(){h=!1,f.resetEmbedded()}var s=this.context,l=void 0,f=void 0,h=void 0,g=void 0,m=void 0,_=void 0,v=void 0,y=void 0,T=void 0,E=void 0,b=void 0;return l={setConfig:e,getTextSourceBuffer:t,getAllTracksAreDisabled:n,addEmbeddedTrack:r,setTextTrack:i,getCurrentTrackIdx:a,reset:o},function(){T=(0,d.default)(s).getInstance(),E=(0,c.default)(s).getInstance(),b=(0,p.default)(s).getInstance(),f=(0,u.default)(s).getInstance(),T.initialize(),h=!1}(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(138),u=r(s),l=n(38),d=r(l),f=n(145),c=r(f),h=n(144),p=r(h);i.__dashjs_factory_name="TextController",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){function t(e,n){var r=e.request,i=new XMLHttpRequest,a=[],o=!0,d=!0,c=new Date,h=c,v=0,y=function(e){d=!1,r.requestStartDate=c,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||c,r.checkExistenceOnly||l.addHttpRequest(r.mediaType,null,r.type,r.url,i.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,i.status,r.duration,i.getAllResponseHeaders(),e?a:null)},T=function(){-1!==p.indexOf(i)&&(p.splice(p.indexOf(i),1),d&&(y(!1),n>0?(n--,m.push(setTimeout(function(){t(e,n)},s.getRetryIntervalForType(r.type)))):(u.downloadError(_[r.type],r.url,r),e.error&&e.error(r,"error",i.statusText),e.complete&&e.complete(r,i.statusText))))},E=function(t){var n=new Date;o&&(o=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(r.firstByteDate=n)),t.lengthComputable&&(r.bytesLoaded=t.loaded,r.bytesTotal=t.total),a.push({s:h,d:n.getTime()-h.getTime(),b:[t.loaded?t.loaded-v:0]}),h=n,v=t.loaded,e.progress&&e.progress()},b=function(){i.status>=200&&i.status<=299&&(y(!0),e.success&&e.success(i.response,i.statusText,i),e.complete&&e.complete(r,i.statusText))};try{var S=f.modifyRequestURL(r.url),I=r.checkExistenceOnly?"HEAD":"GET";i.open(I,S,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=c),i=f.modifyRequestHeader(i),i.withCredentials=s.getXHRWithCredentialsForType(r.type),i.onload=b,i.onloadend=T,i.onerror=T,i.onprogress=E;var A=(new Date).getTime();if(isNaN(r.delayLoadingTime)||A>=r.delayLoadingTime)p.push(i),i.send();else{var M={xhr:i};g.push(M),M.delayTimeout=setTimeout(function(){if(-1!==g.indexOf(M)){g.splice(g.indexOf(M),1);try{p.push(M.xhr),M.xhr.send()}catch(e){M.xhr.onerror()}}},r.delayLoadingTime-A)}}catch(e){i.onerror()}}function n(e){e.request&&t(e,s.getRetryAttemptsForType(e.request.type))}function r(){m.forEach(function(e){return clearTimeout(e)}),m=[],g.forEach(function(e){return clearTimeout(e.delayTimeout)}),g=[],p.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),p=[]}var a=this.context,s=(0,d.default)(a).getInstance(),u=e.errHandler,l=e.metricsModel,f=e.requestModifier,h=void 0,p=void 0,g=void 0,m=void 0,_=void 0;return h={load:n,abort:r},function(){var e;p=[],g=[],m=[],e={},i(e,o.HTTPRequest.MPD_TYPE,c.default.DOWNLOAD_ERROR_ID_MANIFEST),i(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,c.default.DOWNLOAD_ERROR_ID_XLINK),i(e,o.HTTPRequest.INIT_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.OTHER_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),_=e}(),h}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=n(0),u=r(s),l=n(4),d=r(l),f=n(9),c=r(f);a.__dashjs_factory_name="XHRLoader";var h=u.default.getClassFactory(a);t.default=h},function(e,t,n){"use strict";function r(){function e(){E=[]}function t(){v.playbackRate=b||1,v.removeEventListener("canplay",t)}function n(e){v&&(v.readyState<=2&&e>0?v.addEventListener("canplay",t):v.playbackRate=e)}function r(e){if(v.currentTime!=e)try{v.currentTime=e}catch(t){0===v.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){v.currentTime=e},400)}}function i(){return v}function a(e){v=e,v.preload="auto"}function o(e){e?v.src=e:(v.removeAttribute("src"),v.load())}function s(){return v.src}function u(){return T}function l(e){T=e}function d(){return y}function f(e){y=e,y.style.position="absolute",y.style.display="flex",y.style.overflow="hidden",y.style.pointerEvents="none",y.style.top=0,y.style.left=0}function c(e,t){m(e,t)}function h(){return E.length>0}function p(e){var t=void 0;null===e||v.seeking||-1!==E.indexOf(e)||(E.push(e),1===E.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),b=v.playbackRate,n(0),v.dispatchEvent(t)))}function g(e){var t=E.indexOf(e),r=void 0;null!==e&&(-1!==t&&E.splice(t,1),!1===h()&&0===v.playbackRate&&(n(b||1),v.paused||(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),v.dispatchEvent(r))))}function m(e,t){t?p(e):g(e)}function _(){var e="webkitDroppedFrameCount"in v&&"webkitDecodedFrameCount"in v,t="getVideoPlaybackQuality"in v,n=null;return t?n=v.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:v.webkitDroppedFrameCount,totalVideoFrames:v.webkitDroppedFrameCount+v.webkitDecodedFrameCount,creationTime:new Date}),n}var v=void 0,y=void 0,T=void 0,E=void 0,b=void 0;return{initialize:e,setCurrentTime:r,setStallState:c,getElement:i,setElement:a,setSource:o,getSource:s,getVideoContainer:u,setVideoContainer:l,getTTMLRenderingDiv:d,setTTMLRenderingDiv:f,getPlaybackQuality:_}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="VideoModel",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(){function e(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function t(e){var t=e.match(f);return t?t[1]:""}function n(e){var t=e.match(l);return t?t[0]:""}function r(e){return!l.test(e)}function i(e){return r(e)&&"/"===e.charAt(0)}function a(e){return 0===e.indexOf("//")}function o(e){return d.test(e)}function s(e,t){return u(e,t)}var u=void 0,l=/^[a-z][a-z0-9+\-.]*:/i,d=/^https?:\/\//i,f=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,c=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},h=function(o,s){var u=e;if(!s)return o;if(!r(o))return o;i(o)&&(u=t),a(o)&&(u=n);var l=u(s);return[l,o].join("/"!==l.charAt(l.length-1)&&"/"!==o.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),u=c}catch(e){}finally{u=u||h}}(),{parseBaseUrl:e,parseOrigin:t,parseScheme:n,isRelative:r,isPathAbsolute:i,isSchemeRelative:a,isHTTPURL:o,resolve:s}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="URLUtils",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this._test=t,this._converter=n}return i(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){for(;e.length<t;)e="0"+e;return e}function i(e,t){return e.representation.startNumber+t}function a(e,t,n){var i,a,o,s,u,l,d=t.length,f="%0".length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",i+d))<0)return e;if((o=e.indexOf("%0",i+d))>i&&o<a)switch(s=e.charAt(a-1),u=parseInt(e.substring(o+f,a-1),10),s){case"d":case"i":case"u":l=r(n.toString(),u);break;case"x":l=r(n.toString(16),u);break;case"X":l=r(n.toString(16),u).toUpperCase();break;case"o":l=r(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,i)+l+e.substring(a+1)}}function o(e,t,n,r){var a,o,s,u;return o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration),s=n.adaptation.period.start+r*o,u=s+o,a=new c.default,a.representation=n,a.duration=o,a.presentationStartTime=s,a.mediaStartTime=e.calcMediaTimeFromPresentationTime(a.presentationStartTime,n),a.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(a.presentationStartTime,n.adaptation.period.mpd,t),a.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(u,n.adaptation.period.mpd,t),a.wallStartTime=e.calcWallTimeForSegment(a,t),a.replacementNumber=i(a,r),a.availabilityIdx=r,a}function s(e,t,n,r,o,s,u,l,d){var f,h,p,g=r/s,m=Math.min(o/s,n.adaptation.period.mpd.maxSegmentDuration);return f=e.calcPresentationTimeFromMediaTime(g,n),h=f+m,p=new c.default,p.representation=n,p.duration=m,p.mediaStartTime=g,p.presentationStartTime=f,p.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,p.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(h,n.adaptation.period.mpd,t),p.wallStartTime=e.calcWallTimeForSegment(p,t),p.replacementTime=r,p.replacementNumber=i(p,d),u=a(u,"Number",p.replacementNumber),u=a(u,"Time",p.replacementTime),p.media=u,p.mediaRange=l,p.availabilityIdx=d,p}function u(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;if(e<i&&(n=t.segments[e])&&n.availabilityIdx===e)return n;for(r=0;r<i;r++)if((n=t.segments[r])&&n.availabilityIdx===e)return n;return null}function l(e,t,n,r,i){var a,o,s=i||10,u=Number.POSITIVE_INFINITY;return t&&!e.isTimeSyncCompleted()?{start:0,end:u}:!t&&n||r<0?null:(a=Math.max(r-2,0),o=Math.min(r+s,u),{start:a,end:o})}function d(e,t,n,r,i,a){var o,s,l=n.segmentDuration,d=n.adaptation.period.mpd.manifest.minBufferTime,f=n.segmentAvailabilityRange,c={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.end)},h=n.segments,p=2*l,g=a||Math.max(2*d,10*l),m=NaN,_=null;return c.start=Math.max(c.start,0),t&&!e.isTimeSyncCompleted()?(o=Math.floor(c.start/l),s=Math.floor(c.end/l),{start:o,end:s}):(h&&h.length>0?(_=u(i,n),m=_?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,_.presentationStartTime):i>0?i*l:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):m=i>0?i*l:t?c.end:c.start,o=Math.floor(Math.max(m-p,c.start)/l),s=Math.floor(Math.min(o+g/l,c.end/l)),{start:o,end:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTokenForTemplate=a,t.getIndexBasedSegment=o,t.getTimeBasedSegment=s,t.getSegmentByIndex=u,t.decideSegmentListRangeForTimeline=l,t.decideSegmentListRangeForTemplate=d;var f=n(35),c=function(e){return e&&e.__esModule?e:{default:e}}(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n=t.codec,r=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new u.default("not really supported");r=e.addSourceBuffer(n)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;var i=(0,o.default)(m).getInstance();r=i.getTextSourceBuffer()}return r}function t(e,t){try{e.removeSourceBuffer(t)}catch(e){}}function n(e,t,n){var r,i,a=null,o=0,s=0,u=null,l=null,d=0,f=n||.15;try{a=e.buffered}catch(e){return null}if(null!==a&&void 0!==a){for(i=0,r=a.length;i<r;i++)if(o=a.start(i),s=a.end(i),null===u)d=Math.abs(o-t),t>=o&&t<s?(u=o,l=s):d<=f&&(u=o,l=s);else{if(!((d=o-l)<=f))break;l=s}if(null!==u)return{start:u,end:l}}return null}function r(e){try{return e.buffered}catch(e){return null}}function i(e){var t,n,i=r(e),a=0;if(!i)return a;for(n=0,t=i.length;n<t;n++)a+=i.end(n)-i.start(n);return a}function a(e,t,r){var i;return i=n(e,t,r),null===i?0:i.end-t}function s(e,t){if(!t)return null;var n,i,a,o,s,u,l,d,f,c=r(t);if(!c)return null;for(var h=0,p=c.length;h<p;h++){if(d=e.length>h,s=d?{start:e.start(h),end:e.end(h)}:null,n=c.start(h),i=c.end(h),!s)return f={start:n,end:i};if(a=s.start===n,o=s.end===i,!a||!o){if(a)f={start:s.end,end:i};else{if(!o)return f={start:n,end:i};f={start:n,end:s.start}}return u=e.length>h+1?{start:e.start(h+1),end:e.end(h+1)}:null,l=h+1<p?{start:c.start(h+1),end:c.end(h+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(f.end=u.start),f}}return null}function l(e,t){var n=t.bytes,r="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);r&&g(e,function(){try{i?e[r](n,t):e[r](n),g(e,function(){_.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})}catch(t){_.trigger(c.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new u.default(t.code,t.message,null)})}})}function f(e,t,n,r){g(e,function(){try{t>=0&&n>t&&"ended"!==r.readyState&&e.remove(t,n),g(e,function(){_.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})}catch(r){_.trigger(c.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new u.default(r.code,r.message,null)})}})}function h(e,t){try{"open"===e.readyState?t.abort():t.setTextTrack&&"ended"===e.readyState&&t.abort()}catch(e){}}function p(e){e&&e.dashManifestModel&&(v=e.dashManifestModel)}function g(e,t){var n,r=function(){e.updating||(clearInterval(n),t())},i=function n(){e.updating||(e.removeEventListener("updateend",n,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",i,!1)}catch(e){n=setInterval(r,50)}else n=setInterval(r,50)}var m=this.context,_=(0,d.default)(m).getInstance(),v=void 0;return{append:l,remove:f,abort:h,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:n,getAllRanges:r,getTotalBufferedTime:i,getBufferLength:a,getRangeDifference:s,setConfig:p}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=r(a),s=n(7),u=r(s),l=n(1),d=r(l),f=n(2),c=r(f),h=n(0),p=r(h);i.__dashjs_factory_name="SourceBufferController";var g=p.default.getSingletonFactory(i);g.QUOTA_EXCEEDED_ERROR_CODE=22,t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e}return a(t,e),t}(s.default),l=new u;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){w=e}function n(e){var t=function(e,t){return e.action===c.default.ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality};return function(i){var a=!1;return i.some(function(i){if(n(e,i)||r(e,i)||t(e,i))return a=!0}),a}(R)}function r(e){var t=e.state instanceof Array?e.state:[e.state],n=[];return t.forEach(function(t){var r=h(t);n=n.concat(f(r,e))}),n}function i(e){R=R.filter(function(t){return isNaN(t.startTime)||t.startTime>=e})}function a(){w.abort(),C=[]}function s(e){switch(e.action){case c.default.ACTION_COMPLETE:R.push(e),v(e,m),S.trigger(u.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case c.default.ACTION_DOWNLOAD:v(e,g),C.push(e),l(e);break;default:b("Unknown request action.")}}function l(e){S.trigger(u.default.FRAGMENT_LOADING_STARTED,{sender:A,request:e}),w.load(e)}function d(e,t,n){for(var r=e.length-1,i=r;i>=0;i--){var a=e[i],o=a.startTime,s=o+a.duration;if(n=void 0!==n?n:a.duration/2,!isNaN(o)&&!isNaN(s)&&t+n>=o&&t-n<s||isNaN(o)&&isNaN(t))return a}return null}function f(e,t){return t.hasOwnProperty("time")?[d(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}function h(e){var t=void 0;switch(e){case g:t=C;break;case m:t=R;break;default:t=[]}return t}function v(e,t){I.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),I.addRequestsQueue(e.mediaType,C,R)}function y(e){e.sender===w&&(C.splice(C.indexOf(e.request),1),e.response&&!e.error&&R.push(e.request),v(e.request,e.error?_:m),S.trigger(u.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function T(){S.off(u.default.LOADING_COMPLETED,y,this),w&&(w.reset(),w=null),R=[],C=[]}var E=this.context,b=(0,p.default)(E).getInstance().log,S=(0,o.default)(E).getInstance(),I=e.metricsModel,A=void 0,M=void 0,R=void 0,C=void 0,w=void 0;return A={setLoader:t,getRequests:r,isFragmentLoaded:n,removeExecutedRequestsBeforeTime:i,abortRequests:a,executeRequest:s,reset:T},function(){M=null,w=null,R=[],C=[],S.on(u.default.LOADING_COMPLETED,y,A)}(),A}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(15),c=r(f),h=n(3),p=r(h),g="loading",m="executed",_="failed";i.__dashjs_factory_name="FragmentModel";var v=d.default.getClassFactory(i);v.FRAGMENT_MODEL_LOADING=g,v.FRAGMENT_MODEL_EXECUTED=m,v.FRAGMENT_MODEL_CANCELED="canceled",v.FRAGMENT_MODEL_FAILED=_,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){return i}function t(e){i=e,e&&r.trigger(u.default.MANIFEST_LOADED,{data:e})}var n=this.context,r=(0,o.default)(n).getInstance(),i=void 0;return{getValue:e,setValue:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="ManifestModel",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){function e(e){return e}function t(e){return e}return{modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RequestModifier",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={};i.parseBuffer=function(e){return new a(e).parse()},i.addBoxProcessor=function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t)},i.createFile=function(){return new a},i.createBox=function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},i.createFullBox=function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},i.Utils={},i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n){if(void 0===n||null===n)return void e.boxes.push(t);var i,a=-1;if("number"==typeof n)a=n;else{if("string"==typeof n)i=n;else{if("object"!==(void 0===n?"undefined":r(n))||!n.type)return void e.boxes.push(t);i=n.type}for(var o=0;o<e.boxes.length;o++)if(i===e.boxes[o].type){a=o+1;break}}e.boxes.splice(a,0,t)}},t.parseBuffer=i.parseBuffer,t.addBoxProcessor=i.addBoxProcessor,t.createFile=i.createFile,t.createBox=i.createBox,t.createFullBox=i.createFullBox,t.Utils=i.Utils,i.Cursor=function(e){this.offset=void 0===e?0:e};var a=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var r in this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[r],e,t,n)}},a.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new i.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:t=this._raw.getUint16(i),n=this._raw.getUint8(i+2),r=(t<<8)+n;break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset),n=new DataView(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n},o.prototype._readUTF8String=function(){var e=this._readData();return i.Utils.dataViewToString(e)},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=Math.floor(t/Math.pow(2,32)),r=t-n*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},o.prototype._writeData=function(e){var t;if(e instanceof Array)if(Uint8Array.from)e=new DataView(Uint8Array.from(e).buffer);else{var n=new Uint8Array(e.length);for(t=0;t<e.length;t++)n[t]=e[t];e=new DataView(n.buffer)}if(e instanceof Uint8Array&&(e=new DataView(e.buffer)),this._rawo){var r=this._cursor.offset-this._rawo.byteOffset;for(t=0;t<e.byteLength;t++)this._rawo.setUint8(r+t,e.getUint8(t));this._cursor.offset+=e.byteLength}else this.size+=e.byteLength},o.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},o.prototype._boxProcessors.vtte=function(){}},function(e,t,n){"use strict";function r(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return e.prefix}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function a(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function o(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function s(t,n,r){if(e.datetimeAccessFormPaths.length>0){var a=r.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,a)?o(t):t}return t}function u(t,n,r,a){return!(n==b.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,t,r,a)}function l(r,i){if(r.nodeType==b.DOCUMENT_NODE){for(var o=new Object,d=r.childNodes,f=0;f<d.length;f++){var c=d[f];if(c.nodeType==b.ELEMENT_NODE)if(e.ignoreRoot)o=l(c);else{o={};var h=t(c);o[h]=l(c)}}return o}if(r.nodeType==b.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var p=[],d=r.childNodes,f=0;f<d.length;f++){var c=d[f],h=t(c);if(c.nodeType!=b.COMMENT_NODE){var g=i+"."+h;if(u(o,c.nodeType,h,g))if(o.__cnt++,null==o[h]){var m=l(c,g);if("#text"!=h||/[^\s]/.test(m)){var _={};_[h]=m,p.push(_)}o[h]=m,a(o,h,g)}else{null!=o[h]&&(o[h]instanceof Array||(o[h]=[o[h]],a(o,h,g)));var m=l(c,g);if("#text"!=h||/[^\s]/.test(m)){var _={};_[h]=m,p.push(_)}o[h][o[h].length]=m}}}o.__children=p;for(var v=t(r),y=0;y<r.attributes.length;y++){var T=r.attributes[y];o.__cnt++;for(var E=T.value,S=0,I=e.matchers.length;S<I;S++){var A=e.matchers[S];A.test(T,v)&&(E=A.converter(T.value))}o[e.attributePrefix+T.name]=E}var M=n(r);return null!=M&&""!=M&&(o.__cnt++,o.__prefix=M),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=s(o.__text,h,i+"."+h)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(r.nodeType==b.TEXT_NODE||r.nodeType==b.CDATA_SECTION_NODE)return r.nodeValue}function d(t,n,i,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var u=i[s],l=t[u];e.escapeMode&&(l=r(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+=a?"/>":">"}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function h(t,n){return!!("property"==e.arrayAccessForm&&c(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function p(e){var t=0;if(e instanceof Object)for(var n in e)h(e,n)||t++;return t}function g(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||i(e.jsonPropertiesFilter,t,n,r)}function m(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function _(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=r(t.__text):n+=t.__text),n}function v(t){var n="";return t instanceof Object?n+=_(t):null!=t&&(e.escapeMode?n+=r(t):n+=t),n}function y(e,t){return""===e?t:e+"."+t}function T(e,t,n,r){var i="";if(0==e.length)i+=d(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=d(e[a],t,m(e[a]),!1),i+=E(e[a],y(r,t)),i+=f(e[a],t);return i}function E(e,t){var n="";if(p(e)>0)for(var r in e)if(!h(e,r)&&(""==t||g(e,r,y(t,r)))){var i=e[r],a=m(i);if(null==i||void 0==i)n+=d(i,r,a,!0);else if(i instanceof Object)if(i instanceof Array)n+=T(i,r,a,t);else if(i instanceof Date)n+=d(i,r,a,!1),n+=i.toISOString(),n+=f(i,r);else{var o=p(i);o>0||null!=i.__text||null!=i.__cdata?(n+=d(i,r,a,!1),n+=E(i,y(t,r)),n+=f(i,r)):n+=d(i,r,a,!0)}else n+=d(i,r,a,!1),n+=v(i),n+=f(i,r)}return n+=v(e)}e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var b={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!t)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){i=null}try{n=r.parseFromString(e,"text/xml"),null!=i&&n.getElementsByTagNameNS(i,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return E(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.dashManifestModel&&(F=e.dashManifestModel)}function t(){x=[],N={}}function n(e,t){return t.getRepresentationForQuality(e.quality)}function r(e){return N&&e&&N[e.streamInfo.id]?N[e.streamInfo.id][e.index]:null}function i(e){for(var t=x.length,n=0;n<t;n++){var r=x[n];if(e.id===r.id)return r}return null}function a(e,t){var n=new o.default,r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],i=F.getRepresentationFor(t.index,r);return n.id=t.id,n.quality=t.index,n.bandwidth=F.getBandwidth(i),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=s(e,t.adaptation),n}function s(e,t){var n,r=new u.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=f(e,t.period),r.representationCount=F.getRepresentationCount(i),r.lang=F.getLanguageForAdaptation(i),n=F.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=F.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==v.default&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=F.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),r.roles=F.getRolesForAdaptation(i).map(function(e){return e.value}),r.codec=F.getCodec(i),r.mimeType=F.getMimeType(i),r.contentProtection=F.getContentProtectionData(i),r.bitrateList=F.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=F.getKID(e)}),r.isText=F.getIsTextTrack(r.mimeType),r}function l(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function f(e,t){var n=new d.default;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=h(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n.isFirst=1===e.Period_asArray.length||F.getRegularPeriods(e,F.getMpd(e))[0].id===t.id,n}function h(e,t){var n=new c.default;return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=F.getDuration(e),n.isDynamic=F.getIsDynamic(e),n}function g(e,t,n){var r=F.getAdaptationForType(e,t.index,n,t);if(!r)return null;var a=i(t),o=a.id,u=F.getIndexForAdaptation(r,e,t.index);return N[o]=N[o]||F.getAdaptationsForPeriod(e,a),s(e,N[o][u])}function m(e,t,n){var r,a,o,u,d,f,c=i(t),h=c.id,p=F.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),g=[];if(!p)return g;for(N[h]=N[h]||F.getAdaptationsForPeriod(e,c),u=0,f=p.length;u<f;u++){if(r=p[u],o=F.getIndexForAdaptation(r,e,t.index),a=s(e,N[h][o]),"embeddedText"===n){var m=a.accessibility.length;for(d=0;d<m;d++)if(a){var _=a.accessibility[d];if(0===_.indexOf("cea-608:")){var v=_.substring(8),y=v.split(";");if("CC"===y[0].substring(0,2))for(d=0;d<y.length;d++)a||(a=s.call(this,e,N[h][o])),l(a,y[d].substring(0,3),y[d].substring(4)),g.push(a),a=null;else for(d=0;d<y.length;d++)a||(a=s.call(this,e,N[h][o])),l(a,"CC"+(d+1),y[d]),g.push(a),a=null}else 0===_.indexOf("cea-608")&&(l(a,"CC1","eng"),g.push(a),a=null)}}a&&"embeddedText"!==n&&g.push(a)}return g}function _(e){if(!e)return null;var t=[],n=F.getMpd(e);x=F.getRegularPeriods(e,n),N={};for(var r=0,i=x.length;r<i;r++)t.push(f(e,x[r]));return t}function y(e){return h(e,F.getMpd(e))}function E(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)}function b(e,t){var r=n(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(r)}function S(e,t,r,i){var a=n(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(a,r,i)}function I(e,t,r){var i=n(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,r)}function A(e){return e.getIndexHandler().getCurrentTime()}function M(e,t){return e.getIndexHandler().setCurrentTime(t)}function R(e,t){var n,a,o=i(t.getStreamInfo()),s=t.getMediaInfo(),u=r(s),l=t.getType();n=s.id,a=n?F.getAdaptationForId(n,e,o.index):F.getAdaptationForIndex(s.index,e,o.index),t.getRepresentationController().updateData(a,u,l)}function C(e,t,n){var r=t.getRepresentationForQuality(n);return r?a(e,r):null}function w(e,t){var n=t.getCurrentRepresentation();return n?a(e,n):null}function P(e,t,n){var r=new p.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=n*o+s;return t[i]?(r.eventStream=t[i],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.presentationTime=f,r.messageData=d,r.presentationTimeDelta=s,r):null}function D(e,t,a){var s=[];return t instanceof d.default?s=F.getEventsForPeriod(e,i(t)):t instanceof u.default?s=F.getEventStreamForAdaptationSet(e,r(t)):t instanceof o.default&&(s=F.getEventStreamForRepresentation(e,n(t,a.getRepresentationController()))),s}function O(){x=[],N={}}var F=void 0,x=void 0,N=void 0;return{initialize:t,convertDataToTrack:a,convertDataToMedia:s,convertDataToStream:f,getDataForTrack:n,getDataForMedia:r,getDataForStream:i,getStreamsInfo:_,getManifestInfo:y,getMediaInfoForType:g,getAllMediaInfoForType:m,getCurrentRepresentationInfo:w,getRepresentationInfoForQuality:C,updateData:R,getInitRequest:E,getNextFragmentRequest:b,getFragmentRequestForTime:S,generateFragmentRequestForTime:I,getIndexHandlerTime:A,setIndexHandlerTime:M,getEventsFor:D,getEvent:P,setConfig:e,reset:O,metricsList:T}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(156),o=r(a),s=n(152),u=r(s),l=n(154),d=r(l),f=n(151),c=r(f),h=n(49),p=r(h),g=n(0),m=r(g),_=n(44),v=r(_),y=n(46),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y);i.__dashjs_factory_name="DashAdapter",t.default=m.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){I=0,A=!1,M=NaN,S.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,y,this)}function t(){return A}function n(e){A=e}function r(){return I}function i(e){I=e}function a(){return M}function s(e){M=e}function l(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-I)):t.availabilityStartTime}function d(e,t,n){return l.call(this,e,t,n)}function f(e,t,n){return l.call(this,e,t,n,!0)}function c(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*I)/1e3}function h(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function p(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset}function g(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function m(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!A&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=c(new Date,n),o=n.start+n.duration;return r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start),r.end=a>=o&&a-i<o?o-i:a-i,r}function _(e,t){return t-e.adaptation.period.start}function v(e,t){return t+e.adaptation.period.start}function y(e){A||void 0!==e.offset&&(i(e.offset/1e3),A=!0)}function T(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t}function E(){S.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,y,this),I=0,A=!1,M=NaN}var b=this.context,S=(0,o.default)(b).getInstance(),I=void 0,A=void 0,M=void 0;return{initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:r,setClientTimeOffset:i,getExpectedLiveEdge:a,setExpectedLiveEdge:s,calcAvailabilityStartTimeFromPresentationTime:d,calcAvailabilityEndTimeFromPresentationTime:f,calcPresentationTimeFromWallTime:c,calcPresentationTimeFromMediaTime:h,calcPeriodRelativeTimeFromMpdRelativeTime:_,calcMpdRelativeTimeFromPeriodRelativeTime:v,calcMediaTimeFromPresentationTime:p,calcSegmentAvailabilityRange:m,calcWallTimeForSegment:g,calcMSETimeOffset:T,reset:E}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="TimelineConverter",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.maxPlayoutRate=NaN}return i(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||("BaseURL"!==e.segmentInfoType||"SegmentBase"!==e.segmentInfoType)&&null!==e.range}},{key:"hasSegments",value:function(e){return"BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType&&!e.indexRange}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,s){he=e,ce=s,ue.initialize(),oe=(0,R.default)(V).getInstance(),W=(0,d.default)(V).getInstance(),W.setConfig({manifestModel:$,dashManifestModel:Z}),W.initialize(X),ye=(0,v.default)(V).getInstance(),Te=(0,o.default)(V).getInstance(),Te.setConfig({streamController:K,timelineConverter:ue,metricsModel:ee,dashMetrics:te,manifestModel:$,dashManifestModel:Z,adapter:J,videoModel:ye}),Y.on(p.default.TIME_SYNCHRONIZATION_COMPLETED,C,this),Y.on(p.default.PLAYBACK_SEEKING,n,this),Y.on(p.default.PLAYBACK_TIME_UPDATED,t,this),Y.on(p.default.PLAYBACK_ENDED,h,this),Y.on(p.default.PLAYBACK_ERROR,x,this),Y.on(p.default.PLAYBACK_STARTED,r,this),Y.on(p.default.PLAYBACK_PAUSED,i,this),Y.on(p.default.MANIFEST_UPDATED,w,this),Y.on(p.default.STREAM_BUFFERING_COMPLETED,a,this)}function t(e){if(P()){var t=ye.getPlaybackQuality();t&&ee.addDroppedFrames("video",t)}Te.isSeeking()||e.timeToEnd<=q&&h()}function n(e){var t=s(e.seekTime);t&&t!==de?(O(S.PlayListTrace.END_OF_PERIOD_STOP_REASON),_(de,t,e.seekTime)):O(S.PlayListTrace.USER_REQUEST_STOP_REASON),F(S.PlayList.SEEK_START_REASON)}function r(){Se?(Se=!1,F(S.PlayList.INITIAL_PLAYOUT_START_REASON)):be&&(be=!1,F(S.PlayList.RESUME_FROM_PAUSE_START_REASON))}function i(e){e.ended||(be=!0,O(S.PlayListTrace.USER_REQUEST_STOP_REASON))}function a(){var e=L().isLast;ve&&e&&re.signalEndOfStream(ve)}function s(e){var t=0,n=null,r=le.length;r>0&&(t+=le[0].getStartTime());for(var i=0;i<r;i++)if(n=le[i],t+=n.getDuration(),e<t)return n;return null}function l(e,t){for(var n=null,r=0,i=0,a=null,o=le.length,s=0;s<o;s++){if(n=le[s],i=n.getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null}function f(){var e=[];return de.getProcessors().forEach(function(t){e.push(t.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,e)}function h(){var e=g();e&&_(de,e,NaN),O(e?S.PlayListTrace.END_OF_PERIOD_STOP_REASON:S.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function g(){if(de){var e=de.getStreamInfo().start,t=de.getStreamInfo().duration;return le.filter(function(n){return n.getStreamInfo().start===e+t})[0]}}function _(e,t,n){!pe&&t&&e!==t&&(pe=!0,Y.trigger(p.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&e.deactivate(),de=t,Te.initialize(de.getStreamInfo()),y(n))}function y(e){function t(){G("MediaSource is open!"),window.URL.revokeObjectURL(n),ve.removeEventListener("sourceopen",t),ve.removeEventListener("webkitsourceopen",t),b(),E(e)}var n=void 0;ve?re.detachMediaSource(ye):ve=re.createMediaSource(),ve.addEventListener("sourceopen",t,!1),ve.addEventListener("webkitsourceopen",t,!1),n=re.attachMediaSource(ve,ye),G("MediaSource attached to element.  Waiting on open...")}function E(e){if(de.activate(ve),Se)Ae=D();else if(isNaN(e)){var t=Te.getStreamStartTime(!0);de.getProcessors().forEach(function(e){J.setIndexHandlerTime(e,t)}),Te.seek(t)}else Te.seek(e);de.startEventController(),!he&&Se||Te.play(),pe=!1,Y.trigger(p.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:de.getStreamInfo()})}function b(){var e=de.getStreamInfo().manifestInfo.duration,t=re.setDuration(ve,e);G("Duration successfully set to: "+t)}function I(e){for(var t=0,n=le.length;t<n;t++)if(le[t].getId()===e.id)return le[t];return null}function M(e){try{var t=J.getStreamsInfo(e);if(0===t.length)throw new Error("There are no streams");var n=te.getCurrentManifestUpdate(ee.getMetricsFor("stream"));ee.updateManifestUpdateInfo(n,{currentTime:Te.getTime(),buffered:ye.getElement().buffered,presentationStartTime:t[0].start,clientTimeOffset:ue.getClientTimeOffset()});for(var r=0,i=t.length;r<i;r++){var a=t[r],o=I(a);o?o.updateData(a):(o=(0,u.default)(V).create({manifestModel:$,manifestUpdater:W,adapter:J,timelineConverter:ue,capabilities:Q,errHandler:se,baseURLController:ae}),le.push(o),o.initialize(a,fe)),ee.addManifestUpdateStreamInfo(n,a.id,a.index,a.start,a.duration)}de||_(null,le[0],NaN),Y.trigger(p.default.STREAMS_COMPOSED)}catch(t){se.manifestError(t.message,"nostreamscomposed",e),_e=!0,z()}}function C(){var e=$.getValue();fe&&(Y.trigger(p.default.PROTECTION_CREATED,{controller:fe,manifest:e}),fe.setMediaElement(ye.getElement()),ce&&fe.setProtectionData(ce)),M(e)}function w(e){if(e.error)_e=!0,z();else{var t,n,r=e.manifest,i=J.getStreamsInfo(r)[0],a=J.getMediaInfoForType(r,i,"video")||J.getMediaInfoForType(r,i,"audio");a&&(t=J.getDataForMedia(a),(n=Z.getRepresentationsForAdaptation(r,t)[0].useCalculatedLiveEdgeTime)&&(G("SegmentTimeline detected using calculated Live Edge Time"),Ee.setUseManifestDateHeaderTimeSource(!1)));var o=Z.getUTCTimingSources(e.manifest),s=!Z.getIsDynamic(r)||n?o:o.concat(Ee.getUTCTimingSources()),u=(0,m.default)(V).getInstance().isManifestHTTPS();s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===T.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),G("Matching default timing source protocol to manifest protocol: ",e.value))}),ae.initialize(r),ie.setConfig({metricsModel:ee,dashMetrics:te}),ie.initialize(s,Ee.getUseManifestDateHeaderTimeSource())}}function P(){return void 0===Ae&&(Ae=D()),Ae}function D(){var e=!1;return de.getProcessors().forEach(function(t){"video"===t.getMediaInfo().type&&(e=!0)}),e}function O(e,t){t=t||new Date,Ie&&(de&&de.getProcessors().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),ee.addPlayList(Ie),Ie=null)}function F(e){Ie=new S.PlayList,Ie.start=new Date,Ie.mstart=1e3*Te.getTime(),Ie.starttype=e,de&&de.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Ie)})}function x(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}me=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),G("Video Element Error: "+t),e.error&&G(e.error),se.mediaSourceError(t),z()}}function N(){return he}function L(){return de?de.getStreamInfo():null}function B(e){return de.getId()===e.id}function U(e){return le.filter(function(t){return t.getId()===e})[0]}function k(e){X.load(e)}function j(e){W.setManifest(e)}function H(e){e&&(e.capabilities&&(Q=e.capabilities),e.manifestLoader&&(X=e.manifestLoader),e.manifestModel&&($=e.manifestModel),e.dashManifestModel&&(Z=e.dashManifestModel),e.protectionController&&(fe=e.protectionController),e.adapter&&(J=e.adapter),e.metricsModel&&(ee=e.metricsModel),e.dashMetrics&&(te=e.dashMetrics),e.liveEdgeFinder&&(ne=e.liveEdgeFinder),e.mediaSourceController&&(re=e.mediaSourceController),e.timeSyncController&&(ie=e.timeSyncController),e.baseURLController&&(ae=e.baseURLController),e.errHandler&&(se=e.errHandler),e.timelineConverter&&(ue=e.timelineConverter))}function z(){ie.reset(),O(me||_e?S.PlayListTrace.FAILURE_STOP_REASON:S.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,o=le.length;e<o;e++){le[e].reset(me)}le=[],Y.off(p.default.PLAYBACK_TIME_UPDATED,t,this),Y.off(p.default.PLAYBACK_SEEKING,n,this),Y.off(p.default.PLAYBACK_ERROR,x,this),Y.off(p.default.PLAYBACK_STARTED,r,this),Y.off(p.default.PLAYBACK_PAUSED,i,this),Y.off(p.default.PLAYBACK_ENDED,h,this),Y.off(p.default.MANIFEST_UPDATED,w,this),Y.off(p.default.STREAM_BUFFERING_COMPLETED,a,this),ae.reset(),W.reset(),ee.clearAllCurrentMetrics(),$.setValue(null),X.reset(),ue.reset(),ne.reset(),J.reset(),oe.reset(),pe=!1,ge=!1,de=null,me=!1,_e=!1,Ae=void 0,Se=!0,be=!1,ve&&(re.detachMediaSource(ye),ve=null),ye=null,fe&&(fe.setMediaElement(null),fe=null,ce=null,$.getValue()&&Y.trigger(p.default.PROTECTION_DESTROYED,{data:$.getValue().url})),Y.trigger(p.default.STREAM_TEARDOWN_COMPLETE)}var q=.1,V=this.context,G=(0,A.default)(V).getInstance().log,Y=(0,c.default)(V).getInstance(),K=void 0,Q=void 0,W=void 0,X=void 0,$=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,pe=void 0,ge=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Ae=void 0;return K={initialize:e,getAutoPlay:N,getActiveStreamInfo:L,isStreamActive:B,isVideoTrackPresent:P,getStreamById:U,getTimeRelativeToStreamId:l,load:k,loadWithManifest:j,getActiveStreamCommonEarliestTime:f,setConfig:H,reset:z},function(){fe=null,le=[],Ee=(0,T.default)(V).getInstance(),he=!0,pe=!1,ge=!1,be=!1,Se=!0,Ie=null,me=!1,_e=!1}(),K}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=r(a),s=n(92),u=r(s),l=n(90),d=r(l),f=n(1),c=r(f),h=n(2),p=r(h),g=n(37),m=r(g),_=n(20),v=r(_),y=n(4),T=r(y),E=n(0),b=r(E),S=n(59),I=n(3),A=r(I),M=n(41),R=r(M);i.__dashjs_factory_name="StreamController",t.default=b.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){a=new o.default,s=[],u=!1}function t(){return a}function n(){return s}function r(){return u}function i(e){function t(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function n(e,t,n){return t>0&&(d&&0===s.length?s=n[t].split(/[&]/):f&&(r=n[t].split(/[&]/))),n}if(!e)return null;var r=[],i=new RegExp(/[?]/),o=new RegExp(/[#]/),l=new RegExp(/^(https:)?\/\//i),d=i.test(e),f=o.test(e);return u=l.test(e),e.split(/[?#]/).map(n),s.length>0&&(s=s.reduce(t,null)),r.length>0&&(r=r.reduce(t,null),r.forEach(function(e){a[e.key]=e.value})),e}var a=void 0,s=void 0,u=void 0;return{initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(157),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="URIQueryAndFragmentModel",t.default=u.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(C=window.VTTCue||window.TextTrackCue,D=[],O=[],F=-1,x=0,N=0,L=0,B=0,U=null,k=null,z=!1,q=2147483647,j=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?H="fullscreenElement":void 0!==document.webkitIsFullScreen?H="webkitIsFullScreen":document.msFullscreenElement?H="msFullscreenElement":document.mozFullScreen&&(H="mozFullScreen"))}function t(e){var t=D[e].kind,n=void 0!==D[e].label?D[e].label:D[e].lang,r=D[e].lang,i=j?document.createElement("track"):P.addTextTrack(t,n,r);return j&&(i.kind=t,i.label=n,i.srclang=r),i}function n(e){z=e,U&&!document[H]&&(U.style.zIndex=e?q:null)}function r(e,n){if(D.length===n)return void R("Trying to add too many tracks.");if(D.push(e),void 0===P&&(P=e.video),D.length===n){D.sort(function(e,t){return e.index-t.index}),U=w.getTTMLRenderingDiv();for(var r=-1,i=0;i<D.length;i++){var a=t.call(this,i);O.push(a),D[i].defaultTrack&&(a.default=!0,r=i),j&&P.appendChild(a);var o=P.textTracks[i];o.nonAddedCues=[],U&&(D[i].isTTML||D[i].isEmbedded)?o.renderingType="html":o.renderingType="default",this.addCaptions(i,0,D[i].captionData),M.trigger(u.default.TEXT_TRACK_ADDED)}if(m.call(this,r),r>=0){for(var s=0;s<P.textTracks.length;s++)P.textTracks[s].mode=s===r?"showing":"hidden";this.addCaptions(r,0,null)}M.trigger(u.default.TEXT_TRACKS_ADDED,{index:F,tracks:D})}}function i(e,t,n,r,i,a){var o=e/t,s=n/r,u=0,l=0;o>s?(l=t,u=l/r*n):(u=e,l=u/n*r);var d=0,f=0,c=0,h=0;return u/l>i?(h=l,c=l/(1/i),d=(e-c)/2,f=0):(c=u,h=u/i,d=0,f=(t-h)/2),a?{x:d+.1*c,y:f+.1*h,w:.8*c,h:.8*h}:{x:d,y:f,w:c,h:h}}function a(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=P.clientWidth/P.clientHeight,n=!1;e.isFromCEA608&&(t=3.5/3,n=!0);var r=i.call(this,P.clientWidth,P.clientHeight,P.videoWidth,P.videoHeight,t,n),a=r.w,o=r.h;if(a!=L||o!=B){x=r.x,N=r.y,L=a,B=o,U.style.left=x+"px",U.style.top=N+"px",U.style.width=L+"px",U.style.height=B+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}H&&document[H]||z?U.style.zIndex=q:U.style.zIndex=null}}}function s(e,t){return Math.round(.01*e*t).toString()+"px"}function l(e){var t=L,n=B;if(t*n!=0&&e.layout){var r=e.layout,i=s(r.left,t),a=s(r.top,n),o=s(r.width,t),u=s(r.height,n);U.style.left=i,U.style.top=a,U.style.width=o,U.style.height=u;var l=U.firstChild;l&&l.style&&(l.style.left="0px",l.style.top="0px",l.style.width=o,l.style.height=u,H&&document[H]||z?l.style.zIndex=q:l.style.zIndex=null)}}function d(e){var t,n,r,i,a,o=L,s=B,u=[o/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var l=e.linePadding[t];n=(l*u[0]).toString();for(var d=document.getElementsByClassName("spanPadding"),f=0;f<d.length;f++)d[f].style.cssText=d[f].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),d[f].style.cssText=d[f].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?r=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.fontSize[t][1]),n=(r*u[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),n=(i*u[1]).toString(),a=document.getElementsByClassName(t);for(var h=0;h<a.length;h++)a[h].style.cssText=a[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function f(e,t,n){var r=e>=0?P.textTracks[e]:null,i=this;if(r){if("showing"!==r.mode)return void(n&&n.length>0&&(r.nonAddedCues=r.nonAddedCues.concat(n)));if(n||(n=r.nonAddedCues,r.nonAddedCues=[]),n&&0!==n.length)for(var o in n){var s,u=n[o];r.cellResolution=u.cellResolution,r.isFromCEA608=u.isFromCEA608,k||"html"!==u.type&&"image"!==u.type||(k=setInterval(a.bind(this),500)),"image"===u.type?(s=new C(u.start-t,u.end-t,""),s.image=u.data,s.id=u.id,s.size=0,s.type="image",s.layout=u.layout,s.scaleCue=l.bind(i),s.onenter=function(){if(U&&"showing"===r.mode){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.style.cssText="pointer-events: none; display: block; visibility: visible !important; position: relative !important;",U.appendChild(e),l.call(i,this)}},s.onexit=function(){if(U)for(var e=U.childNodes,t=0;t<e.length;t++)e[t].id==="ttmlImage_"+this.id&&U.removeChild(e[t])}):"html"===u.type?(s=new C(u.start-t,u.end-t,""),s.cueHTMLElement=u.cueHTMLElement,s.regions=u.regions,s.regionID=u.regionID,s.cueID=u.cueID,s.videoWidth=u.videoWidth,s.videoHeight=u.videoHeight,s.cellResolution=u.cellResolution,s.fontSize=u.fontSize,s.lineHeight=u.lineHeight,s.linePadding=u.linePadding,s.scaleCue=d.bind(i),U.style.left=x+"px",U.style.top=N+"px",U.style.width=L+"px",U.style.height=B+"px",s.onenter=function(){"showing"===r.mode&&(R("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),U.appendChild(this.cueHTMLElement),d.call(i,this))},s.onexit=function(){for(var e=U.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&U.removeChild(e[t])}):(s=new C(u.start-t,u.end-t,u.data),u.styles&&(void 0!==u.styles.align&&"align"in s&&(s.align=u.styles.align),void 0!==u.styles.line&&"line"in s&&(s.line=u.styles.line),void 0!==u.styles.position&&"position"in s&&(s.position=u.styles.position),void 0!==u.styles.size&&"size"in s&&(s.size=u.styles.size))),r.addCue(s)}}}function h(){return F>=0?P.textTracks[F]:null}function p(){return F}function g(e){for(var t=-1,n=0;n<P.textTracks.length;n++)if(P.textTracks[n].label===e){t=n;break}return t}function m(e){if(F=e,S.call(this),e>=0){"html"===P.textTracks[e].renderingType?E.call(this):b.call(this)}else b.call(this)}function _(e){return P.textTracks[e]}function v(e){if(e.cues){for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r]);e.mode="disabled"}}function y(){for(var e=O.length,t=0;t<e;t++)if(j)P.removeChild(O[t]);else{var n=_.call(this,t);n.nonAddedCues=[],v.call(this,n)}O=[],D=[],k&&(clearInterval(k),k=null),S.call(this)}function T(e){P.removeChild(O[e]),O.splice(e,1)}function E(){if(j){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;P.id?t.insertRule("#"+P.id+"::cue {background: transparent}",0):0!==P.classList.length?t.insertRule("."+P.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function b(){if(j){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function S(){if(U)for(;U.firstChild;)U.removeChild(U.firstChild)}function I(e){e&&e.videoModel&&(w=e.videoModel)}var A=this.context,M=(0,o.default)(A).getInstance(),R=(0,c.default)(A).getInstance().log,C=void 0,w=void 0,P=void 0,D=void 0,O=void 0,F=void 0,x=void 0,N=void 0,L=void 0,B=void 0,U=void 0,k=void 0,j=void 0,H=void 0,z=void 0,q=void 0;return{initialize:e,displayCConTop:n,addTextTrack:r,addCaptions:f,getTextTrack:_,getCurrentTextTrack:h,getCurrentTrackIdx:p,setCurrentTrackIdx:m,getTrackIdxForId:g,deleteTrackCues:v,deleteAllTextTracks:y,deleteTextTrack:T,setConfig:I}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(3),c=r(f);i.__dashjs_factory_name="TextTracks",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var n=d.default.parseBuffer(e),r=(0,o.default)(t).create();return r.setData(n),r}var t=this.context;return{parse:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(142),o=r(a),s=n(0),u=r(s),l=n(29),d=r(l);i.__dashjs_factory_name="BoxParser",t.default=u.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(void 0!==v)return v;v=!1;var t;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return m("Warning: DOMStorage access denied: "+e.message),v}if(!t||e!==p&&e!==g)return v;try{t.setItem("1","1"),t.removeItem("1"),v=!0}catch(e){m("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return v}function t(){e(p)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){m(e.message)}}})}function n(){return 6e5*Math.round((new Date).getTime()/6e5)}function r(t,n){return e(t)&&y["get"+n+"CachingInfo"]().enabled}function i(e){if(!r(p,"LastMediaSettings"))return null;var t=h.replace(/\?/,e),n=JSON.parse(localStorage.getItem(t))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=y.getLastMediaSettingsCachingInfo().ttl||!1,a=n.settings;return i&&(localStorage.removeItem(t),a=null),a}function a(e){var t=NaN;if(r(p,"LastBitrate")){var n=c.replace(/\?/,e),i=JSON.parse(localStorage.getItem(n))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=y.getLastBitrateCachingInfo().ttl||!1,o=parseInt(i.bitrate,10);isNaN(o)||a?a&&localStorage.removeItem(n):(t=o,m("Last saved bitrate for "+e+" was "+o))}return t}function o(e,t){if(r(p,"LastMediaSettings")){var i=h.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({settings:t,timestamp:n()}))}catch(e){m(e.message)}}}function s(e,t){if(r(p,"LastBitrate")&&t){var i=c.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({bitrate:t/1e3,timestamp:n()}))}catch(e){m(e.message)}}}var l=this.context,m=(0,d.default)(l).getInstance().log,_=void 0,v=void 0,y=void 0;return _={getSavedBitrateSettings:a,setSavedBitrateSettings:s,getSavedMediaSettings:i,setSavedMediaSettings:o,isSupported:e},function(){y=(0,u.default)(l).getInstance(),t()}(),_}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(4),u=r(s),l=n(3),d=r(l),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],c="dashjs_?_bitrate",h="dashjs_?_settings",p="localStorage",g="sessionStorage";i.__dashjs_factory_name="DOMStorage";var m=o.default.getSingletonFactory(i);t.default=m},function(e,t,n){"use strict";function r(){function e(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e}function t(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null}function n(){r={}}var r={};return{save:e,extract:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="InitCache",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(){function e(e,t){r=e,i=t}function t(){var e=i.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=r.getExpectedLiveEdge(),r.setClientTimeOffset(t-e.DVRWindow.end)),t}function n(){r=null,i=null}var r=void 0,i=void 0;return{initialize:e,getLiveEdge:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="LiveEdgeFinder";var o=a.default.getSingletonFactory(r);t.default=o},function(e,t,n){"use strict";var r={};r.encode=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.decode=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")};var i={};!function(e){var t=function(t){for(var n=0,r=[],i=0|t.length/3;0<i--;){var a=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push(e.charAt(63&a))}if(2==t.length-n){var a=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push("=")}else if(1==t.length-n){var a=t[n]<<16;r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,r=[],i=0|e.length/4;0<i--;){var a=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&a>>16),r.push(255&a>>8),r.push(255&a),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={};u.encode=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},u.decode=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")},i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t.decode=i.decode,t.decodeArray=i.decodeArray},function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},o={25:2,26:4,29:6,30:8,31:10,27:13,28:15},s=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},d=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var f=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new d(t,n,r,i,a)};f.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var c=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new f);this.pos=0,this.currPenState=new d};c.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(u.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(u.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);if(this.pos>=32)return void u.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var h=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new c);this.currRow=14,this.nrRollUpRows=null,this.reset()};h.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){u.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){u.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){u.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void u.log("DEBUG","roll_up but nrRollUpRows not set yet");u.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),u.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,u.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";u.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(u.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){u.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){u.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){u.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){u.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){u.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){u.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){u.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){u.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){u.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){u.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){u.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(u.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,u.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){u.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}u.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=u.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var g=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,u.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(u.log("DATA","["+l([t[o],t[o+1]])+"] -> ("+l([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else u.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,u.log("WARNING","Couldn't parse cleaned data "+l([r,i])+" orig: "+l([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,u.log("DEBUG","Repeated command ("+l([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.cc_RCL():33===t?a.cc_BS():34===t?a.cc_AOF():35===t?a.cc_AON():36===t?a.cc_DER():37===t?a.cc_RU(2):38===t?a.cc_RU(3):39===t?a.cc_RU(4):40===t?a.cc_FON():41===t?a.cc_RDC():42===t?a.cc_TR():43===t?a.cc_RTD():44===t?a.cc_EDM():45===t?a.cc_CR():46===t?a.cc_ENM():47===t&&a.cc_EOC():a.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return u.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].cc_MIDROW(t),u.log("DEBUG","MIDROW ("+l([e,t])+")"),!0}return!1},parsePAC:function(e,t){var n=null,s=null,u=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,l=(16===e||24===e)&&64<=t&&t<=95;if(!u&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,s=64<=t&&t<=95?1===n?r[e]:a[e]:1===n?i[e]:o[e];var d=this.interpretPAC(s,t);return this.channels[n-1].setPAC(d),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,u.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=l(i);u.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var n,r,i,a,o=(16===e||24===e)&&32<=t&&t<=47,u=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!u)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=s[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var m=function(e,t,n){for(var r=0,i=t,a=[];i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+r-1;){s=0;for(var u=255;255===u;)u=e.getUint8(o),s+=u,o++;var l=0;for(u=255;255===u;)u=e.getUint8(o),l+=u,o++;(function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s})(s,l,e,o)&&a.push([o,l]),o+=l}i+=r+4}return a},_=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!=0&&(0===u?(r[0].push(l),r[0].push(d)):1===u&&(r[1].push(l),r[1].push(d)))}return r};e.logger=u,e.PenState=d,e.CaptionScreen=h,e.Cea608Parser=g,e.findCea608Nalus=m,e.extractCea608DataFromRange=_}(t)},function(e,t,n){"use strict";function r(){return i}Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionString=r;var i="2.5.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TCP_CONNECTION="TcpList",t.HTTP_REQUEST="HttpList",t.TRACK_SWITCH="RepSwitchList",t.BUFFER_LEVEL="BufferLevel",t.BUFFER_STATE="BufferState",t.DVR_INFO="DVRInfo",t.DROPPED_FRAMES="DroppedFrames",t.SCHEDULING_INFO="SchedulingInfo",t.REQUESTS_QUEUE="RequestsQueue",t.MANIFEST_UPDATE="ManifestUpdate",t.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",t.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",t.PLAY_LIST="PlayList",t.DVB_ERRORS="DVBErrors"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(69),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i,a,s){var u=this;r(this,e),this._name=t||"",this._properties=[],this._children=i||[],this._isRoot=a||!1,this._isArray=s||!0,Array.isArray(n)&&n.forEach(function(e){u._properties.push(new o.default(e))})}return i(e,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i,a){r(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=i||1,this.dvb_weight=a||1};i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,n){if(mn=(0,T.default)(Xt).getInstance(),gn=(0,v.default)(Xt).getInstance(),!mn.supportsMediaSource())return void gn.capabilityError("mediasource");rn||(rn=!0,sn=(0,U.default)(Xt).getInstance(),vn=(0,u.default)(Xt).getInstance(),un=(0,c.default)(Xt).getInstance(),un.initialize(),Tn=(0,le.default)(Xt).getInstance(),yn=(0,fe.default)(Xt).getInstance(),hn=(0,L.default)(Xt).getInstance(),hn.setConfig({adapter:Ut()}),at(),_e(void 0===n||n),e&&wt(e),t&&Ft(t),Jt("[dash.js "+q()+"] MediaPlayer has been initialized"))}function t(){return!!En&&!!tn}function n(){if(!an)throw Yt;(!on||i()&&an)&&vn.play()}function r(){if(!an)throw Yt;vn.pause()}function i(){if(!an)throw Yt;return vn.isPaused()}function a(){if(!an)throw Yt;return vn.isSeeking()}function s(){if(!an)throw Yt;return vn.getIsDynamic()}function l(e){if(!En)throw Kt;Ct().muted=e}function f(){if(!En)throw Kt;return Ct().muted}function h(e){if(!En)throw Kt;Ct().volume=e}function g(){if(!En)throw Kt;return Ct().volume}function _(e){var t=["video","audio","fragmentedText"];if(e){if(-1!==t.indexOf(e)){var n=Ee().getCurrentBufferLevel(be(e));return n||NaN}return Jt("Warning  - getBufferLength requested for invalid type"),NaN}return t.map(function(e){return Ue(e).length>0?Ee().getCurrentBufferLevel(be(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)})}function y(){var e=zt();return e?e.manifestInfo.DVRWindowSize:0}function E(e){var t=zt();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function S(e){if(!an)throw Yt;var t=vn.getIsDynamic()?E(e):e;vn.seek(t)}function A(e){if(!an)throw Yt;var t=Ct().currentTime;if(void 0!==e)t=_n.getTimeRelativeToStreamId(t,e);else if(vn.getIsDynamic()){var n=zt();t=null===n?0:R()-(n.range.end-n.time)}return t}function R(){if(!an)throw Yt;var e=Ct().duration;if(vn.getIsDynamic()){var t,n=zt();if(!n)return 0;t=n.range.end-n.range.start,e=t<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function w(){if(!an)throw Yt;return A()<0?NaN:qt(A())}function D(){if(!an)throw Yt;return qt(R())}function F(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o}function N(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())}function B(e,t,n){ie.default.extend(e,t,n,Xt)}function k(e,t,n){$t.on(e,t,n)}function H(e,t,n){$t.off(e,t,n)}function q(){return(0,ae.getVersionString)()}function G(){return Zt}function K(){if(!En)throw Kt;return En}function W(e){pn.setLiveDelayFragmentCount(e)}function $(e){pn.setLiveDelay(e)}function J(){return pn.getLiveDelay()}function te(e){pn.setUseSuggestedPresentationDelay(e)}function re(e,t){pn.setLastBitrateCachingInfo(e,t)}function oe(e,t){pn.setLastMediaSettingsCachingInfo(e,t)}function ue(e,t){sn.setMaxAllowedBitrateFor(e,t)}function de(e,t){sn.setMinAllowedBitrateFor(e,t)}function ce(e){return sn.getMaxAllowedBitrateFor(e)}function pe(e){return sn.getMinAllowedBitrateFor(e)}function ge(e,t){sn.setMaxAllowedRepresentationRatioFor(e,t)}function me(e){return sn.getMaxAllowedRepresentationRatioFor(e)}function _e(e){on=e}function ve(){return on}function ye(e){pn.setScheduleWhilePaused(e)}function Te(){return pn.getScheduleWhilePaused()}function Ee(){return yn}function be(e){return hn.getReadOnlyMetricsFor(e)}function Se(e){if(!an)throw Yt;return sn.getQualityFor(e,_n.getActiveStreamInfo())}function Ie(e,t){if(!an)throw Yt;sn.setPlaybackQuality(e,_n.getActiveStreamInfo(),t)}function Ae(){sn.setElementSize(),sn.setWindowResizeEventCalled(!0)}function Me(){return sn.getLimitBitrateByPortal()}function Re(e){sn.setLimitBitrateByPortal(e)}function Ce(){return sn.getUsePixelRatioInLimitBitrateByPortal()}function we(e){sn.setUsePixelRatioInLimitBitrateByPortal(e)}function Pe(e){if(!an)throw Yt;void 0===bn&&(bn=(0,C.default)(Xt).getInstance());for(var t=Ct().textTracks,n=t.length,r=0;r<n;r++){var i=t[r],a=e===r?"showing":"hidden";i.mode!==a&&(i.mode=a)}bn.setTextTrack()}function De(){var e=NaN;return bn&&(e=bn.getCurrentTrackIdx()),e}function Oe(e){if(!an)throw Yt;var t=Vt();return t?t.getBitrateListFor(e):[]}function Fe(e,t){sn.setInitialBitrateFor(e,t)}function xe(e){if(!an)throw Yt;return sn.getInitialBitrateFor(e)}function Ne(e,t){sn.setInitialRepresentationRatioFor(e,t)}function Le(e){return sn.getInitialRepresentationRatioFor(e)}function Be(e){if(!an)throw Yt;return cn.getStreamsInfo(e)}function Ue(e){if(!an)throw Yt;var t=_n.getActiveStreamInfo();return t?un.getTracksFor(e,t):[]}function ke(e,t,n){if(!an)throw Yt;return n=n||cn.getStreamsInfo(t)[0],n?cn.getAllMediaInfoForType(t,n,e):[]}function je(e){if(!an)throw Yt;var t=_n.getActiveStreamInfo();return t?un.getCurrentTrackFor(e,t):null}function He(e,t){un.setInitialSettings(e,t)}function ze(e){return un.getInitialSettings(e)}function qe(e){if(!an)throw Yt;un.setTrack(e)}function Ve(e){return un.getSwitchMode(e)}function Ge(e,t){un.setSwitchMode(e,t)}function Ye(e){un.setSelectionModeForInitialTrack(e)}function Ke(){return un.getSelectionModeForInitialTrack()}function Qe(){return sn.getAutoSwitchBitrateFor("video")||sn.getAutoSwitchBitrateFor("audio")}function We(e){sn.setAutoSwitchBitrateFor("video",e),sn.setAutoSwitchBitrateFor("audio",e)}function Xe(e){return sn.getAutoSwitchBitrateFor(e)}function $e(e,t){sn.setAutoSwitchBitrateFor(e,t)}function Ze(e){pn.setFastSwitchEnabled(e)}function Je(){return pn.getFastSwitchEnabled()}function et(e){pn.setBufferOccupancyABREnabled(e)}function tt(e,t){var n=Bt(),r=this,i=function e(i){i.error?t(null,i.error):t(i.manifest),$t.off(ee.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()};$t.on(ee.default.INTERNAL_MANIFEST_LOADED,i,r);var a=(0,P.default)(Xt).getInstance();a.initialize(),n.load(a.parseURI(e))}function nt(e,t){rt(e,t);var n=new o.default;n.schemeIdUri=e,n.value=t,pn.getUTCTimingSources().push(n)}function rt(e,t){var n=pn.getUTCTimingSources();n.forEach(function(r,i){r.schemeIdUri===e&&r.value===t&&n.splice(i,1)})}function it(){pn.setUTCTimingSources([])}function at(){nt(x.default.DEFAULT_UTC_TIMING_SOURCE.scheme,x.default.DEFAULT_UTC_TIMING_SOURCE.value)}function ot(e){pn.setUseManifestDateHeaderTimeSource(e)}function st(e){pn.setBufferToKeep(e)}function ut(e){pn.setBufferPruningInterval(e)}function lt(e){pn.setStableBufferTime(e)}function dt(e){pn.setBufferTimeAtTopQuality(e)}function ft(e){pn.setBufferTimeAtTopQualityLongForm(e)}function ct(e){pn.setLongFormContentDurationThreshold(e)}function ht(e){pn.setRichBufferThreshold(e)}function pt(e){pn.setBandwidthSafetyFactor(e)}function gt(){return pn.getBandwidthSafetyFactor()}function mt(e){pn.setAbandonLoadTimeout(e)}function _t(e){pn.setFragmentRetryAttempts(e)}function vt(e){pn.setFragmentRetryInterval(e)}function yt(e){Tt(void 0,e)}function Tt(e,t){pn.setXHRWithCredentialsForType(e,t)}function Et(e){return pn.getXHRWithCredentialsForType(e)}function bt(){return kt()}function St(e){ln=e}function It(e){nn=e}function At(e){var t=(0,b.default)(Xt).getInstance();t.setConfig({videoModel:En}),t.initialize(),t.displayCConTop(e)}function Mt(){return En?En.getVideoContainer():null}function Rt(e){if(!En)throw Kt;En.setVideoContainer(e)}function Ct(){if(!En)throw Kt;return En.getElement()}function wt(e){if(!rn)throw Wt;En=null,e&&(En=(0,V.default)(Xt).getInstance(),En.initialize(),En.setElement(e),kt(),jt(),Ht()),Nt()}function Pt(){return En?En.getTTMLRenderingDiv():null}function Dt(e){if(!En)throw Kt;En.setTTMLRenderingDiv(e)}function Ot(){if(!tn)throw Qt;return tn}function Ft(e){if(!rn)throw Wt;if("string"==typeof e){var t=(0,P.default)(Xt).getInstance();t.initialize(),tn=t.parseURI(e)}else tn=e;Nt()}function xt(){Ft(null),wt(null),nn=null,ln=null}function Nt(){an?(an=!1,cn.reset(),_n.reset(),vn.reset(),sn.reset(),un.reset(),bn.reset(),_n=null,dn=null,t()&&Gt()):t()&&Gt()}function Lt(){var e=(0,z.default)(Xt).getInstance();e.initialize(),(0,I.default)(Xt).getInstance().setConfig({dashManifestModel:Tn}),un.initialize(),un.setConfig({errHandler:gn}),_n=(0,d.default)(Xt).getInstance(),_n.setConfig({capabilities:mn,manifestLoader:Bt(),manifestModel:(0,O.default)(Xt).getInstance(),dashManifestModel:Tn,protectionController:ln,adapter:cn,metricsModel:hn,dashMetrics:yn,liveEdgeFinder:(0,m.default)(Xt).getInstance(),mediaSourceController:(0,Y.default)(Xt).getInstance(),timeSyncController:(0,j.default)(Xt).getInstance(),baseURLController:(0,Q.default)(Xt).getInstance(),errHandler:gn,timelineConverter:(0,he.default)(Xt).getInstance()}),_n.initialize(on,nn),sn.setConfig({abrRulesCollection:e,streamController:_n}),bn=(0,C.default)(Xt).getInstance(),bn.setConfig({errHandler:gn,dashManifestModel:Tn,mediaController:un,streamController:_n,videoModel:En})}function Bt(){return(0,p.default)(Xt).create({errHandler:gn,metricsModel:hn,requestModifier:(0,M.default)(Xt).getInstance(),mssHandler:fn})}function Ut(){return cn=(0,se.default)(Xt).getInstance(),cn.initialize(),cn.setConfig({dashManifestModel:Tn}),cn}function kt(){if(ln)return ln;var e=dashjs.Protection;if("function"==typeof e){var t=e(Xt).create();return ee.default.extend(e.events),ne.default.extend(e.events,{publicOnly:!0}),ln=t.createProtectionSystem({log:Jt,videoModel:En,capabilities:mn,eventBus:$t,adapter:cn})}return null}function jt(){if(dn)return dn;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Xt).create();return dn=t.createMetricsReporting({log:Jt,eventBus:$t,mediaElement:Ct(),dashManifestModel:Tn,metricsModel:hn})}return null}function Ht(){if(fn)return fn;var e=dashjs.MssHandler;return"function"==typeof e?fn=e(Xt).create({eventBus:$t,mediaPlayerModel:pn}):null}function zt(){var e=hn.getReadOnlyMetricsFor("video")||hn.getReadOnlyMetricsFor("audio");return yn.getCurrentDVRInfo(e)}function qt(e){var t,n=zt();return n?(t=n.manifestInfo.availableFrom.getTime()/1e3,e+(t+n.range.start)):0}function Vt(){if(!an)throw Yt;var e=_n.getActiveStreamInfo();return e?_n.getStreamById(e.id):null}function Gt(){an||(an=!0,Jt("Playback Initialized"),Lt(),"string"==typeof tn?_n.load(tn):_n.loadWithManifest(tn))}var Yt="You must first call play() to init playback before calling this method",Kt="You must first call attachView() to set the video element before calling this method",Qt="You must first call attachSource() with a valid source before calling this method",Wt="MediaPlayer not initialized!",Xt=this.context,$t=(0,Z.default)(Xt).getInstance(),Zt=(0,X.default)(Xt).getInstance(),Jt=Zt.log,en=void 0,tn=void 0,nn=void 0,rn=void 0,an=void 0,on=void 0,sn=void 0,un=void 0,ln=void 0,dn=void 0,fn=void 0,cn=void 0,hn=void 0,pn=void 0,gn=void 0,mn=void 0,_n=void 0,vn=void 0,yn=void 0,Tn=void 0,En=void 0,bn=void 0;return en={initialize:e,on:k,off:H,extend:B,attachView:wt,attachSource:Ft,isReady:t,play:n,isPaused:i,pause:r,isSeeking:a,isDynamic:s,seek:S,setMute:l,isMuted:f,setVolume:h,getVolume:g,time:A,duration:R,timeAsUTC:w,durationAsUTC:D,getActiveStream:Vt,getDVRWindowSize:y,getDVRSeekOffset:E,convertToTimeCode:N,formatUTC:F,getVersion:q,getDebug:G,getBufferLength:_,getVideoModel:K,getVideoContainer:Mt,getTTMLRenderingDiv:Pt,getVideoElement:Ct,getSource:Ot,setLiveDelayFragmentCount:W,setLiveDelay:$,getLiveDelay:J,useSuggestedPresentationDelay:te,enableLastBitrateCaching:re,enableLastMediaSettingsCaching:oe,setMaxAllowedBitrateFor:ue,getMaxAllowedBitrateFor:ce,setMinAllowedBitrateFor:de,getMinAllowedBitrateFor:pe,setMaxAllowedRepresentationRatioFor:ge,getMaxAllowedRepresentationRatioFor:me,setAutoPlay:_e,getAutoPlay:ve,setScheduleWhilePaused:ye,getScheduleWhilePaused:Te,getDashMetrics:Ee,getMetricsFor:be,getQualityFor:Se,setQualityFor:Ie,updatePortalSize:Ae,getLimitBitrateByPortal:Me,setLimitBitrateByPortal:Re,getUsePixelRatioInLimitBitrateByPortal:Ce,setUsePixelRatioInLimitBitrateByPortal:we,setTextTrack:Pe,getBitrateInfoListFor:Oe,setInitialBitrateFor:Fe,getInitialBitrateFor:xe,setInitialRepresentationRatioFor:Ne,getInitialRepresentationRatioFor:Le,getStreamsFromManifest:Be,getTracksFor:Ue,getTracksForTypeFromManifest:ke,getCurrentTrackFor:je,setInitialMediaSettingsFor:He,getInitialMediaSettingsFor:ze,setCurrentTrack:qe,getTrackSwitchModeFor:Ve,setTrackSwitchModeFor:Ge,setSelectionModeForInitialTrack:Ye,getSelectionModeForInitialTrack:Ke,getAutoSwitchQuality:Qe,setAutoSwitchQuality:We,setFastSwitchEnabled:Ze,getFastSwitchEnabled:Je,getAutoSwitchQualityFor:Xe,setAutoSwitchQualityFor:$e,enableBufferOccupancyABR:et,setBandwidthSafetyFactor:pt,getBandwidthSafetyFactor:gt,setAbandonLoadTimeout:mt,retrieveManifest:tt,addUTCTimingSource:nt,removeUTCTimingSource:rt,clearDefaultUTCTimingSources:it,restoreDefaultUTCTimingSources:at,setBufferToKeep:st,setBufferPruningInterval:ut,setStableBufferTime:lt,setBufferTimeAtTopQuality:dt,setFragmentLoaderRetryAttempts:_t,setFragmentLoaderRetryInterval:vt,setXHRWithCredentials:yt,setXHRWithCredentialsForType:Tt,getXHRWithCredentialsForType:Et,setBufferTimeAtTopQualityLongForm:ft,setLongFormContentDurationThreshold:ct,setRichBufferThreshold:ht,getProtectionController:bt,attachProtectionController:St,setProtectionData:It,enableManifestDateHeaderTimeSource:ot,displayCaptionsOnTop:At,attachVideoContainer:Rt,attachTTMLRenderingDiv:Dt,getCurrentTextTrackIndex:De,reset:xt},function(){rn=!1,an=!1,on=!0,ln=null,nn=null,cn=null,ee.default.extend(ne.default),pn=(0,x.default)(Xt).getInstance()}(),en}Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),o=r(a),s=n(14),u=r(s),l=n(36),d=r(l),f=n(17),c=r(f),h=n(89),p=r(h),g=n(42),m=r(g),_=n(9),v=r(_),y=n(140),T=r(y),E=n(38),b=r(E),S=n(24),I=r(S),A=n(28),M=r(A),R=n(18),C=r(R),w=n(37),P=r(w),D=n(27),O=r(D),F=n(4),x=r(F),N=n(8),L=r(N),B=n(12),U=r(B),k=n(101),j=r(k),H=n(126),z=r(H),q=n(20),V=r(q),G=n(99),Y=r(G),K=n(95),Q=r(K),W=n(3),X=r(W),$=n(1),Z=r($),J=n(2),ee=r(J),te=n(16),ne=r(te),re=n(0),ie=r(re),ae=n(45),oe=n(32),se=r(oe),ue=n(11),le=r(ue),de=n(10),fe=r(de),ce=n(33),he=r(ce);i.__dashjs_factory_name="MediaPlayer";var pe=ie.default.getClassFactory(i);pe.events=ne.default,t.default=pe},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t,n){var r,u=t.match(a);if(u){try{r=s[u[1]](o).create({eventBus:e.eventBus}),r.initialize(u[1],n,u[3],u[5])}catch(e){r=null,i("MetricsHandlerFactory: Could not create handler for type "+u[1]+" with args "+u[3]+", "+u[5]+" ("+e.message+")")}return r}}function n(e,t){s[e]=t}function r(e){delete s[e]}var i=e.log,a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,s={BufferLevel:u.default,DVBErrors:d.default,HttpList:c.default,PlayList:p.default,RepSwitchList:p.default,TcpList:p.default};return{create:t,register:n,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(109),u=r(s),l=n(110),d=r(l),f=n(112),c=r(f),h=n(111),p=r(h);i.__dashjs_factory_name="MetricsHandlerFactory",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var n;try{n=i[e.schemeIdUri](a).create(),n.initialize(e,t)}catch(t){n=null,o("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return n}function n(e,t){i[e]=t}function r(e){delete i[e]}var i={"urn:dvb:dash:reporting:2014":u.default},a=this.context,o=e.log;return{create:t,register:n,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(113),u=r(s);i.__dashjs_factory_name="ReportingFactory",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="HandlerHelpers",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){k={},j={},H={},z=[],q=(0,d.default)(F).getInstance(),V=(0,h.default)(F).getInstance(),B.on(_.default.BUFFER_EMPTY,m,U),B.on(_.default.PLAYBACK_SEEKING,v,U),B.on(_.default.PERIOD_SWITCH_STARTED,R,U),B.on(_.default.MEDIA_FRAGMENT_LOADED,C,U)}function n(e){return e.map(function(e){return Math.log(e)})}function r(e,t,r,i){var a=NaN;if(i?(a=0,i.forEach(function(e,t){e>i[a]&&(a=t)})):(i=n(r),a=i.length-1),0===a)return null;var o=1-i[0]+(i[a]-i[0])/(t/e-1),s=e/(i[0]+o-1);return{utilities:i,gp:o,Vp:s}}function a(e){var t={},n=e.getMediaInfo(),i=e.getStreamProcessor(),a=e.getStreamInfo(),o=e.getTrackInfo(),s=i.isDynamic(),u=a.manifestInfo.duration,l=o.fragmentDuration,d=n.bitrateList.map(function(e){return e.bandwidth}),f=r(I,A,d,null);if(null===f)return t.state=T,t;if(t.state=E,t.bitrates=d,t.utilities=f.utilities,t.Vp=f.Vp,t.gp=f.gp,t.isDynamic=s,t.movieDuration=u,t.fragmentDuration=l,t.bandwidthSafetyFactor=q.getBandwidthSafetyFactor(),t.rebufferSafetyFactor=M,t.bufferTarget=q.getStableBufferTime(),t.lastQuality=0,t.placeholderBuffer=0,t.throughputCount=s?D:O,S){for(var c="",h=0;h<d.length;++h){var p=f.utilities[h],g=d[h],m=0;if(h>0){var _=f.utilities[h-1],v=d[h-1];m=f.Vp*((_*g-p*v)/(g-v)+f.gp)}var y=f.Vp*(p+f.gp);c+="\n"+h+":"+(1e-6*d[h]).toFixed(3)+"Mbps "+m.toFixed(3)+"/"+y.toFixed(3)}x("BolaDebug "+n.type+" bitrates"+c)}return t}function s(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||o>=i)&&(i=o,r=a)}return r}function u(e,t){for(var n=N.getHttpRequests(e),r=[],i=n.length-1;i>=0&&r.length<t;--i){var a=n[i];a.type===f.HTTPRequest.MEDIA_SEGMENT_TYPE&&a._tfinish&&a.tresponse&&a.trace&&r.push(a)}return r}function l(e,t,n){var r=u(e,t);if(0===r.length)return 0;for(var i=0,a="",o=0;o<r.length;++o){var s=.001*(r[o]._tfinish.getTime()-r[o].trequest.getTime()),l=8*r[o].trace.reduce(function(e,t){return e+t.b[0]},0);S&&(a+=" "+(1e-6*l).toFixed(3)+"/"+s.toFixed(3)+"="+(1e-6*l/s).toFixed(3)+"Mbps"),i+=s/l}return S&&x("BolaDebug "+n+" BolaRule recent throughput = "+(r.length/(1e6*i)).toFixed(3)+"Mbps:"+a),r.length/i}function c(e,t){var n=0;return e.bitrates.some(function(e,r){return e>t||(n=r,!1)}),n}function p(e,t){var n=Date.now(),r=k[t],i=H[t],a=NaN;if(k[t]=n,H[t]=!1,!i){var o=u(e,1);o.length>0&&(a=o[0]._tfinish.getTime())>n&&(a=n)}var s=0;return s=i||r>a?n-r:n-a,isNaN(s)||s<=0?0:.001*s}function m(){S&&x("BolaDebug BUFFER_EMPTY"),z.forEach(function(e){var t=L.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state===b&&(n.placeholderBuffer=0,L.updateBolaState(e,n))}})}function v(e){S&&x("BolaDebug PLAYBACK_SEEKING "+e.seekTime.toFixed(3)),z.forEach(function(e){var t=L.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state!==T&&(n.state=E),L.updateBolaState(e,n)}}),j={},H={}}function R(){}function C(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=e.chunk.mediaInfo.type,n=e.chunk.start;void 0===t||isNaN(n)||(n<=j[t]?H[t]=!0:(H[t]=!1,j[t]=n))}}function w(e){var t=e.getStreamProcessor();t.getScheduleController().setTimeToLoadDelay(0);var n=(0,o.default)(F).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name}),r=e.getMediaInfo(),u=r.type,d=L.getReadOnlyMetricsFor(u);if(0===d.BolaState.length){S&&x("BolaDebug "+u+"\nBolaDebug "+u+" BolaRule for state=- fragmentStart="+V.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var f=a(e);L.updateBolaState(u,f);var h=0;if(f.state!==T){z.push(u);var g=l(d,f.throughputCount,u);if(0===g)return S&&x("BolaDebug "+u+" BolaRule quality unchanged for INITIALIZE"),n;h=c(f,g*f.bandwidthSafetyFactor),f.lastQuality=h,n.value=h,n.reason.state=f.state,n.reason.throughput=g}return S&&x("BolaDebug "+u+" BolaRule quality "+h+" for INITIALIZE"),n}var m=d.BolaState[0]._s;if(m.state===T)return S&&x("BolaDebug "+u+" BolaRule quality 0 for ONE_BITRATE"),n;var _=m.bitrates,v=m.utilities;S&&x("BolaDebug "+u+"\nBolaDebug "+u+" EXECUTE BolaRule for state="+m.state+" fragmentStart="+V.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var y=N.getCurrentBufferLevel(d)?N.getCurrentBufferLevel(d):0,I=l(d,m.throughputCount,u);y<=.1&&(m.placeholderBuffer=0);var A=p(d,u);A>0&&(m.placeholderBuffer+=A),m.placeholderBuffer<0&&(m.placeholderBuffer=0);var R=y+m.placeholderBuffer,C=s(m,R);if(S&&x("BolaDebug "+u+" BolaRule bufferLevel="+y.toFixed(3)+"(+"+m.placeholderBuffer.toFixed(3)+"="+R.toFixed(3)+") recentThroughput="+(1e-6*I).toFixed(3)+" tentativeQuality="+C),m.state===E){var w=c(m,I*m.bandwidthSafetyFactor);if(y>m.fragmentDuration/M){m.state=b;for(var P=0,D=0;D<w;++D){var O=m.Vp*(m.gp+(_[w]*v[D]-_[D]*v[w])/(_[w]-_[D]));O>P&&(P=O)}P>y&&(m.placeholderBuffer=P-y)}return S&&x("BolaDebug "+u+" BolaRule quality "+w+" for STARTUP"),m.lastQuality=w,L.updateBolaState(u,m),n.value=w,n.reason.state=E,n.reason.throughput=I,n}if(C>m.lastQuality){var B=c(m,I);C>B&&(B<m.lastQuality&&(B=m.lastQuality),C=B)}if(I>0)for(var U=M*I*y/m.fragmentDuration;C>0&&_[C]>U;)--C;var k=0;return k=R-m.Vp*(v[C]+m.gp),k>0&&(k>m.placeholderBuffer?(k-=m.placeholderBuffer,m.placeholderBuffer=0):(m.placeholderBuffer-=k,k=0)),k>0?C===_.length-1?k=0:t.getScheduleController().setTimeToLoadDelay(1e3*k):k=0,m.lastQuality=C,L.updateBolaState(u,m),n.value=C,n.reason.state=m.state,n.reason.throughput=I,n.reason.bufferLevel=y,S&&x("BolaDebug "+u+" BolaRule quality "+C+" delay="+k.toFixed(3)+" for STEADY"),n}function P(){B.off(_.default.BUFFER_EMPTY,m,U),B.off(_.default.PLAYBACK_SEEKING,v,U),B.off(_.default.PERIOD_SWITCH_STARTED,R,U),B.off(_.default.MEDIA_FRAGMENT_LOADED,C,U),t()}var D=2,O=3,F=this.context,x=(0,y.default)(F).getInstance().log,N=e.dashMetrics,L=e.metricsModel,B=(0,g.default)(F).getInstance(),U=void 0,k=void 0,j=void 0,H=void 0,z=void 0,q=void 0,V=void 0;return U={getMaxIndex:w,reset:P},t(),U}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(0),u=r(s),l=n(4),d=r(l),f=n(5),c=n(32),h=r(c),p=n(1),g=r(p),m=n(2),_=r(m),v=n(3),y=r(v),T=0,E=1,b=2,S=!1,I=10,A=30,M=.5;i.__dashjs_factory_name="BolaRule";var R=u.default.getClassFactory(i);R.BOLA_STATE_ONE_BITRATE=T,R.BOLA_STATE_STARTUP=E,R.BOLA_STATE_STEADY=b,R.BOLA_DEBUG=S,t.default=R},function(e,t,n){"use strict";function r(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function r(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)}function i(e){return this.customTimeRangeArray[e].start}function a(e){return this.customTimeRangeArray[e].end}return{customTimeRangeArray:[],length:0,add:e,clear:t,remove:n,mergeRanges:r,start:i,end:a}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="CustomTimeRanges",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e,n){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.url=e||null,a.type=n||null,a.mediaType="stream",a.responseType="text",a}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",t.PlayList=i,t.PlayListTrace=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(170),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default},function(e,t,n){"use strict";function r(e){var t,n,r;for(t=[],r=0,n=e.length;r<n;r+=1)e[r].isRoot?t.push("root"):t.push(e[r].name);var a=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var r,o,s,u,l;if(null!==e&&0!==e.length)for(r=0,o=e.length;r<o;r+=1)s=e[r],t.hasOwnProperty(s.name)&&(n.hasOwnProperty(s.name)?s.merge&&(u=t[s.name],l=n[s.name],"object"===(void 0===u?"undefined":i(u))&&"object"===(void 0===l?"undefined":i(l))?a(u,l):null!=s.mergeFunction?n[s.name]=s.mergeFunction(u,l):n[s.name]=u+l):n[s.name]=t[s.name])},s=function e(t,n){var r,i,a,s,u,l,d,f=t;if(null!==f.children&&0!==f.children.length)for(r=0,i=f.children.length;r<i;r+=1)if(l=f.children[r],n.hasOwnProperty(l.name))if(l.isArray)for(u=n[l.name+"_asArray"],a=0,s=u.length;a<s;a+=1)d=u[a],o(f.properties,n,d),e(l,d);else d=n[l.name],o(f.properties,n,d),e(l,d)};return{run:function n(r){var a,o,u,l,d,f,c;if(null===r)return r;if("object"!==(void 0===r?"undefined":i(r)))return r;for(a=0,o=t.length;a<o;a+=1)"root"===t[a]&&(d=e[a],f=r,s(d,f));for(l in r)if(r.hasOwnProperty(l)&&"__children"!=l){if(-1!==(u=t.indexOf(l)))if(d=e[u],d.isArray)for(c=r[l+"_asArray"],a=0,o=c.length;a<o;a+=1)f=c[a],s(d,f);else f=r[l],s(d,f);n(r[l])}return r}}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MssHandler=t.MediaPlayerFactory=t.MetricsReporting=t.MediaPlayer=void 0;var i=n(51),a=r(i),o=n(103),s=r(o),u=n(91),l=r(u),d=n(45),f=n(86),c=r(f),h="undefined"!=typeof window&&window||e,p=h.dashjs;p||(p=h.dashjs={}),p.MediaPlayer=a.default,p.MssHandler=c.default,p.MetricsReporting=s.default,p.MediaPlayerFactory=l.default,p.Version=(0,d.getVersionString)(),t.default=p,t.MediaPlayer=a.default,t.MetricsReporting=s.default,t.MediaPlayerFactory=l.default,t.MssHandler=c.default}).call(t,n(169))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.BYTES_APPENDED="bytesAppended",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.DATA_UPDATE_STARTED="dataUpdateStarted",e.INITIALIZATION_LOADED="initializationLoaded",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_REQUESTED="initRequested",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.QUOTA_EXCEEDED="quotaExceeded",e.REPRESENTATION_UPDATED="representationUpdated",e.SEGMENTS_LOADED="segmentsLoaded",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",e.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_COMPLETED="streamCompleted",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TIMED_TEXT_REQUESTED="timedTextRequested",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){Z=t,W=Z.getType(),Q=Z.isDynamic(),J=(0,I.default)(L).create(e,Q)}function n(){return Z}function r(e){X=e}function i(){return X}function a(){return Y}function s(){return $}function d(){J=null,X=0,$=NaN,K=NaN,Y=-1,Q=null,W=null,Z=null,U.off(f.default.INITIALIZATION_LOADED,x,G),U.off(f.default.SEGMENTS_LOADED,N,G)}function c(e){return e?e.split("$$").join("$"):e}function p(e,t){if(null===t||null===e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function g(e,t,n){var r,i,a=V.resolve(n.path);return a&&t!==a.url&&k.isRelative(t)?(r=a.url,i=a.serviceLocation,t&&(r=k.resolve(t,r))):r=t,!k.isRelative(r)&&(e.url=r,e.serviceLocation=i,!0)}function m(e,t){var n=new o.default,r=e.adaptation.period,i=r.start;if(n.mediaType=t,n.type=l.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=H.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,Q),n.availabilityEndTime=H.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,Q),n.quality=e.index,n.mediaInfo=Z.getMediaInfo(),n.representationId=e.id,g(n,e.initialization,e))return n}function v(e){return e?m(e,W):null}function T(e){var t=!1;if(Q||Y!==e.availableSegmentsNumber){var n=(0,b.getSegmentByIndex)(Y,e);if(n){var r=n.presentationStartTime-e.adaptation.period.start,i=e.adaptation.period.duration;B(e.segmentInfoType+": "+r+" / "+i),t=("SegmentTimeline"!==e.segmentInfoType||!Q)&&r>=i}}else t=!0;return t}function S(e){return J.getSegments(e,K,Y,M)}function M(e,t){if(e.segments=t,t&&t.length>0&&($=isNaN($)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,$)),Q&&isNaN(H.getExpectedLiveEdge())){var n=t[t.length-1],r=n.presentationStartTime,i=q.getMetricsFor("stream");H.setExpectedLiveEdge(r),q.updateManifestUpdateInfo(z.getCurrentManifestUpdate(i),{presentationStartTime:r})}}function R(e){if(!e)throw new u.default("no representation");return e.segments=null,S(e),e}function C(e,t){var n,r=E.default.hasInitialization(e),i=E.default.hasSegments(e);if(e.segmentDuration||e.segments||R(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=H.calcSegmentAvailabilityRange(e,Q),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return n=new u.default(A,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:n});t||(Y=-1),e.segmentDuration&&R(e),r||j.loadInitialization(e),i||j.loadSegments(e,W,e.indexRange),r&&i&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e})}function w(e,t,n){var r,i,a,o,s,u=t.segments,l=u?u.length:null,d=-1;if(u&&l>0)for(s=0;s<l;s++)if(i=u[s],a=i.presentationStartTime,o=i.duration,r=void 0===n||null===n?o/2:n,e+r>=a&&e-r<a+o){d=i.availabilityIdx;break}return d}function P(e){if(null===e||void 0===e)return null;var t=new o.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,b.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,b.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,b.replaceTokenForTemplate)(i,"Bandwidth",r),i=p(i,n.id),i=c(i),t.mediaType=W,t.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=Z.getMediaInfo(),t.adaptationIndex=n.adaptation.index,g(t,i,n)?t:void 0}function D(e,t,n){var r,i,a,s=Y,u=!!n&&n.keepIdx,l=n?n.timeThreshold:null,d=!(!n||!n.ignoreIsFinished);return e?(K!==t&&(K=t,B("Getting the request for "+W+" time : "+t)),S(e),Y=w(t,e,l),Y<0&&(S(e),Y=w(t,e,l)),Y>0&&B("Index for "+W+" time "+t+" is "+Y),a=!d&&T(e),a?(r=new o.default,r.action=o.default.ACTION_COMPLETE,r.index=Y,r.mediaType=W,r.mediaInfo=Z.getMediaInfo(),B("Signal complete.",r)):(i=(0,b.getSegmentByIndex)(Y,e),r=P(i)),u&&s>=0&&(Y="SegmentTimeline"===e.segmentInfoType&&Q?Y:s),r):null}function O(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},D(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function F(e){var t,n,r;return e&&-1!==Y?(K=null,Y++,B("Getting the next request at index: "+Y),r=T(e),r?(t=new o.default,t.action=o.default.ACTION_COMPLETE,t.index=Y,t.mediaType=W,t.mediaInfo=Z.getMediaInfo(),B("Signal complete.")):(S(e),n=(0,b.getSegmentByIndex)(Y,e),t=P(n),!n&&Q&&Y--),t):null}function x(e){var t=e.representation;t.segments&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function N(e){if(!e.error&&W===e.mediaType){var t,n,r,i,a=e.segments,o=e.representation,s=[],u=0;for(t=0,n=a.length;t<n;t++)r=a[t],i=(0,b.getTimeBasedSegment)(H,Q,o,r.startTime,r.duration,r.timescale,r.media,r.mediaRange,u),s.push(i),i=null,u++;o.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[n-1].presentationStartTime},o.availableSegmentsNumber=n,M(o,s),E.default.hasInitialization(o)&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:o})}}var L=this.context,B=(0,_.default)(L).getInstance().log,U=(0,h.default)(L).getInstance(),k=(0,y.default)(L).getInstance(),j=e.segmentBaseLoader,H=e.timelineConverter,z=e.dashMetrics,q=e.metricsModel,V=e.baseURLController,G=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,$=void 0,Z=void 0,J=void 0;return G={initialize:t,getStreamProcessor:n,getInitRequest:v,getSegmentRequestForTime:D,getNextSegmentRequest:F,generateSegmentRequestForTime:O,updateRepresentation:C,setCurrentTime:r,getCurrentTime:i,getCurrentIndex:a,getEarliestTime:s,reset:d},function(){Y=-1,X=0,$=NaN,U.on(f.default.INITIALIZATION_LOADED,x,G),U.on(f.default.SEGMENTS_LOADED,N,G)}(),G}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=r(a),s=n(7),u=r(s),l=n(5),d=n(2),f=r(d),c=n(1),h=r(c),p=n(0),g=r(p),m=n(3),_=r(m),v=n(21),y=r(v),T=n(34),E=r(T),b=n(23),S=n(78),I=r(S),A=1;i.__dashjs_factory_name="DashHandler";var M=g.default.getClassFactory(i);M.SEGMENTS_UNAVAILABLE_ERROR_CODE=A,t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){y=(0,c.default)(h).getInstance(),T=(0,v.default)(h).getInstance(),E=(0,o.default)(h).getInstance(),M=(0,R.default)(h).create({errHandler:y,metricsModel:I,requestModifier:E})}function t(e){e.baseURLController&&(C=e.baseURLController),e.metricsModel&&(I=e.metricsModel)}function n(e,t){var r=null,i=null,a=C.resolve(e.path),o=t||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};g("Start searching for initialization.");var u=l(o),d=function(t){o.bytesLoaded=o.range.end,i=T.parse(t),r=s(i),r?(e.range=r,_.trigger(p.default.INITIALIZATION_LOADED,{representation:e})):(o.range.end=o.bytesLoaded+o.bytesToLoad,n(e,o))},f=function(){_.trigger(p.default.INITIALIZATION_LOADED,{representation:e})};M.load({request:u,success:d,error:f}),g("Perform init search: "+o.url)}function r(e,t,n,i,o){if(n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o||f;var u=null,d=null,c=!!n,h=C.resolve(e.path),p={init:!1,url:h?h.url:void 0,range:c?n:{start:0,end:1500},searching:!c,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500},m=l(p),_=function(n){var i=p.bytesToLoad,s=n.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,u=T.parse(n),(d=u.getBox("sidx"))&&d.isComplete){var l,f,c=d.references;if(null!==c&&void 0!==c&&c.length>0&&(l=1===c[0].reference_type),l){g("Initiate multiple SIDX load."),p.range.end=p.range.start+d.size;var h,m,_,v,y,E=[],b=0,S=(d.offset||p.range.start)+d.size,I=function(n){n?(E=E.concat(n),++b>=m&&o(E,e,t)):o(null,e,t)};for(h=0,m=c.length;h<m;h++)_=S,v=S+c[h].referenced_size-1,S+=c[h].referenced_size,y={start:_,end:v},r(e,null,y,p,I)}else g("Parsing segments from SIDX."),f=a(d,p),o(f,e,t)}else{if(d)p.range.start=d.offset||p.range.start,p.range.end=p.range.start+(d.size||i);else{if(s<p.bytesLoaded)return void o(null,e,t);var A=u.getLastBox();A&&A.size?(p.range.start=A.offset+A.size,p.range.end=p.range.start+i):p.range.end+=i}r(e,t,p.range,p,o)}},v=function(){o(null,e,t)};M.load({request:m,success:_,error:v}),g("Perform SIDX load: "+p.url)}function i(){M.abort(),M=null,y=null,T=null,E=null}function a(e,t){for(var n,r,i,a,o=e.references,s=o.length,l=e.timescale,d=e.earliest_presentation_time,f=t.range.start+e.offset+e.first_offset+e.size,c=[],h=0;h<s;h++)i=o[h].subsegment_duration,a=o[h].referenced_size,n=new u.default,n.duration=i,n.startTime=d,n.timescale=l,r=f+a-1,n.mediaRange=f+"-"+r,c.push(n),d+=i,f+=a;return c}function s(e){var t,n,r=e.getBox("ftyp"),i=e.getBox("moov"),a=null;return g("Searching for initialization."),i&&i.isComplete&&(t=r?r.offset:i.offset,n=i.offset+i.size-1,a=t+"-"+n,g("Found the initialization.  Range: "+a)),a}function l(e){if(e.url){var t=new A.default;return t.type=e.init?S.HTTPRequest.INIT_SEGMENT_TYPE:S.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function f(e,t,n){e?_.trigger(p.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):_.trigger(p.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new d.default(null,"error loading segments",null)})}var h=this.context,g=(0,b.default)(h).getInstance().log,_=(0,m.default)(h).getInstance(),y=void 0,T=void 0,E=void 0,I=void 0,M=void 0,C=void 0;return{setConfig:t,initialize:e,loadInitialization:n,loadSegments:r,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),o=r(a),s=n(35),u=r(s),l=n(7),d=r(l),f=n(9),c=r(f),h=n(2),p=r(h),g=n(1),m=r(g),_=n(39),v=r(_),y=n(0),T=r(y),E=n(3),b=r(E),S=n(5),I=n(15),A=r(I),M=n(19),R=r(M);i.__dashjs_factory_name="SegmentBaseLoader",t.default=T.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){I=(0,m.default)(h).getInstance(),M=(0,v.default)(h).getInstance(),C=(0,A.default)(h).create({errHandler:I,metricsModel:R,requestModifier:M})}function t(e){if(!e.baseURLController||!e.metricsModel)throw new Error("Missing config parameter(s)");w=e.baseURLController,R=e.metricsModel}function n(e){var t=[],n=void 0,r=void 0,i=void 0,a=(0,d.default)(h).create({data:e}),o=void 0;for(a.consumeTag(b.Segment.Cues),r=a.getMatroskaCodedNum();a.moreData()&&a.consumeTagAndSize(b.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=a.parseTag(b.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];a.moreData()&&a.consumeTagAndSize(b.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(i={},i.Track=a.parseTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=a.parseTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.getPos()+4>r||!a.consumeTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?n.CueTracks.push(i):(o=a.getMatroskaCodedNum(),i.BlockNumber=a.getMatroskaUint(o),n.CueTracks.push(i))}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function r(e,t,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;for(o=n(e),s=[],l=0,d=o.length;l<d;l+=1)u=new T.default,a=0,a=l<o.length-1?o[l+1].CueTime-o[l].CueTime:i-o[l].CueTime,u.duration=a,u.startTime=o[l].CueTime,u.timescale=1e3,f=o[l].CueTracks[0].ClusterPosition+t,c=l<o.length-1?o[l+1].CueTracks[0].ClusterPosition+t-1:r-1,u.mediaRange=f+"-"+c,s.push(u);return g("Parsed cues: "+s.length+" cues."),s}function i(e,t,n,i){var a=(0,d.default)(h).create({data:e}),o=void 0,s=void 0,u=n.split("-"),l=null,c={url:t,range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:l},p=void 0,m=void 0;for(g("Parse EBML header: "+c.url),a.skipOverElement(b.EBML),a.consumeTag(b.Segment),p=a.getMatroskaCodedNum(),p+=a.getPos(),m=a.getPos();a.moreData()&&!a.consumeTagAndSize(b.Segment.Info,!0);)if(!(a.skipOverElement(b.Segment.SeekHead,!0)||a.skipOverElement(b.Segment.Tracks,!0)||a.skipOverElement(b.Segment.Cues,!0)||a.skipOverElement(b.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var _=a.getMatroskaCodedNum(!0),v=a.getMatroskaCodedNum();switch(_){case b.Segment.Info.Duration.tag:o=a[b.Segment.Info.Duration.parse](v);break;default:a.setPos(a.getPos()+v)}}l=f(c);var y=function(e){s=r(e,m,p,o),i(s)},T=function(){g("Download Error: Cues "+c.url),i(null)};C.load({request:l,success:y,error:T}),g("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}function a(e,t){var n=null,r=w.resolve(e.path),i=r?r.url:void 0,a=e.range.split("-"),s=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:i,init:!0};g("Start loading initialization."),n=f(s);var u=function(){_.trigger(o.default.INITIALIZATION_LOADED,{representation:e})},l=function(){_.trigger(o.default.INITIALIZATION_LOADED,{representation:e})};C.load({request:n,success:u,error:l}),g("Perform init load: "+s.url)}function s(e,t,n,r){var a=null,o=w.resolve(e.path),s=o?o.url:void 0,u={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:a,url:s,init:!1};r=r||l,a=f(u),g("Parsing ebml header");var d=function(a){i(a,s,n,function(n){r(n,e,t)})},c=function(){r(null,e,t)};C.load({request:a,success:d,error:c})}function l(e,t,n){e?_.trigger(o.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):_.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function f(e){var t=new S.default;return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function c(){I=null,M=null,g=null}var h=this.context,g=(0,p.default)(h).getInstance().log,_=(0,u.default)(h).getInstance(),y=void 0,b=void 0,I=void 0,M=void 0,R=void 0,C=void 0,w=void 0;return y={setConfig:t,initialize:e,loadInitialization:a,loadSegments:s,reset:c},function(){b={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}(),y}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(1),u=r(s),l=n(141),d=r(l),f=n(0),c=r(f),h=n(3),p=r(h),g=n(9),m=r(g),_=n(28),v=r(_),y=n(35),T=r(y),E=n(5),b=n(15),S=r(b),I=n(19),A=r(I);i.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=c.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e.abrController&&(G=e.abrController)}function t(e){V=e,Y=V.getIndexHandler()}function n(){return V}function r(){return k}function i(){return j}function a(){return H}function s(){return q}function l(){B.off(M.default.QUALITY_CHANGE_REQUESTED,x,U),B.off(M.default.REPRESENTATION_UPDATED,P,U),B.off(M.default.WALLCLOCK_TIME_UPDATED,D,U),B.off(M.default.BUFFER_LEVEL_UPDATED,F,U),k=null,j=-1,H=!0,z=[],G=null,K=null,Q=null,W=null,X=null,$=null,Z=null,J=null}function f(e,t,n){var r,i,a=null,o=V.getStreamInfo(),s=G.getTopQualityIndexFor(n,o.id);if(H=!0,B.trigger(M.default.DATA_UPDATE_STARTED,{sender:this}),z=S(t),null===k&&"fragmentedText"!==n?(i=G.getAverageThroughput(n),a=i||G.getInitialBitrateFor(n,o),r=G.getQualityForBitrate(V.getMediaInfo(),a)):r=G.getQualityFor(n,o),r>s&&(r=s),q=_(r),k=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return H=!1,void B.trigger(M.default.DATA_UPDATE_COMPLETED,{sender:this,data:k,currentRepresentation:q});for(var u=0;u<z.length;u++)Y.updateRepresentation(z[u],!0)}function h(){var e=new Date,t=s(),n=1e3*K.getTime();W.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function g(){var e=$.calcSegmentAvailabilityRange(q,V.isDynamic());W.addDVRInfo(V.getType(),K.getTime(),V.getStreamInfo().manifestInfo,e)}function _(e){return z[e]}function y(e){return z.indexOf(e)}function E(){for(var e=0,t=z.length;e<t;e++){var n=z[e].segmentInfoType;if(null===z[e].segmentAvailabilityRange||!O.default.hasInitialization(z[e])||("SegmentBase"===n||"BaseURL"===n)&&!z[e].segments)return!1}return!0}function S(e){var t=Q.getValue();return j=Z.getIndexForAdaptation(k,t,e.period.index),Z.getRepresentationsForAdaptation(t,e)}function A(e){for(var t,n=0,r=z.length;n<r;n++)t=z[n],t.segmentAvailabilityRange=$.calcSegmentAvailabilityRange(t,e)}function R(){z.forEach(function(e){e.segmentAvailabilityRange=null})}function w(e){var t=e,n=function(){if(!a()){H=!0,B.trigger(M.default.DATA_UPDATE_STARTED,{sender:U}),R();for(var e=0;e<z.length;e++)Y.updateRepresentation(z[e],!0)}};H=!1,B.trigger(C.default.AST_IN_FUTURE,{delay:t}),setTimeout(n,t)}function P(e){if(e.sender.getStreamProcessor()===V&&a()){var t,n,r,i=e.representation,o=W.getMetricsFor("stream"),u=W.getMetricsFor(s().adaptation.type),l=J.getCurrentManifestUpdate(o),d=!1,f=0;if("dynamic"===i.adaptation.period.mpd.manifest.type){var c=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start;f=1e3*(K.computeLiveDelay(q.segmentDuration,V.getStreamInfo().manifestInfo.DVRWindowSize)-c)}if(f>0)return g(),w(f),n=new b.default(N,"Segments update failed",null),void B.trigger(M.default.DATA_UPDATE_COMPLETED,{sender:this,data:k,currentRepresentation:q,error:n});if(l){for(var p=0;p<l.trackInfo.length;p++)if(t=l.trackInfo[p],t.index===i.index&&t.mediaType===V.getType()){d=!0;break}d||W.addManifestUpdateRepresentationInfo(l,i.id,i.index,i.adaptation.period.index,V.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}E()&&(H=!1,G.setPlaybackQuality(V.getType(),V.getStreamInfo(),y(q)),W.updateManifestUpdateInfo(l,{latency:q.segmentAvailabilityRange.end-K.getTime()}),r=J.getCurrentRepresentationSwitch(u),r||h(),B.trigger(M.default.DATA_UPDATE_COMPLETED,{sender:this,data:k,currentRepresentation:q}))}}function D(e){e.isDynamic&&A(e.isDynamic)}function F(e){e.sender.getStreamProcessor()===V&&g()}function x(e){e.mediaType===V.getType()&&V.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(q=_(e.newQuality),X.setSavedBitrateSettings(e.mediaType,q.bandwidth),h())}var N=1,L=this.context,B=(0,I.default)(L).getInstance(),U=void 0,k=void 0,j=void 0,H=void 0,z=void 0,q=void 0,V=void 0,G=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,$=void 0,Z=void 0,J=void 0;return U={initialize:t,setConfig:e,getData:r,getDataIndex:i,isUpdating:a,updateData:f,getStreamProcessor:n,getCurrentRepresentation:s,getRepresentationForQuality:_,reset:l},function(){k=null,j=-1,H=!0,z=[],G=(0,c.default)(L).getInstance(),K=(0,p.default)(L).getInstance(),Q=(0,m.default)(L).getInstance(),W=(0,v.default)(L).getInstance(),X=(0,T.default)(L).getInstance(),$=(0,d.default)(L).getInstance(),Z=(0,o.default)(L).getInstance(),J=(0,u.default)(L).getInstance(),B.on(M.default.QUALITY_CHANGE_REQUESTED,x,U),B.on(M.default.REPRESENTATION_UPDATED,P,U),B.on(M.default.WALLCLOCK_TIME_UPDATED,D,U),B.on(M.default.BUFFER_LEVEL_UPDATED,F,U)}(),U}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=r(a),s=n(10),u=r(s),l=n(33),d=r(l),f=n(12),c=r(f),h=n(14),p=r(h),g=n(27),m=r(g),_=n(8),v=r(_),y=n(40),T=r(y),E=n(7),b=r(E),S=n(1),I=r(S),A=n(2),M=r(A),R=n(16),C=r(R),w=n(0),P=r(w),D=n(34),O=r(D);i.__dashjs_factory_name="RepresentationController",t.default=P.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var i;try{var o=window.performance.now();if(!(i=s.xml_str2json(e)))throw new Error("parser error");var l=window.performance.now();u.run(i);var d=window.performance.now();t.setMatchers(a),t.setIron(u),n("Parsing complete: ( xml2json: "+(l-o).toPrecision(3)+"ms, objectiron: "+(d-l).toPrecision(3)+"ms, total: "+((d-o)/1e3).toPrecision(3)+"s)")}catch(t){return r.manifestError("parsing the manifest failed","parse",e,t),null}return i}var t=this.context,n=(0,d.default)(t).getInstance().log,r=(0,o.default)(t).getInstance(),i=void 0,a=void 0,s=void 0,u=void 0;return i={parse:e},function(){a=[new v.default,new T.default,new b.default,new m.default],s=new p.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),u=new c.default([new I.default,new M.default])}(),i}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=r(a),s=n(0),u=r(s),l=n(3),d=r(l),f=n(61),c=r(f),h=n(30),p=r(h),g=n(75),m=r(g),_=n(73),v=r(_),y=n(72),T=r(y),E=n(74),b=r(E),S=n(70),I=r(S),A=n(71),M=r(A);i.__dashjs_factory_name="DashParser",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e);this._name=t,this._merge=void 0!==n?n:function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}(t)}return i(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(47),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"AdaptationSet",e,[new s.default("Representation",e,[new s.default("SubRepresentation",e)])]))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(47),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=["SegmentBase","SegmentTemplate","SegmentList"];return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Period",e,[new s.default("AdaptationSet",e,[new s.default("Representation",e)])]))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=60,l=60,d=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){return f.test(e.value)},function(e){var t=f.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*d||0),t[9]&&t[10]){var r=parseInt(t[9],10)*l+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*u*d}return new Date(n)}))}return a(t,e),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=31536e3,d=2592e3,f=86400,c=3600,h=60,p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return u.test(e.value);return!1},function(e){var t=u.exec(e),n=parseFloat(t[2]||0)*l+parseFloat(t[4]||0)*d+parseFloat(t[6]||0)*f+parseFloat(t[8]||0)*c+parseFloat(t[10]||0)*h+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n}))}return a(t,e),t}(s.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){return u.test(e.value)},function(e){return parseFloat(e)}))}return a(t,e),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){var n={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(n.hasOwnProperty(t)){var r=n[t];return void 0!==r&&r.indexOf(e.name)>=0}return!1},function(e){return String(e)}))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(){function e(e){e&&e.boxParser&&(r=e.boxParser)}function t(e){var t,n,i,a,o,s,u,l,d,f,c,h,p=r.parse(e),g=p.getBox("tfhd"),m=p.getBox("tfdt"),_=p.getBox("trun"),v=p.getBox("moof"),y=p.getBox("mfhd"),T=p.getBox("subs");c=y.sequence_number,i=_.sample_count,o=m.baseMediaDecodeTime,f=(g.base_data_offset||0)+(_.data_offset||0),s=[];var E=-1,b=-1;for(l=0;l<i;l++){u=_.samples[l],t=void 0!==u.sample_duration?u.sample_duration:g.default_sample_duration,a=void 0!==u.sample_size?u.sample_size:g.default_sample_size,n=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0;var S={dts:o,cts:o+n,duration:t,offset:v.offset+f,size:a,subSizes:[a]};if(T&&(E<T.entry_count&&l>b&&(E++,b+=T.entries[E].sample_delta),l==b)){S.subSizes=[];var I=T.entries[E];for(d=0;d<I.subsample_count;d++)S.subSizes.push(I.subsamples[d].subsample_size)}s.push(S),f+=a,o+=t}return h=o-m.baseMediaDecodeTime,{sampleList:s,sequenceNumber:c,totalDuration:h}}function n(e){var t=r.parse(e),n=t.getBox("mdhd");return n?n.timescale:NaN}var r=void 0;return{getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="FragmentedTextBoxParser",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c,h,p=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,g=p.SegmentURL_asArray.length,m=[];for(h=e.startNumber,d=(0,o.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),f=Math.max(d.start,0),c=Math.min(d.end,p.SegmentURL_asArray.length-1),s=f;s<=c;s++)l=p.SegmentURL_asArray[s],u=(0,o.getIndexBasedSegment)(r,t,e,s),u.replacementTime=(h+s-1)*e.segmentDuration,u.media=l.media?l.media:"",u.mediaRange=l.mediaRange,u.index=l.index,u.indexRange=l.indexRange,m.push(u),u=null;return e.availableSegmentsNumber=g,m}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(23);r.__dashjs_factory_name="ListSegmentsGetter";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e,t,n,i,a){var u,d=e.segmentInfoType;return"SegmentBase"!==d&&"BaseURL"!==d&&r(e,n)?("SegmentTimeline"===d?u=o.getSegments(e,t,n,a):"SegmentTemplate"===d?u=s.getSegments(e,t,n,a):"SegmentList"===d&&(u=l.getSegments(e,t,n,a)),i&&i(e,u)):u=e.segments,u}function r(e,t){var n,r,i=e.segments,a=!1;return i&&0!==i.length?(r=i[0].availabilityIdx,n=i[i.length-1].availabilityIdx,a=t<r||t>n):a=!0,a}var i=this.context,a=void 0,o=void 0,s=void 0,l=void 0;return a={getSegments:n},function(){o=(0,u.default)(i).create(e,t),s=(0,d.default)(i).create(e,t),l=(0,c.default)(i).create(e,t)}(),a}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(80),u=r(s),l=n(79),d=r(l),f=n(77),c=r(f);i.__dashjs_factory_name="SegmentsGetter";var h=o.default.getClassFactory(i);t.default=h},function(e,t,n){"use strict";function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,h=e.segmentDuration,p=e.segmentAvailabilityRange,g=[],m=null,_=null;for(f=e.startNumber,s=isNaN(h)&&!t?{start:f,end:f}:(0,o.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),l=s.start,d=s.end,u=l;u<=d;u++)_=(0,o.getIndexBasedSegment)(r,t,e,u),_.replacementTime=(f+u-1)*e.segmentDuration,m=c.media,m=(0,o.replaceTokenForTemplate)(m,"Number",_.replacementNumber),m=(0,o.replaceTokenForTemplate)(m,"Time",_.replacementTime),_.media=m,g.push(_),_=null;return isNaN(h)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((p.end-p.start)/h),g}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(23);r.__dashjs_factory_name="TemplateSegmentsGetter";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c,h,p,g,m,_,v,y,T,E=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,b=E.SegmentTimeline,S=E.SegmentURL_asArray,I=e.availableSegmentsNumber>0,A=0,M=0,R=-1,C=[],w=!1,P=function(n,i){var a=E.media,s=n.mediaRange;return S&&(a=S[i].media||"",s=S[i].mediaRange),(0,o.getTimeBasedSegment)(r,t,e,A,n.d,T,a,s,R)};for(T=e.timescale,s=b.S_asArray,g=(0,o.decideSegmentListRangeForTimeline)(r,t,n,i,a),g?(v=g.start,y=g.end):_=r.calcMediaTimeFromPresentationTime(n||0,e),l=0,d=s.length;l<d;l++){if(u=s[l],c=0,u.hasOwnProperty("r")&&(c=u.r),u.hasOwnProperty("t")&&(A=u.t,M=A/T),c<0){if((p=s[l+1])&&p.hasOwnProperty("t"))h=p.t/T;else{var D=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:r.calcSegmentAvailabilityRange(e,t).end;h=r.calcMediaTimeFromPresentationTime(D,e),e.segmentDuration=u.d/T}c=Math.ceil((h-M)/(u.d/T))-1}if(m){if(I)break;R+=c+1}else for(f=0;f<=c;f++){if(R++,g){if(R>y){if(m=!0,I)break;continue}R>=v&&C.push(P(u,R))}else{if(C.length>10){if(m=!0,I)break;continue}w?C.push(P(u,R)):M>=_-u.d/T*1.5&&(w=!0,C.push(P(u,R)))}A+=u.d,M=A/T}}return I||(e.availableSegmentsNumber=R+1),C}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(23);r.__dashjs_factory_name="TimelineSegmentsGetter";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.period=null,this.index=-1,this.type=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}function a(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}function o(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}function s(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("IV_size","uint",8),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}function u(){var e=[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178],t=[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159],n=[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244];i(this.usertype,e)&&(this._procFullBox(),this._parsing&&(this.type="tfxd"),this._procField("fragment_absolute_time","uint",1===this.version?64:32),this._procField("fragment_duration","uint",1===this.version?64:32)),i(this.usertype,t)&&(this._procFullBox(),this._parsing&&(this.type="tfrf"),this._procField("fragment_count","uint",8),this._procEntries("entry",this.fragment_count,function(e){this._procEntryField(e,"fragment_absolute_time","uint",1===this.version?64:32),this._procEntryField(e,"fragment_duration","uint",1===this.version?64:32)})),i(this.usertype,n)&&(this._parsing&&(this.type="sepiff"),s.call(this))}function l(){function e(e){var t=h.default.createBox("ftyp",e);return t.major_brand="iso6",t.minor_version=1,t.compatible_brands=[],t.compatible_brands[0]="isom",t.compatible_brands[1]="iso6",t.compatible_brands[2]="msdh",t}function t(e){var t=h.default.createBox("moov",e);n(t);var d=h.default.createBox("trak",t);r(d);var f=h.default.createBox("mdia",d);i(f),a(f);var c=h.default.createBox("minf",f);switch(D.type){case"video":o(c);break;case"audio":s(c)}u(h.default.createBox("dinf",c));var p=h.default.createBox("stbl",c);h.default.createFullBox("stts",p)._data=[0,0,0,0,0,0,0,0],h.default.createFullBox("stsc",p)._data=[0,0,0,0,0,0,0,0],h.default.createFullBox("stco",p)._data=[0,0,0,0,0,0,0,0],h.default.createFullBox("stsz",p)._data=[0,0,0,0,0,0,0,0,0,0,0,0],l(p),b(h.default.createBox("mvex",t)),F&&T(t,F[0].pro.__text)}function n(e){var t=h.default.createFullBox("mvhd",e);return t.version=1,t.creation_time=0,t.modification_time=0,t.timescale=R,t.duration=Math.round(P.duration*R),t.rate=1,t.volume=1,t.reserved1=0,t.reserved2=[0,0],t.matrix=[1,0,0,0,1,0,0,0,16384],t.pre_defined=[0,0,0,0,0,0],t.next_track_ID=x+1,t}function r(e){var t=h.default.createFullBox("tkhd",e);return t.version=1,t.flags=7,t.creation_time=0,t.modification_time=0,t.track_ID=x,t.reserved1=0,t.duration=Math.round(P.duration*R),t.reserved2=[0,0],t.layer=0,t.alternate_group=0,t.volume=1,t.reserved3=0,t.matrix=[1,0,0,0,1,0,0,0,16384],t.width=O.width,t.height=O.height,t}function i(e){var t=h.default.createFullBox("mdhd",e);return t.version=1,t.creation_time=0,t.modification_time=0,t.timescale=R,t.duration=Math.round(P.duration*R),t.language=D.lang||"und",t.pre_defined=0,t}function a(e){var t=h.default.createFullBox("hdlr",e);switch(t.pre_defined=0,D.type){case"video":t.handler_type="vide";break;case"audio":t.handler_type="soun";break;default:t.handler_type="meta"}return t.name=O.id,t.reserved=[0,0,0],t}function o(e){var t=h.default.createFullBox("vmhd",e);return t.flags=1,t.graphicsmode=0,t.opcolor=[0,0,0],t}function s(e){var t=h.default.createFullBox("smhd",e);return t.flags=1,t.balance=0,t.reserved=0,t}function u(e){var t=h.default.createFullBox("dref",e);t.entry_count=1,t.entries=[];var n=h.default.createFullBox("url ",t,!1);return n.location="",n.flags=1,t.entries.push(n),t}function l(e){var t=h.default.createFullBox("stsd",e);switch(t.entries=[],D.type){case"video":case"audio":t.entries.push(d(t))}return t.entry_count=t.entries.length,t}function d(e){var t=O.codecs.substring(0,O.codecs.indexOf("."));switch(t){case"avc1":return f(e,t);case"mp4a":return p(e,t);default:throw{name:"Unsupported codec",message:"Unsupported codec",data:{codec:t}}}}function f(e,t){var n=void 0;if(n=F?h.default.createBox("encv",e,!1):h.default.createBox("avc1",e,!1),n.reserved1=[0,0,0,0,0,0],n.data_reference_index=1,n.pre_defined1=0,n.reserved2=0,n.pre_defined2=[0,0,0],n.height=O.height,n.width=O.width,n.horizresolution=72,n.vertresolution=72,n.reserved3=0,n.frame_count=1,n.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n.depth=24,n.pre_defined3=65535,n.config=c(),F){var r=h.default.createBox("sinf",n);_(r,t),v(r),y(r)}return n}function c(){for(var e=null,t=15,n=[],r=[],i=0,a=0,o=0,s=O.codecPrivateData.split("00000001").slice(1),u=void 0,l=0;l<s.length;l++)switch(u=S(s[l]),31&u[0]){case C:n.push(u),t+=u.length+2;break;case w:r.push(u),t+=u.length+2}n.length>0&&(i=n[0][1],o=n[0][2],a=n[0][3]),e=new Uint8Array(t);var d=0;e[d++]=(4278190080&t)>>24,e[d++]=(16711680&t)>>16,e[d++]=(65280&t)>>8,e[d++]=255&t,e.set([97,118,99,67],d),d+=4,e[d++]=1,e[d++]=i,e[d++]=o,e[d++]=a,e[d++]=255,e[d++]=224|n.length;for(var f=0;f<n.length;f++)e[d++]=(65280&n[f].length)>>8,e[d++]=255&n[f].length,e.set(n[f],d),d+=n[f].length;e[d++]=r.length;for(var c=0;c<r.length;c++)e[d++]=(65280&r[c].length)>>8,e[d++]=255&r[c].length,e.set(r[c],d),d+=r[c].length;return e}function p(e,t){var n=void 0;if(n=F?h.default.createBox("enca",e,!1):h.default.createBox("mp4a",e,!1),n.reserved1=[0,0,0,0,0,0],n.data_reference_index=1,n.reserved2=[0,0],n.channelcount=O.audioChannels,n.samplesize=16,n.pre_defined=0,n.reserved_3=0,n.samplerate=O.audioSamplingRate<<16,n.esds=m(),F){var r=h.default.createBox("sinf",n);_(r,t),v(r),y(r)}return n}function m(){var e=S(O.codecPrivateData),t=34+e.length,n=new Uint8Array(t),r=0;return n[r++]=(4278190080&t)>>24,n[r++]=(16711680&t)>>16,n[r++]=(65280&t)>>8,n[r++]=255&t,n.set([101,115,100,115],r),r+=4,n.set([0,0,0,0],r),r+=4,n[r++]=3,n[r++]=20+e.length,n[r++]=(65280&x)>>8,n[r++]=255&x,n[r++]=0,n[r++]=4,n[r++]=15+e.length,n[r++]=64,n[r]=20,n[r]|=0,n[r++]|=1,n[r++]=255,n[r++]=255,n[r++]=255,n[r++]=(4278190080&O.bandwidth)>>24,n[r++]=(16711680&O.bandwidth)>>16,n[r++]=(65280&O.bandwidth)>>8,n[r++]=255&O.bandwidth,n[r++]=(4278190080&O.bandwidth)>>24,n[r++]=(16711680&O.bandwidth)>>16,n[r++]=(65280&O.bandwidth)>>8,n[r++]=255&O.bandwidth,n[r++]=5,n[r++]=e.length,n.set(e,r),n}function _(e,t){h.default.createBox("frma",e).data_format=I(t)}function v(e){var t=h.default.createFullBox("schm",e);t.flags=0,t.version=0,t.scheme_type=1667591779,t.scheme_version=65536}function y(e){E(h.default.createBox("schi",e))}function T(e,t){var n=h.default.createFullBox("pssh",e),r=g.default.decodeArray(t);n.flags=0,n.version=0,n.SystemID=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n.DataSize=r.length,n.Data=r}function E(e){var t=h.default.createFullBox("tenc",e);t.flags=0,t.version=0,t.default_IsEncrypted=1,t.default_IV_size=8,t.default_KID=F&&F.length>0&&F[0]["cenc:default_KID"]?F[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function b(e){var t=h.default.createFullBox("trex",e);return t.track_ID=x,t.default_sample_description_index=1,t.default_sample_duration=0,t.default_sample_size=0,t.default_sample_flags=0,t}function S(e){var t=new Uint8Array(e.length/2),n=void 0;for(n=0;n<e.length/2;n+=1)t[n]=parseInt(""+e[2*n]+e[2*n+1],16);return t}function I(e){var t=0,n=void 0;for(n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function A(n){var r=void 0;return O=n,D=O.adaptation,P=D.period,x=D.index+1,F=P.mpd.manifest.Period_asArray[P.index].AdaptationSet_asArray[D.index].ContentProtection,r=h.default.createFile(),e(r),t(r),r.write()}function M(e){var t=void 0,n=h.default.parseBuffer(e.response),r=n.fetch("tfhd");r.track_ID=e.request.mediaInfo.index+1;var i=n.fetch("tfdt"),a=n.fetch("traf");null===i&&(i=h.default.createFullBox("tfdt",a,r),i.version=1,i.flags=0,i.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var o=n.fetch("trun"),s=n.fetch("tfxd");s&&(s._parent.boxes.splice(s._parent.boxes.indexOf(s),1),s=null);var u=n.fetch("tfrf");u&&(u._parent.boxes.splice(u._parent.boxes.indexOf(u),1),u=null);var l=n.fetch("sepiff");if(null!==l){l.type="senc",l.usertype=void 0;var d=n.fetch("saio");if(null===d){d=h.default.createFullBox("saio",a),d.version=0,d.flags=0,d.entry_count=1,d.offset=[];var f=h.default.createFullBox("saiz",a);if(f.version=0,f.flags=0,f.sample_count=l.sample_count,f.default_sample_info_size=0,f.sample_info_size=[],2&l.flags)for(t=0;t<l.sample_count;t+=1)f.sample_info_size[t]=10+6*l.entry[t].NumberOfEntries;else f.default_sample_info_size=8}}r.flags&=16777214,r.flags|=131072,o.flags|=1;var c=n.fetch("moof"),p=c.getLength();o.data_offset=p+8,e.response=n.write()}var R=1e7,C=7,w=8,P=void 0,D=void 0,O=void 0,F=void 0,x=void 0;return{generateMoov:A,processMoof:M}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),f=r(d),c=n(29),h=r(c),p=n(43),g=r(p);h.default.addBoxProcessor("uuid",u),h.default.addBoxProcessor("saio",a),h.default.addBoxProcessor("saiz",o),h.default.addBoxProcessor("senc",s),l.__dashjs_factory_name="MssFragmentProcessor",t.default=f.default.getClassFactory(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=e.sender.getStreamProcessor(),r=new m.default,i=t.getRepresentationController(),a=i.getCurrentRepresentation(),s=void 0;s=a.adaptation.period,r.mediaType=a.adaptation.type,r.type=_.HTTPRequest.INIT_SEGMENT_TYPE,r.range=a.range,s.start,r.quality=a.index,r.mediaInfo=t.getMediaInfo(),r.representationId=a.id;var u=n(r,t.getStreamInfo().id);u.bytes=c.generateMoov(a),f.trigger(o.default.INIT_FRAGMENT_LOADED,{chunk:u,fragmentModel:t.getFragmentModel()}),e.sender=null}function n(e,t){var n=new p.default;return n.streamId=t,n.mediaInfo=e.mediaInfo,n.segmentType=e.type,n.start=e.startTime,n.duration=e.duration,n.end=n.start+n.duration,n.index=e.index,n.quality=e.quality,n.representationId=e.representationId,n}function r(e){c.processMoof(e)}function i(){f.on(o.default.INIT_REQUESTED,t,g,d.default.EVENT_PRIORITY_HIGH),f.on(u.default.FRAGMENT_LOADING_COMPLETED,r,g,d.default.EVENT_PRIORITY_HIGH)}function a(){f.off(o.default.INIT_REQUESTED,t,this),f.off(u.default.FRAGMENT_LOADING_COMPLETED,r,this)}function s(){return h=(0,E.default)(l).create(e)}var l=this.context,f=e.eventBus,c=(0,y.default)(l).create(),h=void 0,g=void 0;return g={reset:a,createMssParser:s,registerEvents:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(16),u=r(s),l=n(1),d=r(l),f=n(0),c=r(f),h=n(57),p=r(h),g=n(15),m=r(g),_=n(5),v=n(85),y=r(v),T=n(87),E=r(T);i.__dashjs_factory_name="MssHandler";var b=c.default.getClassFactory(i);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t={},r=void 0,i=void 0;t.duration=0===parseFloat(e.getAttribute("Duration"))?1/0:parseFloat(e.getAttribute("Duration"))/b,t.AdaptationSet_asArray=[],r=e.getElementsByTagName("StreamIndex");for(var a=0;a<r.length;a++)null!==(i=n(r[a]))&&t.AdaptationSet_asArray.push(i);return t.AdaptationSet_asArray.length>0&&(t.AdaptationSet=t.AdaptationSet_asArray.length>1?t.AdaptationSet_asArray:t.AdaptationSet_asArray[0]),t}function n(e){var t={},n=[],i={},a=void 0,s=void 0,u=void 0,l=void 0;for(t.id=e.getAttribute("Name"),t.contentType=e.getAttribute("Type"),t.lang=e.getAttribute("Language")||"und",t.mimeType=A[t.contentType],t.subType=e.getAttribute("Subtype"),t.maxWidth=e.getAttribute("MaxWidth"),t.maxHeight=e.getAttribute("MaxHeight"),i=o(e),a=e.getElementsByTagName("QualityLevel"),l=0;l<a.length;l++)a[l].BaseURL=t.BaseURL,a[l].mimeType=t.mimeType,a[l].Id=t.id+"_"+a[l].getAttribute("Index"),null!==(s=r(a[l],e))&&(s.SegmentTemplate=i,n.push(s));return 0===n.length?null:(t.Representation=n.length>1?n:n[0],t.Representation_asArray=n,t.SegmentTemplate=i,u=i.SegmentTimeline.S_asArray,{start:u[0].t/i.timescale,end:(u[u.length-1].t+u[u.length-1].d)/i.timescale},t)}function r(e,t){var n={},r=null;return n.id=e.Id,n.bandwidth=parseInt(e.getAttribute("Bitrate"),10),n.mimeType=e.mimeType,n.width=parseInt(e.getAttribute("MaxWidth"),10),n.height=parseInt(e.getAttribute("MaxHeight"),10),r=e.getAttribute("FourCC"),null===r&&(r=t.getAttribute("FourCC")),null===r&&(r="AAC"),-1===S.indexOf(r.toUpperCase())?(T("[MssParser] Codec not supported: "+r),null):("H264"===r||"AVC1"===r?n.codecs=i(e):r.indexOf("AAC")>=0?(n.codecs=a(e,r),n.audioSamplingRate=parseInt(e.getAttribute("SamplingRate"),10),n.audioChannels=parseInt(e.getAttribute("Channels"),10)):(r.indexOf("TTML")||r.indexOf("DFXP"))&&(n.codecs="stpp"),n.codecPrivateData=""+e.getAttribute("CodecPrivateData"),n.BaseURL=e.BaseURL,n)}function i(e){var t=e.getAttribute("CodecPrivateData").toString(),n=void 0;return n=/00000001[0-9]7/.exec(t),"avc1."+(n&&n[0]?t.substr(t.indexOf(n[0])+10,6):void 0)}function a(e,t){var n=0,r=e.getAttribute("CodecPrivateData").toString(),i=parseInt(e.getAttribute("SamplingRate"),10),a=void 0,o=void 0,s=void 0,u=void 0;return"AACH"===t&&(n=5),void 0===r||""===r?(n=2,s=I[i],"AACH"===t?(n=5,r=new Uint8Array(4),u=I[2*i],r[0]=n<<3|s>>1,r[1]=s<<7|e.Channels<<3|u>>1,r[2]=u<<7|8,r[3]=0,o=new Uint16Array(2),o[0]=(r[0]<<8)+r[1],o[1]=(r[2]<<8)+r[3],a=o[0].toString(16),a=o[0].toString(16)+o[1].toString(16)):(r=new Uint8Array(2),r[0]=n<<3|s>>1,r[1]=s<<7|parseInt(e.getAttribute("Channels"),10)<<3,o=new Uint16Array(1),o[0]=(r[0]<<8)+r[1],a=o[0].toString(16)),r=""+a,r=r.toUpperCase(),e.setAttribute("CodecPrivateData",r)):0===n&&(n=(248&parseInt(r.substr(0,2),16))>>3),"mp4a.40."+n}function o(e){var t={},n=void 0;return n=e.getAttribute("Url").replace("{bitrate}","$Bandwidth$"),n=n.replace("{start time}","$Time$"),t.media=n,t.timescale=b,t.SegmentTimeline=s(e),t}function s(e){var t={},n=e.getElementsByTagName("c"),r=[],i=void 0,a=void 0,o=void 0;for(i=0;i<n.length;i++)a=parseFloat(n[i].getAttribute("t")),o=parseFloat(n[i].getAttribute("d")),0!==i||a||(a=0),i>0&&(r[r.length-1].d||(r[r.length-1].d=a-r[r.length-1].t),a||(a=r[r.length-1].t+r[r.length-1].d)),r.push({d:o,t:a});return t.S=r,t.S_asArray=r,t}function l(e){var t=void 0,n=void 0,r=void 0,i=void 0;return t=c.default.decodeArray(e.firstChild.data),n=f(t),n=new Uint16Array(n.buffer),n=String.fromCharCode.apply(null,n),r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelector("KID").textContent,i=c.default.decodeArray(i),h(i),i}function f(e){var t=void 0,n=void 0,r=void 0,i=0;for((e[i+3]<<24)+(e[i+2]<<16)+(e[i+1]<<8)+e[i],i+=4,(e[i+1]<<8)+e[i],i+=2;i<e.length;)if(t=(e[i+1]<<8)+e[i],i+=2,1===t)return n=(e[i+1]<<8)+e[i],i+=2,r=new Uint8Array(n),r.set(e.subarray(i,i+n)),r;return null}function h(e){p(e,0,3),p(e,1,2),p(e,4,5),p(e,6,7)}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e){var t={},n=void 0;return n={__text:e.firstChild.data,__prefix:"mspr"},t.schemeIdUri="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",t.value="com.microsoft.playready",t.pro=n,t.pro_asArray=n,t}function m(e,n){var r={},i=[],a=e.getElementsByTagName("SmoothStreamingMedia")[0],o=e.getElementsByTagName("Protection")[0],s=null,u=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,m=void 0,_=void 0,v=void 0;for(r.protocol="MSS",r.profiles="urn:mpeg:dash:profile:isoff-live:2011",r.type="TRUE"===a.getAttribute("IsLive")?"dynamic":"static",r.timeShiftBufferDepth=parseFloat(a.getAttribute("DVRWindowLength"))/b,r.mediaPresentationDuration=0===parseFloat(a.getAttribute("Duration"))?1/0:parseFloat(a.getAttribute("Duration"))/b,r.minBufferTime=R.getStableBufferTime(),"dynamic"===r.type&&(r.availabilityStartTime=new Date(n.getTime()-1e3*r.timeShiftBufferDepth)),r.Period=t(a),r.Period_asArray=[r.Period],u=r.Period,u.start=0,void 0!==o&&(s=e.getElementsByTagName("ProtectionHeader")[0],s.firstChild.data=s.firstChild.data.replace(/\n|\r/g,""),c=l(s),f=g(s),f["cenc:default_KID"]=c,i.push(f),r.ContentProtection=i,r.ContentProtection_asArray=i),d=u.AdaptationSet_asArray,v=0;v<d.length;v+=1)"static"===r.type&&"text"!==d[v].contentType?(p=d[v].SegmentTemplate.SegmentTimeline.S_asArray[0],m=d[v].SegmentTemplate.SegmentTimeline.S_asArray[d[v].SegmentTemplate.SegmentTimeline.S_asArray.length-1],d[v].SegmentTemplate.initialization="$Bandwidth$",_=parseFloat(p.t)/b,u.start=0===u.start?_:Math.max(u.start,_),h=parseFloat(((m.t+m.d)/b).toFixed(3)),!isNaN(h)&&h<r.mediaPresentationDuration&&(r.mediaPresentationDuration=h,u.duration=h)):d[v].SegmentTemplate.initialization="$Bandwidth$",void 0!==r.ContentProtection&&(d[v].ContentProtection=r.ContentProtection,d[v].ContentProtection_asArray=r.ContentProtection_asArray);return delete r.ContentProtection,delete r.ContentProtection_asArray,r}function _(e){var t=null;if(window.DOMParser)try{var n=new window.DOMParser;if(t=n.parseFromString(e,"text/xml"),t.getElementsByTagName("parsererror").length>0)throw new Error("Error parsing XML")}catch(n){E.manifestError("parsing the manifest failed","parse",e,n),t=null}return t}function v(e){var t=null,n=null,r=window.performance.now();t=_(e);var i=window.performance.now();if(null===t)return null;n=m(t,new Date);var a=window.performance.now();return T("Parsing complete: (xmlParsing: "+(i-r).toPrecision(3)+"ms, mss2dash: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),n}var y=this.context,T=(0,u.default)(y).getInstance().log,E=(0,d.default)(y).getInstance(),b=1e7,S=["AAC","AACL","AVC1","H264","TTML","DFXP"],I={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},A={video:"video/mp4",audio:"audio/mp4",text:"application/mp4"},M=void 0,R=void 0;return M={parse:v},function(){R=e.mediaPlayerModel}(),M}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(3),u=r(s),l=n(9),d=r(l),f=n(43),c=r(f);i.__dashjs_factory_name="MssParser",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=function(t){s.trigger(p.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new u.default(e.url);f.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function n(e){var t=function(t,n){s.trigger(p.default.LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:l})};e?f.load({request:e,progress:function(){s.trigger(p.default.LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new d.default(_,r,n))}}):t(void 0,new d.default(v,y))}function r(){f&&f.abort()}function i(){f&&(f.abort(),f=null)}var a=this.context,s=(0,c.default)(a).getInstance(),l=void 0,f=void 0;return l={checkForExistence:t,load:n,abort:r,reset:i},function(){f=(0,o.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=r(a),s=n(149),u=r(s),l=n(7),d=r(l),f=n(1),c=r(f),h=n(2),p=r(h),g=n(0),m=r(g),_=1,v=2,y="request is null";i.__dashjs_factory_name="FragmentLoader";var T=m.default.getClassFactory(i);T.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=_,T.FRAGMENT_LOADER_ERROR_NULL_REQUEST=v,t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){s.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function n(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(b?(t=b.createMssParser(),b.registerEvents()):f.manifestError("manifest type unsupported","createParser"),t):e.indexOf("MPD")>-1?(0,A.default)(a).create():t}function r(e){var t=new p.default(e,_.HTTPRequest.MPD_TYPE);g.load({request:t,success:function(t,r,i){var a,o;if(i.responseURL&&i.responseURL!==e?(o=l.parseBaseUrl(i.responseURL),a=i.responseURL):(l.isRelative(e)&&(e=l.resolve(e,window.location.href)),o=l.parseBaseUrl(e)),null===T&&(T=n(t)),null===T)return void s.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(M,"Failed detecting manifest type: "+e)});var u=T.parse(t,v);u?(u.url=a||e,u.originalUrl||(u.originalUrl=u.url),u.baseUri=o,u.loadedTime=new Date,v.resolveManifestOnLoad(u)):s.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(M,C)})},error:function(t,n,r){s.trigger(E.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new m.default(R,"Failed loading manifest: "+e+", "+r)})}})}function i(){s.off(E.default.XLINK_READY,t,h),v&&(v.reset(),v=null),g&&(g.abort(),g=null),b&&b.reset()}var a=this.context,s=(0,y.default)(a).getInstance(),l=(0,d.default)(a).getInstance(),f=(0,c.default)(a).getInstance(),h=void 0,g=void 0,v=void 0,T=void 0,b=e.mssHandler;return h={load:r,reset:i},function(){s.on(E.default.XLINK_READY,t,h),g=(0,u.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),v=(0,o.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),T=null}(),h}Object.defineProperty(t,"__esModule",{value:!0});var a=n(102),o=r(a),s=n(19),u=r(s),l=n(21),d=r(l),f=n(9),c=r(f),h=n(58),p=r(h),g=n(7),m=r(g),_=n(5),v=n(1),y=r(v),T=n(2),E=r(T),b=n(0),S=r(b),I=n(68),A=r(I),M=1,R=2,C="parsing failed";i.__dashjs_factory_name="ManifestLoader";var w=S.default.getClassFactory(i);w.MANIFEST_LOADER_ERROR_PARSING_FAILURE=M,w.MANIFEST_LOADER_ERROR_LOADING_FAILURE=R,t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&(e.manifestModel&&(M=e.manifestModel),e.dashManifestModel&&(R=e.dashManifestModel))}function t(e){A=e,E=NaN,b=null,I=!1,S=!0,C=(0,c.default)(v).getInstance(),T.on(u.default.STREAMS_COMPOSED,_,this),T.on(u.default.PLAYBACK_STARTED,g,this),T.on(u.default.PLAYBACK_PAUSED,m,this),T.on(u.default.INTERNAL_MANIFEST_LOADED,h,this)}function n(e){d(e)}function r(){return A}function i(){T.off(u.default.PLAYBACK_STARTED,g,this),T.off(u.default.PLAYBACK_PAUSED,m,this),T.off(u.default.STREAMS_COMPOSED,_,this),T.off(u.default.INTERNAL_MANIFEST_LOADED,h,this),a(),S=!0,I=!1,E=NaN,C=null}function a(){null!==b&&(clearInterval(b),b=null)}function s(){a(),isNaN(E)||(y("Refresh manifest in "+E+" seconds."),b=setTimeout(f,1e3*E))}function l(){I=!0;var e=M.getValue(),t=e.url,n=R.getLocation(e);n&&(t=n),A.load(t)}function d(e){M.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;E=R.getManifestUpdatePeriod(e,n),T.trigger(u.default.MANIFEST_UPDATED,{manifest:e}),y("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),S||s()}function f(){S&&!C.getScheduleWhilePaused()||I||l()}function h(e){e.error||d(e.manifest)}function g(){S=!1,s()}function m(){S=!0,a()}function _(){I=!1}var v=this.context,y=(0,p.default)(v).getInstance().log,T=(0,o.default)(v).getInstance(),E=void 0,b=void 0,S=void 0,I=void 0,A=void 0,M=void 0,R=void 0,C=void 0;return{initialize:t,setManifest:n,getManifestLoader:r,refreshManifest:l,setConfig:e,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(4),c=r(f),h=n(3),p=r(h);i.__dashjs_factory_name="ManifestUpdater",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){window.removeEventListener("load",r),s.createAll()}function i(){window.dashjs&&(window.clearInterval(u),s.createAll())}Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,a=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==r})[0])&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},i=(0,o.default)(n).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+a+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var a=[];t=t||"[data-dashjs-player]",i=i||document;for(var o=i.querySelectorAll(t),s=0;s<o.length;s++){var u=e(o[s],null);a.push(u)}for(var l=i.querySelectorAll('source[type="'+r+'"]'),d=0;d<l.length;d++){var f=n(l[d]),c=e(f,null);a.push(c)}return a}function n(e){return"video"===e.nodeName.toLowerCase()?e:n(e.parentNode)}var r="application/dash+xml";return{create:e,createAll:t}}(),u=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():u=window.setInterval(i,500):window.addEventListener("load",r)),t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){fe=e,(ge=t)&&(J.on(x.default.KEY_ERROR,R,se),J.on(x.default.SERVER_CERTIFICATE_UPDATED,R,se),J.on(x.default.LICENSE_REQUEST_COMPLETE,R,se),J.on(x.default.KEY_SYSTEM_SELECTED,R,se),J.on(x.default.KEY_SESSION_CREATED,R,se))}function n(e){le||(J.on(x.default.CURRENT_TRACK_CHANGED,F,se),H(e),le=!0)}function r(){for(var e=ue.length,t=0;t<e;t++)ue[t].reset();ue=[],le=!1,de=!1,E(),J.off(x.default.CURRENT_TRACK_CHANGED,F,se)}function i(){_e&&(_e.pause(),_e=null),ye&&(ye.reset(),ye=null),r(),ve=null,Ee=null,te=null,ee=null,ne=null,re=null,Z=null,ie=null,he=!1,pe=!1,ce={},J.off(x.default.DATA_UPDATE_COMPLETED,Y,se),J.off(x.default.BUFFERING_COMPLETED,G,se),J.off(x.default.KEY_ERROR,R,se),J.off(x.default.SERVER_CERTIFICATE_UPDATED,R,se),J.off(x.default.LICENSE_REQUEST_COMPLETE,R,se),J.off(x.default.KEY_SYSTEM_SELECTED,R,se),J.off(x.default.KEY_SESSION_CREATED,R,se)}function a(){return fe.duration}function s(){return fe.start}function l(){return fe.index}function f(){return fe.id}function h(){return fe}function g(e){return null!==q(e)}function _(e){var t=q(e);return Ee.getBitrateList(t)}function y(){Te&&Te.start()}function E(){Te&&Te.clear()}function S(){return le}function A(){return pe}function R(e){e.error&&(ie.mediaKeySessionError(e.error),Z(e.error),i())}function w(e){return"text"===e.type?e.mimeType:e.type}function D(e,t,n){var r,i,a=e.type;if("muxed"===a&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Z(i),ie.manifestError(i,"multiplexedrep",ee.getValue()),!1;if("text"===a||"fragmentedText"===a||"embeddedText"===a)return!0;if(r=e.codec,Z(a+" codec: "+r),e.contentProtection&&!re.supportsEncryptedMedia())ie.capabilityError("encryptedmedia");else if(!re.supportsCodec((0,v.default)($).getInstance().getElement(),r))return i=a+"Codec ("+r+") is not supported.",ie.manifestError(i,"codec",n),Z(i),!1;return!0}function F(e){if(e.newMediaInfo.streamInfo.id===fe.id){var t=K(e.oldMediaInfo);if(t){var n=_e.getTime(),r=t.getBuffer(),i=e.newMediaInfo,a=ee.getValue(),o=ue.indexOf(t),s=t.getMediaSource();"fragmentedText"!==i.type?(t.reset(!0),U(i,a,s,{buffer:r,replaceIdx:o,currentTime:n}),_e.seek(_e.getTime())):t.updateMediaInfo(a,i)}}}function N(e){return"webm"===e.split("/")[1].toLowerCase()}function B(e){var t=N(e.mimeType)?(0,C.default)($).getInstance():(0,M.default)($).getInstance();return t.setConfig({baseURLController:oe,metricsModel:(0,T.default)($).getInstance()}),t.initialize(),(0,I.default)($).create({segmentBaseLoader:t,timelineConverter:ae,dashMetrics:(0,P.default)($).getInstance(),metricsModel:(0,T.default)($).getInstance(),baseURLController:oe})}function U(e,t,n,r){var i=(0,u.default)($).create({indexHandler:B(e),timelineConverter:ae,adapter:ne,manifestModel:ee}),a=ne.getAllMediaInfoForType(t,fe,e.type);if(i.initialize(w(e),ye,n,se,Te),Ee.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),i.getIndexHandler().setCurrentTime(r.currentTime),ue[r.replaceIdx]=i):ue.push(i),"text"===e.type||"fragmentedText"===e.type){for(var o,s=0;s<a.length;s++)a[s].index===e.index&&(o=s),i.updateMediaInfo(t,a[s]);"fragmentedText"===e.type&&i.updateMediaInfo(t,a[o])}else i.updateMediaInfo(t,e)}function k(e,t){var n,r=ee.getValue(),i=ne.getAllMediaInfoForType(r,fe,e),a=null;if(!i||0===i.length)return void Z("No "+e+" data.");for(var o=0,s=i.length;o<s;o++)if(a=i[o],"embeddedText"===e)be.addEmbeddedTrack(a);else{if(!D(a,t,r))continue;ve.isMultiTrackSupportedByType(a.type)&&ve.addTrack(a,fe)}"embeddedText"!==e&&0!==ve.getTracksFor(e,fe).length&&(ve.checkInitialMediaSettingsForType(e,fe),n=ve.getCurrentTrackFor(e,fe),U(n,r,t))}function H(e){var t,n=ee.getValue();if(Te=(0,c.default)($).getInstance(),Te.initialize(),Te.setConfig({manifestModel:ee,manifestUpdater:te}),t=ne.getEventsFor(n,fe),Te.addInlineEvents(t),he=!0,k("video",e),k("audio",e),k("text",e),k("fragmentedText",e),k("embeddedText",e),k("muxed",e),V(),de=!0,he=!1,0===ue.length){var r="No streams to play.";ie.manifestError(r,"nostreams",n),Z(r)}else me.initialize(ae,ue[0]),z()}function z(){var e=ue.length,t=!!ce.audio||!!ce.video,n=t?new Error(X,"Data update failed",null):null,r=0;for(r;r<e;r++)if(ue[r].isUpdating()||he)return;pe=!0,de&&(ge&&ge.initialize(ee.getValue(),q("audio"),q("video")),J.trigger(x.default.STREAM_INITIALIZED,{streamInfo:fe,error:n}))}function q(e){for(var t=ue.length,n=null,r=0;r<t;r++)if(n=ue[r],n.getType()===e)return n.getMediaInfo();return null}function V(){for(var e=0,t=ue.length;e<t;e++)ue[e].createBuffer()}function G(e){if(e.streamInfo===fe){var t=Q(),n=t.length,r=0;for(r;r<n;r++)if(!t[r].isBufferingCompleted())return;J.trigger(x.default.STREAM_BUFFERING_COMPLETED,{streamInfo:fe})}}function Y(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===fe&&(ce[t.getType()]=e.error,z())}function K(e){return!!e&&Q().filter(function(t){return t.getType()===e.type})[0]}function Q(){var e,t,n=ue.length,r=[],i=0;for(i;i<n;i++)t=ue[i],"audio"!==(e=t.getType())&&"video"!==e&&"fragmentedText"!==e||r.push(t);return r}function W(e){Z("Manifest updated... updating data system wide.");var t=ee.getValue();if(le=!1,he=!0,pe=!1,fe=e,Te){var n=ne.getEventsFor(t,fe);Te.addInlineEvents(n)}for(var r=0,i=ue.length;r<i;r++){var a=ue[r],o=ne.getMediaInfoForType(t,fe,a.getType());Ee.updateTopQualityIndex(o),a.updateMediaInfo(t,o)}he=!1,z()}var X=1,$=this.context,Z=(0,L.default)($).getInstance().log,J=(0,O.default)($).getInstance(),ee=e.manifestModel,te=e.manifestUpdater,ne=e.adapter,re=e.capabilities,ie=e.errHandler,ae=e.timelineConverter,oe=e.baseURLController,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,pe=void 0,ge=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0;return se={initialize:t,activate:n,deactivate:r,getDuration:a,getStartTime:s,getStreamIndex:l,getId:f,getStreamInfo:h,hasMedia:g,getBitrateListFor:_,startEventController:y,isActivated:S,isInitialized:A,updateData:W,reset:i,getProcessors:Q},function(){ue=[],le=!1,de=!1,fe=null,ce={},he=!1,pe=!1,me=(0,o.default)($).getInstance(),_e=(0,b.default)($).getInstance(),Ee=(0,m.default)($).getInstance(),ve=(0,d.default)($).getInstance(),ye=(0,p.default)($).create(),be=(0,j.default)($).getInstance(),J.on(x.default.BUFFERING_COMPLETED,G,se),J.on(x.default.DATA_UPDATE_COMPLETED,Y,se)}(),se}Object.defineProperty(t,"__esModule",{value:!0});var a=n(42),o=r(a),s=n(93),u=r(s),l=n(17),d=r(l),f=n(97),c=r(f),h=n(98),p=r(h),g=n(12),m=r(g),_=n(20),v=r(_),y=n(8),T=r(y),E=n(14),b=r(E),S=n(64),I=r(S),A=n(65),M=r(A),R=n(66),C=r(R),w=n(10),P=r(w),D=n(1),O=r(D),F=n(2),x=r(F),N=n(3),L=r(N),B=n(0),U=r(B),k=n(18),j=r(k);i.__dashjs_factory_name="Stream",t.default=U.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n,r,i){J=e,te=r,ne=i,se=t,$=te.getStreamInfo().manifestInfo.isDynamic,Y.initialize(this),re=(0,o.default)(G).getInstance(),re.initialize(J,this),ie=V(e),ae=(0,m.default)(G).create({metricsModel:(0,T.default)(G).getInstance(),manifestModel:W,adapter:Q,dashMetrics:(0,O.default)(G).getInstance(),dashManifestModel:(0,P.default)(G).getInstance(),timelineConverter:K,mediaPlayerModel:(0,v.default)(G).getInstance()}),ie.initialize(J,n,this),ae.initialize(J,this),ue=(0,b.default)(G).create({metricsModel:(0,T.default)(G).getInstance(),errHandler:(0,L.default)(G).getInstance(),requestModifier:(0,I.default)(G).getInstance()}),le=ae.getFragmentModel(),le.setLoader(ue),oe=(0,x.default)(G).create(),oe.initialize(this)}function n(e){Y.reset(),ie&&(ie.reset(e),ie=null),ae&&(ae.reset(),ae=null),oe&&(oe.reset(),oe=null),se=null,ue=null,ne=null,te=null,$=null,Z=null,ee=[],J=null}function r(){return oe.isUpdating()}function i(){return J}function a(){return re}function s(){return oe}function l(){return ue}function f(){return Y}function h(){return se}function g(){return ie.getBuffer()}function _(e){ie.setBuffer(e)}function y(){return ie}function E(){return le}function S(){return te?te.getStreamInfo():null}function A(e,t){t===Z||t&&Z&&t.type!==Z.type||(Z=t),-1===ee.indexOf(t)&&ee.push(t),Q.updateData(e,this)}function R(){return ee}function w(){return Z}function D(){return ie.getMediaSource()}function F(){return ae}function N(){return ne}function B(){ae.start()}function U(){ae.stop()}function k(){return Q.getCurrentRepresentationInfo(W.getValue(),oe)}function j(e){return Q.getRepresentationInfoForQuality(W.getValue(),oe,e)}function H(){return ie.getIsBufferingCompleted()}function z(){return ie.getBuffer()||ie.createBuffer(Z)}function q(){return $}function V(e){return"video"===e||"audio"===e?(0,u.default)(G).create({metricsModel:(0,T.default)(G).getInstance(),manifestModel:W,sourceBufferController:(0,M.default)(G).getInstance(),errHandler:(0,L.default)(G).getInstance(),streamController:(0,d.default)(G).getInstance(),mediaController:(0,c.default)(G).getInstance(),adapter:Q,textController:(0,C.default)(G).getInstance()}):(0,p.default)(G).create({type:e,metricsModel:(0,T.default)(G).getInstance(),manifestModel:W,sourceBufferController:(0,M.default)(G).getInstance(),errHandler:(0,L.default)(G).getInstance(),streamController:(0,d.default)(G).getInstance(),mediaController:(0,c.default)(G).getInstance(),adapter:Q,textController:(0,C.default)(G).getInstance()})}var G=this.context,Y=e.indexHandler,K=e.timelineConverter,Q=e.adapter,W=e.manifestModel,X=void 0,$=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0;return X={initialize:t,isUpdating:r,getType:i,getBufferController:y,getABRController:a,getFragmentLoader:l,getFragmentModel:E,getScheduleController:F,getEventController:N,getFragmentController:h,getRepresentationController:s,getIndexHandler:f,getCurrentRepresentationInfo:k,getRepresentationInfoForQuality:j,isBufferingCompleted:H,createBuffer:z,getStreamInfo:S,updateMediaInfo:A,getMediaInfoArr:R,getMediaInfo:w,getMediaSource:D,getBuffer:g,setBuffer:_,start:B,stop:U,isDynamic:q,reset:n},function(){ee=[]}(),X}Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),o=r(a),s=n(13),u=r(s),l=n(36),d=r(l),f=n(17),c=r(f),h=n(137),p=r(h),g=n(100),m=r(g),_=n(4),v=r(_),y=n(8),T=r(y),E=n(88),b=r(E),S=n(28),I=r(S),A=n(24),M=r(A),R=n(18),C=r(R),w=n(11),P=r(w),D=n(10),O=r(D),F=n(67),x=r(F),N=n(9),L=r(N),B=n(0),U=r(B);i.__dashjs_factory_name="StreamProcessor",t.default=U.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){var i=function(r,i){t.resolved=!0,t.resolvedContent=r||null,a.trigger(g.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:n,error:r||i?null:new o.default(v,"Failed loading Xlink element: "+e)})};if(e===r)i(null,!0);else{var u=new f.default(e,l.HTTPRequest.XLINK_TYPE);s.load({request:u,success:function(e){i(e)},error:function(){i(null)}})}}function n(){s&&(s.abort(),s=null)}var r="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,a=(0,h.default)(i).getInstance(),s=(0,u.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier});return{load:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(19),u=r(s),l=n(5),d=n(58),f=r(d),c=n(1),h=r(c),p=n(2),g=r(p),m=n(0),_=r(m),v=1;i.__dashjs_factory_name="XlinkLoader";var y=_.default.getClassFactory(i);y.XLINK_LOADER_ERROR_LOADING_FAILURE=v,t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){p.invalidateSelectedIndexes(e.entry)}function t(e){e.baseURLTreeModel&&(p=e.baseURLTreeModel),e.baseURLSelector&&(g=e.baseURLSelector)}function n(e){p.update(e),g.chooseSelectorFromManifest(e)}function r(e){var t=p.getForPath(e),n=t.reduce(function(e,t){var n=g.select(t);return n?(h.isRelative(n.url)?e.url=h.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new c.default},new c.default);if(!h.isRelative(n.url))return n}function i(){p.reset(),g.reset()}function a(e){n(e)}var s=void 0,l=this.context,f=(0,m.default)(l).getInstance(),h=(0,d.default)(l).getInstance(),p=void 0,g=void 0;return s={reset:i,initialize:a,resolve:r,setConfig:t},function(){p=(0,o.default)(l).create(),g=(0,u.default)(l).create(),f.on(v.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,s)}(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(122),o=r(a),s=n(139),u=r(s),l=n(21),d=r(l),f=n(48),c=r(f),h=n(0),p=r(h),g=n(1),m=r(g),_=n(2),v=r(_);i.__dashjs_factory_name="BaseURLController",t.default=p.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){return!!(a.length&&e&&e.length)&&-1!==a.indexOf(e)}function n(e){-1===a.indexOf(e)&&(a.push(e),o.trigger(s,{entry:e}))}function r(e){e.error&&n(e.request.serviceLocation)}function i(){a=[]}var a=[],o=(0,u.default)(this.context).getInstance(),s=e.updateEventName,l=e.loadFailedEventName;return function(){l&&o.on(l,r,this)}(),{add:n,contains:t,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(1),u=r(s);i.__dashjs_factory_name="BlackListController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){C=!1,y={},T={},E={},b=null,S=100,I=S/1e3,R=(0,o.default)(m).getInstance()}function t(){null!==b&&C&&(clearInterval(b),b=null,C=!1)}function n(){_("Start Event Controller"),C||isNaN(S)||(C=!0,b=setInterval(s,S))}function r(e){if(y={},e)for(var t=0;t<e.length;t++){var n=e[t];y[n.id]=n,_("Add inline event with id "+n.id)}_("Added "+e.length+" inline events")}function i(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in T?_("Repeated event with id "+n.id):(T[n.id]=n,_("Add inband event with id "+n.id))}}function a(){if(E)for(var e=R.getTime(),t=Object.keys(E),n=0;n<t.length;n++){var r=t[n],i=E[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(_("Remove Event "+r+" at time "+e),i=null,delete E[r])}}function s(){l(T),l(y),a()}function u(){var e=A.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),_("Refresh manifest @ "+t),M.getManifestLoader().load(t)}function l(e){var t,n=R.getTime();if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];void 0!==o&&(0===(t=o.presentationTime/o.eventStream.timescale)||t<=n&&t+I>n)&&(_("Start Event "+a+" at "+n),o.duration>0&&(E[a]=o),o.eventStream.schemeIdUri==p&&o.eventStream.value==g?u():v.trigger(o.eventStream.schemeIdUri,{event:o}),delete e[a])}}function f(e){e&&(e.manifestModel&&(A=e.manifestModel),e.manifestUpdater&&(M=e.manifestUpdater))}function h(){t(),y=null,T=null,E=null,R=null}var p="urn:mpeg:dash:event:2012",g=1,m=this.context,_=(0,d.default)(m).getInstance().log,v=(0,c.default)(m).getInstance(),y=void 0,T=void 0,E=void 0,b=void 0,S=void 0,I=void 0,A=void 0,M=void 0,R=void 0,C=void 0;return{initialize:e,addInlineEvents:r,addInbandEvents:i,clear:t,start:n,setConfig:f,reset:h}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=r(a),s=n(0),u=r(s),l=n(3),d=r(l),f=n(1),c=r(f);i.__dashjs_factory_name="EventController",t.default=u.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t=p[e];return t||(t=(0,l.default)(o).create({metricsModel:(0,f.default)(o).getInstance()}),p[e]=t),t}function t(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function n(){d.off(g.default.FRAGMENT_LOADING_COMPLETED,i,this);for(var e in p)p[e].reset();p={}}function r(e,t,n){var r=new s.default;return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r.representationId=t.representationId,r}function i(e){if(p[e.request.mediaType]===e.sender){var n=e.request,i=e.response,a=t(n),o=n.mediaInfo.streamInfo;if(!i||!o)return void u("No "+n.mediaType+" bytes to push or stream is inactive.");var s=r(i,n,o.id);d.trigger(a?g.default.INIT_FRAGMENT_LOADED:g.default.MEDIA_FRAGMENT_LOADED,{chunk:s,fragmentModel:e.sender})}}var o=this.context,u=(0,y.default)(o).getInstance().log,d=(0,h.default)(o).getInstance(),c=void 0,p=void 0;return c={getModel:e,isInitializationRequest:t,reset:n},function(){p={},d.on(g.default.FRAGMENT_LOADING_COMPLETED,i,c)}(),c}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=n(57),s=r(o),u=n(26),l=r(u),d=n(8),f=r(d),c=n(1),h=r(c),p=n(2),g=r(p),m=n(0),_=r(m),v=n(3),y=r(v);i.__dashjs_factory_name="FragmentController",t.default=_.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource(null)}function r(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e){var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}e.endOfStream()}}return{createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:r,signalEndOfStream:i}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="MediaSourceController",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){pe=e,Pe=t,Re=(0,s.default)(re).getInstance(),Ce=(0,h.default)(re).getInstance(),we=(0,l.default)(re).getInstance(),De=(0,F.default)(re).getInstance(),Oe=Pe.getFragmentController(),Fe=Pe.getBufferController(),ge=Oe.getModel(pe),me=Pe.isDynamic(),Le=ce.getScheduleWhilePaused(),xe=(0,g.default)(re).create({dashMetrics:le,metricsModel:oe,textController:(0,y.default)(re).getInstance()}),Ne=(0,_.default)(re).create({adapter:ue,sourceBufferController:(0,S.default)(re).getInstance(),textController:(0,y.default)(re).getInstance()}),de.getIsTextTrack(pe)&&ae.on(w.default.TIMED_TEXT_REQUESTED,H,this),ae.on(w.default.QUALITY_CHANGE_REQUESTED,v,this),ae.on(w.default.DATA_UPDATE_STARTED,L,this),ae.on(w.default.DATA_UPDATE_COMPLETED,b,this),ae.on(w.default.FRAGMENT_LOADING_COMPLETED,P,this),ae.on(w.default.STREAM_COMPLETED,C,this),ae.on(w.default.STREAM_INITIALIZED,I,this),ae.on(w.default.BUFFER_LEVEL_STATE_CHANGED,U,this),ae.on(w.default.BUFFER_CLEARED,B,this),ae.on(w.default.BYTES_APPENDED,O,this),ae.on(w.default.INIT_REQUESTED,c,this),ae.on(w.default.QUOTA_EXCEEDED,k,this),ae.on(w.default.PLAYBACK_SEEKING,q,this),ae.on(w.default.PLAYBACK_STARTED,z,this),ae.on(w.default.PLAYBACK_RATE_CHANGED,V,this),ae.on(w.default.PLAYBACK_TIME_UPDATED,D,this),ae.on(w.default.URL_RESOLUTION_FAILED,j,this),ae.on(w.default.FRAGMENT_LOADING_ABANDONED,x,this)}function n(){_e&&!Fe.getIsBufferingCompleted()&&(te(),ye=!1,ve&&(ve=!1),d(0),ie("Schedule controller starting for "+pe))}function r(){ye||(ye=!0,clearTimeout(Ae),ie("Schedule controller stopping for "+pe))}function i(e,t){Ue[t]=Ue[t]||{};var n=we.getTopQualityIndexFor(e,t);return Ue[t][e]!=n&&(ie("Top quality"+e+" index has changed from "+Ue[t][e]+" to "+n),Ue[t][e]=n,!0)}function o(){if(!(ye||Se||!Fe||Re.isPaused()&&!Le)){u();var e=je.length>0;if(e||i(_e.mediaInfo.type,Pe.getStreamInfo().id)||xe.execute(Pe,pe,De.isVideoTrackPresent())){var t=function(){if(_e.quality!==ke)ke=_e.quality,Fe.switchInitData(Pe.getStreamInfo().id,_e.id);else{var e=je.shift();if(Oe.isInitializationRequest(e))Fe.switchInitData(e.mediaInfo.streamInfo.id,e.representationId);else{var t=Ne.execute(Pe,e);t?ge.executeRequest(t):(Se=!1,d(500))}}};Se=!0,e?t():(we.getPlaybackQuality(Pe),t())}else d(500)}}function u(){var e=1.5*_e.fragmentDuration,t=ge.getRequests({state:E.default.FRAGMENT_MODEL_EXECUTED,time:Re.getTime()+e,threshold:0})[0];t&&-1===je.indexOf(t)&&!de.getIsTextTrack(pe)&&(!Ce.isCurrentTrack(t.mediaInfo)||ce.getFastSwitchEnabled()&&t.quality<_e.quality&&Fe.getBufferLevel()>=e&&we.getAbandonmentStateFor(pe)!==l.default.ABANDON_LOAD?(m(t),ie("Reloading outdated fragment at index: ",t.index)):t.quality>_e.quality&&Y(Re.getTime()+Fe.getBufferLevel()))}function d(e){clearTimeout(Ae),Ae=setTimeout(o,e)}function c(e){e.sender&&e.sender.getStreamProcessor()===Pe&&p(_e.quality)}function p(e){ke=e;var t=ue.getInitRequest(Pe,e);t&&(Se=!0,ge.executeRequest(t))}function m(e){je.push(e)}function v(e){if(pe===e.mediaType&&Pe.getStreamInfo().id===e.streamInfo.id){if(null===(_e=Pe.getRepresentationInfoForQuality(e.newQuality))||void 0===_e)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");ee(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),te()}}function T(e){if(Re){var t=ge.getRequests({state:E.default.FRAGMENT_MODEL_EXECUTED,time:Re.getTime(),threshold:0})[0];t&&Re.getTime()>=t.startTime&&(t.quality!==Be&&e&&ae.trigger(w.default.QUALITY_CHANGE_RENDERED,{mediaType:pe,oldQuality:Be,newQuality:t.quality}),Be=t.quality)}}function b(e){e.error||e.sender.getStreamProcessor()!==Pe||(_e=ue.convertDataToTrack(se.getValue(),e.currentRepresentation))}function I(e){e.error||Pe.getStreamInfo().id!==e.streamInfo.id||(_e=Pe.getCurrentRepresentationInfo(),me&&ve&&(fe.setTimeSyncCompleted(!0),M()),ye&&n())}function M(){var e=(0,A.default)(re).getInstance().getLiveEdge(),t=_e.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=e-Re.computeLiveDelay(_e.fragmentDuration,t),r=ue.getFragmentRequestForTime(Pe,_e,n,{ignoreIsFinished:!0});Me=Re.getLiveStartTime(),(isNaN(Me)||r.startTime>Me)&&(Re.setLiveStartTime(r.startTime),Me=r.startTime);var i=le.getCurrentManifestUpdate(oe.getMetricsFor("stream"));oe.updateManifestUpdateInfo(i,{currentTime:Me,presentationStartTime:e,latency:e-Me,clientTimeOffset:fe.getClientTimeOffset()})}function C(e){e.fragmentModel===ge&&(r(),Se=!1,ie("Stream is complete"))}function P(e){e.sender===ge&&(de.getIsTextTrack(pe)&&(Se=!1),e.error&&e.request.serviceLocation&&!ye&&(m(e.request),Se=!1,d(0)))}function D(){T(!0)}function O(e){e.sender.getStreamProcessor()===Pe&&(Se=!1,d(0))}function x(e){e.streamProcessor===Pe&&(m(e.request),Se=!1,d(0))}function L(e){e.sender.getStreamProcessor()===Pe&&r()}function B(e){e.sender.getStreamProcessor()===Pe&&(ge.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&ye&&n())}function U(e){e.sender.getStreamProcessor()!==Pe||e.state!==f.default.BUFFER_EMPTY||Re.isSeeking()||(ie("Buffer is empty! Stalling!"),ee(new Date,a.PlayListTrace.REBUFFERING_REASON))}function k(e){e.sender.getStreamProcessor()===Pe&&r()}function j(){ge.abortRequests(),r()}function H(e){e.sender.getStreamProcessor()===Pe&&p(e.index)}function z(){!ye&&Le||n()}function q(e){Me=e.seekTime,Q(0),ye&&n();var t=le.getCurrentManifestUpdate(oe.getMetricsFor("stream")),r=_e.DVRWindow?_e.DVRWindow.end-Re.getTime():NaN;oe.updateManifestUpdateInfo(t,{latency:r})}function V(e){Ee&&(Ee.playbackspeed=e.playbackRate.toString())}function G(){return Me}function Y(e){Me=e}function K(){return ge}function Q(e){Ie=e}function W(){return Ie}function X(){return Pe}function $(){return xe.getBufferTarget(Pe,pe,De.isVideoTrackPresent())}function Z(e){Te=e}function J(e,t){ee(e,t),Te=null}function ee(e,t){if(Te&&!1===be){var n=Ee.start,r=e.getTime()-n.getTime();Ee.duration=r,Ee.stopreason=t,Te.trace.push(Ee),be=!0}}function te(){Te&&!0===be&&_e&&(be=!1,Ee=new a.PlayListTrace,Ee.representationid=_e.id,Ee.start=new Date,Ee.mstart=1e3*Re.getTime(),Ee.playbackspeed=Re.getPlaybackRate().toString())}function ne(){ae.off(w.default.DATA_UPDATE_STARTED,L,this),ae.off(w.default.DATA_UPDATE_COMPLETED,b,this),ae.off(w.default.BUFFER_LEVEL_STATE_CHANGED,U,this),ae.off(w.default.QUALITY_CHANGE_REQUESTED,v,this),ae.off(w.default.FRAGMENT_LOADING_COMPLETED,P,this),ae.off(w.default.STREAM_COMPLETED,C,this),ae.off(w.default.STREAM_INITIALIZED,I,this),ae.off(w.default.QUOTA_EXCEEDED,k,this),ae.off(w.default.BYTES_APPENDED,O,this),ae.off(w.default.BUFFER_CLEARED,B,this),ae.off(w.default.INIT_REQUESTED,c,this),ae.off(w.default.PLAYBACK_RATE_CHANGED,V,this),ae.off(w.default.PLAYBACK_SEEKING,q,this),ae.off(w.default.PLAYBACK_STARTED,z,this),ae.off(w.default.PLAYBACK_TIME_UPDATED,D,this),ae.off(w.default.URL_RESOLUTION_FAILED,j,this),ae.off(w.default.FRAGMENT_LOADING_ABANDONED,x,this),de.getIsTextTrack(pe)&&ae.off(w.default.TIMED_TEXT_REQUESTED,H,this),r(),T(!1),Se=!1,Ie=0,Me=NaN,Re=null,Te=null}var re=this.context,ie=(0,N.default)(re).getInstance().log,ae=(0,R.default)(re).getInstance(),oe=e.metricsModel,se=e.manifestModel,ue=e.adapter,le=e.dashMetrics,de=e.dashManifestModel,fe=e.timelineConverter,ce=e.mediaPlayerModel,he=void 0,pe=void 0,ge=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Ae=void 0,Me=void 0,Re=void 0,Ce=void 0,we=void 0,Pe=void 0,De=void 0,Oe=void 0,Fe=void 0,xe=void 0,Ne=void 0,Le=void 0,Be=void 0,Ue=void 0,ke=void 0,je=void 0;return he={initialize:t,getStreamProcessor:X,getSeekTarget:G,setSeekTarget:Y,getFragmentModel:K,setTimeToLoadDelay:Q,getTimeToLoadDelay:W,replaceRequest:m,start:n,stop:r,reset:ne,setPlayList:Z,getBufferTarget:$,finalisePlayList:J},function(){ve=!0,ke=NaN,Be=NaN,Ue={},je=[],ye=!0,Te=null,Ee=null,be=!0,Se=!1,Ie=0,Me=NaN}(),he}Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),o=n(14),s=r(o),u=n(12),l=r(u),d=n(13),f=r(d),c=n(17),h=r(c),p=n(133),g=r(p),m=n(134),_=r(m),v=n(18),y=r(v),T=n(26),E=r(T),b=n(24),S=r(b),I=n(42),A=r(I),M=n(1),R=r(M),C=n(2),w=r(C),P=n(0),D=r(P),O=n(36),F=r(O),x=n(3),N=r(x);i.__dashjs_factory_name="ScheduleController",t.default=D.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){O=t,w=0,P=!1,D=!1,F={"urn:mpeg:dash:utc:http-head:2014":E,"urn:mpeg:dash:utc:http-xsdate:2014":T.bind(null,c),"urn:mpeg:dash:utc:http-iso:2014":T.bind(null,h),"urn:mpeg:dash:utc:direct:2014":y,"urn:mpeg:dash:utc:http-head:2012":E,"urn:mpeg:dash:utc:http-xsdate:2012":T.bind(null,c),"urn:mpeg:dash:utc:http-iso:2012":T.bind(null,h),"urn:mpeg:dash:utc:direct:2012":y,"urn:mpeg:dash:utc:http-ntp:2014":v,"urn:mpeg:dash:utc:ntp:2014":v,"urn:mpeg:dash:utc:sntp:2014":v},i()||(I(e),a(!0))}function t(e){e&&(e.metricsModel&&(x=e.metricsModel),e.dashMetrics&&(N=e.dashMetrics))}function n(){return l()}function r(e){P=e}function i(){return P}function a(e){D=e}function s(e){w=e}function l(){return w}function f(e){var t,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,i=r.exec(e);return t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),new Date(t).getTime()}function c(e){var t=Date.parse(e);return isNaN(t)&&(t=f(e)),t}function h(e){return Date.parse(e)}function _(e){return Date.parse(e)}function v(e,t,n){n()}function y(e,t,n){var r=c(e);if(!isNaN(r))return void t(r);n()}function T(e,t,n,r,i){var a,o,s=!1,u=new XMLHttpRequest,l=i?"HEAD":"GET",d=t.match(/\S+/g);t=d.shift(),a=function(){s||(s=!0,d.length?T(e,d.join(" "),n,r,i):r())},o=function(){var t,r;200===u.status&&(t=i?u.getResponseHeader("Date"):u.response,r=e(t),isNaN(r)||(n(r),s=!0))},u.open(l,t),u.timeout=m||0,u.onload=o,u.onloadend=a,u.send()}function E(e,t,n){T(_,e,t,n,!0)}function b(){var e=x.getReadOnlyMetricsFor("stream"),t=N.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?S(!0):(s(n-(new Date).getTime()),S(!1,n/1e3,w))}function S(e,t,n){r(!1),C.trigger(d.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new o.default(g):null})}function I(e,t){var n=t||0,i=e[n],a=function(e,t){var n=!e||!t;n&&O?b():S(n,e,t)};r(!0),i?F.hasOwnProperty(i.schemeIdUri)?F[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),R("Local time:      "+new Date(t)),R("Server time:     "+new Date(e)),R("Difference (ms): "+n),a(e,n)},function(){I(e,n+1)}):I(e,n+1):(s(0),a())}function A(){a(!1),r(!1)}var M=this.context,R=(0,p.default)(M).getInstance().log,C=(0,u.default)(M).getInstance(),w=void 0,P=void 0,D=void 0,O=void 0,F=void 0,x=void 0,N=void 0;return{initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:A}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(1),u=r(s),l=n(2),d=r(l),f=n(0),c=r(f),h=n(3),p=r(h),g=1,m=5e3;i.__dashjs_factory_name="TimeSyncController";var _=c.default.getSingletonFactory(i);_.TIME_SYNC_FAILED_ERROR_CODE=g,_.HTTP_TIMEOUT_MS=m,t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){R=e}function n(e){C=e}function r(e){var t;P=new p.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:R}),w=e,t=f(w.Period_asArray,w,y,_),a(t,y,_)}function i(){I.off(d.default.XLINK_ELEMENT_LOADED,s,M),D&&(D.reset(),D=null)}function a(e,t,n){var r,i,a,o={};for(o.elements=e,o.type=t,o.resolveType=n,0===o.elements.length&&l(o),a=0;a<o.elements.length;a++)r=o.elements[a],i=A.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,D.load(i,r,o)}function s(e){var t,n,r,i="";t=e.element,n=e.resolveObject,t.resolvedContent&&(r=t.resolvedContent.indexOf(">")+1,i=t.resolvedContent.substr(0,r)+"<response>"+t.resolvedContent.substr(r)+"</response>",t.resolvedContent=P.xml_str2json(i)),g(n)&&l(n)}function l(e){var t,n,r=[];if(c(e),e.resolveType===v&&I.trigger(d.default.XLINK_READY,{manifest:w}),e.resolveType===_)switch(e.type){case y:for(t=0;t<w[y+"_asArray"].length;t++)n=w[y+"_asArray"][t],n.hasOwnProperty(T+"_asArray")&&(r=r.concat(f(n[T+"_asArray"],n,T,_))),n.hasOwnProperty(E+"_asArray")&&(r=r.concat(f(n[E+"_asArray"],n,E,_)));a(r,T,_);break;case T:I.trigger(d.default.XLINK_READY,{manifest:w})}}function f(e,t,n,r){var i,a,o,s=[];for(a=e.length-1;a>=0;a--)i=e[a],i.hasOwnProperty("xlink:href")&&i["xlink:href"]===b&&e.splice(a,1);for(a=0;a<e.length;a++)i=e[a],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o=h(i["xlink:href"],t,n,a,r,i),s.push(o));return s}function c(e){var t,n,r,i,a,o,s=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)r=t.resolvedContent[n][a],s.push(r)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),o=0;o<s.length;o++)t.parentElement[n].splice(t.index+o,0,s[o]);s=[]}e.elements.length>0&&C.run(w)}function h(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}function g(e){var t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0}var S=this.context,I=(0,u.default)(S).getInstance(),A=(0,m.default)(S).getInstance(),M=void 0,R=void 0,C=void 0,w=void 0,P=void 0,D=void 0;return M={resolveManifestOnLoad:r,setMatchers:t,setIron:n,reset:i},function(){I.on(d.default.XLINK_ELEMENT_LOADED,s,M),D=(0,o.default)(S).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),M}Object.defineProperty(t,"__esModule",{value:!0});var a=n(94),o=r(a),s=n(1),u=r(s),l=n(2),d=r(l),f=n(0),c=r(f),h=n(30),p=r(h),g=n(21),m=r(g),_="onLoad",v="onActuate",y="Period",T="AdaptationSet",E="EventStream",b="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",t.default=c.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return i=(0,o.default)(r).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,d.default)(r).create(e)}function t(){return(0,p.default)(r).getInstance()}function n(){return(0,c.default)(r).getInstance()}var r=this.context,i=void 0;return{createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(114),o=r(a),s=n(25),u=r(s),l=n(104),d=r(l),f=n(52),c=r(f),h=n(53),p=r(h),g=n(0),m=r(g);i.__dashjs_factory_name="MetricsReporting";var _=m.default.getClassFactory(i);_.events=u.default,t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){if(!t.error){var n=Object.keys(r);(0,u.default)(i).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest).forEach(function(t){var a=JSON.stringify(t);if(r.hasOwnProperty(a))n.splice(a,1);else try{var s=(0,o.default)(i).create(e);s.initialize(t),r[a]=s}catch(e){}}),n.forEach(function(e){r[e].reset(),delete r[e]}),a.trigger(c.default.METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(r).forEach(function(e){r[e].reset()}),r={}}var r={},i=this.context,a=e.eventBus;return function(){a.on(p.default.MANIFEST_UPDATED,t),a.on(p.default.STREAM_TEARDOWN_COMPLETE,n)}(),{}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(105),o=r(a),s=n(115),u=r(s),l=n(0),d=r(l),f=n(25),c=r(f),h=n(2),p=r(h);i.__dashjs_factory_name="MetricsCollectionController",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){try{a=(0,u.default)(o).create({mediaElement:e.mediaElement}),a.initialize(t.Range),i=(0,d.default)(o).create({log:e.log}),i.initialize(t.Reporting,a),r=(0,c.default)(o).create({log:e.log,eventBus:e.eventBus}),r.initialize(t.metrics,i)}catch(e){throw n(),e}}function n(){r&&r.reset(),i&&i.reset(),a&&a.reset()}var r=void 0,i=void 0,a=void 0,o=this.context;return{initialize:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(107),u=r(s),l=n(108),d=r(l),f=n(106),c=r(f);i.__dashjs_factory_name="MetricsController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,r){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=r[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete r[t+1])}(a=l.create(e,n))&&i.push(a)}),u.on(d.default.METRIC_ADDED,t,a),u.on(d.default.METRIC_UPDATED,t,a)}function r(){u.off(d.default.METRIC_ADDED,t,a),u.off(d.default.METRIC_UPDATED,t,a),i.forEach(function(e){return e.reset()}),i=[]}var i=[],a=void 0,s=this.context,u=e.eventBus,l=(0,o.default)(s).getInstance({log:e.log,eventBus:e.eventBus});return a={initialize:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(52),o=r(a),s=n(0),u=r(s),l=n(16),d=r(l);i.__dashjs_factory_name="MetricsHandlersController",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;s.add(t,n)}),i=!!e[0]._useWallClockTime)}function n(){s.clear()}function r(){var e,t=s.length;if(!t)return!0;e=i?(new Date).getTime()/1e3:l.currentTime;for(var n=0;n<t;n+=1){var r=s.start(n),a=s.end(n);if(r<=e&&e<a)return!0}return!1}var i=!1,a=this.context,o=void 0,s=void 0,l=e.mediaElement;return o={initialize:t,reset:n,isEnabled:r},function(){s=(0,u.default)(a).create()}(),o}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(56),u=r(s);i.__dashjs_factory_name="RangeController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){e.some(function(e){var n=a.create(e,t);if(n)return i.push(n),!0})}function n(){i.forEach(function(e){return e.reset()}),i=[]}function r(e,t){i.forEach(function(n){return n.report(e,t)})}var i=[],a=(0,u.default)(this.context).getInstance({log:e.log});return{initialize:t,reset:n,report:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(53),u=r(s);i.__dashjs_factory_name="ReportingController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){try{return Object.keys(h).map(function(e){return h[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&d!==t.t&&(d=t.t,a.report(s,t))}function n(e,n,r){n&&(o=c.validateN(r),a=n,s=c.reconstructFullMetricName(e,r),l=setInterval(t,o))}function r(){clearInterval(l),l=null,o=0,a=null,d=null}function i(e,t,n){"BufferLevel"===e&&(h[n]=t)}var a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=this.context,c=(0,u.default)(f).getInstance(),h=[];return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(54),u=r(s);i.__dashjs_factory_name="BufferLevelHandler",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){o.off(u.default.METRICS_INITIALISATION_COMPLETE,t,this),o.trigger(u.default.BECAME_REPORTING_PLAYER)}function n(e,n){n&&(a=n,o.on(u.default.METRICS_INITIALISATION_COMPLETE,t,this))}function r(){a=null}function i(e,t){"DVBErrors"===e&&a&&a.report(e,t)}var a=void 0,o=e.eventBus;return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(25),u=r(s);t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(e,t){r=e,i=t}function t(){i=null,r=void 0}function n(e,t){e===r&&i&&i.report(r,t)}var r=void 0,i=void 0;return{initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="GenericMetricHandler",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){var e=d;e.length&&i&&i.report(s,e),d=[]}function t(t,n,r,u){n&&(a=f.validateN(r),i=n,u&&u.length&&(o=u),s=f.reconstructFullMetricName(t,r,u),l=setInterval(e,a))}function n(){clearInterval(l),l=null,a=null,o=null,d=[],i=null}function r(e,t){"HttpList"===e&&(o&&o!==t.type||d.push(t))}var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,d=[],f=(0,u.default)(this.context).getInstance();return{initialize:t,reset:n,handleNewMetric:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(54),u=r(s);i.__dashjs_factory_name="HttpListHandler",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,n){var r=new XMLHttpRequest,i=function(){var e=g.indexOf(r);-1!==e&&(g.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};g.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}function t(t,n){Array.isArray(n)||(n=[n]),l&&h.isEnabled()&&n.forEach(function(n){var r=a.serialise(n);s&&"DVBErrors"!==t&&(r="metricname="+t+"&"+r),r=c+"?"+r,e(r,null,function(){l=!1})})}function n(e,t){var n;if(h=t,!(c=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");f||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=o.random())&&(l=!0),f=!0)}function r(){p||(g.forEach(function(e){return e.abort()}),g=[]),f=!1,l=!1,c=null,h=null}var i=this.context,a=(0,u.default)(i).getInstance(),o=(0,d.default)(i).getInstance(),s=!0,l=!1,f=!1,c=null,h=null,p=!0,g=[];return{report:t,initialize:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(116),u=r(s),l=n(117),d=r(l);i.__dashjs_factory_name="DVBReporting",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=new o.default;if(_){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=_.originalUrl||_.url),t.terror||(t.terror=new Date),m.addDVBErrors(t)}}function n(e){e.error||(_=e.manifest)}function r(e){t({errorcode:o.default.BASE_URL_CHANGED,servicelocation:e.entry})}function i(){t({errorcode:o.default.BECAME_REPORTER})}function a(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||o.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function s(e){switch(e.metric){case"HttpList":a(e.value)}}function l(e){var n,r=e.error?e.error.code:0;switch(r){case MediaError.MEDIA_ERR_NETWORK:n=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=o.default.CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:n})}function f(){g.on(u.default.MANIFEST_UPDATED,n,p),g.on(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,r,p),g.on(d.default.METRIC_ADDED,s,p),g.on(d.default.METRIC_UPDATED,s,p),g.on(d.default.PLAYBACK_ERROR,l,p),g.on(c.default.BECAME_REPORTING_PLAYER,i,p)}function h(){g.off(u.default.MANIFEST_UPDATED,n,p),g.off(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,r,p),g.off(d.default.METRIC_ADDED,s,p),g.off(d.default.METRIC_UPDATED,s,p),g.off(d.default.PLAYBACK_ERROR,l,p),g.off(c.default.BECAME_REPORTING_PLAYER,i,p)}var p=void 0,g=e.eventBus,m=e.metricsModel,_=void 0;return p={initialise:f,reset:h},f(),p}Object.defineProperty(t,"__esModule",{value:!0});var a=n(118),o=r(a),s=n(2),u=r(s),l=n(16),d=r(l),f=n(25),c=r(f),h=n(0),p=r(h);i.__dashjs_factory_name="DVBErrorsTranslator",t.default=p.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){var i,a,o=r.getMpd(e),s=0;return t?s=o.availabilityStartTime.getTime()/1e3:(i=this.getRegularPeriods(e,o),i.length&&(s=i[0].start)),a=s,n&&n.hasOwnProperty("starttime")&&(a+=n.starttime),a}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(i){var a=new o.default,s=r.getIsDynamic(e);i.hasOwnProperty("metrics")&&(a.metrics=i.metrics,i.Range_asArray&&i.Range_asArray.forEach(function(n){var i=new u.default;i.starttime=t(e,s,n),n.hasOwnProperty("duration")?i.duration=n.duration:i.duration=r.getDuration(e),i._useWallClockTime=s,a.Range.push(i)}),i.Reporting_asArray&&(i.Reporting_asArray.forEach(function(e){var t=new d.default;if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);a.Reporting.push(t)}}),n.push(a)))}),n}var r=e.dashManifestModel;return{getMetrics:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(119),o=r(a),s=n(120),u=r(s),l=n(121),d=r(l),f=n(0),c=r(f);i.__dashjs_factory_name="ManifestParsing",t.default=c.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){function e(t){var n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=t[n],void 0!==r&&null!==r||(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))}),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}return{serialise:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="MetricSerialiser",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(){function e(){n&&(o||(o=new r(a)),n.getRandomValues(o),s=0)}function t(t,r){var a;return t||(t=0),r||(r=1),n?(s===o.length&&e(),a=o[s]/i,s+=1):a=Math.random(),a*(r-t)+t}var n=window.crypto||window.msCrypto,r=Uint32Array,i=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RNG",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.metrics="",this.Range=[],this.Reporting=[]};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(e,t,n){var r=p.getBaseURLsFromElement(n);e[t]?g.areSimpleEquivalent(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=c):e[t]=new h(r)}function t(t){var n=p.getBaseURLsFromElement(t);g.areSimpleEquivalent(n,d.data.baseUrls)||(d.data.baseUrls=n,d.data.selectedIdx=c),t.Period_asArray&&t.Period_asArray.forEach(function(t,n){e(d.children,n,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach(function(t,r){e(d.children[n].children,r,t),t.Representation_asArray&&t.Representation_asArray.sort(p.getRepresentationSortFunction()).forEach(function(t,i){e(d.children[n].children[r].children,i,t)})})})}function n(e,t){var r=t||d;e(r.data),r.children&&r.children.forEach(function(t){return n(e,t)})}function r(e){n(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=c)})}function i(e){t(e)}function a(){d=new h}function o(e){var t=d,n=[t.data];return e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})}var u=void 0,d=void 0,f=this.context,p=(0,s.default)(f).getInstance(),g=(0,l.default)(f).getInstance();return u={reset:a,update:i,getForPath:o,invalidateSelectedIndexes:r},function(){d=new h}(),u}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),s=r(o),u=n(143),l=r(u),d=n(0),f=r(d),c=NaN,h=function e(t,n){i(this,e),this.data={baseUrls:t||null,selectedIdx:n||c},this.children=[]};a.__dashjs_factory_name="BaseURLTreeModel",t.default=f.default.getClassFactory(a)},function(e,t,n){"use strict";function r(){function e(e,t){var n=t.droppedVideoFrames-i;i=t.droppedVideoFrames;var o=t.totalVideoFrames-a;a=t.totalVideoFrames,r[e]?(r[e].droppedVideoFrames+=n,r[e].totalVideoFrames+=o):r[e]={droppedVideoFrames:n,totalVideoFrames:o}}function t(){return r}function n(e){r=[],i=e.droppedVideoFrames,a=e.totalVideoFrames}var r=[],i=0,a=0;return{push:e,getFrameHistory:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="DroppedFramesHistory";var o=a.default.getClassFactory(r);t.default=o},function(e,t,n){"use strict";function r(e){function t(){return c.mediaInfo.streamInfo}function n(){return c.mediaInfo}function r(){return c}function i(){return p}function a(){return c.mediaInfo.streamInfo.manifestInfo}function o(){return h}function s(){return g}function u(){return m}function l(){return _}function d(){return v}function f(){return y}var c=e.streamProcessor.getCurrentRepresentationInfo(),h=e.streamProcessor,p=e.currentValue,g=e.playbackIndex,m=e.switchHistory,_=e.droppedFramesHistory,v=e.currentRequest,y=e.hasRichBuffer;return{getCurrentValue:i,getManifestInfo:a,getMediaInfo:n,getPlaybackIndex:s,getDroppedFramesHistory:l,getCurrentRequest:d,getSwitchHistory:u,getStreamInfo:t,getStreamProcessor:o,getTrackInfo:r,hasRichBuffer:f}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RulesContext",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(){function e(e){r[e.oldValue]||(r[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,a=n?-t:0,s=n?0:1;if(r[e.oldValue].drops+=n,r[e.oldValue].dropSize+=a,r[e.oldValue].noDrops+=s,i.push({idx:e.oldValue,noDrop:s,drop:n,dropSize:a}),i.length>o){var u=i.shift();r[u.idx].drops-=u.drop,r[u.idx].dropSize-=u.dropSize,r[u.idx].noDrops-=u.noDrop}}function t(){return r}function n(){r=[],i=[]}var r=[],i=[];return{push:e,getSwitchRequests:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=8;r.__dashjs_factory_name="SwitchRequestHistory";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){l=[],f=[];var e=(0,b.default)(s).getInstance(),t=(0,I.default)(s).getInstance();(0,T.default)(s).getInstance().getBufferOccupancyABREnabled()?(l.push((0,m.default)(s).create({metricsModel:e,dashMetrics:t})),f.push((0,v.default)(s).create({metricsModel:e,dashMetrics:t}))):(l.push((0,o.default)(s).create({metricsModel:e,dashMetrics:t})),l.push((0,u.default)(s).create({metricsModel:e})),l.push((0,p.default)(s).create()),l.push((0,c.default)(s).create()),f.push((0,d.default)(s).create()))}function t(e){switch(e){case w:return l;case P:return f;default:return null}}function n(e){return e.filter(function(e){return e.value>C.default.NO_CHANGE})}function r(e){if(0!==e.length)return e.reduce(function(e,t){return e.value<t.value?e:t})}function i(e){return r(n(l.map(function(t){return t.getMaxIndex(e)})))||(0,C.default)(s).create()}function a(e){return r(n(f.map(function(t){return t.shouldAbandon(e)})))||(0,C.default)(s).create()}var s=this.context,l=void 0,f=void 0;return{initialize:e,getRules:t,getMaxQuality:i,shouldAbandonFragment:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(132),o=r(a),s=n(130),u=r(s),l=n(127),d=r(l),f=n(129),c=r(f),h=n(131),p=r(h),g=n(55),m=r(g),_=n(128),v=r(_),y=n(4),T=r(y),E=n(8),b=r(E),S=n(10),I=r(S),A=n(0),M=r(A),R=n(6),C=r(R),w="qualitySwitchRules",P="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var D=M.default.getSingletonFactory(i);D.QUALITY_SWITCH_RULES=w,D.ABANDON_FRAGMENT_RULES=P,t.default=D},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){g={},_={},v=[],y=(0,u.default)(h).getInstance(),T=(0,d.default)(h).getInstance(),E=(0,c.default)(h).getInstance()}function t(e,t){g[e]=g[e]||{},g[e][t]=g[e][t]||{}}function n(e,t){v[e]=v[e]||[],v[e].push(t)}function r(e){var r=e.getMediaInfo(),a=r.type,u=e.getCurrentRequest(),d=(0,o.default)(h).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(!isNaN(u.index)){t(a,u.index);var c=y.getStableBufferTime();if(T.getCurrentBufferLevel(E.getReadOnlyMetricsFor(a))>c)return d;var m=g[a][u.index];if(null===m||null===u.firstByteDate||_.hasOwnProperty(m.id))return d;if(void 0===m.firstByteTime&&(v[a]=[],m.firstByteTime=u.firstByteDate.getTime(),m.segmentDuration=u.duration,m.bytesTotal=u.bytesTotal,m.id=u.index),m.bytesLoaded=u.bytesLoaded,m.elapsedTime=(new Date).getTime()-m.firstByteTime,m.bytesLoaded>0&&m.elapsedTime>0&&n(a,Math.round(8*m.bytesLoaded/m.elapsedTime)),v[a].length>=f&&m.elapsedTime>l&&m.bytesLoaded<m.bytesTotal){var b=v[a].reduce(function(e,t){return e+t},0);if(m.measuredBandwidthInKbps=Math.round(b/v[a].length),m.estimatedTimeOfDownload=+(8*m.bytesTotal/m.measuredBandwidthInKbps/1e3).toFixed(2),m.estimatedTimeOfDownload<m.segmentDuration*s||0===e.getTrackInfo().quality)return d;if(!_.hasOwnProperty(m.id)){var S=e.getStreamProcessor().getABRController(),I=m.bytesTotal-m.bytesLoaded,A=S.getBitrateList(r),M=S.getQualityForBitrate(r,m.measuredBandwidthInKbps*y.getBandwidthSafetyFactor());I>m.bytesTotal*A[M].bitrate/A[S.getQualityFor(a,r.streamInfo)].bitrate&&(d.value=M,d.reason.throughput=m.measuredBandwidthInKbps,d.reason.fragmentID=m.id,_[m.id]=m,p("AbandonRequestsRule ( ",a,"frag id",m.id,") is asking to abandon and switch to quality to ",M," measured bandwidth was",m.measuredBandwidthInKbps),delete g[a][m.id])}}else m.bytesLoaded===m.bytesTotal&&delete g[a][m.id]}return d}function a(){e()}var s=1.8,l=500,f=5,h=this.context,p=(0,m.default)(h).getInstance().log,g=void 0,_=void 0,v=void 0,y=void 0,T=void 0,E=void 0,b={shouldAbandon:r,reset:a};return e(),b}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(4),u=r(s),l=n(10),d=r(l),f=n(8),c=r(f),h=n(0),p=r(h),g=n(3),m=r(g);i.__dashjs_factory_name="AbandonRequestsRule",t.default=p.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){_[e]={index:t,quality:n}}function n(e,t,n){var r=_[e];return!r||(t!==r.index||n<r.quality)}function r(e){var r=e.getMediaInfo(),a=r.type,u=g.getReadOnlyMetricsFor(a),c=e.getCurrentRequest(),m=(0,o.default)(d).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(0===u.BolaState.length)return f("WARNING: executing BolaAbandonRule before initializing BolaRule"),_[a]=null,m;var v=u.BolaState[0]._s,y=c.index,T=c.quality;if(isNaN(y)||0===T||!n(a,y,T)||!c.firstByteDate)return m;var E=Date.now(),b=E-c.firstByteDate.getTime(),S=c.bytesLoaded,I=c.bytesTotal,A=I-S,M=c.duration,R=h.getCurrentBufferLevel(u)?h.getCurrentBufferLevel(u):0,C=R+v.placeholderBuffer,w=8*S/(.001*b),P=v.bandwidthSafetyFactor*w,D=.001*(c.firstByteDate.getTime()-c.requestStartDate.getTime());D<.001*l&&(D=.001*l);var O=D+8*I/P,F="";p.default.BOLA_DEBUG&&(F="index="+y+" quality="+T+" bytesLoaded/bytesTotal="+S+"/"+I+" bufferLevel="+R+" timeSince1stByte="+(b/1e3).toFixed(3)+" estThroughput="+(P/1e6).toFixed(3)+" latency="+D.toFixed(3));var x=I*v.bitrates[0]/v.bitrates[T],N=A-D*P/8;if(N<1&&(N=1),b<s||A<=x||R>v.bufferTarget||N<=x||O<=M)return m;var L=C-D;L<0&&(L=0);for(var B=0;B+1<T&&I*v.bitrates[B+1]/v.bitrates[T]<N;)++B;var U=T;if(v.state===p.default.BOLA_STATE_STARTUP){U=0;for(var k=0;k<=B&&!(8*(x=I*v.bitrates[k]/v.bitrates[T])/M>P);++k)U=k}else for(var j=(v.Vp*(v.utilities[T]+v.gp)-L)/N,H=0;H<=B;++H){x=I*v.bitrates[H]/v.bitrates[T];var z=(v.Vp*(v.utilities[H]+v.gp)-L)/x;z>j&&(U=H,j=z)}var q=v.rebufferSafetyFactor*w*(R-D)/8;if(U===T&&N>q&&(U=B),U===T)return m;for(;U>0&&!((x=I*v.bitrates[U]/v.bitrates[T])<=q);)--U;var V=NaN;if(U>0){var G=v.utilities[U],Y=v.utilities[U-1],K=v.bitrates[U],Q=v.bitrates[U-1];V=v.Vp*((K*Y-Q*G)/(K-Q)+v.gp)}else{var W=v.utilities[0],X=v.utilities[1],$=v.bitrates[0],Z=v.bitrates[1];V=v.Vp*(($*X-Z*W)/($-Z)+v.gp),V-=M}return C>V&&(v.placeholderBuffer=V-R,v.placeholderBuffer<0&&(v.placeholderBuffer=0)),v.lastQuality=U,g.updateBolaState(a,v),p.default.BOLA_DEBUG&&f("BolaDebug "+a+" BolaAbandonRule abandon to "+U+" - "+F),t(a,y,T),m.value=U,m.reason.state=v.state,m.reason.throughput=w,m.reason.bufferLevel=R,m.reason.bytesLoaded=c.bytesLoaded,m.reason.bytesTotal=c.bytesTotal,m.reason.elapsedTimeMs=b,m}function a(){_={}}var s=500,l=200,d=this.context,f=(0,c.default)(d).getInstance().log,h=e.dashMetrics,g=e.metricsModel,m=void 0,_=void 0,v=void 0;return m={shouldAbandon:r,reset:a},function(){_={},v=(0,u.default)(d).getInstance()}(),m}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(4),u=r(s),l=n(0),d=r(l),f=n(3),c=r(f),h=n(55),p=r(h);i.__dashjs_factory_name="BolaAbandonRule",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var a=e.getDroppedFramesHistory();if(a){for(var o=a.getFrameHistory(),s=0,l=0,d=u.default.NO_CHANGE,f=1;f<o.length;f++)if(o[f]&&(s=o[f].droppedVideoFrames,(l=o[f].totalVideoFrames)>i&&s/l>r)){d=f-1,n("DroppedFramesRule, index: "+d+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,u.default)(t).create(d,{droppedFrames:s})}return(0,u.default)(t).create()}var t=this.context,n=(0,d.default)(t).getInstance().log,r=.15,i=375;return{getMaxIndex:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(6),u=r(s),l=n(3),d=r(l);i.__dashjs_factory_name="DroppedFramesRule";var f=o.default.getClassFactory(i);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=(new Date).getTime(),r=e.getMediaInfo().type,i=f.getReadOnlyMetricsFor(r),u=i.BufferState.length>0?i.BufferState[i.BufferState.length-1]:null,l=(0,m.default)(a).create();return t-g<_||null===u?l:(n(r,u.state),u.state===o.default.BUFFER_EMPTY&&void 0!==h[r].firstBufferLoadedEvent&&(s("Switch to index 0; buffer is empty."),l.value=0,l.reason="InsufficientBufferRule: Buffer is empty"),g=t,l)}function n(e,t){h[e]=h[e]||{},h[e].state=t,t!==o.default.BUFFER_LOADED||h[e].firstBufferLoadedEvent||(h[e].firstBufferLoadedEvent=!0)}function r(){h={}}function i(){l.off(d.default.PLAYBACK_SEEKING,r,c),h={},g=0}var a=this.context,s=(0,p.default)(a).getInstance().log,l=(0,u.default)(a).getInstance(),f=e.metricsModel,c=void 0,h=void 0,g=void 0,_=void 0;return c={getMaxIndex:t,reset:i},function(){h={},g=0,_=1e3,l.on(d.default.PLAYBACK_SEEKING,r,c)}(),c}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=r(a),s=n(1),u=r(s),l=n(2),d=r(l),f=n(0),c=r(f),h=n(3),p=r(h),g=n(6),m=r(g);i.__dashjs_factory_name="InsufficientBufferRule",t.default=c.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){for(var a=e.getSwitchHistory(),o=a.getSwitchRequests(),s=0,u=0,l=0,f=(0,d.default)(t).create(),c=0;c<o.length;c++)if(void 0!==o[c]&&(s+=o[c].drops,u+=o[c].noDrops,l+=o[c].dropSize,s+u>=i&&s/u>r)){f.value=c>0?c-1:0,f.reason={index:f.value,drops:s,noDrops:u,dropSize:l},n("Switch history rule index: "+f.value+" samples: "+(s+u)+" drops: "+s);break}return f}var t=this.context,n=(0,u.default)(t).getInstance().log,r=.075,i=6;return{getMaxIndex:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(3),u=r(s),l=n(6),d=r(l);i.__dashjs_factory_name="SwitchRequest";var f=o.default.getClassFactory(i);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){w=[],P=[],D=(0,d.default)(A).getInstance()}function n(e,t){w[e]=w[e]||[],w[e].push(t)}function r(e,t){if(P[e]||(P[e]=[]),P[e].push(t),P[e].length>y)return P[e].shift()}function i(e){var t=void 0;return P[e]&&P[e].length>0&&(t=P[e].reduce(function(e,t){return e+t})/P[e].length),t}function a(e,t){var n=Math.min(w[e].length,t?m:v),r=w[e].slice(-1*n,w[e].length);return r.length>1&&r.reduce(function(e,t){return(e*I<=t||e>=t*S)&&n++,t}),n=Math.min(w[e].length,n),w[e].slice(-1*n,w[e].length)}function s(e,t){var n=a(e,t),r=0;if(n.length>0){r=n.reduce(function(e,t){return e+t},0)/n.length}return w[e].length>=p&&w[e].shift(),r/1e3*D.getBandwidthSafetyFactor()}function l(e,t,n){var r=!1;if(e<b&&(r=!0),!r)switch(n){case"video":r=t<T;break;case"audio":r=t<E}return r}function c(e){var t=e.getMediaInfo(),a=t.type,d=C.getReadOnlyMetricsFor(a),c=e.getStreamProcessor(),h=c.getABRController(),p=c.isDynamic(),g=R.getCurrentHttpRequest(d),m=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,v=e.hasRichBuffer(),y=(0,_.default)(A).create();if(!d||!g||g.type!==f.HTTPRequest.MEDIA_SEGMENT_TYPE||!m||v)return y;var T=void 0,E=void 0;if(g.trace&&g.trace.length){E=g.tresponse.getTime()-g.trequest.getTime()||1,T=g._tfinish.getTime()-g.tresponse.getTime()||1;var b=g.trace.reduce(function(e,t){return e+t.b[0]},0),S=Math.round(8*b/(T/1e3)),I=void 0,D=void 0;l(E,T,a)?w[a]&&P[a]?(I=s(a,p),D=i(a)):(I=S/1e3,D=E):(n(a,S),I=s(a,p),r(a,E),D=i(a,p)),h.setAverageThroughput(a,I),h.getAbandonmentStateFor(a)!==u.default.ABANDON_LOAD&&(m.state===o.default.BUFFER_LOADED||p)&&(y.value=h.getQualityForBitrate(t,I,D),c.getScheduleController().setTimeToLoadDelay(0),M("ThroughputRule requesting switch to index: ",y.value,"type: ",a,"Average throughput",Math.round(I),"kbps"),y.reason={throughput:I,latency:D})}return y}function h(){t()}var p=20,m=3,v=4,y=v,T=50,E=5,b=50,S=1.3,I=1.3,A=this.context,M=(0,g.default)(A).getInstance().log,R=e.dashMetrics,C=e.metricsModel,w=void 0,P=void 0,D=void 0,O={getMaxIndex:c,reset:h};return t(),O}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),o=r(a),s=n(12),u=r(s),l=n(4),d=r(l),f=n(5),c=n(0),h=r(c),p=n(3),g=r(p),m=n(6),_=r(m);i.__dashjs_factory_name="ThroughputRule",t.default=h.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,r){return i.getCurrentBufferLevel(a.getReadOnlyMetricsFor(t))<n(e,t,r)}function n(e,t,n){var r=NaN,o=e.getCurrentRepresentationInfo();if("fragmentedText"===t)r=s.getAllTracksAreDisabled()?0:o.fragmentDuration;else if("audio"===t&&n){var l=i.getCurrentBufferLevel(a.getReadOnlyMetricsFor("video"));r=Math.floor(Math.max(l,o.fragmentDuration))}else{var d=o.mediaInfo.streamInfo,f=e.getABRController();if(f.isPlayingAtTopQuality(d)){var c=d.manifestInfo.duration>=u.getLongFormContentDurationThreshold();r=c?u.getBufferTimeAtTopQualityLongForm():u.getBufferTimeAtTopQuality()}else r=u.getStableBufferTime()}return r}var r=this.context,i=e.dashMetrics,a=e.metricsModel,s=e.textController,u=void 0,l={execute:t,getBufferTarget:n};return function(){u=(0,o.default)(r).getInstance()}(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="BufferLevelRule",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var n=e.getCurrentRepresentationInfo(),o=n.mediaInfo,u=o.type,l=e.getScheduleController(),d=l.getSeekTarget(),f=!isNaN(d),c=e.getBuffer(),h=f?d:i.getIndexHandlerTime(e);if(isNaN(h)||"fragmentedText"===u&&s.getAllTracksAreDisabled())return null;if(f&&l.setSeekTarget(NaN),c){var p=a.getBufferRange(e.getBuffer(),h);null!==p&&(r("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",h," was changed to ",p.end),h=p.end)}var g=void 0;return t?(h=t.startTime+t.duration/2,g=i.getFragmentRequestForTime(e,n,h,{timeThreshold:0,ignoreIsFinished:!0})):(g=i.getFragmentRequestForTime(e,n,h,{keepIdx:!f}),g&&e.getFragmentModel().isFragmentLoaded(g)&&(g=i.getNextFragmentRequest(e,n)),g&&(i.setIndexHandlerTime(e,g.startTime+g.duration),g.delayLoadingTime=(new Date).getTime()+l.getTimeToLoadDelay(),l.setTimeToLoadDelay(0))),g}var n=this.context,r=(0,o.default)(n).getInstance().log,i=e.adapter,a=e.sourceBufferController,s=e.textController;return{execute:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="NextFragmentRequestRule",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}function t(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function r(e,t){var r=e.videoHeight/15;return t?"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+r+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function i(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}function o(n,o,u,l){var d=null,f=null,c=!1,h=-1,p={start:o,end:u,spans:[]},g="style_cea608_white_black",m={},_={},v=[],y=void 0,T=void 0;for(y=0;y<15;++y){var E=l.rows[y],b="",S=null;if(!1===E.isEmpty()){var I=e(E.chars);null===d&&(d={x:I,y1:y,y2:y+1,p:[]}),I!==h&&c&&(d.p.push(p),p={start:o,end:u,spans:[]},d.y2=y,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):(f=m[d.name],f.p.contat(d.p)),d={x:I,y1:y,y2:y+1,p:[]});for(var A=0;A<E.chars.length;++A){var M=E.chars[A],R=M.penState;if(null===S||!R.equals(S)){b.trim().length>0&&(p.spans.push({name:g,line:b,row:y}),b="");var C="style_cea608_"+R.foreground+"_"+R.background;R.underline&&(C+="_underline"),R.italics&&(C+="_italics"),_.hasOwnProperty(C)||(_[C]=JSON.parse(JSON.stringify(R))),S=R,g=C}b+=M.uchar}b.trim().length>0&&p.spans.push({name:g,line:b,row:y}),c=!0,h=I}else c=!1,h=-1,d&&(d.p.push(p),p={start:o,end:u,spans:[]},d.y2=y,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):(f=m[d.name],f.p.contat(d.p)),d=null)}d&&(d.p.push(p),d.y2=y+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):(f=m[d.name],f.p.contat(d.p)),d=null);var w=[];for(y=0;y<v.length;++y){var P=v[y],D="sub_cea608_"+s++,O=document.createElement("div");O.id=D;var F=t(P);O.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+F;var x=document.createElement("div");x.className="paragraph bodyStyle",x.style.cssText=r(n);var N=document.createElement("div");N.className="cueUniWrapper",N.style.cssText="unicode-bidi: normal; direction: ltr;";for(var L=0;L<P.p.length;++L){var B=P.p[L],U=0;for(T=0;T<B.spans.length;++T){var k=B.spans[T];if(k.line.length>0){if(0!==T&&U!=k.row){var j=document.createElement("br");j.className="lineBreak",N.appendChild(j)}var H=!1;U===k.row&&(H=!0),U=k.row;var z=_[k.name],q=document.createElement("span");q.className="spanPadding "+k.name+" customSpanColor",q.style.cssText=r(n,z),0!==T&&H?T===B.spans.length-1?q.textContent=a(k.line):q.textContent=k.line:0===T&&B.spans.length>1&&k.row===B.spans[1].row?q.textContent=i(k.line):q.textContent=k.line.trim(),N.appendChild(q)}}}x.appendChild(N),O.appendChild(x);var V={bodyStyle:["%",90]};for(T in _)_.hasOwnProperty(T)&&(V[T]=["%",90]);w.push({type:"html",start:o,end:u,cueHTMLElement:O,cueID:D,cellResolution:[32,15],isFromCEA608:!0,regions:v,regionID:P.name,videoHeight:n.videoHeight,videoWidth:n.videoWidth,fontSize:V,lineHeight:{},linePadding:{}})}return w}var s=0;return{createHTMLCaptionsFromScreen:o}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="EmbeddedTextHtmlRender",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){w=e,s(t),P=n,D=P.getRepresentationController(),O=(0,c.default)(T).getInstance()}function n(e){try{C=b.createSourceBuffer(R,e),M||(C.hasOwnProperty("initialize")&&C.initialize(w,this),M=!0)}catch(e){S.mediaSourceError("Error creating "+w+" source buffer.")}return C}function r(){return w}function i(){return C}function a(e){C=e}function s(e){R=e}function l(){return R}function d(e){P=e}function f(){return P}function h(){return 0}function p(){return 0}function g(e){E.off(u.default.DATA_UPDATE_COMPLETED,m,this),E.off(u.default.INIT_FRAGMENT_LOADED,_,this),e||(b.abort(R,C),b.removeSourceBuffer(R,C))}function m(e){e.sender.getStreamProcessor()===P&&E.trigger(u.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function _(e){e.fragmentModel===P.getFragmentModel()&&e.chunk.bytes&&b.append(C,e.chunk)}function v(){return A}function y(e,t){var n=O.extract(e,w,t);n?b.append(n):E.trigger(u.default.INIT_REQUESTED,{sender:I})}var T=this.context,E=(0,o.default)(T).getInstance(),b=e.sourceBufferController,S=e.errHandler,I=void 0,A=void 0,M=void 0,R=void 0,C=void 0,w=void 0,P=void 0,D=void 0,O=void 0;return I={initialize:t,createBuffer:n,getType:r,getStreamProcessor:f,setStreamProcessor:d,getBuffer:i,setBuffer:a,getBufferLevel:h,getCriticalBufferLevel:p,setMediaSource:s,getMediaSource:l,getIsBufferingCompleted:v,switchInitData:y,reset:g},function(){M=!1,R=null,C=null,w=null,P=null,D=null,A=!1,E.on(u.default.DATA_UPDATE_COMPLETED,m,this),E.on(u.default.INIT_FRAGMENT_LOADED,_,this)}(),I}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(41),c=r(f);i.__dashjs_factory_name="NotFragmentedTextBufferController",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){return v.initialize(e,t,n)}function n(e){return v.createBuffer(e)}function r(){return v.getType()}function i(){return v.getBuffer()}function a(e){v.setBuffer(e)}function o(){return v.getMediaSource()}function s(e){v.setMediaSource(e)}function l(e){v.setStreamProcessor(e)}function f(){v.getStreamProcessor()}function c(){return v.getBufferLevel()}function h(){return v.getCriticalBufferLevel()}function p(e){v.reset(e)}function g(){return v.getIsBufferingCompleted()}function m(e,t){v.switchInitData(e,t)}var _=this.context,v=void 0,y=void 0;return y={initialize:t,createBuffer:n,getType:r,getStreamProcessor:f,setStreamProcessor:l,getBuffer:i,setBuffer:a,getBufferLevel:c,getCriticalBufferLevel:h,setMediaSource:s,getMediaSource:o,getIsBufferingCompleted:g,switchInitData:m,reset:p},function(e){v="fragmentedText"===e.type?(0,u.default)(_).create({metricsModel:e.metricsModel,manifestModel:e.manifestModel,sourceBufferController:e.sourceBufferController,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController}):(0,d.default)(_).create({errHandler:e.errHandler,sourceBufferController:e.sourceBufferController})}(e),y}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(13),u=r(s),l=n(136),d=r(l);i.__dashjs_factory_name="TextBufferController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){F=null,j=null,H=!1,z=NaN,q=[],Y=null,A||r();var n=t.getStreamProcessor();if(B=n.getMediaInfoArr(),U.setConfig({videoModel:V}),U.initialize(),k=!D.getIsTextTrack(e),R=(0,d.default)(y).getInstance(),L=(0,u.default)(y).getInstance(),L.setConfig({boxParser:R}),k){j=n.getFragmentModel(),this.buffered=(0,c.default)(y).create(),q=O.getTracksFor("fragmentedText",G.getActiveStreamInfo());for(var i=O.getCurrentTrackFor("fragmentedText",G.getActiveStreamInfo()),a=0;a<q.length;a++)if(q[a]===i){K=a;break}}}function t(){U.deleteAllTextTracks(),F=null,L=null,B=null,U=null,k=!1,j=null,H=!1,z=NaN,q=[],V=null,G=null,A=!1,Q=null}function n(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&h(t.bytes,t)}function r(){Q=[],B=[],V=(0,v.default)(y).getInstance(),U=(0,T.default)(y).getInstance(),U.setConfig({videoModel:V}),U.initialize(),R=(0,d.default)(y).getInstance(),L=(0,u.default)(y).getInstance(),L.setConfig({boxParser:R}),k=!1,K=null,W=!1,X=0,J=[],Z=[],$=null,A=!0,ee=(0,b.default)(y).getInstance(),S.on(P.default.VIDEO_CHUNK_RECEIVED,n,this)}function i(){S.off(P.default.VIDEO_CHUNK_RECEIVED,n,this),null!==U&&U.deleteAllTextTracks(),A=!1,Q=[],J=[null,null],Z=[],$=null}function a(e){A||r(),"CC1"===e.id||"CC3"===e.id?Q.push(e):E("Warning: Embedded track "+e.id+" not supported!")}function s(e){e&&(e.errHandler&&(w=e.errHandler),e.dashManifestModel&&(D=e.dashManifestModel),e.mediaController&&(O=e.mediaController),e.videoModel&&(V=e.videoModel),e.streamController&&(G=e.streamController),e.textTracks&&(U=e.textTracks),e.vttParser&&(x=e.vttParser),e.ttmlParser&&(N=e.ttmlParser))}function l(){return{errHandler:w,dashManifestModel:D,mediaController:O,videoModel:V,fragmentModel:j,streamController:G,textTracks:U,isFragmented:k,embeddedTracks:Q,fragmentedTracks:q}}function f(e){K=e}function h(e,t){function n(e,t){var n=new o.default,r={subtitle:"subtitles",caption:"captions"};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e}(),n.video=V.getElement(),n.defaultTrack=g(t),n.isFragmented=k,n.isEmbedded=!!t.isEmbedded,n.kind=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption}(),n.roles=t.roles;var i=(B?B.length:0)+Q.length;U.addTextTrack(n,i)}var r,i,a,s,u,l,d,f=t.mediaInfo,c=f.type,h=f.mimeType,m=f.codec||h;if(!m)return void E("No text type defined");if("fragmentedText"===c)if(H)if(l=L.getSamplesInfo(e),i=l.sampleList,!Y&&i.length>0&&(Y=i[0].cts-t.start*z),m.search("stpp")>=0)for(F=null!==F?F:_(m),a=0;a<i.length;a++){var v=i[a],y=v.cts,T=y-Y;this.buffered.add(T/z,(T+v.duration)/z);var b=new DataView(e,v.offset,v.subSizes[0]);d=I.default.Utils.dataViewToString(b,"utf-8");var S=[],A=v.offset+v.subSizes[0];for(s=1;s<v.subSizes.length;s++){var R=new Uint8Array(e,A,v.subSizes[s]),C=String.fromCharCode.apply(null,R);S.push(C),A+=v.subSizes[s]}try{r=F.parse(d,y/z,(y+v.duration)/z,S),U.addCaptions(K,Y/z,r)}catch(e){E("TTML parser error: "+e.message)}}else{var P=[];for(a=0;a<i.length;a++){var D=i[a];D.cts-=Y,this.buffered.add(D.cts/z,(D.cts+D.duration)/z);var O=e.slice(D.offset,D.offset+D.size),x=I.default.parseBuffer(O);for(s=0;s<x.boxes.length;s++){var N=x.boxes[s];if(E("VTT box1: "+N.type),"vtte"!==N.type&&"vttc"===N.type)for(E("VTT vttc boxes.length = "+N.boxes.length),u=0;u<N.boxes.length;u++){var j=N.boxes[u];if(E("VTT box2: "+j.type),"payl"===j.type){var q=j.cue_text;E("VTT cue_text = "+q);var G=D.cts/z,W=(D.cts+D.duration)/z;P.push({start:G,end:W,data:q,styles:{}}),E("VTT "+G+"-"+W+" : "+q)}}}}P.length>0&&U.addCaptions(K,0,P)}else{for(H=!0,a=0;a<B.length;a++)n(null,B[a]);z=L.getMediaTimescaleFromMoov(e)}else if("text"===c){var te=new DataView(e,0,e.byteLength);d=I.default.Utils.dataViewToString(te,"utf-8");try{r=_(m).parse(d),n(r,f)}catch(e){w.timedTextError(e,"parse",d)}}else if("video"===c)if("InitializationSegment"===t.segmentType){if(0===X)for(X=L.getMediaTimescaleFromMoov(e),a=0;a<Q.length;a++)n(null,Q[a])}else{if(0===X)return void E("CEA-608: No timescale for embeddedTextTrack yet");l=L.getSamplesInfo(e);var ne=l.sequenceNumber;if(!J[0]&&!J[1]){var re=void 0,ie=void 0;for(a=0;a<Q.length;a++){if("CC1"===Q[a].id?(0,ie=U.getTrackIdxForId("CC1")):"CC3"===Q[a].id&&(1,ie=U.getTrackIdxForId("CC3")),-1===ie)return void E("CEA-608: data before track is ready.");re=function(e,t){function n(e,n,r){var i=null;if(V.getTTMLRenderingDiv())i=ee.createHTMLCaptionsFromScreen(V.getElement(),e,n,r);else{i=[{start:e,end:n,data:r.getDisplayText(),styles:{}}]}i&&U.addCaptions(t,0,i)}return n}(0,ie),J[a]=new M.default.Cea608Parser(a,{newCue:re},null)}}if(X&&-1==Z.indexOf(ne)){if(null!==$&&ne!==$+1)for(a=0;a<J.length;a++)J[a]&&J[a].reset();for(var ae=p(e),oe=0;oe<J.length;oe++){var se=ae.fields[oe],ue=J[oe];if(ue){for(a=0;a<se.length;a++)ue.addData(se[a][0]/X,se[a][1]);ae.endTime&&ue.cueSplitAtTime(ae.endTime/X)}}$=ne,Z.push(ne)}}}function p(e){var t=R.parse(e),n=t.getBox("moof"),r=t.getBox("tfdt"),i=t.getBox("tfhd"),a=t.getBoxes("trun"),o=null;if(0===a.length)return null;o=a[0],a.length>1&&E("Warning: Too many truns");for(var s=n.offset+o.data_offset,u=o.sample_count,l=s,d=r.baseMediaDecodeTime,f=new DataView(e),c={startTime:null,endTime:null,fields:[[],[]]},h=0,p=0;p<u;p++){var g=o.samples[p];void 0===g.sample_duration&&(g.sample_duration=i.default_sample_duration),void 0===g.sample_size&&(g.sample_size=i.default_sample_size),void 0===g.sample_composition_time_offset&&(g.sample_composition_time_offset=0);for(var m=d+h+g.sample_composition_time_offset,_=M.default.findCea608Nalus(f,l,g.sample_size),v=0;v<_.length;v++)for(var y=M.default.extractCea608DataFromRange(f,_[v]),T=0;T<2;T++)y[T].length>0&&c.fields[T].push([m,y[T]]);h+=g.sample_duration,l+=g.sample_size}c.fields[0].sort(function(e,t){return e[0]-t[0]}),c.fields[1].sort(function(e,t){return e[0]-t[0]});var b=d+h;return c.startTime=d,c.endTime=b,c}function g(e){var t=!1;return Q.length>1&&e.isEmbedded?t=e.id&&"CC1"===e.id:1===Q.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===Q.length&&(t=e.index===B[0].index),t}function _(e){var t;return e.search("vtt")>=0?t=x:(e.search("ttml")>=0||e.search("stpp")>=0)&&(t=N,t.setConfig({videoModel:V})),t}var y=this.context,E=(0,m.default)(y).getInstance().log,S=(0,C.default)(y).getInstance(),A=!1,R=void 0,w=void 0,D=void 0,O=void 0,F=void 0,x=void 0,N=void 0,L=void 0,B=void 0,U=void 0,k=void 0,j=void 0,H=void 0,z=void 0,q=void 0,V=void 0,G=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,$=void 0,Z=void 0,J=void 0,ee=void 0;return{initialize:e,append:h,abort:t,addEmbeddedTrack:a,resetEmbedded:i,setConfig:s,getConfig:l,setCurrentFragmentedTrackIdx:f}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(155),o=r(a),s=n(76),u=r(s),l=n(39),d=r(l),f=n(56),c=r(f),h=n(0),p=r(h),g=n(3),m=r(g),_=n(20),v=r(_),y=n(38),T=r(y),E=n(135),b=r(E),S=n(29),I=r(S),A=n(44),M=r(A),R=n(1),C=r(R),w=n(2),P=r(w);i.__dashjs_factory_name="TextSourceBuffer",t.default=p.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e.selector&&(_=e.selector)}function t(e){_=s.getIsDVB(e)?g:h}function n(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=_.select(t);return r?(e.selectedIdx=t.indexOf(r),r):void a.trigger(u.default.URL_RESOLUTION_FAILED,{error:new Error(y,T)})}function r(){f.reset()}var i=this.context,a=(0,o.default)(i).getInstance(),s=(0,d.default)(i).getInstance(),l=void 0,f=void 0,h=void 0,g=void 0,_=void 0;return l={chooseSelectorFromManifest:t,select:n,reset:r,setConfig:e},function(){f=(0,c.default)(i).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u.default.FRAGMENT_LOADING_COMPLETED}),h=(0,m.default)(i).create({blacklistController:f}),g=(0,p.default)(i).create({blacklistController:f}),_=h}(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(11),d=r(l),f=n(96),c=r(f),h=n(147),p=r(h),g=n(146),m=r(g),_=n(0),v=r(_),y=1,T="Failed to resolve a valid URL";i.__dashjs_factory_name="BaseURLSelector";var E=v.default.getClassFactory(i);E.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=y,E.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=T,t.default=E},function(e,t,n){"use strict";function r(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function t(){return a}function n(e){a=e}function r(e,t){var n=e.canPlayType(t);return"probably"===n||"maybe"===n}var i=void 0,a=void 0;return i={supportsMediaSource:e,supportsEncryptedMedia:t,supportsCodec:r,setEncryptedMediaSupported:n},function(){a=!1}(),i}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="Capabilities",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){return p}function n(e){p=e}function r(e,t){var n=!0,r=0,i=void 0,a=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(h.getUint32(p)!==e.tag&&(n=!1),r=4):e.tag>65535?(i=h.getUint16(p),a=h.getUint8(p+2),256*i+a!==e.tag&&(n=!1),r=3):e.tag>255?(h.getUint16(p)!==e.tag&&(n=!1),r=2):(h.getUint8(p)!==e.tag&&(n=!1),r=1),!n&&e.required&&!t)throw new u.default("required tag not found");return n&&(p+=r),n}function i(e,t){var n=r(e,t);return n&&s(),n}function a(e){var t=void 0;return r(e),t=s(),c[e.parse](t)}function o(e,t){var n=r(e,t),i=void 0;return n&&(i=s(),p+=i),n}function s(e){var t=1,n=128,r=-1,i=0,a=h.getUint8(p),o=void 0;for(o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&h.getUint8(p+t);return p+=t,i}function l(e){var t=void 0;switch(e){case 4:t=h.getFloat32(p),p+=4;break;case 8:t=h.getFloat64(p),p+=8}return t}function d(e){var t=0,n=void 0;for(n=0;n<e;n+=1)t<<=8,t|=255&h.getUint8(p+n);return p+=e,t}function f(){return p<h.byteLength}var c=void 0,h=new DataView(e.data),p=0;return c={getPos:t,setPos:n,consumeTag:r,consumeTagAndSize:i,parseTag:a,skipOverElement:o,getMatroskaCodedNum:s,getMatroskaFloat:l,getMatroskaUint:d,moreData:f}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(7),u=r(s);i.__dashjs_factory_name="EBMLParser",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e&&l&&l.boxes&&0!==l.boxes.length?s(l.fetch(e)):null}function t(e){for(var t,n=l.fetchAll(e),r=[],i=0,a=n.length;i<a;i++)(t=s(n[i]))&&r.push(t);return r}function n(e){l=e}function r(){if(!l||!l.boxes||!l.boxes.length)return null;var e=l.boxes[l.boxes.length-1].type,n=t(e);return n[n.length-1]}function i(){return l._cursor.offset}function a(e,t,n){for(var r in n)t[r]=e[n[r]]}function s(e){if(!e)return null;var t,n,r=new o.default;switch(a(e,r,d),e.hasOwnProperty("_incomplete")&&(r.isComplete=!e._incomplete),r.type){case"sidx":if(a(e,r,f),r.references)for(t=0,n=r.references.length;t<n;t++)a(e.references[t],r.references[t],c);break;case"emsg":a(e,r,h);break;case"mdhd":a(e,r,p);break;case"mfhd":a(e,r,g);break;case"subs":a(e,r,m);break;case"tfhd":a(e,r,_);break;case"tfdt":a(e,r,v);break;case"trun":if(a(e,r,y),r.samples)for(t=0,n=r.samples.length;t<n;t++)a(e.samples[t],r.samples[t],T)}return r}var u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p=void 0,g=void 0,m=void 0,_=void 0,v=void 0,y=void 0,T=void 0;return u={getBox:e,getBoxes:t,setData:n,getLastBox:r,getOffset:i},function(){d={offset:"_offset",size:"size",type:"type"},f={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},c={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},h={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},p={timescale:"timescale"},g={sequence_number:"sequence_number"},m={entry_count:"entry_count",entries:"entries"},_={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},v={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},y={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},T={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}(),u}Object.defineProperty(t,"__esModule",{value:!0});var a=n(150),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="IsoFile",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}return{areSimpleEquivalent:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="ObjectUtils",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.videoModel&&(re=e.videoModel)}function t(e){if(e.hasOwnProperty("begin")&&e.hasOwnProperty("end")){return[p(e.begin),p(e.end)]}return null}function n(){var e="cue_TTML_"+ae;return ae++,e}function r(e,t,n){function r(e,t){if(e.hasOwnProperty(t)){var n=e[t];a.indexOf(n)<0&&a.push(n)}}for(var i=[],a=[],o=[],s=0;s<e.length;s++){var u=e[s];r(u,"begin"),r(u,"end")}if(0===a.length)return o;if(void 0!==t&&void 0!==n){for(var l=0;l<a.length;l++){var d=p(a[l]);t<d&&d<n&&i.push(d)}i.push(t),i.push(n)}else for(var f=0;f<a.length;f++)i.push(p(a[f]));i.sort(function(e,t){return e-t});for(var c=0;c<i.length-1;c++)o.push([i[c],i[c+1]]);return o}function i(e,t){return void 0!==t&&e<t&&(e=t),e}function o(e,t){return void 0!==t&&e>t&&(e=t),e}function s(e,t,n){var r=p(e.begin),a=p(e.end);return r=i(r,t),a=o(a,n),void 0!==t&&void 0!==n&&(a<t||r>n)?(k("TTML: Cue "+r+"-"+a+" outside interval "+t+"-"+n),null):[r,a]}function u(e,n){var r=!0;if(e.hasOwnProperty("span")){var i=t(e.span);null!==i&&(r=i[0]<n[1]&&i[1]>n[0])}return r}function d(e,i,a,o){var l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,p="";if(!(z=ie.xml_str2json(e)))throw new Error("TTML document could not be parsed");if(re.getTTMLRenderingDiv()&&(c="html"),!(l=z.tt))throw new Error("TTML document lacks tt element");var _=g(l,"http://www.w3.org/ns/ttml");if(_&&m(l,_),f=l["tts:extent"],!(d=l.head))throw new Error("TTML document lacks head element");d.layout&&(V=d.layout.region_asArray),d.styling&&(q=d.styling.style_asArray);var v={};if(o)for(h=0;h<o.length;h++){var y="urn:mpeg:14496-30:subs:"+(h+1).toString(),S="data:image/png;base64,"+btoa(o[h]);v[y]=S}if(d.metadata){var I=d.metadata.image_asArray;if(I)for(h=0;h<I.length;h++){var A="#"+I[h]["xml:id"],M=I[h].imagetype.toLowerCase(),R="data:image/"+M+";base64,"+I[h].__text;v[A]=R}}if(!l.body)throw new Error("TTML document lacks body element");var D=O(),B=re.getElement().clientWidth,U=re.getElement().clientHeight,j=[B/D[0],U/D[1]];W["font-size"]=j[1]+"px;";var H=[];if(V)for(h=0;h<V.length;h++)H.push(w(JSON.parse(JSON.stringify(V[h])),j));var Q=g(z.tt,"http://www.w3.org/ns/ttml#parameter");l.hasOwnProperty(Q+":frameRate")&&(l.frameRate=parseInt(l[Q+":frameRate"],10));for(var X=[],$=l.body_asArray[0].__children,Z=0;Z<$.length;Z++){var J=$[Z].div,ee=null;if(null===(ee=t(J))){var te=J.p_asArray;if(null===ee&&(!te||0===te.length))return p="TTML has div that contains no timing and no paragraphs.",k(p),X;for(var ne=0;ne<te.length;ne++){var ae=te[ne],oe=ae.span_asArray,se=[];if(ae.hasOwnProperty("begin")&&ae.hasOwnProperty("end")){var ue=s(ae,i,a);null!==ue&&se.push(ue)}else se=r(oe,i,a);if(0!==se.length)for(var le=ae.__children,de=0;de<se.length;de++){for(var fe=se[de],ce=[],he=0;he<le.length;he++){var pe=le[he];u(pe,fe)&&ce.push(pe)}if(0!==ce.length)if("html"===c){Y={},K={},G={};var ge=N(ae,J,j),me=L(ae,j),_e=me[1];me=me[0];var ve=document.createElement("div");ve.className=_e;var ye=x(ce,j);ye.className="cueDirUniWrapper",T("unicode-bidi",me)&&(ye.style.cssText+=E("unicode-bidi",me),b("unicode-bidi",me)),T("direction",me)&&(ye.style.cssText+=E("direction",me),b("direction",me)),T("padding-left",me)&&T("padding-right",me)&&(ye.innerHTML=F(ye,me)),T("padding-left",me)&&T("padding-right",me)&&(b("padding-left",me),b("padding-right",me));var Te="";if(T("regionID",ge)){var Ee=E("regionID",ge);Te=Ee.slice(Ee.indexOf(":")+1,Ee.length-1)}me&&(ve.style.cssText=me.join(" ")+"display:flex;"),ge&&(ge=ge.join(" ")),ve.appendChild(ye);var be=document.createElement("div");be.appendChild(ve),be.id=n(),be.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ge,0===Object.keys(G).length&&(G.defaultFontSize="100"),X.push({start:fe[0],end:fe[1],type:"html",cueHTMLElement:be,regions:H,regionID:Te,cueID:be.id,videoHeight:U,videoWidth:B,cellResolution:D,fontSize:G||{defaultFontSize:"100"},lineHeight:Y,linePadding:K})}else{var Se="",Ie=ce;Ie.length&&Ie.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?Se+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(Se+="\n"))})}else e.hasOwnProperty("br")?Se+="\n":Se+=e["#text"].replace(/[\r\n]+/gm," ").trim()}),X.push({start:fe[0],end:fe[1],data:Se,type:"text"})}}else p="TTML: Empty paragraph"}}else{var Ae=void 0;if(J.region){Ae=C(P(V,J.region),f)}Ae||(Ae=C(J,f));var Me=J["smpte:backgroundImage"];void 0!==Me&&void 0!==v[Me]&&X.push({start:ee[0],end:ee[1],id:n(),data:v[Me],type:"image",layout:Ae})}}if(""!==p&&k(p),X.length>0)return X;throw new Error(p)}function p(e){var t,n,r,i=H.test(e);if(!i)return NaN;if(t=e.split(":"),n=parseFloat(t[0])*c+parseFloat(t[1])*h+parseFloat(t[2]),t[3]){if(!(r=z.tt.frameRate)||isNaN(r))return NaN;n+=parseFloat(t[3])/r}return n}function g(e,t){var n=Object.keys(e).filter(function(n){return("xmlns"===n.split(":")[0]||"xmlns"===n.split(":")[1])&&e[n]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=n.length?null:n[0]}function m(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(("object"===a(e[n])||e[n]instanceof Object)&&!Array.isArray(e[n]))m(e[n],t);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)m(e[n][r],t);var i=t+":",o=n.indexOf(i);if(o>=0){var s=n.slice(o+i.length);e[s]=e[n],delete e[n]}}}function _(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function v(e){var t=e.slice(1),n=t.match(/.{2}/g),r=parseFloat(parseInt(parseInt(n[3],16)/255*1e3,10)/1e3);return"rgba("+n.slice(0,3).map(function(e){return parseInt(e,16)}).join(",")+","+r+");"}function y(e){var t=void 0,n=void 0;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=parseInt(t[t.length-1],10)/255,"rgba("+t[0]+","+t[1]+","+t[2]+","+n+");"}function T(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return!0;return!1}function E(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return null}function b(e,t){t.splice(t.indexOf(E(e,t)),1)}function S(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)e[n]&&e[n].split(":")[0].indexOf(t[r].split(":")[0])>-1&&e.splice(n,1);return e.concat(t)}function I(e){var t=new Array(2),n=-1===e.indexOf(":")?0:e.indexOf(":"),r=void 0;return-1===e.indexOf("%")?-1===e.indexOf("c")?-1===e.indexOf("p")?t[0]=t[1]=null:(t[0]="p",r=e.indexOf("p")):(t[0]="c",r=e.indexOf("c")):(t[0]="%",r=e.indexOf("%")),t[1]=e.slice(n,r),t}function A(e,t,n){var r,i,a=[];for(var o in e)if(e.hasOwnProperty(o)){var s=o.replace("ebutts:","");s=s.replace("xml:",""),s=s.replace("tts:",""),s=_(s),e[s]=e[o],delete e[o]}if("line-padding"in e){var u=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(K[e.id]=u);var l=u*t[0]+"px;";a.push("padding-left:"+l),a.push("padding-right:"+l)}if("font-size"in e){var d=I(e["font-size"]),f=parseFloat(d[1]);"id"in e&&(G[e.id]=d),"%"===d[0]?r=f/100*t[1]+"px;":"c"===d[0]&&(r=f*t[1]+"px;"),a.push("font-size:"+r)}if("line-height"in e)if("normal"===e["line-height"])a.push("line-height: normal;");else{var c=I(e["line-height"]),h=parseFloat(c[1]);"id"in e&&(Y[e.id]=c),"%"===c[0]?i=h/100*t[1]+"px;":"c"===c[0]&&(i=h*t[1]+"px;"),a.push("line-height:"+i)}"font-family"in e&&(e["font-family"]in X?a.push(X[e["font-family"]]):a.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in $&&(a.push($[e["text-align"]][0]),a.push($[e["text-align"]][1])),"multi-row-align"in e&&(T("text-align",a)&&"auto"!=e["multi-row-align"]&&b("text-align",a),e["multi-row-align"]in Z&&a.push(Z[e["multi-row-align"]]));var p;return"background-color"in e&&(p=e["background-color"].indexOf("#")>-1&&e["background-color"].length-1==8?v(e["background-color"]):e["background-color"].indexOf("rgba")>-1?y(e["background-color"]):e["background-color"]+";",a.push("background-color: "+p)),"color"in e&&(p=e.color.indexOf("#")>-1&&e.color.length-1==8?v(e.color):e.color.indexOf("rgba")>-1?y(e.color):e.color+";",a.push("color: "+p)),"wrap-option"in e&&(e["wrap-option"]in J?a.push(J[e["wrap-option"]]):a.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in ee?a.push(ee[e["unicode-bidi"]]):a.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&a.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&a.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&a.push("direction:"+e.direction+";"),"text-decoration"in e&&a.push("text-decoration:"+e["text-decoration"]+";"),n&&(a=a.concat(w(e,t))),z.tt.hasOwnProperty("xml:space")&&"preserve"===z.tt["xml:space"]&&a.push("white-space: pre;"),a}function M(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function R(e,t,n){var r=[];return e.match(/\S+/g).forEach(function(e){var i=M(q,e);if(i){var a=A(JSON.parse(JSON.stringify(i)),t,n);r=r.concat(a)}}),r}function C(e,t){var n=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in e&&"tts:origin"in e){var r=n.exec(e["tts:extent"]),i=n.exec(e["tts:origin"]);if(null===r||null===i)return k("Bad extent or origin: "+e["tts:extent"]+" "+e["tts:origin"]),null;var a=parseFloat(r[1]),o=parseFloat(r[3]),s=parseFloat(i[1]),u=parseFloat(i[3]);if(t){var l=n.exec(t);if(null===l||"px"!==l[2]||"px"!==l[4])return k("Bad tt.extent: "+t),null;var d=parseFloat(l[1]),f=parseFloat(l[3]);"px"===r[2]&&(a=a/d*100),"px"===r[4]&&(o=o/f*100),"px"===i[2]&&(s=s/d*100),"px"===i[4]&&(u=u/f*100)}return{left:s,top:u,width:a,height:o}}return null}function w(e,t){var n=[];for(var r in e){var i=r.replace("tts:","");i=i.replace("xml:",""),i=_(i),e[i]=e[r],i!==r&&delete e[r]}if("extent"in e){var a=e.extent.split(/\s/);n.push("width: "+a[0]+";"),n.push("height: "+a[1]+";")}if("origin"in e){var o=e.origin.split(/\s/);n.push("left: "+o[0]+";"),n.push("top: "+o[1]+";")}if("display-align"in e&&n.push(te[e["display-align"]]),"writing-mode"in e&&n.push(ne[e["writing-mode"]]),"style"in e){var s=R(e.style,t,!0);n=n.concat(s)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function P(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function D(e,t){var n=[];return e.match(/\S+/g).forEach(function(e){var r=P(V,e);if(r){var i=w(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function O(){var e=[32,15];return z.tt.hasOwnProperty("ttp:cellResolution")?z.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function F(e,t){for(var n=E("padding-left",t),r=E("padding-right",t),i=n.concat(" "+r+" "),a="",o="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],d=u.indexOf(l),f=[];-1!=d;)f.push(d),d=u.indexOf(l,d+1);var c="<br>",h='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(f.length)f.forEach(function(e,t){if(0===t){for(var n="",r=0;r<e;r++)a+=u[r].outerHTML,0===r&&(n=i.concat(u[r].style.cssText));a=h+n+'">'+a}for(var l="",d=e+1;d<u.length;d++)o+=u[d].outerHTML,d===u.length-1&&(l+=i.concat(u[d].style.cssText));o=h+l+'">'+o,a&&o&&t===f.length-1?s+=a+"</span>"+c+o+"</span>":a&&o&&t!==f.length-1?s+=a+"</span>"+c+o+"</span>"+c:a&&!o?s+=a+"</span>":!a&&o&&t===f.length-1?s+=o+"</span>":!a&&o&&t!==f.length-1&&(s+=o+"</span>"+c)});else{for(var p="",g=0;g<u.length;g++)p+=u[g].style.cssText;s=h+i+p+'">'+e.innerHTML+"</span>"}return s}function x(e,t){var n=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var r=e.span.__children,i=document.createElement("span");if(e.span.hasOwnProperty("style")){var a=R(e.span.style,t);i.className="spanPadding "+e.span.style,i.style.cssText=a.join(" ")}r.forEach(function(e){if(!r.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);i.appendChild(t)}else if("br"in e){i.hasChildNodes()&&n.appendChild(i);var a=document.createElement("br");a.className="lineBreak",n.appendChild(a);var o=document.createElement("span");o.className=i.className,o.style.cssText=i.style.cssText,i=o}}),n.appendChild(i)}else if(e.hasOwnProperty("br")){var o=document.createElement("br");o.className="lineBreak",n.appendChild(o)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],n.appendChild(s)}}),n}function N(e,t,n){var r,i,a=[],o=e.region,s=t.region;return s&&(r=D(s,n)),o?(i=a.concat(D(o,n)),a=r?S(r,i):i):r&&(a=r),B(a,Q),a}function L(e,t){var n,r,i,a=[],o=e.style,s=z.tt.body.style,u=z.tt.body.div.style,l="";return s&&(n=R(s,t),l="paragraph "+s),u&&(r=R(u,t),n?(r=S(n,r),l+=" "+u):l="paragraph "+u),o?(i=R(o,t),n&&r?(a=S(r,i),l+=" "+o):n?(a=S(n,i),l+=" "+o):r?(a=S(r,i),l+=" "+o):(a=i,l="paragraph "+o)):n&&!r?a=n:!n&&r&&(a=r),B(a,W),[a,l]}function B(e,t){for(var n in t)t.hasOwnProperty(n)&&(T(n,e)||e.push(n+":"+t[n]))}var U=this.context,k=(0,f.default)(U).getInstance().log,j=void 0,H=void 0,z=void 0,q=void 0,V=void 0,G=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,$=void 0,Z=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=0;return j={parse:d,setConfig:e},function(){H=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,G={},Y={},K={},Q={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},W={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},X={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;",default:"font-family: monospace, sans-serif;"},$={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},Z={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},J={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},ee={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},te={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},ne={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},ie=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}(),j}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(0),s=r(o),u=n(30),l=r(u),d=n(3),f=r(d),c=3600,h=60;i.__dashjs_factory_name="TTMLParser",t.default=s.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var r,a,s=[];e=e.split(l),r=e.length,a=-1;for(var u=0;u<r;u++){var c=e[u];if(c.length>0&&"WEBVTT"!==c&&c.match(d)){var h=n(c),p=h.cuePoints,g=h.styles,m=i(e,u+1),_=t(p[0].replace(f,"")),v=t(p[1].replace(f,""));!isNaN(_)&&!isNaN(v)&&_>=a&&v>_?""!==m?(a=_,s.push({start:_,end:v,data:m,styles:g})):o("Skipping cue due to empty/malformed cue text"):o("Skipping cue due to incorrect cue timing")}}return s}function t(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function n(e){var t=e.split(d),n=t[1].split(c);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:r(n)}}function r(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function i(e,t){for(var n,r=t,i="",a="";""!==e[r]&&r<e.length;)r++;if((n=r-t)>1)for(var o=0;o<n;o++){if(a=e[t+o],a.match(d)){i="";break}i+=a,o!==n-1&&(i+="\n")}else a=e[t],a.match(d)||(i=a);return i}var a=this.context,o=(0,u.default)(a).getInstance().log,s=void 0,l=void 0,d=void 0,f=void 0,c=void 0;return s={parse:e},function(){l=/(?:\r\n|\r|\n)/gm,d=/-->/,f=/(^[\s]+|[\s]+$)/g,c=/\s\b/g}(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(3),u=r(s);i.__dashjs_factory_name="VTTParser",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){function t(e){var t,r=0;return e&&e.some(function(e,t){return r=t,!n.contains(e.serviceLocation)})&&(t=e[r]),t}var n=e.blacklistController;return{select:t}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="BasicSelector",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e){function t(e){var t=[],n=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},r=function(e){return!i.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(r).filter(n)}function n(e){var t,n,r=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},i=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},a=0,o=[],s=0;if(n=e.sort(r).filter(i),n.length)return n.length>1&&(n.forEach(function(e){a+=e.dvb_weight,o.push(a)}),t=Math.floor(Math.random()*(a-1)),o.every(function(e,n){return s=n,!(t<e)})),n[s]}function r(e){return e&&n(t(e))}var i=e.blacklistController;return{select:r}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="DVBSelector",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.url=e||null,n.checkForExistenceOnly=!0,n}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this._s=void 0};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.level=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function e(){r(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.range=null,this.manifestInfo=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.droppedFrames=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},a=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},o=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};t.ManifestUpdate=i,t.ManifestUpdateStreamInfo=a,t.ManifestUpdateTrackInfo=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.loadingRequests=[],this.executedRequests=[]};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};t.default=i},function(e,t,n){"use strict";var r=t.decimalAdjust=function(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))};e.exports={round10:function(e,t){return r("round",e,t)},floor10:function(e,t){return r("floor",e,t)},ceil10:function(e,t){return r("ceil",e,t)}},e.exports.polyfill=function(){Math.round10||(Math.round10=e.exports.round10),Math.floor10||(Math.floor10=e.exports.floor10),Math.ceil10||(Math.ceil10=e.exports.ceil10)}},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},d=n(62),f=r(d),c=n(171),h=n(172),p=r(h),g=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.dash=null,r.foundBitrates=!1,r.gotFirstManifest=!1,r.drmSupportList=[],r.hasDrmSupportList=!1,r}return o(t,e),u(t,[{key:"isItemSupported",value:function(e){var t=this;return new Promise(function(n){return"dash"!==e.type&&"mpd"!==e.type?n({supported:!1,errorCode:Meister.ErrorCodes.WRONG_TYPE}):window.MediaSource?e.drm||e.drmConfig?(t.meister.one("drmKeySystemSupport",function(e){var t=!1;return Object.keys(e).forEach(function(n){"com.apple.fps"===n&&e[n]||"com.apple.fps.1_0"===n&&e[n]||"com.apple.fps.2_0"===n&&e[n]||"org.w3.clearkey"!==n&&e[n]&&(t=!0)}),n({supported:t,errorCode:t?null:Meister.ErrorCodes.NO_DRM})}),void t.meister.trigger("requestDrmKeySystemSupport",{})):n({supported:!0}):n({supported:!1,errorCode:Meister.ErrorCodes.NOT_SUPPORTED})})}},{key:"process",value:function(e){var t=this;return new Promise(function(n,r){t.player=t.meister.getPlayerByType("html5",e),t.player?n(e):r(t.name+": Unable to play item "+e.src+", no player available.")})}},{key:"load",value:function(e){var n=this;return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),new Promise(function(t){n.dash=f.default.MediaPlayer().create(),n.dash.getDebug().setLogToBrowserConsole(!1),n.dash.setFastSwitchEnabled(!0),n.dash.setLiveDelayFragmentCount(8),n.config.lowMemoryMode&&(n.dash.setBufferPruningInterval(15),n.dash.setBufferTimeAtTopQuality(10),n.dash.setBufferTimeAtTopQualityLongForm(10),n.dash.setBufferToKeep(10)),n.config.settings&&(0,c.setDashOptions)(n.name,n.dash,n.config.settings),e.startFromLive&&n.dash.setLiveDelayFragmentCount(0),n.on("requestGoLive",n.goLive.bind(n)),n.on("requestBitrate",n.onRequestBitrate.bind(n)),n.dash.on(f.default.MediaPlayer.events.MANIFEST_LOADED,n.onManifestLoaded.bind(n)),n.dash.on(f.default.MediaPlayer.events.STREAM_INITIALIZED,n.onStreamInitialized.bind(n)),n.dash.on(f.default.MediaPlayer.events.QUALITY_CHANGE_RENDERED,n.onQualityChanged.bind(n)),n.dash.on(f.default.MediaPlayer.events.ERROR,n.onError.bind(n)),n.dash.on(f.default.MediaPlayer.events.METRIC_ADDED,function(e){"HttpList"!==e.metric||"MPD"!==e.value.type||n.gotFirstManifest||(n.gotFirstManifest=!0,n.meister.trigger("showLoading",{code:"VIDEO_ACQUIRING_MANIFEST"}))}),n.didBeginSeek=!1,n.on("playerCanPlay",function(){if(e.startFromBeginning&&!n.didBeginSeek){n.didBeginSeek=!0;var t=0;"object"===s(e.startFromBeginning)&&(t=e.startFromBeginning.offset/n.dash.duration()),n.onRequestSeek({relativePosition:t})}}),n.dash.initialize(n.player.mediaElement,e.src,!1),n.one("playerPlay",function(){n.dash.pause(),n.dash.play()}),n.one("requestPlay",function(){n.dash.play()}),t()})}},{key:"unload",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unload",this).call(this),this.gotFirstManifest=!1,this.dash&&this.dash.reset(),this.foundBitrates=!1,this.drmSupportList=[],this.hasDrmSupportList=!1}},{key:"_onPlayerTimeUpdate",value:function(){var e=this.dash.time();e=e<0?0:e,this.meister.trigger("playerTimeUpdate",{currentTime:e,duration:this.dash.duration()})}},{key:"_onPlayerSeek",value:function(){var e=this.dash.time(),t=this.dash.duration(),n=e/t;this.meister.trigger("playerSeek",{relativePosition:n,currentTime:e,duration:t})}},{key:"onError",value:function(e){"download"===e.error&&(this.meister.error("Could not download fragment after retry's","DSH-0001"),this.meister.pause())}},{key:"onManifestLoaded",value:function(e){if(e.data){var t=!1,n=!1,r=e.data.mediaPresentationDuration;r||(t=!0),e.data.timeShiftBufferDepth>this.config.dvrThreshold&&(this.liveSyncDelay=e.data.minBufferTime,n=!0,r=e.data.timeShiftBufferDepth),this.config.dvrEnabled||(n=!1),this.meister.trigger("itemTimeInfo",{isLive:t,hasDVR:n,duration:r});var i=e.data.Period.AdaptationSet,a=null,o=null;if(i.ContentProtection)o=i.ContentProtection;else{if(!i.length)return;if(!i[0].ContentProtection)return;o=i[0].ContentProtection}for(var s=0;s<o.length;s++){var u=o[s];u["cenc:default_KID"]&&(a=u["cenc:default_KID"])}if(a&&this.meister.trigger("drmKidAvailable",a),!this.hasDrmSupportList){var l=!0,d=!1,f=void 0;try{for(var c,h=o[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var p=c.value;"urn:uuid:EDEF8BA9-79D6-4ACE-A3C8-27DCD51D21ED"===p.schemeIdUri?this.drmSupportList.push("com.widevine.alpha"):"urn:uuid:9A04F079-9840-4286-AB92-E65BE0885F95"===p.schemeIdUri&&this.drmSupportList.push("com.microsoft.playready")}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}}this.drmSupportList.length&&!this.hasDrmSupportList&&(this.hasDrmSupportList=!0,this.meister.trigger("drmSupportedListAvailable",this.drmSupportList))}}},{key:"onStreamInitialized",value:function(){if(!this.foundBitrates){var e=this.dash.getBitrateInfoListFor("video"),t=[];t.push({bitrate:0,index:-1});for(var n=0;n<e.length;n++){var r=e[n];t.push({bitrate:r.bitrate,index:r.qualityIndex})}this.meister.trigger("itemBitrates",{bitrates:t,currentIndex:-1}),this.foundBitrates=!0}}},{key:"onQualityChanged",value:function(e){if("video"===e.mediaType){var t=e.newQuality,n=this.dash.getBitrateInfoListFor("video"),r=n.find(function(e){return e.qualityIndex===t});this.meister.trigger("playerAutoSwitchBitrate",{newBitrate:r.bitrate,newBitrateIndex:t})}}},{key:"onRequestBitrate",value:function(e){if(-1===e.bitrateIndex)return void this.dash.setAutoSwitchQualityFor("video",!0);this.dash.setAutoSwitchQualityFor("video",!1),this.dash.setQualityFor("video",e.bitrateIndex);for(var t=0,n=this.dash.getBitrateInfoListFor("video"),r=0;r<n.length;r++)if(e.bitrateIndex===n[r].qualityIndex){t=n[r].bitrate;break}this.meister.trigger("playerSwitchBitrate",{newBitrate:t,newBitrateIndex:e.bitrateIndex})}},{key:"onRequestSeek",value:function(e){var t=void 0;Number.isFinite(e.relativePosition)?t=e.relativePosition*this.dash.duration():Number.isFinite(e.timeOffset)?t=this.dash.time()+e.timeOffset:Number.isFinite(e.targetTime)&&(t=e.targetTime),!e.forcedStart&&this.blockSeekForward&&t>this.dash.time()||Number.isFinite(t)&&this.dash.seek(t)}},{key:"goLive",value:function(){var e=this.dash.duration(),t=e-30;this.player.currentTime=this.dash.getDVRSeekOffset(t)}},{key:"duration",get:function(){return this.dash?this.dash.duration():NaN}},{key:"currentTime",get:function(){return this.dash?this.dash.time():NaN},set:function(e){this.dash&&this.dash.seek(e)}}],[{key:"pluginName",get:function(){return"Dash"}},{key:"pluginVersion",get:function(){return p.default.version}}]),t}(Meister.MediaPlugin);Meister.registerPlugin(g.pluginName,g),Meister.registerPlugin("dash",g),t.default=g},function(e,t,n){"use strict";function r(e,t,n){return!(e<t)&&!(e>n)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("Dashjs instance is required.");var i=n.abandonLoadTimeout,a=n.bandwidthSafetyFactor,o=n.bufferPruningInterval,s=n.bufferTimeAtTopQuality,u=n.bufferTimeAtTopQualityLongForm,l=n.bufferToKeep,d=n.fastSwitchEnabled,f=n.fragmentLoaderRetryAttempts,c=n.fragmentLoaderRetryInterval,h=n.liveDelay,p=n.liveDelayFragmentCount,g=n.longFormContentDurationThreshold,m=n.richBufferThreshold,_=n.stableBufferTime,v=n.useSuggestedPresentationDelay;Number.isFinite(i)&&(i>0?t.setAbandonLoadTimeout(i):console.error(e+": incorrect abandonLoadTimeout. Please use a number in seconds higher than 0.")),Number.isFinite(a)&&(r(a,0,1)?t.setBandwidthSafetyFactor(a):console.error(e+": incorrect bandwidthSafetyFactor. Please use a percentage between 0.0 and 1.")),Number.isFinite(o)&&(o>0?t.setBufferPruningInterval(o):console.error(e+": incorrect bufferPruningInterval. Please use a number in seconds higher than 0.")),Number.isFinite(s)&&(s>0?t.setBufferTimeAtTopQuality(s):console.error(e+": incorrect bufferTimeAtTopQuality. Please use a number in seconds higher than 0.")),Number.isFinite(u)&&(u>0?t.setBufferTimeAtTopQualityLongForm(u):console.error(e+": incorrect bufferTimeAtTopQualityLongForm. Please use a number in seconds higher than 0.")),Number.isFinite(l)&&(l>0?t.setBufferToKeep(l):console.error(e+": incorrect bufferToKeep. Please use a number in seconds higher than 0.")),d&&t.setFastSwitchEnabled(!!d),Number.isFinite(f)&&(f>0?t.setFragmentLoaderRetryAttempts(f):console.error(e+": incorrect fragmentLoaderRetryAttempts. Please use a number in seconds higher than 0.")),Number.isFinite(c)&&(c>0?t.setFragmentLoaderRetryInterval(c):console.error(e+": incorrect fragmentLoaderRetryInterval. Please use a number in milliseconds higher than 0.")),Number.isFinite(h)&&(h>0?t.setLiveDelay(h):console.error(e+": incorrect liveDelay. Please use a number in seconds higher than 0.")),Number.isFinite(p)&&(p>0?t.setLiveDelayFragmentCount(p):console.error(e+": incorrect liveDelayFragmentCount. Please use a number higher than 0.")),Number.isFinite(g)&&(g>0?t.setLongFormContentDurationThreshold(g):console.error(e+": incorrect longFormContentDurationThreshold. Please use a number in seconds higher than 0.")),Number.isFinite(m)&&(m>0?t.setRichBufferThreshold(m):console.error(e+": incorrect richBufferThreshold. Please use a number in seconds higher than 0.")),Number.isFinite(_)&&(_>0?t.setStableBufferTime(_):console.error(e+": incorrect stableBufferTime. Please use a number in seconds higher than 0.")),v&&t.useSuggestedPresentationDelay(!!v)}Object.defineProperty(t,"__esModule",{value:!0}),t.setDashOptions=i,t.default=i},function(e,t){e.exports={name:"@meisterplayer/plugin-dash",version:"5.4.0",description:"Meister plugin wrapping the dashjs player.",main:"dist/Dash.js",keywords:["meister","video","plugin"],repository:{type:"git",url:"https://github.com/meisterplayer/media-dash.git"},author:"Triple",license:"Apache-2.0",dependencies:{dashjs:"git+https://github.com/meisterplayer/dashjs-fork.git#triple_2.4.1"},devDependencies:{"meister-gulp-webpack-tasks":"^1.0.6","meister-js-dev":"^3.1.0","babel-preset-es2015":"^6.24.0","babel-preset-es2017":"^6.22.0",gulp:"^3.9.1"},peerDependencies:{"@meisterplayer/meisterplayer":">= 5.1.0"}}},function(e,t,n){e.exports=n(60)}]);