module.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=167)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){var i=o(r);!i[e]&&t&&(i[e]={instance:t,override:n})}function t(e,t){for(var n in l){var r=l[n];if(r.context===e&&r.name===t)return r.instance}return null}function n(e,t,n){for(var r in l){var i=l[r];if(i.context===e&&i.name===t)return void(l[r].instance=n)}l.push({name:t,context:e,instance:n})}function r(e){return function(t){return void 0===t&&(t={}),{create:function(){return a(e.__dashjs_factory_name,e.apply({context:t},arguments),t,arguments)}}}}function i(e){return function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=t(n,e.__dashjs_factory_name)),r||(r=a(e.__dashjs_factory_name,e.apply({context:n},arguments),n,arguments),l.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}}}function a(e,t,n,r){var i=o(n),a=i[e];if(a){var u=a.instance;if(!a.override)return u.apply({context:n,factory:s},r);u=u.apply({context:n,factory:s,parent:t},r);for(var l in u)t.hasOwnProperty(l)&&(t[l]=u[l])}return t}function o(e){var t=void 0;return u.forEach(function(n){n===e&&(t=n)}),t||(t=u.push(e)),t}var s=void 0,u=[],l=[];return s={extend:e,getSingletonInstance:t,setSingletonInstance:n,getSingletonFactory:i,getClassFactory:r}}();t.default=r},function(e,t,n){"use strict";function r(){function e(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o;if(!e)throw new Error("event type cannot be null or undefined");if(!t||"function"!=typeof t)throw new Error("listener must be a function: "+t);if(!(r(e,t,n)>=0)){a[e]=a[e]||[];var s={callback:t,scope:n,priority:i};a[e].some(function(t,n){if(i>t.priority)return a[e].splice(n,0,s),!0})||a[e].push(s)}}function t(e,t,n){if(e&&t&&a[e]){var i=r(e,t,n);i<0||a[e].splice(i,1)}}function n(e,t){if(e&&a[e]){if(t=t||{},t.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e].forEach(function(e){return e.callback.call(e.scope,t)})}}function r(e,t,n){var r=-1;return a[e]?(a[e].some(function(e,i){if(e.callback===t&&(!n||n===e.scope))return r=i,!0}),r):r}function i(){a={}}var a={};return{on:e,off:t,trigger:n,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=0;r.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(r);s.EVENT_PRIORITY_LOW=o,s.EVENT_PRIORITY_HIGH=5e3,t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(64),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(s.default),l=new u;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){d=e}function t(e){l=e}function n(){return l}function r(){var e="",t=null;d&&(t=(new Date).getTime(),e+="["+(t-f)+"]"),e.length>0&&(e+=" "),Array.apply(null,arguments).forEach(function(t){e+=t+" "}),l&&console.log(e),a.trigger(u.default.LOG,{message:e})}var i=this.context,a=(0,o.default)(i).getInstance(),s=void 0,l=void 0,d=void 0,f=void 0;return s={log:r,setLogTimestampVisible:e,setLogToBrowserConsole:t,getLogToBrowserConsole:n},function(){l=!0,d=!0,f=(new Date).getTime()}(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="Debug",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){function e(e){He=e}function t(){return He}function n(e){Fe=e}function i(){return Fe}function a(e){Be=e}function o(){return Be}function u(e){De=e}function P(){return isNaN(De)?ze?_:m:De}function D(e){we=e}function w(){return we}function N(e){Ne=e}function x(){return Ne}function L(e){xe=e}function F(){return xe}function B(e){Le=e}function U(){return Le}function k(e){Me=e}function j(){return Me}function H(e,t){Ce.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Ce.ttl=t)}function q(){return Ce}function z(e,t){Pe.enabled=e,void 0===t||isNaN(t)||"number"!=typeof t||(Pe.ttl=t)}function G(){return Pe}function V(e){Oe=e}function Y(){return Oe}function K(e){Ue[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function Q(e,t){Ue[e]=t}function W(){return Ue[s.HTTPRequest.MEDIA_SEGMENT_TYPE]}function X(e){return Ue[e]}function Z(e){ke[s.HTTPRequest.MEDIA_SEGMENT_TYPE]=e}function $(e,t){ke[e]=t}function J(){return ke[s.HTTPRequest.MEDIA_SEGMENT_TYPE]}function ee(e){return ke[e]}function te(e){je=e}function ne(){return je}function re(e){Ae=e}function ie(){return Ae}function ae(e){Ie=e}function oe(e){Re=e}function se(){return Ie}function ue(){return Re}function le(e){Ee=e}function de(){return Ee}function fe(e){be=e}function ce(){return be}function he(e){Se=e}function ge(){return Se}function pe(e,t){e?qe[e]=!!t:Object.keys(qe).forEach(function(e){pe(e,t)})}function me(e){var t=qe[e];return void 0===t?qe.default:t}function _e(){return ze}function ve(e){ze=e}function ye(){}var Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Oe=void 0,Ce=void 0,Pe=void 0,De=void 0,we=void 0,Ne=void 0,xe=void 0,Le=void 0,Fe=void 0,Be=void 0,Ue=void 0,ke=void 0,je=void 0,He=void 0,qe=void 0,ze=void 0;return Te={setBufferOccupancyABREnabled:e,getBufferOccupancyABREnabled:t,setBandwidthSafetyFactor:n,getBandwidthSafetyFactor:i,setAbandonLoadTimeout:a,getAbandonLoadTimeout:o,setLastBitrateCachingInfo:H,getLastBitrateCachingInfo:q,setLastMediaSettingsCachingInfo:z,getLastMediaSettingsCachingInfo:G,setStableBufferTime:u,getStableBufferTime:P,setBufferTimeAtTopQuality:D,getBufferTimeAtTopQuality:w,setBufferTimeAtTopQualityLongForm:N,getBufferTimeAtTopQualityLongForm:x,setLongFormContentDurationThreshold:L,getLongFormContentDurationThreshold:F,setRichBufferThreshold:B,getRichBufferThreshold:U,setBufferToKeep:k,getBufferToKeep:j,setBufferPruningInterval:V,getBufferPruningInterval:Y,setFragmentRetryAttempts:K,getFragmentRetryAttempts:W,setRetryAttemptsForType:Q,getRetryAttemptsForType:X,setFragmentRetryInterval:Z,getFragmentRetryInterval:J,setRetryIntervalForType:$,getRetryIntervalForType:ee,setWallclockTimeUpdateInterval:te,getWallclockTimeUpdateInterval:ne,setScheduleWhilePaused:re,getScheduleWhilePaused:ie,getUseSuggestedPresentationDelay:ce,setUseSuggestedPresentationDelay:fe,setLiveDelayFragmentCount:ae,getLiveDelayFragmentCount:se,getLiveDelay:ue,setLiveDelay:oe,setUseManifestDateHeaderTimeSource:le,getUseManifestDateHeaderTimeSource:de,setUTCTimingSources:he,getUTCTimingSources:ge,setXHRWithCredentialsForType:pe,getXHRWithCredentialsForType:me,setFastSwitchEnabled:ve,getFastSwitchEnabled:_e,reset:ye},function(){var e,t;Se=[],be=!1,Ee=!0,Ae=!0,He=!1,ze=!1,Ce={enabled:!0,ttl:d},Pe={enabled:!0,ttl:f},Ie=l,Re=void 0,Me=g,Oe=p,De=NaN,we=v,Ne=y,xe=T,Le=E,Fe=c,Be=h,je=O,qe={default:C},e={},r(e,s.HTTPRequest.MPD_TYPE,I),r(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,A),r(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,b),r(e,s.HTTPRequest.INIT_SEGMENT_TYPE,b),r(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,b),r(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,b),r(e,s.HTTPRequest.OTHER_TYPE,b),Ue=e,t={},r(t,s.HTTPRequest.MPD_TYPE,R),r(t,s.HTTPRequest.XLINK_EXPANSION_TYPE,M),r(t,s.HTTPRequest.MEDIA_SEGMENT_TYPE,S),r(t,s.HTTPRequest.INIT_SEGMENT_TYPE,S),r(t,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,S),r(t,s.HTTPRequest.INDEX_SEGMENT_TYPE,S),r(t,s.HTTPRequest.OTHER_TYPE,S),ke=t}(),Te}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(5),u={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},l=4,d=36e4,f=36e4,c=.9,h=1e4,g=30,p=30,m=12,_=20,v=30,y=60,T=600,E=20,b=3,S=1e3,I=3,R=500,A=1,M=500,O=50,C=!1;i.__dashjs_factory_name="MediaPlayerModel";var P=o.default.getSingletonFactory(i);P.DEFAULT_UTC_TIMING_SOURCE=u,t.default=P},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},a=function e(){r(this,e),this.s=null,this.d=null,this.b=[]};i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",t.HTTPRequest=i,t.HTTPRequestTrace=a},function(e,t,n){"use strict";function r(e,t){return{value:void 0===e?o:e,reason:void 0===t?null:t}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=-1;r.__dashjs_factory_name="SwitchRequest";var s=a.default.getClassFactory(r);s.NO_CHANGE=o,t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){de=0,fe=NaN,ce=null,pe=null,_e=!1,he={},me=(0,d.default)(Z).getInstance()}function t(e){ge=e,te=le.getElement(),W(),pe=ge.manifestInfo.isDynamic,fe=ge.start,J.on(g.default.DATA_UPDATE_COMPLETED,N,this),J.on(g.default.BYTES_APPENDED,K,this),J.on(g.default.BUFFER_LEVEL_STATE_CHANGED,Q,this),J.on(g.default.PERIOD_SWITCH_STARTED,n,this),_e&&(_e=!1,s())}function n(e){!pe&&e.fromStreamInfo&&he[e.fromStreamInfo.id]&&delete he[e.fromStreamInfo.id]}function r(){var e=M(!0),t=pe?e-ge.start:0;return e+(ge.duration-t)-m()}function i(){return m()>0}function a(){return ge.id}function s(){if(te){te.autoplay=!0;var e=te.play();e&&"undefined"!=typeof Promise&&e instanceof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&J.trigger(g.default.PLAYBACK_NOT_ALLOWED),$("Caught pending play exception - continuing ("+e+")")})}else _e=!0}function l(){if(te)return te.paused}function f(){te&&(te.pause(),te.autoplay=!1)}function h(){if(te)return te.seeking}function p(e){le&&($("Requesting seek to time: "+e),le.setCurrentTime(e))}function m(){if(te)return te.currentTime}function _(){if(te)return te.playbackRate}function y(){if(te)return te.played}function T(){if(te)return te.ended}function E(){return pe}function b(e){fe=e}function S(){return fe}function I(e,t){var n=se.getMpd(oe.getValue()),r=void 0;r=me.getUseSuggestedPresentationDelay()&&n.hasOwnProperty("suggestedPresentationDelay")?n.suggestedPresentationDelay:me.getLiveDelay()?me.getLiveDelay():isNaN(e)?2*ge.manifestInfo.minBufferTime:e*me.getLiveDelayFragmentCount();var i=Math.max(t-10,t/2);return Math.min(r,i)}function R(){le&&te&&(J.off(g.default.DATA_UPDATE_COMPLETED,N,this),J.off(g.default.BUFFER_LEVEL_STATE_CHANGED,Q,this),J.off(g.default.BYTES_APPENDED,K,this),P(),X()),le=null,ge=null,te=null,pe=null,e()}function A(e){e&&(e.streamController&&(ne=e.streamController),e.timelineConverter&&(re=e.timelineConverter),e.metricsModel&&(ie=e.metricsModel),e.dashMetrics&&(ae=e.dashMetrics),e.manifestModel&&(oe=e.manifestModel),e.dashManifestModel&&(se=e.dashManifestModel),e.adapter&&(ue=e.adapter),e.videoModel&&(le=e.videoModel))}function M(e){var t=void 0,n=(0,u.default)(Z).getInstance().getURIFragmentData(),r=parseInt(n.s,10),i=parseInt(n.t,10),a=NaN;if(e||(a=isNaN(r)?i:r),pe)!isNaN(a)&&a>1262304e3&&((t=a-ge.manifestInfo.availableFrom.getTime()/1e3)>fe||t<fe-ge.manifestInfo.DVRWindowSize)&&(t=null),t=t||fe;else if(!isNaN(a)&&a<Math.max(ge.manifestInfo.duration,ge.duration)&&a>=0)t=a;else{var o=he[ge.id];void 0===o&&(o=ne.getActiveStreamCommonEarliestTime()),t=Math.max(o,ge.start)}return t}function O(e){var t,n=ie.getReadOnlyMetricsFor("video")||ie.getReadOnlyMetricsFor("audio"),r=ae.getCurrentDVRInfo(n),i=r?r.range:null;if(!i)return NaN;if(e>i.end)t=Math.max(i.end-2*ge.manifestInfo.minBufferTime,i.start);else{if(!(e<i.start))return e;t=i.start}return t}function C(){if(null===ce){var e=function(){Y()};ce=setInterval(e,me.getWallclockTimeUpdateInterval())}}function P(){clearInterval(ce),ce=null}function D(){var e=M(!1);e>0&&(p(e),$("Starting playback at offset: "+e))}function w(){if(!l()&&pe&&0!==te.readyState){var e=m(),t=O(e);!isNaN(t)&&t!==e&&p(t)}}function N(e){if(!e.error){var t=ue.convertDataToTrack(oe.getValue(),e.currentRepresentation),n=t.mediaInfo.streamInfo;ge.id===n.id&&(ge=n,w())}}function x(){J.trigger(g.default.CAN_PLAY)}function L(){$("Native video element event: play"),w(),C(),J.trigger(g.default.PLAYBACK_STARTED,{startTime:m()})}function F(){$("Native video element event: playing"),J.trigger(g.default.PLAYBACK_PLAYING,{playingTime:m()})}function B(){$("Native video element event: pause"),J.trigger(g.default.PLAYBACK_PAUSED,{ended:T()})}function U(){var e=m();$("Seeking to: "+e),C(),J.trigger(g.default.PLAYBACK_SEEKING,{seekTime:e})}function k(){$("Native video element event: seeked"),J.trigger(g.default.PLAYBACK_SEEKED)}function j(){var e=m();e!==de&&(de=e,J.trigger(g.default.PLAYBACK_TIME_UPDATED,{timeToEnd:r(),time:e}))}function H(){J.trigger(g.default.PLAYBACK_PROGRESS)}function q(){var e=_();$("Native video element event: ratechange: ",e),J.trigger(g.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function z(){$("Native video element event: loadedmetadata"),(!pe&&ge.isFirst||re.isTimeSyncCompleted())&&D(),J.trigger(g.default.PLAYBACK_METADATA_LOADED),C()}function G(){$("Native video element event: ended"),f(),P(),J.trigger(g.default.PLAYBACK_ENDED)}function V(e){var t=e.target||e.srcElement;J.trigger(g.default.PLAYBACK_ERROR,{error:t.error})}function Y(){J.trigger(g.default.WALLCLOCK_TIME_UPDATED,{isDynamic:pe,time:new Date})}function K(e){var t=e.bufferedRanges;if(t&&t.length){var n=Math.max(t.start(0),ge.start),r=void 0===he[ge.id]?n:Math.max(he[ge.id],n);r!==he[ge.id]&&(!pe&&M(!0)<r&&m()<r&&p(r),he[ge.id]=r)}}function Q(e){e.streamInfo.id===ge.id&&le.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY)}function W(){te.addEventListener("canplay",x),te.addEventListener("play",L),te.addEventListener("playing",F),te.addEventListener("pause",B),te.addEventListener("error",V),te.addEventListener("seeking",U),te.addEventListener("seeked",k),te.addEventListener("timeupdate",j),te.addEventListener("progress",H),te.addEventListener("ratechange",q),te.addEventListener("loadedmetadata",z),te.addEventListener("ended",G)}function X(){te.removeEventListener("canplay",x),te.removeEventListener("play",L),te.removeEventListener("playing",F),te.removeEventListener("pause",B),te.removeEventListener("error",V),te.removeEventListener("seeking",U),te.removeEventListener("seeked",k),te.removeEventListener("timeupdate",j),te.removeEventListener("progress",H),te.removeEventListener("ratechange",q),te.removeEventListener("loadedmetadata",z),te.removeEventListener("ended",G)}var Z=this.context,$=(0,v.default)(Z).getInstance().log,J=(0,c.default)(Z).getInstance(),ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,me=void 0,_e=void 0;return ee={initialize:t,setConfig:A,getStreamStartTime:M,getTimeToStreamEnd:r,isPlaybackStarted:i,getStreamId:a,getTime:m,getPlaybackRate:_,getPlayedRanges:y,getEnded:T,getIsDynamic:E,setLiveStartTime:b,getLiveStartTime:S,computeLiveDelay:I,play:s,isPaused:l,pause:f,isSeeking:h,seek:p,reset:R},e(),ee}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),o=r(a),s=n(37),u=r(s),l=n(4),d=r(l),f=n(1),c=r(f),h=n(2),g=r(h),p=n(0),m=r(p),_=n(3),v=r(_);i.__dashjs_factory_name="PlaybackController",t.default=m.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.adapter&&(z=e.adapter)}function t(){H.trigger(O.default.METRICS_CHANGED)}function n(e){H.trigger(O.default.METRIC_CHANGED,{mediaType:e}),t()}function r(e,t,r){H.trigger(O.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),n(e)}function i(e,t,r){H.trigger(O.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),n(e)}function a(e){delete G[e],n(e)}function s(){G={},t()}function d(e){return G.hasOwnProperty(e)?G[e]:null}function c(e){var t;return G.hasOwnProperty(e)?t=G[e]:(t=new o.default,G[e]=t),t}function g(e,t,n,r,a,o){var s=new u.default;return s.tcpid=t,s.dest=n,s.topen=r,s.tclose=a,s.tconnect=o,c(e).TcpList.push(s),i(e,z.metricsList.TCP_CONNECTION,s),s}function m(e,t,n,r){var i=new l.HTTPRequestTrace;return i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n,i}function v(e,t,n,r,a,o,s,u,d,f,h,g,p,_){var y=new l.HTTPRequest;return a&&a!==r&&(v(e,null,n,r,null,null,s,u,null,null,null,g,null,null),y.actualurl=a),y.tcpid=t,y.type=n,y.url=r,y.range=s,y.trequest=u,y.tresponse=d,y.responsecode=h,y._tfinish=f,y._stream=e,y._mediaduration=g,y._responseHeaders=p,y._serviceLocation=o,_?_.forEach(function(e){m(y,e.s,e.d,e.b)}):(delete y.interval,delete y.trace),c(e).HttpList.push(y),i(e,z.metricsList.HTTP_REQUEST,y),y}function E(e,t,n,r,a){var o=new f.default;return o.t=t,o.mt=n,o.to=r,a?o.lto=a:delete o.lto,c(e).RepSwitchList.push(o),i(e,z.metricsList.TRACK_SWITCH,o),o}function S(e,t,n){var r=new h.default;return r.t=t,r.level=n,c(e).BufferLevel.push(r),i(e,z.metricsList.BUFFER_LEVEL,r),r}function R(e,t,n){var r=new p.default;return r.target=n,r.state=t,c(e).BufferState.push(r),i(e,z.metricsList.BUFFER_STATE,r),r}function M(e,t,n,r){var a=new _.default;return a.time=t,a.range=r,a.manifestInfo=n,c(e).DVRInfo.push(a),i(e,z.metricsList.DVR_INFO,a),a}function C(e,t){var n=new y.default,r=c(e).DroppedFrames;return n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n?r[r.length-1]:(r.push(n),i(e,z.metricsList.DROPPED_FRAMES,n),n)}function P(e,t,n,r,a,o,s,u,l){var d=new b.default;return d.mediaType=e,d.t=t,d.type=n,d.startTime=r,d.availabilityStartTime=a,d.duration=o,d.quality=s,d.range=u,d.state=l,c(e).SchedulingInfo.push(d),i(e,z.metricsList.SCHEDULING_INFO,d),d}function D(e,t,n){var r=new A.default;r.loadingRequests=t,r.executedRequests=n,c(e).RequestsQueue=r,i(e,z.metricsList.REQUESTS_QUEUE,r)}function N(e,t,n,r,a,o,s,u,l,d){var f=new T.ManifestUpdate,h=c("stream");return f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=a,f.presentationStartTime=o,f.clientTimeOffset=s,f.currentTime=u,f.buffered=l,f.latency=d,h.ManifestUpdate.push(f),i(e,z.metricsList.MANIFEST_UPDATE,f),f}function x(e,t){if(e){for(var n in t)e[n]=t[n];r(e.mediaType,z.metricsList.MANIFEST_UPDATE,e)}}function L(e,t,n,i,a){if(e){var o=new T.ManifestUpdateStreamInfo;return o.id=t,o.index=n,o.start=i,o.duration=a,e.streamInfo.push(o),r(e.mediaType,z.metricsList.MANIFEST_UPDATE_STREAM_INFO,e),o}return null}function F(e,t,n,i,a,o,s,u){if(e){var l=new T.ManifestUpdateTrackInfo;return l.id=t,l.index=n,l.streamIndex=i,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.trackInfo.push(l),r(e.mediaType,z.metricsList.MANIFEST_UPDATE_TRACK_INFO,e),l}return null}function B(e){return e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,c("stream").PlayList.push(e),i("stream",z.metricsList.PLAY_LIST,e),e}function U(e){return c("stream").DVBErrors.push(e),i("stream",z.metricsList.DVB_ERRORS,e),e}function k(e,t){var n=new w.default;return n._s=t,c(e).BolaState=[n],i(e,"BolaState",n),n}var j=this.context,H=(0,I.default)(j).getInstance(),q=void 0,z=void 0,G=void 0;return q={metricsChanged:t,metricChanged:n,metricUpdated:r,metricAdded:i,clearCurrentMetricsForType:a,clearAllCurrentMetrics:s,getReadOnlyMetricsFor:d,getMetricsFor:c,addTcpConnection:g,addHttpRequest:v,addRepresentationSwitch:E,addBufferLevel:S,addBufferState:R,addDVRInfo:M,addDroppedFrames:C,addSchedulingInfo:P,addRequestsQueue:D,addManifestUpdate:N,updateManifestUpdateInfo:x,addManifestUpdateStreamInfo:L,addManifestUpdateRepresentationInfo:F,addPlayList:B,addDVBErrors:U,updateBolaState:k,setConfig:e},function(){G={}}(),q}Object.defineProperty(t,"__esModule",{value:!0});var a=n(147),o=r(a),s=n(161),u=r(s),l=n(5),d=n(158),f=r(d),c=n(153),h=r(c),g=n(154),p=r(g),m=n(155),_=r(m),v=n(156),y=r(v),T=n(157),E=n(160),b=r(E),S=n(1),I=r(S),R=n(159),A=r(R),M=n(2),O=r(M),C=n(0),P=r(C),D=n(152),w=r(D);i.__dashjs_factory_name="MetricsModel",t.default=P.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.code=t||null,this.message=n||null,this.data=i||null};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n;return n=S(M.getValue().Period_asArray[t],e),null===n?null:n.bandwidth}function t(e,t){return b(M.getValue().Period_asArray[t],e)}function n(e,t){return R(M.getValue().Period_asArray[t],e)}function r(e){return c(e,h.TRACK_SWITCH)}function i(e){return c(e,h.BUFFER_LEVEL)}function o(e){var t=i(e);return t?(0,g.round10)(t.level/1e3,-3):0}function u(e){return e.RequestsQueue}function d(e){if(null===e)return null;var t,n,r=e.HttpList,i=null;if(null===r||r.length<=0)return null;for(t=r.length,n=t-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function f(e){return null===e?[]:e.HttpList?e.HttpList:[]}function c(e,t){if(null===e)return null;var n=e[t];if(null===n)return null;var r=n.length;return r<=0?null:n[r-1]}function p(e){return c(e,h.DROPPED_FRAMES)}function m(e){return c(e,h.SCHEDULING_INFO)}function _(e){return c(e,h.MANIFEST_UPDATE)}function v(e){return c(e,h.DVR_INFO)}function y(e,t){var n,r,i,o={};if(null===e)return null;for(n=f(e),i=n.length-1;i>=0;i--)if(r=n[i],r.type===a.HTTPRequest.MPD_TYPE){o=E(r._responseHeaders);break}return void 0===o[t]?null:o[t]}function T(e,t){if(null===e)return null;var n,r=d(e);return null===r||null===r._responseHeaders?null:(n=E(r._responseHeaders),void 0===n[t]?null:n[t])}function E(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function b(e,t){var n=S(e,t,!0);return null!==n?n:-1}function S(e,t,n){var r,i,a,o,s,u;for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)for(r=i[s],o=r.Representation_asArray,u=0;u<o.length;u+=1)if(a=o[u],t===a.id)return n?u:a;return null}function I(e,t){return(0,l.default)(A).getInstance().getIsTypeOf(e,t)}function R(e,t){var n,r,i,a;if(!e||!t)return-1;for(r=e.AdaptationSet_asArray,a=0;a<r.length;a+=1)if(n=r[a],i=n.Representation_asArray,I(n,t))return i.length;return-1}var A=this.context,M=(0,s.default)(A).getInstance();return{getBandwidthForRepresentation:e,getIndexForRepresentation:t,getMaxIndexForBufferType:n,getCurrentRepresentationSwitch:r,getLatestBufferLevelVO:i,getCurrentBufferLevel:o,getCurrentHttpRequest:d,getHttpRequests:f,getCurrentDroppedFrames:p,getCurrentSchedulingInfo:m,getCurrentDVRInfo:v,getCurrentManifestUpdate:_,getLatestFragmentRequestHeaderValueByID:T,getLatestMPDRequestHeaderValueByID:y,getRequestsQueue:u}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=n(29),s=r(o),u=n(11),l=r(u),d=n(0),f=r(d),c=n(44),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),g=n(162);i.__dashjs_factory_name="DashMetrics",t.default=f.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n,r,i,a=!1,o=!1,s=e.ContentComponent_asArray,u="text"!==t?new RegExp(t):new RegExp("(vtt|ttml)");if(e.Representation_asArray.length>0&&e.Representation_asArray[0].hasOwnProperty("codecs")){var l=e.Representation_asArray[0].codecs;if(0===l.search("stpp")||0===l.search("wvtt"))return"fragmentedText"===t}if(s){if(s.length>1)return"muxed"===t;s[0]&&s[0].contentType===t&&(a=!0,o=!0)}if(e.hasOwnProperty("mimeType")&&(a=u.test(e.mimeType),o=!0),!o)for(n=0,r=e.Representation_asArray.length;!o&&n<r;)i=e.Representation_asArray[n],i.hasOwnProperty("mimeType")&&(a=u.test(i.mimeType),o=!0),n++;return a}function t(t){return e(t,"audio")}function n(t){return e(t,"video")}function r(t){return e(t,"fragmentedText")}function i(t){return e(t,"text")}function a(t){return e(t,"muxed")}function s(e){return"text/vtt"===e||"application/ttml+xml"===e}function l(e){var t="";return e.hasOwnProperty("lang")&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t}function f(e){return e.hasOwnProperty("Viewpoint")?e.Viewpoint:null}function h(e){return e.hasOwnProperty("Role_asArray")?e.Role_asArray:[]}function p(e){return e.hasOwnProperty("Accessibility_asArray")?e.Accessibility_asArray:[]}function _(e){return e.hasOwnProperty("AudioChannelConfiguration_asArray")?e.AudioChannelConfiguration_asArray:[]}function y(e){return h(e).filter(function(e){return"main"===e.value})[0]}function E(){return function(e,t){return e.bandwidth-t.bandwidth}}function S(e){return void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(E()),e}function R(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;r<i;r++)if(a[r].hasOwnProperty("id")&&a[r].id===e)return a[r];return null}function M(e,t,n){return t.Period_asArray[n].AdaptationSet_asArray[e]}function C(e,t,n){var r,i,a=t.Period_asArray[n].AdaptationSet_asArray;for(r=0,i=a.length;r<i;r++)if(a[r]===e)return r;return-1}function P(t,n,r){var i,a,o=t.Period_asArray[n].AdaptationSet_asArray,s=[];for(i=0,a=o.length;i<a;i++)e(o[i],r)&&s.push(S(o[i]));return s}function D(e,t,n,r){var i=P(e,t,n);if(!i||0===i.length)return null;if(i.length>1&&r)for(var a=ue.getCurrentTrackFor(n,r),o=le.getAllMediaInfoForType(e,r,n),s=0,u=i.length;s<u;s++){if(a&&ue.isTracksEqual(a,o[s]))return i[s];if(y(i[s]))return i[s]}return i[0]}function w(e){var t=e.Representation_asArray[0];return t.mimeType+';codecs="'+t.codecs+'"'}function N(e){return e.Representation_asArray[0].mimeType}function x(e){return e&&e.hasOwnProperty("cenc:default_KID")?e["cenc:default_KID"]:null}function L(e){return e&&e.hasOwnProperty("ContentProtection_asArray")&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null}function F(e){var t=!1;return e.hasOwnProperty("type")&&(t="dynamic"===e.type),t}function B(e){var t,n=F(e);return t=!isNaN(e.timeShiftBufferDepth),n&&t}function U(e,t){var n=!1;return e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n}function k(e){return U(e,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function j(e){return U(e,"urn:dvb:dash:profile:dvb-dash:2014")}function H(e){return e.hasOwnProperty("mediaPresentationDuration")?e.mediaPresentationDuration:Number.MAX_VALUE}function q(e){return e.bandwidth}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e.hasOwnProperty("minimumUpdatePeriod")&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)}function G(e){return e.Representation_asArray.length}function V(e){if(!e||!e.Representation_asArray||!e.Representation_asArray.length)return null;for(var t=S(e),n=t.Representation_asArray,r=n.length,i=[],a=0;a<r;a++)i.push({bandwidth:n[a].bandwidth,width:n[a].width||0,height:n[a].height||0});return i}function Y(e,t){return t.Representation_asArray[e]}function K(e,t){for(var n,r,i,a,u,l=S(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index]),d=[],f=0;f<l.Representation_asArray.length;f++)a=l.Representation_asArray[f],n=new o.default,n.index=f,n.adaptation=t,a.hasOwnProperty("id")&&(n.id=a.id),a.hasOwnProperty("bandwidth")&&(n.bandwidth=a.bandwidth),a.hasOwnProperty("maxPlayoutRate")&&(n.maxPlayoutRate=a.maxPlayoutRate),a.hasOwnProperty("SegmentBase")?(i=a.SegmentBase,n.segmentInfoType="SegmentBase"):a.hasOwnProperty("SegmentList")?(i=a.SegmentList,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):(n.segmentInfoType="SegmentList",n.useCalculatedLiveEdgeTime=!0)):a.hasOwnProperty("SegmentTemplate")?(i=a.SegmentTemplate,i.hasOwnProperty("SegmentTimeline")?(n.segmentInfoType="SegmentTimeline",u=i.SegmentTimeline.S_asArray[i.SegmentTimeline.S_asArray.length-1],(!u.hasOwnProperty("r")||u.r>=0)&&(n.useCalculatedLiveEdgeTime=!0)):n.segmentInfoType="SegmentTemplate",i.hasOwnProperty("initialization")&&(n.initialization=i.initialization.split("$Bandwidth$").join(a.bandwidth).split("$RepresentationID$").join(a.id))):n.segmentInfoType="BaseURL",i&&(i.hasOwnProperty("Initialization")?(r=i.Initialization,r.hasOwnProperty("sourceURL")?n.initialization=r.sourceURL:r.hasOwnProperty("range")&&(n.range=r.range)):a.hasOwnProperty("mimeType")&&s(a.mimeType)&&(n.range=0),i.hasOwnProperty("timescale")&&(n.timescale=i.timescale),i.hasOwnProperty("duration")&&(n.segmentDuration=i.duration/n.timescale),i.hasOwnProperty("startNumber")&&(n.startNumber=i.startNumber),i.hasOwnProperty("indexRange")&&(n.indexRange=i.indexRange),i.hasOwnProperty("presentationTimeOffset")&&(n.presentationTimeOffset=i.presentationTimeOffset/n.timescale)),n.MSETimeOffset=se.calcMSETimeOffset(n),n.path=[t.period.index,t.index,f],d.push(n);return d}function Q(e,i){for(var o,s,l=e.Period_asArray[i.index],d=[],f=0;f<l.AdaptationSet_asArray.length;f++)s=l.AdaptationSet_asArray[f],o=new u.default,s.hasOwnProperty("id")&&(o.id=s.id),o.index=f,o.period=i,a(s)?o.type="muxed":t(s)?o.type="audio":n(s)?o.type="video":r(s)?o.type="fragmentedText":o.type="text",d.push(o);return d}function W(e,t){var n,r,i=F(e),a=[],o=null,s=null,u=null,l=null;for(r=0,n=e.Period_asArray.length;r<n;r++)s=e.Period_asArray[r],s.hasOwnProperty("start")?(l=new d.default,l.start=s.start):null!==o&&s.hasOwnProperty("duration")&&null!==u?(l=new d.default,l.start=u.start+u.duration,l.duration=s.duration):0!==r||i||(l=new d.default,l.start=0),null!==u&&isNaN(u.duration)&&(u.duration=l.start-u.start),null!==l&&(l.id=X(s,r)),null!==l&&s.hasOwnProperty("duration")&&(l.duration=s.duration),null!==l&&(l.index=r,l.mpd=t,a.push(l),o=s,u=l),s=null,l=null;return 0===a.length?a:(null!==u&&isNaN(u.duration)&&(u.duration=$(e,u)-u.start),a)}function X(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=d.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty("id")&&"__proto__"!==e.id&&(n=e.id),n}function Z(e){var t=new c.default;return t.manifest=e,e.hasOwnProperty("availabilityStartTime")?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty("availabilityEndTime")&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty("minimumUpdatePeriod")&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty("mediaPresentationDuration")&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty("suggestedPresentationDelay")&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty("timeShiftBufferDepth")&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty("maxSegmentDuration")&&(t.maxSegmentDuration=e.maxSegmentDuration),t}function $(e,t){var n=F(e),r=void 0;if(e.mediaPresentationDuration)r=e.mediaPresentationDuration;else if(t.duration)r=t.duration;else{if(!n)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");r=Number.POSITIVE_INFINITY}return r}function J(e,t){var n=e.Period_asArray,r=n[t.index].EventStream_asArray,i=[];if(r)for(var a=0;a<r.length;a++){var o=new A.default;if(o.period=t,o.timescale=1,!r[a].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty("timescale")&&(o.timescale=r[a].timescale),r[a].hasOwnProperty("value")&&(o.value=r[a].value);for(var s=0;s<r[a].Event_asArray.length;s++){var u=new b.default;u.presentationTime=0,u.eventStream=o,r[a].Event_asArray[s].hasOwnProperty("presentationTime")&&(u.presentationTime=r[a].Event_asArray[s].presentationTime),r[a].Event_asArray[s].hasOwnProperty("duration")&&(u.duration=r[a].Event_asArray[s].duration),r[a].Event_asArray[s].hasOwnProperty("id")&&(u.id=r[a].Event_asArray[s].id),i.push(u)}}return i}function ee(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=new A.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty("timescale")&&(i.timescale=e[r].timescale),e[r].hasOwnProperty("value")&&(i.value=e[r].value),n.push(i)}return n}function te(e,t){return ee(e.Period_asArray[t.period.index].AdaptationSet_asArray[t.index].InbandEventStream_asArray,null)}function ne(e,t){return ee(e.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index].Representation_asArray[t.index].InbandEventStream_asArray,t)}function re(e){var t=F(e),n=e.hasOwnProperty("availabilityStartTime"),r=e.UTCTiming_asArray,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new g.default;e.hasOwnProperty("schemeIdUri")&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value.toString(),i.push(t)))}),i}function ie(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some(function(n){if(n){var i=new I.default,a=n.__text||n;return de.isRelative(a)&&(r=!0,e.baseUri&&(a=e.baseUri+a)),i.url=a,n.hasOwnProperty("serviceLocation")&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=a,n.hasOwnProperty("dvb:priority")&&(i.dvb_priority=n["dvb:priority"]),n.hasOwnProperty("dvb:weight")&&(i.dvb_weight=n["dvb:weight"]),t.push(i),r}}),t}function ae(e){return e.hasOwnProperty("Location")&&(e.Location=e.Location_asArray[0]),e.Location}var oe=this.context,se=(0,m.default)(oe).getInstance(),ue=(0,v.default)(oe).getInstance(),le=(0,T.default)(oe).getInstance(),de=(0,O.default)(oe).getInstance();return{getIsTypeOf:e,getIsAudio:t,getIsVideo:n,getIsText:i,getIsMuxed:a,getIsTextTrack:s,getIsFragmentedText:r,getIsMain:y,getLanguageForAdaptation:l,getViewpointForAdaptation:f,getRolesForAdaptation:h,getAccessibilityForAdaptation:p,getAudioChannelConfigurationForAdaptation:_,processAdaptation:S,getAdaptationForIndex:M,getIndexForAdaptation:C,getAdaptationForId:R,getAdaptationsForType:P,getAdaptationForType:D,getCodec:w,getMimeType:N,getKID:x,getContentProtectionData:L,getIsDynamic:F,getIsDVR:B,getIsOnDemand:k,getIsDVB:j,getDuration:H,getBandwidth:q,getManifestUpdatePeriod:z,getRepresentationCount:G,getBitrateListForAdaptation:V,getRepresentationFor:Y,getRepresentationsForAdaptation:K,getAdaptationsForPeriod:Q,getRegularPeriods:W,getMpd:Z,getEventsForPeriod:J,getEventStreams:ee,getEventStreamForAdaptationSet:te,getEventStreamForRepresentation:ne,getUTCTimingSources:re,getBaseURLsFromElement:ie,getRepresentationSortFunction:E,getLocation:ae}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(34),o=r(a),s=n(82),u=r(s),l=n(85),d=r(l),f=n(84),c=r(f),h=n(48),g=r(h),p=n(33),m=r(p),_=n(13),v=r(_),y=n(19),T=r(y),E=n(47),b=r(E),S=n(46),I=r(S),R=n(83),A=r(R),M=n(23),O=r(M),C=n(0),P=r(C);i.__dashjs_factory_name="DashManifestModel",t.default=P.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){me={video:!0,audio:!0},_e={},ve={},ye={},Te={},Ee={},Se={},be={},Fe={},Re=!1,Ae=!1,void 0===Me&&(Me=!1),xe=(0,u.default)(le).getInstance(),Ne=(0,d.default)(le).getInstance(),Pe=(0,b.default)(le).getInstance(),De=(0,I.default)(le).getInstance(),we=(0,A.default)(le).getInstance(),Ue=(0,F.default)(le).getInstance(),ke=(0,U.default)(le).getInstance(),je=(new Date).getTime()/1e3}function t(e,t){Fe[e]=(0,w.default)(le).create(),be[e]=t,Se[e]=Se[e]||{},Se[e].state=q,ce.on(m.default.LOADING_PROGRESS,ue,this),"video"==e&&(ce.on(v.default.QUALITY_CHANGE_RENDERED,i,this),Be=(0,x.default)(le).create(),oe())}function n(){ce.off(m.default.LOADING_PROGRESS,ue,this),ce.off(v.default.QUALITY_CHANGE_RENDERED,i,this),Le=void 0,Be=void 0,clearTimeout(Ie),Ie=null,e()}function r(e){e&&(e.abrRulesCollection&&(ge=e.abrRulesCollection),e.streamController&&(pe=e.streamController))}function i(e){"video"===e.mediaType&&(Le=e.newQuality,Be.push(Le,we.getPlaybackQuality()))}function a(e,t){var n;return _e[t]=_e[t]||{},_e[t].hasOwnProperty(e)||(_e[t][e]=0),n=re(_e[t][e],e),n=ie(n,e,_e[t][e]),n=se(n,e)}function s(e){var t=xe.getSavedBitrateSettings(e);if(!ye.hasOwnProperty(e))if(Te.hasOwnProperty(e)){var n=Pe.getValue(),r=De.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*Te[e])-1,0);ye[e]=r[i].bandwidth}else ye[e]=0}else isNaN(t)?ye[e]="video"===e?z:G:ye[e]=t;return ye[e]}function l(e,t){ye[e]=t}function f(e){return Te.hasOwnProperty(e)?Te[e]:null}function h(e,t){Te[e]=t}function p(e){return ye.hasOwnProperty("max")&&ye.max.hasOwnProperty(e)?ye.max[e]:NaN}function _(e,t){ye.max=ye.max||{},ye.max[e]=t}function y(e){return Te.hasOwnProperty("max")&&Te.max.hasOwnProperty(e)?Te.max[e]:1}function T(e,t){Te.max=Te.max||{},Te.max[e]=t}function E(e){return me[e]}function S(e,t){me[e]=t}function R(){return Re}function M(e){Re=e}function C(){return Ae}function D(e){Ae=e}function N(e){var t=e.getType(),n=e.getStreamInfo(),r=n.id,i=ee(t,n),o=(0,O.default)(le).create({streamProcessor:e,currentValue:i,playbackIndex:Le,switchHistory:Fe[t],droppedFramesHistory:Be,hasRichBuffer:W(t)});if(Be&&Be.push(Le,we.getPlaybackQuality()),E(t)){var s=a(t,r),u=ge.getMaxQuality(o),l=u.value;if(l>s&&(l=s),Fe[t].push({oldValue:i,newValue:l}),l>P.default.NO_CHANGE&&l!=i)(Se[t].state===q||l>i)&&B(t,n,i,l,s,u.reason);else if(de.getLogToBrowserConsole()){var d=ke.getCurrentBufferLevel(Ue.getReadOnlyMetricsFor(t));fe("AbrController ("+t+") stay on "+i+"/"+s+" (buffer: "+d+")")}}}function L(e,t,n,r){var i=t.id,o=ee(e,t);if(null===n||isNaN(n)||n%1!=0)throw new Error("argument is not an integer");var s=a(e,i);n!==o&&n>=0&&n<=s&&B(e,t,o,n,s,r)}function B(e,t,n,r,i,a){if(de.getLogToBrowserConsole()){var o=ke.getCurrentBufferLevel(Ue.getReadOnlyMetricsFor(e));fe("AbrController ("+e+") switch from "+n+" to "+r+"/"+i+" (buffer: "+o+")\n"+JSON.stringify(a))}te(e,t.id,r),ce.trigger(m.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:t,oldQuality:n,newQuality:r,reason:a})}function k(e,t){Se[e].state=t}function Y(e){return Se[e].state}function K(e,t,n){if(n&&be[e.type].getCurrentRepresentationInfo()&&be[e.type].getCurrentRepresentationInfo().fragmentDuration){n/=1e3;var r=be[e.type].getCurrentRepresentationInfo().fragmentDuration;if(n>r)return 0;t*=1-n/r}var i=Q(e);if(!i||0===i.length)return V;for(var a=i.length-1;a>=0;a--){if(1e3*t>=i[a].bitrate)return a}return 0}function Q(e){if(!e||!e.bitrateList)return null;for(var t,n=e.bitrateList,r=e.type,i=[],a=0,s=n.length;a<s;a++)t=new o.default,t.mediaType=r,t.qualityIndex=a,t.bitrate=n[a].bandwidth,t.width=n[a].width,t.height=n[a].height,i.push(t);return i}function W(e){var t=Ue.getReadOnlyMetricsFor(e),n=ke.getCurrentBufferLevel(t),r=t.BufferState.length>0?t.BufferState[t.BufferState.length-1]:null,i=!1;return r&&n>r.target&&(i=n>r.target+Ne.getRichBufferThreshold()),i}function X(e,t){Ee[e]=t}function Z(e){return Ee[e]}function $(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return ne(t,n,r),r}function J(e){var t=e.id,n=ee("audio",e),r=ee("video",e);return n===a("audio",t)&&r===a("video",t)}function ee(e,t){var n=t.id;return ve[n]=ve[n]||{},ve[n].hasOwnProperty(e)||(ve[n][e]=V),ve[n][e]}function te(e,t,n){ve[t]=ve[t]||{},ve[t][e]=n}function ne(e,t,n){_e[t]=_e[t]||{},_e[t][e]=n}function re(e,t){var n=p(t);if(isNaN(n)||!be[t])return e;var r=K(be[t].getMediaInfo(),n);return Math.min(e,r)}function ie(e,t,n){var r=y(t);return isNaN(r)||r>=1||r<0?e:Math.min(e,Math.round(n*r))}function ae(e){Me=e}function oe(){var e=we.getElement();if(void 0!==e){var t=Ae&&window.hasOwnProperty("devicePixelRatio"),n=t?window.devicePixelRatio:1;Oe=e.clientWidth*n,Ce=e.clientHeight*n}}function se(e,t){if("video"!==t||!Re||!be[t])return e;Me||oe();var n=Pe.getValue(),r=De.getAdaptationForType(n,0,t).Representation,i=e;if(Oe>0&&Ce>0){for(;i>0&&r[i]&&Oe<r[i].width&&Oe-r[i-1].width<r[i].width-Oe;)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}function ue(e){var t=e.request.mediaType;if(E(t)){var n=be[t].getScheduleController();if(!n)return;var r=(0,O.default)(le).create({streamProcessor:be[t],currentRequest:e.request,currentValue:ee(t,pe.getActiveStreamInfo()),hasRichBuffer:W(t)}),i=ge.shouldAbandonFragment(r);if(i.value>P.default.NO_CHANGE){var a=n.getFragmentModel(),o=a.getRequests({state:c.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0];o&&(a.abortRequests(),k(t,H),Fe[t].reset(),Fe[t].push({oldValue:ee(t,pe.getActiveStreamInfo()),newValue:i.value,confidence:1,reason:i.reason}),L(t,pe.getActiveStreamInfo(),i.value,i.reason),ce.trigger(m.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:be[t],request:o,mediaType:t}),clearTimeout(Ie),Ie=setTimeout(function(){k(t,q),Ie=null},Ne.getAbandonLoadTimeout()))}}}var le=this.context,de=(0,j.default)(le).getInstance(),fe=de.log,ce=(0,g.default)(le).getInstance(),he=void 0,ge=void 0,pe=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Oe=void 0,Ce=void 0,Pe=void 0,De=void 0,we=void 0,Ne=void 0,xe=void 0,Le=void 0,Fe=void 0,Be=void 0,Ue=void 0,ke=void 0,je=void 0;return he={isPlayingAtTopQuality:J,updateTopQualityIndex:$,getAverageThroughput:Z,getBitrateList:Q,getQualityForBitrate:K,getMaxAllowedBitrateFor:p,setMaxAllowedBitrateFor:_,getMaxAllowedRepresentationRatioFor:y,setMaxAllowedRepresentationRatioFor:T,getInitialBitrateFor:s,setInitialBitrateFor:l,getInitialRepresentationRatioFor:f,setInitialRepresentationRatioFor:h,setAutoSwitchBitrateFor:S,getAutoSwitchBitrateFor:E,setLimitBitrateByPortal:M,getLimitBitrateByPortal:R,getUsePixelRatioInLimitBitrateByPortal:C,setUsePixelRatioInLimitBitrateByPortal:D,getQualityFor:ee,getAbandonmentStateFor:Y,setAbandonmentStateFor:k,setPlaybackQuality:L,getPlaybackQuality:N,setAverageThroughput:X,getTopQualityIndexFor:a,setElementSize:oe,setWindowResizeEventCalled:ae,initialize:t,setConfig:r,reset:n},e(),he}Object.defineProperty(t,"__esModule",{value:!0});var a=n(141),o=r(a),s=n(39),u=r(s),l=n(4),d=r(l),f=n(28),c=r(f),h=n(1),g=r(h),p=n(2),m=r(p),_=n(20),v=r(_),y=n(0),T=r(y),E=n(29),b=r(E),S=n(11),I=r(S),R=n(17),A=r(R),M=n(53),O=r(M),C=n(6),P=r(C),D=n(123),w=r(D),N=n(122),x=r(N),L=n(8),F=r(L),B=n(10),U=r(B),k=n(3),j=r(k),H="abandonload",q="allowload",z=1e3,G=100,V=0;i.__dashjs_factory_name="AbrController";var Y=T.default.getSingletonFactory(i);Y.ABANDON_LOAD=H,Y.QUALITY_DEFAULT=V,t.default=Y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){U={},P(),C()}function t(e,t){var n=d(e),i=r(e,t),a=[];if("fragmentedText"===e)return void s(i[0]);n||(n=B.getSavedMediaSettings(e),l(e,n)),i&&0!==i.length&&(n&&i.forEach(function(e){O(n,e)&&a.push(e)}),s(0===a.length?D(i):a.length>1?D(a):a[0]))}function n(e){var t=e?e.type:null,n=e?e.streamInfo.id:null,r=d(t);return!(!e||!S(t))&&(U[n]=U[n]||w(),!(U[n][t].list.indexOf(e)>=0)&&(U[n][t].list.push(e),r&&O(r,e)&&!i(t,e.streamInfo)&&s(e),!0))}function r(e,t){if(!e||!t)return[];var n=t.id;return U[n]&&U[n][e]?U[n][e].list:[]}function i(e,t){return!e||!t||t&&!U[t.id]?null:U[t.id][e].current}function a(e){var t=e.type,n=e.streamInfo.id;return U[n]&&U[n][t]&&I(U[n][t].current,e)}function s(e){if(e){var t=e.type,n=e.streamInfo,r=n.id,a=i(t,n);if(U[r]&&U[r][t]&&(!a||!I(e,a))){U[r][t].current=e,a&&L.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:a,newMediaInfo:e,switchMode:H[t]});var s=M(e);s&&U[r][t].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),B.setSavedMediaSettings(t,s))}}}function l(e,t){e&&t&&(k[e]=t)}function d(e){return e?k[e]:null}function f(e,t){if(-1===z.indexOf(t))return void x("track switch mode is not supported: "+t);H[e]=t}function h(e){return H[e]}function p(e){if(-1===G.indexOf(e))return void x("track selection mode is not supported: "+e);j=e}function b(){return j||E}function S(e){return"audio"===e||"video"===e||"text"===e||"fragmentedText"===e}function I(e,t){var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function R(e){e&&e.errHandler&&(q=e.errHandler)}function A(){e(),F.resetEmbedded()}function M(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}function O(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter(function(t){return t===e.role})[0],a=!e.accessibility||!!t.accessibility.filter(function(t){return t===e.accessibility})[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return t===e.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function C(){H={audio:v,video:_}}function P(){k={audio:null,video:null}}function D(e){var t=b(),n=[],r=function(e){var t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>n?(n=t,r=[e]):t===n&&r.push(e)}),r},i=function(e){var t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,r=[e]):t===n&&r.push(e)}),r};switch(t){case y:n=r(e),n.length>1&&(n=i(n));break;case T:n=i(e),n.length>1&&(n=r(e));break;default:x("track selection mode is not supported: "+t)}return n[0]}function w(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var N=this.context,x=(0,c.default)(N).getInstance().log,L=(0,u.default)(N).getInstance(),F=(0,g.default)(N).getInstance(),B=(0,m.default)(N).getInstance(),U=void 0,k=void 0,j=void 0,H=void 0,q=void 0,z=[v,_],G=[y,T];return{initialize:e,checkInitialMediaSettingsForType:t,addTrack:n,getTracksFor:r,getCurrentTrackFor:i,isCurrentTrack:a,setTrack:s,setInitialSettings:l,getInitialSettings:d,setSwitchMode:f,getSwitchMode:h,setSelectionModeForInitialTrack:p,getSelectionModeForInitialTrack:b,isMultiTrackSupportedByType:S,isTracksEqual:I,setConfig:R,reset:A}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(1),u=r(s),l=n(0),d=r(l),f=n(3),c=r(f),h=n(15),g=r(h),p=n(39),m=r(p),_="neverReplace",v="alwaysReplace",y="highestBitrate",T="widestRange",E=y;i.__dashjs_factory_name="MediaController";var b=d.default.getSingletonFactory(i);b.TRACK_SWITCH_MODE_NEVER_REPLACE=_,b.TRACK_SWITCH_MODE_ALWAYS_REPLACE=v,b.TRACK_SELECTION_MODE_HIGHEST_BITRATE=y,b.TRACK_SELECTION_MODE_WIDEST_RANGE=T,b.DEFAULT_INIT_TRACK_SELECTION_MODE=E,t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){d.trigger(u.default.ERROR,{error:"capability",event:e})}function t(e,t,n){d.trigger(u.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})}function n(e,t,n,r){d.trigger(u.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:r}})}function r(e,t,n){d.trigger(u.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})}function i(e){d.trigger(u.default.ERROR,{error:"mediasource",event:e})}function a(e){d.trigger(u.default.ERROR,{error:"key_session",event:e})}function s(e){d.trigger(u.default.ERROR,{error:"key_message",event:e})}var l=this.context,d=(0,o.default)(l).getInstance();return{capabilityError:e,downloadError:t,manifestError:n,timedTextError:r,mediaSourceError:i,mediaKeySessionError:a,mediaKeyMessageError:s}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="ErrorHandler";var f=d.default.getSingletonFactory(i);f.CAPABILITY_ERROR_MEDIASOURCE="mediasource",f.CAPABILITY_ERROR_MEDIAKEYS="mediakeys",f.DOWNLOAD_ERROR_ID_MANIFEST="manifest",f.DOWNLOAD_ERROR_ID_SIDX="SIDX",f.DOWNLOAD_ERROR_ID_CONTENT="content",f.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",f.DOWNLOAD_ERROR_ID_XLINK="xlink",f.MANIFEST_ERROR_ID_CODEC="codec",f.MANIFEST_ERROR_ID_PARSE="parse",f.MANIFEST_ERROR_ID_NOSTREAMS="nostreams",f.TIMED_TEXT_ERROR_ID_PARSE="parse",t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,n){B=!1,U=null,V=null,Y=!1,K=NaN,Q=[],Z=null,D||t();var r=n.getStreamProcessor();if(q=r.getMediaInfoArr(),z.setConfig({videoModel:W}),z.initialize(),G=!L.getIsTextTrack(e),N=(0,d.default)(C).getInstance(),H=(0,u.default)(C).getInstance(),H.setConfig({boxParser:N}),G){V=r.getFragmentModel(),this.buffered=(0,c.default)(C).create(),Q=F.getTracksFor("fragmentedText",X.getActiveStreamInfo());for(var i=F.getCurrentTrackFor("fragmentedText",X.getActiveStreamInfo()),a=0;a<Q.length;a++)if(Q[a]===i){$=a;break}}}function t(){J=[],q=[],W=(0,v.default)(C).getInstance(),z=(0,T.default)(C).getInstance(),z.setConfig({videoModel:W}),z.initialize(),N=(0,d.default)(C).getInstance(),H=(0,u.default)(C).getInstance(),H.setConfig({boxParser:N}),G=!1,$=null,ee=!1,te=0,ie=[],re=[],ne=null,D=!0}function n(e,t){function n(e,t){var n=new o.default,r={subtitle:"subtitles",caption:"captions"};n.captionData=e,n.lang=t.lang,n.label=t.id,n.index=t.index,n.isTTML=function(){var e=!1;return t.codec&&t.codec.search("stpp")>=0&&(e=!0),t.mimeType&&t.mimeType.search("ttml")>=0&&(e=!0),e}(),n.video=W.getElement(),n.defaultTrack=A(t),n.isFragmented=G,n.isEmbedded=!!t.isEmbedded,n.kind=function(){var e=t.roles.length>0?r[t.roles[0]]:r.caption;return e=e===r.caption||e===r.subtitle?e:r.caption}();var i=(q?q.length:0)+J.length;z.addTextTrack(n,i)}var i,a,s,u,l,d,f,c=t.mediaInfo,h=c.type,p=c.mimeType,m=c.codec||p;if(!m)return void P("No text type defined");if("fragmentedText"===h)if(Y)if(d=H.getSamplesInfo(e),a=d.sampleList,!Z&&a.length>0&&(Z=a[0].cts-t.start*K),m.search("stpp")>=0)for(U=null!==U?U:M(m),s=0;s<a.length;s++){var _=a[s],v=_.cts,y=v-Z;this.buffered.add(y/K,(y+_.duration)/K);var T=new DataView(e,_.offset,_.subSizes[0]);f=b.default.Utils.dataViewToString(T,"utf-8");var E=[],S=_.offset+_.subSizes[0];for(u=1;u<_.subSizes.length;u++){var R=new Uint8Array(e,S,_.subSizes[u]),O=String.fromCharCode.apply(null,R);E.push(O),S+=_.subSizes[u]}try{i=U.parse(f,v/K,(v+_.duration)/K,E),z.addCaptions($,Z/K,i)}catch(e){P("TTML parser error: "+e.message)}}else{var C=[];for(s=0;s<a.length;s++){var D=a[s];D.cts-=Z,this.buffered.add(D.cts/K,(D.cts+D.duration)/K);var w=e.slice(D.offset,D.offset+D.size),N=b.default.parseBuffer(w);for(u=0;u<N.boxes.length;u++){var L=N.boxes[u];if(P("VTT box1: "+L.type),"vtte"!==L.type&&"vttc"===L.type)for(P("VTT vttc boxes.length = "+L.boxes.length),l=0;l<L.boxes.length;l++){var F=L.boxes[l];if(P("VTT box2: "+F.type),"payl"===F.type){var B=F.cue_text;P("VTT cue_text = "+B);var k=D.cts/K,j=(D.cts+D.duration)/K;C.push({start:k,end:j,data:B,styles:{}}),P("VTT "+k+"-"+j+" : "+B)}}}}C.length>0&&z.addCaptions($,0,C)}else{for(Y=!0,s=0;s<q.length;s++)n(null,q[s]);K=H.getMediaTimescaleFromMoov(e)}else if("text"===h){var V=new DataView(e,0,e.byteLength);f=b.default.Utils.dataViewToString(V,"utf-8");try{i=M(m).parse(f),n(i,c)}catch(e){x.timedTextError(e,"parse",f)}}else if("video"===h)if("InitializationSegment"===t.segmentType){if(0===te)for(te=H.getMediaTimescaleFromMoov(e),s=0;s<J.length;s++)n(null,J[s])}else{if(0===te)return void P("CEA-608: No timescale for embeddedTextTrack yet");d=H.getSamplesInfo(e);var Q=d.sequenceNumber;if(!ie[0]&&!ie[1]){var X=void 0,ee=void 0;for(s=0;s<J.length;s++){if("CC1"===J[s].id?(0,ee=z.getTrackIdxForId("CC1")):"CC3"===J[s].id&&(1,ee=z.getTrackIdxForId("CC3")),-1===ee)return void P("CEA-608: data before track is ready.");X=function(e,t){function n(e,n,r){var i=null;if(W.getTTMLRenderingDiv())i=g(W.getElement(),e,n,r);else{i=[{start:e,end:n,data:r.getDisplayText(),styles:{}}]}i&&z.addCaptions(t,0,i)}return n}(0,ee),ie[s]=new I.default.Cea608Parser(s,{newCue:X},null)}}if(te&&-1==re.indexOf(Q)){if(null!==ne&&Q!==ne+1)for(s=0;s<ie.length;s++)ie[s]&&ie[s].reset();for(var ae=r(e),oe=0;oe<ie.length;oe++){var se=ae.fields[oe],ue=ie[oe];if(ue){for(s=0;s<se.length;s++)ue.addData(se[s][0]/te,se[s][1]);ae.endTime&&ue.cueSplitAtTime(ae.endTime/te)}}ne=Q,re.push(Q)}}}function r(e){var t=N.parse(e),n=t.getBox("moof"),r=t.getBox("tfdt"),i=t.getBox("tfhd"),a=t.getBoxes("trun"),o=null;if(0===a.length)return null;o=a[0],a.length>1&&P("Warning: Too many truns");for(var s=n.offset+o.data_offset,u=o.sample_count,l=s,d=r.baseMediaDecodeTime,f=new DataView(e),c={startTime:null,endTime:null,fields:[[],[]]},h=0,g=0;g<u;g++){var p=o.samples[g];void 0===p.sample_duration&&(p.sample_duration=i.default_sample_duration),void 0===p.sample_size&&(p.sample_size=i.default_sample_size),void 0===p.sample_composition_time_offset&&(p.sample_composition_time_offset=0);for(var m=d+h+p.sample_composition_time_offset,_=I.default.findCea608Nalus(f,l,p.sample_size),v=0;v<_.length;v++)for(var y=I.default.extractCea608DataFromRange(f,_[v]),T=0;T<2;T++)y[T].length>0&&function(e,t,n){var r=e.length;if(r>0){if(t>=e[r-1][0])e.push([t,n]);else for(var i=r-1;i>=0;i--)if(t<e[i][0]){e.splice(i,0,[t,n]);break}}else e.push([t,n])}(c.fields[T],m,y[T]);h+=p.sample_duration,l+=p.sample_size}var E=d+h;return c.startTime=d,c.endTime=E,c}function i(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}function a(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function s(e){return"red"==e?"rgb(255, 0, 0)":"green"==e?"rgb(0, 255, 0)":"blue"==e?"rgb(0, 0, 255)":"cyan"==e?"rgb(0, 255, 255)":"magenta"==e?"rgb(255, 0, 255)":"yellow"==e?"rgb(255, 255, 0)":"white"==e?"rgb(255, 255, 255)":"black"==e?"rgb(0, 0, 0)":e}function l(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?s(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?s(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function f(e){return e.replace(/^\s+/g,"")}function h(e){return e.replace(/\s+$/g,"")}function g(e,t,n,r){var o=null,s=null,u=!1,d=-1,c={start:t,end:n,spans:[]},g="style_cea608_white_black",p={},m={},_=[],v=void 0,y=void 0;for(v=0;v<15;++v){var T=r.rows[v],E="",b=null;if(!1===T.isEmpty()){var S=i(T.chars);null===o&&(o={x:S,y1:v,y2:v+1,p:[]}),S!==d&&u&&(o.p.push(c),c={start:t,end:n,spans:[]},o.y2=v,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(_.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o={x:S,y1:v,y2:v+1,p:[]});for(var I=0;I<T.chars.length;++I){var R=T.chars[I],A=R.penState;if(null===b||!A.equals(b)){E.trim().length>0&&(c.spans.push({name:g,line:E,row:v}),E="");var M="style_cea608_"+A.foreground+"_"+A.background;A.underline&&(M+="_underline"),A.italics&&(M+="_italics"),m.hasOwnProperty(M)||(m[M]=JSON.parse(JSON.stringify(A))),b=A,g=M}E+=R.uchar}E.trim().length>0&&c.spans.push({name:g,line:E,row:v}),u=!0,d=S}else u=!1,d=-1,o&&(o.p.push(c),c={start:t,end:n,spans:[]},o.y2=v,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(_.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o=null)}o&&(o.p.push(c),o.y2=v+1,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===p.hasOwnProperty(o.name)?(_.push(o),p[o.name]=o):(s=p[o.name],s.p.contat(o.p)),o=null);var O=[];for(v=0;v<_.length;++v){var C=_[v],P="sub_cea608_"+w++,D=document.createElement("div");D.id=P;var N=a(C);D.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+N;var x=document.createElement("div");x.className="paragraph bodyStyle",x.style.cssText=l(e);var L=document.createElement("div");L.className="cueUniWrapper",L.style.cssText="unicode-bidi: normal; direction: ltr;";for(var F=0;F<C.p.length;++F){var B=C.p[F],U=0;for(y=0;y<B.spans.length;++y){var k=B.spans[y];if(k.line.length>0){if(0!==y&&U!=k.row){var j=document.createElement("br");j.className="lineBreak",L.appendChild(j)}var H=!1;U===k.row&&(H=!0),U=k.row;var q=m[k.name],z=document.createElement("span");z.className="spanPadding "+k.name+" customSpanColor",z.style.cssText=l(e,q),0!==y&&H?y===B.spans.length-1?z.textContent=h(k.line):z.textContent=k.line:0===y&&B.spans.length>1&&k.row===B.spans[1].row?z.textContent=f(k.line):z.textContent=k.line.trim(),L.appendChild(z)}}}x.appendChild(L),D.appendChild(x);var G={bodyStyle:["%",90]};for(y in m)m.hasOwnProperty(y)&&(G[y]=["%",90]);O.push({type:"html",start:t,end:n,cueHTMLElement:D,cueID:P,cellResolution:[32,15],isFromCEA608:!0,regions:_,regionID:C.name,videoHeight:e.videoHeight,videoWidth:e.videoWidth,fontSize:G,lineHeight:{},linePadding:{}})}return O}function p(){z.deleteAllTextTracks(),B=!1,U=null,H=null,q=null,z=null,G=!1,V=null,Y=!1,K=NaN,Q=[],W=null,X=null,D=!1,J=null}function _(e){D||t(),"CC1"===e.id||"CC3"===e.id?J.push(e):P("Warning: Embedded track "+e.id+" not supported!")}function y(){D=!1,J=[],ie=[null,null],re=[],ne=null}function E(){return B}function S(e){e&&(e.errHandler&&(x=e.errHandler),e.dashManifestModel&&(L=e.dashManifestModel),e.mediaController&&(F=e.mediaController),e.videoModel&&(W=e.videoModel),e.streamController&&(X=e.streamController),e.textTracks&&(z=e.textTracks),e.VTTParser&&(k=e.VTTParser),e.TTMLParser&&(j=e.TTMLParser))}function R(){for(var e=W.getElement(),t=e.textTracks,n=t.length,r=n-J.length,i=z.getCurrentTrackIdx(),a=0;a<n;a++){var o=t[a];if(B="showing"!==o.mode,"showing"===o.mode){if(i!==a&&(z.setCurrentTrackIdx(a),z.addCaptions(a,0,null),G&&a<r)){var s=F.getCurrentTrackFor("fragmentedText",X.getActiveStreamInfo()),u=Q[a];u!==s&&(V.abortRequests(),z.deleteTrackCues(s),F.setTrack(u),$=a)}break}}B&&z.setCurrentTrackIdx(-1)}function A(e){var t=!1;return J.length>1&&e.isEmbedded?t=e.id&&"CC1"===e.id:1===J.length?e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===J.length&&(t=e.index===q[0].index),t}function M(e){var t;return e.search("vtt")>=0?t=k:(e.search("ttml")>=0||e.search("stpp")>=0)&&(t=j,t.setConfig({videoModel:W})),t}function O(){return z.getCurrentTrackIdx()}var C=this.context,P=(0,m.default)(C).getInstance().log,D=!1,w=0,N=void 0,x=void 0,L=void 0,F=void 0,B=void 0,U=void 0,k=void 0,j=void 0,H=void 0,q=void 0,z=void 0,G=void 0,V=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,Z=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0;return{initialize:e,append:n,abort:p,getCurrentTrackIdx:O,getAllTracksAreDisabled:E,setTextTrack:R,setConfig:S,addEmbeddedTrack:_,resetEmbedded:y}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(149),o=r(a),s=n(77),u=r(s),l=n(38),d=r(l),f=n(57),c=r(f),h=n(0),g=r(h),p=n(3),m=r(p),_=n(17),v=r(_),y=n(36),T=r(y),E=n(41),b=r(E),S=n(42),I=r(S);i.__dashjs_factory_name="TextSourceBuffer",t.default=g.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){Te=e,Z(t),Pe=n,Ne=(0,u.default)(te).getInstance(),Ce=(0,g.default)(te).getInstance(),De=(0,c.default)(te).getInstance(),xe=(0,O.default)(te).getInstance(),we=Pe.getScheduleController(),he=De.getQualityFor(Te,Pe.getStreamInfo()),re.on(T.default.DATA_UPDATE_COMPLETED,k,this),re.on(T.default.INIT_FRAGMENT_LOADED,i,this),re.on(T.default.MEDIA_FRAGMENT_LOADED,s,this),re.on(T.default.QUALITY_CHANGE_REQUESTED,h,this),re.on(T.default.STREAM_COMPLETED,j,this),re.on(T.default.PLAYBACK_PROGRESS,_,this),re.on(T.default.PLAYBACK_TIME_UPDATED,_,this),re.on(T.default.PLAYBACK_RATE_CHANGED,z,this),re.on(T.default.PLAYBACK_SEEKING,p,this),re.on(T.default.WALLCLOCK_TIME_UPDATED,q,this),re.on(T.default.CURRENT_TRACK_CHANGED,H,this,v.default.EVENT_PRIORITY_HIGH),re.on(T.default.SOURCEBUFFER_APPEND_COMPLETED,f,this),re.on(T.default.SOURCEBUFFER_REMOVE_COMPLETED,B,this)}function n(e){if(!e||!_e||!Pe)return null;var t=null;try{t=oe.createSourceBuffer(_e,e),t&&t.hasOwnProperty("initialize")&&t.initialize(Te,this)}catch(e){se.mediaSourceError("Error creating "+Te+" source buffer.")}return Q(t),U(Pe.getRepresentationInfoForQuality(he).MSETimeOffset),t}function r(){return Pe.getStreamInfo().id===ue.getActiveStreamInfo().id}function i(e){e.fragmentModel===Pe.getFragmentModel()&&(ne("Init fragment finished loading saving to",Te+"'s init cache"),xe.save(e.chunk),l(e.chunk))}function a(e,t){var n=xe.extract(e,Te,t);n?l(n):re.trigger(T.default.INIT_REQUESTED,{sender:ce})}function s(e){if(e.fragmentModel===Pe.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=Pe.getRepresentationInfoForQuality(r),a=ae.getValue(),s=de.getEventsFor(a,i.mediaInfo,Pe),u=de.getEventsFor(a,i,Pe);if(s&&s.length>0||u&&u.length>0){var d=Pe.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],f=M(n,d,s,u);Pe.getEventController().addInbandEvents(f)}t.bytes=w(n),l(t)}}function l(e){Ae=!0,Se=e,oe.append(Ee,e),"video"===e.mediaInfo.type&&e.mediaInfo.embeddedCaptions&&fe.append(e.bytes,e)}function f(e){if(Ee===e.buffer){if(e.error||!N())return e.error.code===d.default.QUOTA_EXCEEDED_ERROR_CODE&&(me=.8*oe.getTotalBufferedTime(Ee)),void(e.error.code!==d.default.QUOTA_EXCEEDED_ERROR_CODE&&N()||(re.trigger(T.default.QUOTA_EXCEEDED,{sender:ce,criticalBufferLevel:me}),F(L())));isNaN(Se.index)||(ve=Math.max(Se.index,ve),S());var t=oe.getAllRanges(Ee);if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)ne("Buffered Range for type:",Te,":",t.start(n)," - ",t.end(n));_(),Ae=!1,re.trigger(T.default.BYTES_APPENDED,{sender:ce,quality:Se.quality,startTime:Se.start,index:Se.index,bufferedRanges:t})}}function h(e){he!==e.newQuality&&Te===e.mediaType&&Pe.getStreamInfo().id===e.streamInfo.id&&(U(Pe.getRepresentationInfoForQuality(e.newQuality).MSETimeOffset),he=e.newQuality)}function p(){ye=Number.POSITIVE_INFINITY,ge=!1,_()}function _(){y(),E()}function y(){pe=oe.getBufferLength(Ee,Ce.getTime()),re.trigger(T.default.BUFFER_LEVEL_UPDATED,{sender:ce,bufferLevel:pe}),I()}function E(){r()&&(ie.addBufferState(Te,be,we.getBufferTarget()),ie.addBufferLevel(Te,new Date,1e3*pe))}function S(){ve>=ye-1&&!ge&&(ge=!0,re.trigger(T.default.BUFFERING_COMPLETED,{sender:ce,streamInfo:Pe.getStreamInfo()}))}function I(){R(pe<D&&!ge?P:C)}function R(e){be===e||"fragmentedText"===Te&&fe.getAllTracksAreDisabled()||(be=e,E(),re.trigger(T.default.BUFFER_LEVEL_STATE_CHANGED,{sender:ce,state:e,mediaType:Te,streamInfo:Pe.getStreamInfo()}),re.trigger(e===C?T.default.BUFFER_LOADED:T.default.BUFFER_EMPTY,{mediaType:Te}),ne(e===C?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function M(e,t,n,r){var i=Math.max(isNaN(t.startTime)?0:t.startTime,0),a=[],o=[];Oe=!1;for(var s=n.concat(r),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri]=s[u];for(var d=(0,b.default)(te).getInstance().parse(e),f=d.getBoxes("emsg"),c=0,h=f.length;c<h;c++){var g=de.getEvent(f[c],a,i);g&&o.push(g)}return o}function w(e){if(!Oe)return e;for(var t=e.length,n=Math.pow(256,2),r=Math.pow(256,3),i=new Uint8Array(e.length),a=0,o=0;a<t;){var s=String.fromCharCode(e[a+4],e[a+5],e[a+6],e[a+7]),u=e[a]*r+e[a+1]*n+256*e[a+2]+1*e[a+3];if("emsg"!=s)for(var l=a;l<a+u;l++)i[o]=e[l],o++;a+=u}return i.subarray(0,o)}function N(){return oe.getTotalBufferedTime(Ee)<me}function x(){if(Ee&&"fragmentedText"!==Te){var e=Ee.buffered.length?Ee.buffered.start(0):0,t=Ce.getTime()-e-Ne.getBufferToKeep();t>0&&(ne("pruning buffer: "+t+" seconds."),Me=!0,oe.remove(Ee,0,Math.round(e+t),_e))}}function L(){if(!Ee)return null;var e=Ce.getTime(),t=Pe.getFragmentModel().getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:e})[0],n=oe.getBufferRange(Ee,e),r=t&&!isNaN(t.startTime)?t.startTime:Math.floor(e);return null===n&&Ee.buffered.length>0&&(r=Ee.buffered.end(Ee.buffered.length-1)),{start:Ee.buffered.start(0),end:r}}function F(e){e&&Ee&&oe.remove(Ee,e.start,e.end,_e)}function B(e){Ee===e.buffer&&(Me&&(Me=!1),y(),re.trigger(T.default.BUFFER_CLEARED,{sender:ce,from:e.from,to:e.to,hasEnoughSpaceToAppend:N()}))}function U(e){Ee&&Ee.timestampOffset!==e&&!isNaN(e)&&(Ee.timestampOffset=e)}function k(e){e.sender.getStreamProcessor()!==Pe||e.error||U(e.currentRepresentation.MSETimeOffset)}function j(e){e.fragmentModel===Pe.getFragmentModel()&&(ye=e.request.index,S())}function H(e){Ee&&e.newMediaInfo.type===Te&&e.newMediaInfo.streamInfo.id===Pe.getStreamInfo().id&&le.getSwitchMode(Te)===m.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&F(L())}function q(){++Ie*(Ne.getWallclockTimeUpdateInterval()/1e3)>=Ne.getBufferPruningInterval()&&!Ae&&(Ie=0,x())}function z(){I()}function G(){return Te}function V(){return Pe}function Y(e){Pe=e}function K(){return Ee}function Q(e){Ee=e}function W(){return pe}function X(){return me}function Z(e){_e=e}function $(){return _e}function J(){return ge}function ee(e){re.off(T.default.DATA_UPDATE_COMPLETED,k,this),re.off(T.default.QUALITY_CHANGE_REQUESTED,h,this),re.off(T.default.INIT_FRAGMENT_LOADED,i,this),re.off(T.default.MEDIA_FRAGMENT_LOADED,s,this),re.off(T.default.STREAM_COMPLETED,j,this),re.off(T.default.CURRENT_TRACK_CHANGED,H,this),re.off(T.default.PLAYBACK_PROGRESS,_,this),re.off(T.default.PLAYBACK_TIME_UPDATED,_,this),re.off(T.default.PLAYBACK_RATE_CHANGED,z,this),re.off(T.default.PLAYBACK_SEEKING,p,this),re.off(T.default.WALLCLOCK_TIME_UPDATED,q,this),re.off(T.default.SOURCEBUFFER_APPEND_COMPLETED,f,this),re.off(T.default.SOURCEBUFFER_REMOVE_COMPLETED,B,this),me=Number.POSITIVE_INFINITY,be=P,he=c.default.QUALITY_DEFAULT,ye=Number.POSITIVE_INFINITY,ve=0,Se=null,Re=!1,ge=!1,Ae=!1,Me=!1,Ce=null,Pe=null,De=null,we=null,e||(oe.abort(_e,Ee),oe.removeSourceBuffer(_e,Ee)),Ee=null}var te=this.context,ne=(0,A.default)(te).getInstance().log,re=(0,v.default)(te).getInstance(),ie=e.metricsModel,ae=e.manifestModel,oe=e.sourceBufferController,se=e.errHandler,ue=e.streamController,le=e.mediaController,de=e.adapter,fe=e.textSourceBuffer,ce=void 0,he=void 0,ge=void 0,pe=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Oe=void 0,Ce=void 0,Pe=void 0,De=void 0,we=void 0,Ne=void 0,xe=void 0;return ce={initialize:t,createBuffer:n,getType:G,getStreamProcessor:V,setStreamProcessor:Y,getBuffer:K,setBuffer:Q,getBufferLevel:W,getCriticalBufferLevel:X,setMediaSource:Z,getMediaSource:$,getIsBufferingCompleted:J,switchInitData:a,reset:ee},function(){he=c.default.QUALITY_DEFAULT,ge=!1,pe=0,me=Number.POSITIVE_INFINITY,ve=0,ye=Number.POSITIVE_INFINITY,Ee=null,be=P,Ie=0,Re=!1,Ae=!1,Me=!1,Oe=!1}(),ce}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),o=r(a),s=n(4),u=r(s),l=n(26),d=r(l),f=n(12),c=r(f),h=n(7),g=r(h),p=n(13),m=r(p),_=n(1),v=r(_),y=n(2),T=r(y),E=n(38),b=r(E),S=n(0),I=r(S),R=n(3),A=r(R),M=n(58),O=r(M),C="bufferLoaded",P="bufferStalled",D=.5;i.__dashjs_factory_name="BufferController";var w=I.default.getClassFactory(i);w.BUFFER_LOADED=C,w.BUFFER_EMPTY=P,t.default=w},function(e,t,n){"use strict";function r(){function e(){E=[]}function t(){v.playbackRate=b||1,v.removeEventListener("canplay",t)}function n(e){v&&(v.readyState<=2&&e>0?v.addEventListener("canplay",t):v.playbackRate=e)}function r(e){if(v.currentTime!=e)try{v.currentTime=e}catch(t){0===v.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout(function(){v.currentTime=e},400)}}function i(){return v}function a(e){v=e,v.preload="auto"}function o(e){e?v.src=e:(v.removeAttribute("src"),v.load())}function s(){return v.src}function u(){return T}function l(e){T=e}function d(){return y}function f(e){y=e,y.style.position="absolute",y.style.display="flex",y.style.overflow="hidden",y.style.pointerEvents="none",y.style.top=0,y.style.left=0}function c(e,t){m(e,t)}function h(){return E.length>0}function g(e){var t=void 0;null===e||v.seeking||-1!==E.indexOf(e)||(E.push(e),1===E.length&&(t=document.createEvent("Event"),t.initEvent("waiting",!0,!1),b=v.playbackRate,n(0),v.dispatchEvent(t)))}function p(e){var t=E.indexOf(e),r=void 0;null!==e&&(-1!==t&&E.splice(t,1),!1===h()&&0===v.playbackRate&&(n(b||1),v.paused||(r=document.createEvent("Event"),r.initEvent("playing",!0,!1),v.dispatchEvent(r))))}function m(e,t){t?g(e):p(e)}function _(){var e="webkitDroppedFrameCount"in v&&"webkitDecodedFrameCount"in v,t="getVideoPlaybackQuality"in v,n=null;return t?n=v.getVideoPlaybackQuality():e&&(n={droppedVideoFrames:v.webkitDroppedFrameCount,totalVideoFrames:v.webkitDroppedFrameCount+v.webkitDecodedFrameCount,creationTime:new Date}),n}var v=void 0,y=void 0,T=void 0,E=void 0,b=void 0;return{initialize:e,setCurrentTime:r,setStallState:c,getElement:i,setElement:a,setSource:o,getSource:s,getVideoContainer:u,setVideoContainer:l,getTTMLRenderingDiv:d,setTTMLRenderingDiv:f,getPlaybackQuality:_}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="VideoModel",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer"};i.ACTION_DOWNLOAD="download",i.ACTION_COMPLETE="complete",t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.dashManifestModel&&(N=e.dashManifestModel)}function t(){x=[],L={}}function n(e,t){return t.getRepresentationForQuality(e.quality)}function r(e){return L?L[e.streamInfo.id][e.index]:null}function i(e){for(var t=x.length,n=0;n<t;n++){var r=x[n];if(e.id===r.id)return r}return null}function a(e,t){var n=new o.default,r=t.adaptation.period.mpd.manifest.Period_asArray[t.adaptation.period.index].AdaptationSet_asArray[t.adaptation.index],i=N.getRepresentationFor(t.index,r);return n.id=t.id,n.quality=t.index,n.bandwidth=N.getBandwidth(i),n.DVRWindow=t.segmentAvailabilityRange,n.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),n.MSETimeOffset=t.MSETimeOffset,n.useCalculatedLiveEdgeTime=t.useCalculatedLiveEdgeTime,n.mediaInfo=s(e,t.adaptation),n}function s(e,t){var n,r=new u.default,i=t.period.mpd.manifest.Period_asArray[t.period.index].AdaptationSet_asArray[t.index];return r.id=t.id,r.index=t.index,r.type=t.type,r.streamInfo=f(e,t.period),r.representationCount=N.getRepresentationCount(i),r.lang=N.getLanguageForAdaptation(i),n=N.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=N.getAccessibilityForAdaptation(i).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==v.default&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=N.getAudioChannelConfigurationForAdaptation(i).map(function(e){return e.value}),r.roles=N.getRolesForAdaptation(i).map(function(e){return e.value}),r.codec=N.getCodec(i),r.mimeType=N.getMimeType(i),r.contentProtection=N.getContentProtectionData(i),r.bitrateList=N.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=N.getKID(e)}),r.isText=N.getIsTextTrack(r.mimeType),r}function l(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type="embeddedText",e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=t+" "+n,e.roles=["caption"]}function f(e,t){var n=new d.default;return n.id=t.id,n.index=t.index,n.start=t.start,n.duration=t.duration,n.manifestInfo=h(e,t.mpd),n.isLast=1===e.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n.isFirst=1===e.Period_asArray.length||N.getRegularPeriods(e,N.getMpd(e))[0].id===t.id,n}function h(e,t){var n=new c.default;return n.DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=N.getDuration(e),n.isDynamic=N.getIsDynamic(e),n}function p(e,t,n){var r=N.getAdaptationForType(e,t.index,n,t);if(!r)return null;var a=i(t),o=a.id,u=N.getIndexForAdaptation(r,e,t.index);return L[o]=L[o]||N.getAdaptationsForPeriod(e,a),s(e,L[o][u])}function m(e,t,n){var r,a,o,u,d,f,c=i(t),h=c.id,g=N.getAdaptationsForType(e,t.index,"embeddedText"!==n?n:"video"),p=[];if(!g)return p;for(L[h]=L[h]||N.getAdaptationsForPeriod(e,c),u=0,f=g.length;u<f;u++){if(r=g[u],o=N.getIndexForAdaptation(r,e,t.index),a=s(e,L[h][o]),"embeddedText"===n){var m=a.accessibility.length;for(d=0;d<m;d++)if(a){var _=a.accessibility[d];if(0===_.indexOf("cea-608:")){var v=_.substring(8),y=v.split(";");if("CC"===y[0].substring(0,2))for(d=0;d<y.length;d++)a||(a=s.call(this,e,L[h][o])),l(a,y[d].substring(0,3),y[d].substring(4)),p.push(a),a=null;else for(d=0;d<y.length;d++)a||(a=s.call(this,e,L[h][o])),l(a,"CC"+(d+1),y[d]),p.push(a),a=null}else 0===_.indexOf("cea-608")&&(l(a,"CC1","eng"),p.push(a),a=null)}}a&&"embeddedText"!==n&&p.push(a)}return p}function _(e){if(!e)return null;var t=[],n=N.getMpd(e);x=N.getRegularPeriods(e,n),L={};for(var r=0,i=x.length;r<i;r++)t.push(f(e,x[r]));return t}function y(e){return h(e,N.getMpd(e))}function E(e,t){var n=e.getRepresentationController().getRepresentationForQuality(t);return e.getIndexHandler().getInitRequest(n)}function b(e,t){var r=n(t,e.getRepresentationController());return e.getIndexHandler().getNextSegmentRequest(r)}function S(e,t,r,i){var a=n(t,e.getRepresentationController());return e.getIndexHandler().getSegmentRequestForTime(a,r,i)}function I(e,t,r){var i=n(t,e.getRepresentationController());return e.getIndexHandler().generateSegmentRequestForTime(i,r)}function R(e){return e.getIndexHandler().getCurrentTime()}function A(e,t){return e.getIndexHandler().setCurrentTime(t)}function M(e,t){var n,a,o=i(t.getStreamInfo()),s=t.getMediaInfo(),u=r(s),l=t.getType();n=s.id,a=n?N.getAdaptationForId(n,e,o.index):N.getAdaptationForIndex(s.index,e,o.index),t.getRepresentationController().updateData(a,u,l)}function O(e,t,n){var r=t.getRepresentationForQuality(n);return r?a(e,r):null}function C(e,t){var n=t.getCurrentRepresentation();return n?a(e,n):null}function P(e,t,n){var r=new g.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,f=n*o+s;return t[i]?(r.eventStream=t[i],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.presentationTime=f,r.messageData=d,r.presentationTimeDelta=s,r):null}function D(e,t,a){var s=[];return t instanceof d.default?s=N.getEventsForPeriod(e,i(t)):t instanceof u.default?s=N.getEventStreamForAdaptationSet(e,r(t)):t instanceof o.default&&(s=N.getEventStreamForRepresentation(e,n(t,a.getRepresentationController()))),s}function w(){x=[],L={}}var N=void 0,x=void 0,L=void 0;return{initialize:t,convertDataToTrack:a,convertDataToMedia:s,convertDataToStream:f,getDataForTrack:n,getDataForMedia:r,getDataForStream:i,getStreamsInfo:_,getManifestInfo:y,getMediaInfoForType:p,getAllMediaInfoForType:m,getCurrentRepresentationInfo:C,getRepresentationInfoForQuality:O,updateData:M,getInitRequest:E,getNextFragmentRequest:b,getFragmentRequestForTime:S,generateFragmentRequestForTime:I,getIndexHandlerTime:R,setIndexHandlerTime:A,getEventsFor:D,getEvent:P,setConfig:e,reset:w,metricsList:T}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(150),o=r(a),s=n(146),u=r(s),l=n(148),d=r(l),f=n(145),c=r(f),h=n(47),g=r(h),p=n(0),m=r(p),_=n(42),v=r(_),y=n(44),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y);i.__dashjs_factory_name="DashAdapter",t.default=m.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.STREAM_INITIALIZED="streamInitialized",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.CAN_PLAY="canPlay",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e}return a(t,e),t}(s.default),l=new u;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){function t(e,n){var r=e.request,i=new XMLHttpRequest,a=[],o=!0,d=!0,c=new Date,h=c,v=0,y=function(e){d=!1,r.requestStartDate=c,r.requestEndDate=new Date,r.firstByteDate=r.firstByteDate||c,r.checkExistenceOnly||l.addHttpRequest(r.mediaType,null,r.type,r.url,i.responseURL||null,r.serviceLocation||null,r.range||null,r.requestStartDate,r.firstByteDate,r.requestEndDate,i.status,r.duration,i.getAllResponseHeaders(),e?a:null)},T=function(){-1!==g.indexOf(i)&&(g.splice(g.indexOf(i),1),d&&(y(!1),n>0?(n--,m.push(setTimeout(function(){t(e,n)},s.getRetryIntervalForType(r.type)))):(u.downloadError(_[r.type],r.url,r),e.error&&e.error(r,"error",i.statusText),e.complete&&e.complete(r,i.statusText))))},E=function(t){var n=new Date;o&&(o=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(r.firstByteDate=n)),t.lengthComputable&&(r.bytesLoaded=t.loaded,r.bytesTotal=t.total),a.push({s:h,d:n.getTime()-h.getTime(),b:[t.loaded?t.loaded-v:0]}),h=n,v=t.loaded,e.progress&&e.progress()},b=function(){i.status>=200&&i.status<=299&&(y(!0),e.success&&e.success(i.response,i.statusText,i),e.complete&&e.complete(r,i.statusText))};try{var S=f.modifyRequestURL(r.url),I=r.checkExistenceOnly?"HEAD":"GET";i.open(I,S,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=c),i=f.modifyRequestHeader(i),i.withCredentials=s.getXHRWithCredentialsForType(r.type),i.onload=b,i.onloadend=T,i.onerror=T,i.onprogress=E;var R=(new Date).getTime();if(isNaN(r.delayLoadingTime)||R>=r.delayLoadingTime)g.push(i),i.send();else{var A={xhr:i};p.push(A),A.delayTimeout=setTimeout(function(){if(-1!==p.indexOf(A)){p.splice(p.indexOf(A),1);try{g.push(A.xhr),A.xhr.send()}catch(e){A.xhr.onerror()}}},r.delayLoadingTime-R)}}catch(e){i.onerror()}}function n(e){e.request&&t(e,s.getRetryAttemptsForType(e.request.type))}function r(){m.forEach(function(e){return clearTimeout(e)}),m=[],p.forEach(function(e){return clearTimeout(e.delayTimeout)}),p=[],g.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}),g=[]}var a=this.context,s=(0,d.default)(a).getInstance(),u=e.errHandler,l=e.metricsModel,f=e.requestModifier,h=void 0,g=void 0,p=void 0,m=void 0,_=void 0;return h={load:n,abort:r},function(){var e;g=[],p=[],m=[],e={},i(e,o.HTTPRequest.MPD_TYPE,c.default.DOWNLOAD_ERROR_ID_MANIFEST),i(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,c.default.DOWNLOAD_ERROR_ID_XLINK),i(e,o.HTTPRequest.INIT_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),i(e,o.HTTPRequest.OTHER_TYPE,c.default.DOWNLOAD_ERROR_ID_CONTENT),_=e}(),h}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=n(0),u=r(s),l=n(4),d=r(l),f=n(14),c=r(f);a.__dashjs_factory_name="XHRLoader";var h=u.default.getClassFactory(a);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,s){he=e,ce=s,ue.initialize(),oe=(0,M.default)(G).getInstance(),W=(0,d.default)(G).getInstance(),W.setConfig({log:V,manifestModel:Z,dashManifestModel:$}),W.initialize(X),ye=(0,v.default)(G).getInstance(),Te=(0,o.default)(G).getInstance(),Te.setConfig({streamController:K,timelineConverter:ue,metricsModel:ee,dashMetrics:te,manifestModel:Z,dashManifestModel:$,adapter:J,videoModel:ye}),Y.on(g.default.TIME_SYNCHRONIZATION_COMPLETED,O,this),Y.on(g.default.PLAYBACK_SEEKING,n,this),Y.on(g.default.PLAYBACK_TIME_UPDATED,t,this),Y.on(g.default.PLAYBACK_ENDED,h,this),Y.on(g.default.PLAYBACK_ERROR,x,this),Y.on(g.default.PLAYBACK_STARTED,r,this),Y.on(g.default.PLAYBACK_PAUSED,i,this),Y.on(g.default.MANIFEST_UPDATED,C,this),Y.on(g.default.STREAM_BUFFERING_COMPLETED,a,this)}function t(e){if(P()){var t=ye.getPlaybackQuality();t&&ee.addDroppedFrames("video",t)}Te.isSeeking()||e.timeToEnd<=z&&h()}function n(e){var t=s(e.seekTime);t&&t!==de?(w(S.PlayListTrace.END_OF_PERIOD_STOP_REASON),_(de,t,e.seekTime)):w(S.PlayListTrace.USER_REQUEST_STOP_REASON),N(S.PlayList.SEEK_START_REASON)}function r(){Se?(Se=!1,N(S.PlayList.INITIAL_PLAYOUT_START_REASON)):be&&(be=!1,N(S.PlayList.RESUME_FROM_PAUSE_START_REASON))}function i(e){e.ended||(be=!0,w(S.PlayListTrace.USER_REQUEST_STOP_REASON))}function a(){var e=F().isLast;ve&&e&&re.signalEndOfStream(ve)}function s(e){var t=0,n=null,r=le.length;r>0&&(t+=le[0].getStartTime());for(var i=0;i<r;i++)if(n=le[i],t+=n.getDuration(),e<t)return n;return null}function l(e,t){for(var n=null,r=0,i=0,a=null,o=le.length,s=0;s<o;s++){if(n=le[s],i=n.getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null}function f(){var e=[];return de.getProcessors().forEach(function(t){e.push(t.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,e)}function h(){var e=p();e&&_(de,e,NaN),w(e?S.PlayListTrace.END_OF_PERIOD_STOP_REASON:S.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function p(){if(de){var e=de.getStreamInfo().start,t=de.getStreamInfo().duration;return le.filter(function(n){return n.getStreamInfo().start===e+t})[0]}}function _(e,t,n){!ge&&t&&e!==t&&(ge=!0,Y.trigger(g.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),e&&e.deactivate(),de=t,Te.initialize(de.getStreamInfo()),Re=D(),y(n))}function y(e){function t(){V("MediaSource is open!"),window.URL.revokeObjectURL(n),ve.removeEventListener("sourceopen",t),ve.removeEventListener("webkitsourceopen",t),b(),E(e)}var n=void 0;ve?re.detachMediaSource(ye):ve=re.createMediaSource(),ve.addEventListener("sourceopen",t,!1),ve.addEventListener("webkitsourceopen",t,!1),n=re.attachMediaSource(ve,ye),V("MediaSource attached to element.  Waiting on open...")}function E(e){if(de.activate(ve),!Se)if(isNaN(e)){var t=Te.getStreamStartTime(!0);de.getProcessors().forEach(function(e){J.setIndexHandlerTime(e,t)}),Te.seek(t)}else Te.seek(e);de.startEventController(),!he&&Se||Te.play(),ge=!1,Y.trigger(g.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:de.getStreamInfo()})}function b(){var e=de.getStreamInfo().manifestInfo.duration,t=re.setDuration(ve,e);V("Duration successfully set to: "+t)}function I(e){for(var t=0,n=le.length;t<n;t++)if(le[t].getId()===e.id)return le[t];return null}function A(e){try{var t=J.getStreamsInfo(e);if(0===t.length)throw new Error("There are no streams");var n=te.getCurrentManifestUpdate(ee.getMetricsFor("stream"));ee.updateManifestUpdateInfo(n,{currentTime:Te.getTime(),buffered:ye.getElement().buffered,presentationStartTime:t[0].start,clientTimeOffset:ue.getClientTimeOffset()});for(var r=0,i=t.length;r<i;r++){var a=t[r],o=I(a);o?o.updateData(a):(o=(0,u.default)(G).create({manifestModel:Z,manifestUpdater:W,adapter:J,timelineConverter:ue,capabilities:Q,errHandler:se,baseURLController:ae}),le.push(o),o.initialize(a,fe)),ee.addManifestUpdateStreamInfo(n,a.id,a.index,a.start,a.duration)}de||_(null,le[0],NaN),Y.trigger(g.default.STREAMS_COMPOSED)}catch(t){se.manifestError(t.message,"nostreamscomposed",e),_e=!0,q()}}function O(){var e=Z.getValue();fe&&(Y.trigger(g.default.PROTECTION_CREATED,{controller:fe,manifest:e}),fe.setMediaElement(ye.getElement()),ce&&fe.setProtectionData(ce)),A(e)}function C(e){if(e.error)_e=!0,q();else{var t,n,r=e.manifest,i=J.getStreamsInfo(r)[0],a=J.getMediaInfoForType(r,i,"video")||J.getMediaInfoForType(r,i,"audio");a&&(t=J.getDataForMedia(a),(n=$.getRepresentationsForAdaptation(r,t)[0].useCalculatedLiveEdgeTime)&&(V("SegmentTimeline detected using calculated Live Edge Time"),Ee.setUseManifestDateHeaderTimeSource(!1)));var o=$.getUTCTimingSources(e.manifest),s=!$.getIsDynamic(r)||n?o:o.concat(Ee.getUTCTimingSources()),u=(0,m.default)(G).getInstance().isManifestHTTPS();s.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===T.default.DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),V("Matching default timing source protocol to manifest protocol: ",e.value))}),ae.initialize(r),ie.setConfig({metricsModel:ee,dashMetrics:te}),ie.initialize(s,Ee.getUseManifestDateHeaderTimeSource())}}function P(){return void 0===Re&&(Re=D()),Re}function D(){var e=!1;return de.getProcessors().forEach(function(t){"video"===t.getMediaInfo().type&&(e=!0)}),e}function w(e,t){t=t||new Date,Ie&&(de&&de.getProcessors().forEach(function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)}),ee.addPlayList(Ie),Ie=null)}function N(e){Ie=new S.PlayList,Ie.start=new Date,Ie.mstart=1e3*Te.getTime(),Ie.starttype=e,de&&de.getProcessors().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(Ie)})}function x(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}me=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),V("Video Element Error: "+t),e.error&&V(e.error),se.mediaSourceError(t),q()}}function L(){return he}function F(){return de?de.getStreamInfo():null}function B(e){return de.getId()===e.id}function U(e){return le.filter(function(t){return t.getId()===e})[0]}function k(e){X.load(e)}function j(e){W.setManifest(e)}function H(e){e&&(e.capabilities&&(Q=e.capabilities),e.manifestLoader&&(X=e.manifestLoader),e.manifestModel&&(Z=e.manifestModel),e.dashManifestModel&&($=e.dashManifestModel),e.protectionController&&(fe=e.protectionController),e.adapter&&(J=e.adapter),e.metricsModel&&(ee=e.metricsModel),e.dashMetrics&&(te=e.dashMetrics),e.liveEdgeFinder&&(ne=e.liveEdgeFinder),e.mediaSourceController&&(re=e.mediaSourceController),e.timeSyncController&&(ie=e.timeSyncController),e.baseURLController&&(ae=e.baseURLController),e.errHandler&&(se=e.errHandler),e.timelineConverter&&(ue=e.timelineConverter))}function q(){ie.reset(),w(me||_e?S.PlayListTrace.FAILURE_STOP_REASON:S.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,o=le.length;e<o;e++){le[e].reset(me)}le=[],Y.off(g.default.PLAYBACK_TIME_UPDATED,t,this),Y.off(g.default.PLAYBACK_SEEKING,n,this),Y.off(g.default.PLAYBACK_ERROR,x,this),Y.off(g.default.PLAYBACK_STARTED,r,this),Y.off(g.default.PLAYBACK_PAUSED,i,this),Y.off(g.default.PLAYBACK_ENDED,h,this),Y.off(g.default.MANIFEST_UPDATED,C,this),Y.off(g.default.STREAM_BUFFERING_COMPLETED,a,this),ae.reset(),W.reset(),ee.clearAllCurrentMetrics(),Z.setValue(null),X.reset(),ue.reset(),ne.reset(),J.reset(),oe.reset(),ge=!1,pe=!1,de=null,me=!1,_e=!1,Re=void 0,Se=!0,be=!1,ve&&(re.detachMediaSource(ye),ve=null),ye=null,fe&&(fe.setMediaElement(null),fe=null,ce=null,Z.getValue()&&Y.trigger(g.default.PROTECTION_DESTROYED,{data:Z.getValue().url})),Y.trigger(g.default.STREAM_TEARDOWN_COMPLETE)}var z=.1,G=this.context,V=(0,R.default)(G).getInstance().log,Y=(0,c.default)(G).getInstance(),K=void 0,Q=void 0,W=void 0,X=void 0,Z=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Re=void 0;return K={initialize:e,getAutoPlay:L,getActiveStreamInfo:F,isStreamActive:B,isVideoTrackPresent:P,getStreamById:U,getTimeRelativeToStreamId:l,load:k,loadWithManifest:j,getActiveStreamCommonEarliestTime:f,setConfig:H,reset:q},function(){fe=null,le=[],Ee=(0,T.default)(G).getInstance(),he=!0,ge=!1,pe=!1,be=!1,Se=!0,Ie=null,me=!1,_e=!1}(),K}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(90),u=r(s),l=n(88),d=r(l),f=n(1),c=r(f),h=n(2),g=r(h),p=n(37),m=r(p),_=n(17),v=r(_),y=n(4),T=r(y),E=n(0),b=r(E),S=n(60),I=n(3),R=r(I),A=n(58),M=r(A);i.__dashjs_factory_name="StreamController",t.default=b.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){function e(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function t(e){var t=e.match(l);return t?t[1]:""}function n(e){return!s.test(e)}function r(e){return n(e)&&"/"===e.charAt(0)}function i(e){return u.test(e)}function a(e,t){return o(e,t)}var o=void 0,s=/^[a-z][a-z0-9+\-.]*:/i,u=/^https?:\/\//i,l=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,d=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},f=function(i,a){var o=e;if(!a)return i;if(!n(i))return i;r(i)&&(o=t);var s=o(a);return[s,i].join("/"!==s.charAt(s.length-1)&&"/"!==i.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),o=d}catch(e){}finally{o=o||f}}(),{parseBaseUrl:e,parseOrigin:t,isRelative:n,isPathAbsolute:r,isHTTPURL:i,resolve:a}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="URLUtils",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this._test=t,this._converter=n}return i(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){for(;e.length<t;)e="0"+e;return e}function i(e,t){return e.representation.startNumber+t}function a(e,t,n){var i,a,o,s,u,l,d=t.length,f="%0".length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",i+d))<0)return e;if((o=e.indexOf("%0",i+d))>i&&o<a)switch(s=e.charAt(a-1),u=parseInt(e.substring(o+f,a-1),10),s){case"d":case"i":case"u":l=r(n.toString(),u);break;case"x":l=r(n.toString(16),u);break;case"X":l=r(n.toString(16),u).toUpperCase();break;case"o":l=r(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,i)+l+e.substring(a+1)}}function o(e,t,n,r){var a,o,s,u;return o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration),s=n.adaptation.period.start+r*o,u=s+o,a=new c.default,a.representation=n,a.duration=o,a.presentationStartTime=s,a.mediaStartTime=e.calcMediaTimeFromPresentationTime(a.presentationStartTime,n),a.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(a.presentationStartTime,n.adaptation.period.mpd,t),a.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(u,n.adaptation.period.mpd,t),a.wallStartTime=e.calcWallTimeForSegment(a,t),a.replacementNumber=i(a,r),a.availabilityIdx=r,a}function s(e,t,n,r,o,s,u,l,d){var f,h,g,p=r/s,m=Math.min(o/s,n.adaptation.period.mpd.maxSegmentDuration);return f=e.calcPresentationTimeFromMediaTime(p,n),h=f+m,g=new c.default,g.representation=n,g.duration=m,g.mediaStartTime=p,g.presentationStartTime=f,g.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,g.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(h,n.adaptation.period.mpd,t),g.wallStartTime=e.calcWallTimeForSegment(g,t),g.replacementTime=r,g.replacementNumber=i(g,d),u=a(u,"Number",g.replacementNumber),u=a(u,"Time",g.replacementTime),g.media=u,g.mediaRange=l,g.availabilityIdx=d,g}function u(e,t){if(!t||!t.segments)return null;var n,r,i=t.segments.length;if(e<i&&(n=t.segments[e])&&n.availabilityIdx===e)return n;for(r=0;r<i;r++)if((n=t.segments[r])&&n.availabilityIdx===e)return n;return null}function l(e,t,n,r,i){var a,o,s=i||10,u=Number.POSITIVE_INFINITY;return t&&!e.isTimeSyncCompleted()?{start:0,end:u}:!t&&n||r<0?null:(a=Math.max(r-2,0),o=Math.min(r+s,u),{start:a,end:o})}function d(e,t,n,r,i,a){var o,s,l=n.segmentDuration,d=n.adaptation.period.mpd.manifest.minBufferTime,f=n.segmentAvailabilityRange,c={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.start),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,f.end)},h=n.segments,g=2*l,p=a||Math.max(2*d,10*l),m=NaN,_=null;return c.start=Math.max(c.start,0),t&&!e.isTimeSyncCompleted()?(o=Math.floor(c.start/l),s=Math.floor(c.end/l),{start:o,end:s}):(h&&h.length>0?(_=u(i,n),m=_?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,_.presentationStartTime):i>0?i*l:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):m=i>0?i*l:t?c.end:c.start,o=Math.floor(Math.max(m-g,c.start)/l),s=Math.floor(Math.min(o+p/l,c.end/l)),{start:o,end:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTokenForTemplate=a,t.getIndexBasedSegment=o,t.getTimeBasedSegment=s,t.getSegmentByIndex=u,t.decideSegmentListRangeForTimeline=l,t.decideSegmentListRangeForTemplate=d;var f=n(35),c=function(e){return e&&e.__esModule?e:{default:e}}(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var n=t.codec,r=null;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new I.default("not really supported");r=e.addSourceBuffer(n)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;r=(0,o.default)(y).getInstance(),r.setConfig({errHandler:(0,c.default)(y).getInstance(),adapter:(0,d.default)(y).getInstance(),dashManifestModel:S,mediaController:(0,u.default)(y).getInstance(),videoModel:(0,b.default)(y).getInstance(),streamController:(0,g.default)(y).getInstance(),textTracks:(0,m.default)(y).getInstance(),VTTParser:(0,v.default)(y).getInstance(),TTMLParser:(0,T.default)(y).getInstance()})}return r}function t(e,t){try{e.removeSourceBuffer(t)}catch(e){}}function n(e,t,n){var r,i,a=null,o=0,s=0,u=null,l=null,d=0,f=n||.15;try{a=e.buffered}catch(e){return null}if(null!==a&&void 0!==a){for(i=0,r=a.length;i<r;i++)if(o=a.start(i),s=a.end(i),null===u)d=Math.abs(o-t),t>=o&&t<s?(u=o,l=s):d<=f&&(u=o,l=s);else{if(!((d=o-l)<=f))break;l=s}if(null!==u)return{start:u,end:l}}return null}function r(e){try{return e.buffered}catch(e){return null}}function i(e){var t,n,i=r(e),a=0;if(!i)return a;for(n=0,t=i.length;n<t;n++)a+=i.end(n)-i.start(n);return a}function a(e,t,r){var i;return i=n(e,t,r),null===i?0:i.end-t}function s(e,t){if(!t)return null;var n,i,a,o,s,u,l,d,f,c=r(t);if(!c)return null;for(var h=0,g=c.length;h<g;h++){if(d=e.length>h,s=d?{start:e.start(h),end:e.end(h)}:null,n=c.start(h),i=c.end(h),!s)return f={start:n,end:i};if(a=s.start===n,o=s.end===i,!a||!o){if(a)f={start:s.end,end:i};else{if(!o)return f={start:n,end:i};f={start:n,end:s.start}}return u=e.length>h+1?{start:e.start(h+1),end:e.end(h+1)}:null,l=h+1<g?{start:c.start(h+1),end:c.end(h+1)}:null,!u||l&&l.start===u.start&&l.end===u.end||(f.end=u.start),f}}return null}function l(e,t){var n=t.bytes,r="append"in e?"append":"appendBuffer"in e?"appendBuffer":null,i="Object"===Object.prototype.toString.call(e).slice(8,-1);if(r)try{_(e,function(){i?e[r](n,t):e[r](n),_(e,function(){E.trigger(O.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n})})})}catch(t){E.trigger(O.default.SOURCEBUFFER_APPEND_COMPLETED,{buffer:e,bytes:n,error:new I.default(t.code,t.message,null)})}}function f(e,t,n,r){try{_(e,function(){t>=0&&n>t&&"ended"!==r.readyState&&e.remove(t,n),_(e,function(){E.trigger(O.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n})})})}catch(r){E.trigger(O.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:t,to:n,error:new I.default(r.code,r.message,null)})}}function h(e,t){try{"open"===e.readyState?t.abort():t.setTextTrack&&"ended"===e.readyState&&t.abort()}catch(e){}}function p(e){e&&e.dashManifestModel&&(S=e.dashManifestModel)}function _(e,t){var n,r=function(){e.updating||(clearInterval(n),t())},i=function n(){e.updating||(e.removeEventListener("updateend",n,!1),t())};if(!e.updating)return void t();if("function"==typeof e.addEventListener)try{e.addEventListener("updateend",i,!1)}catch(e){n=setInterval(r,50)}else n=setInterval(r,50)}var y=this.context,E=(0,A.default)(y).getInstance(),S=void 0;return{append:l,remove:f,abort:h,createSourceBuffer:e,removeSourceBuffer:t,getBufferRange:n,getAllRanges:r,getTotalBufferedTime:i,getBufferLength:a,getRangeDifference:s,setConfig:p}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=r(a),s=n(13),u=r(s),l=n(19),d=r(l),f=n(14),c=r(f),h=n(22),g=r(h),p=n(36),m=r(p),_=n(140),v=r(_),y=n(139),T=r(y),E=n(17),b=r(E),S=n(9),I=r(S),R=n(1),A=r(R),M=n(2),O=r(M),C=n(0),P=r(C);i.__dashjs_factory_name="SourceBufferController";var D=P.default.getSingletonFactory(i);D.QUOTA_EXCEEDED_ERROR_CODE=22,t.default=D},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e}return a(t,e),t}(s.default),l=new u;t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){D=e}function n(e){O=e}function r(){return O}function i(e){var t=function(e,t){return e.action===c.default.ACTION_COMPLETE&&e.action===t.action},n=function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex},r=function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality};return function(i){var a=!1;return i.some(function(i){if(n(e,i)||r(e,i)||t(e,i))return a=!0}),a}(C)}function a(e){var t=e.state instanceof Array?e.state:[e.state],n=[];return t.forEach(function(t){var r=y(t);n=n.concat(v(r,e))}),n}function s(e){C=C.filter(function(t){return isNaN(t.startTime)||t.startTime>=e})}function l(){D.abort(),P=[]}function d(e){switch(e.action){case c.default.ACTION_COMPLETE:C.push(e),T(e,m),R.trigger(u.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case c.default.ACTION_DOWNLOAD:T(e,p),P.push(e),f(e);break;default:I("Unknown request action.")}}function f(e){R.trigger(u.default.FRAGMENT_LOADING_STARTED,{sender:M,request:e}),D.load(e)}function h(e,t,n){for(var r=e.length-1,i=r;i>=0;i--){var a=e[i],o=a.startTime,s=o+a.duration;if(n=void 0!==n?n:a.duration/2,!isNaN(o)&&!isNaN(s)&&t+n>=o&&t-n<s||isNaN(o)&&isNaN(t))return a}return null}function v(e,t){return t.hasOwnProperty("time")?[h(e,t.time,t.threshold)]:e.filter(function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0})}function y(e){var t=void 0;switch(e){case p:t=P;break;case m:t=C;break;default:t=[]}return t}function T(e,t){A.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),A.addRequestsQueue(e.mediaType,P,C)}function E(e){e.sender===D&&(P.splice(P.indexOf(e.request),1),e.response&&!e.error&&C.push(e.request),T(e.request,e.error?_:m),R.trigger(u.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function b(){R.off(u.default.LOADING_COMPLETED,E,this),D&&(D.reset(),D=null),C=[],P=[]}var S=this.context,I=(0,g.default)(S).getInstance().log,R=(0,o.default)(S).getInstance(),A=e.metricsModel,M=void 0,O=void 0,C=void 0,P=void 0,D=void 0;return M={setLoader:t,setScheduleController:n,getScheduleController:r,getRequests:a,isFragmentLoaded:i,removeExecutedRequestsBeforeTime:s,abortRequests:l,executeRequest:d,reset:b},function(){O=null,D=null,C=[],P=[],R.on(u.default.LOADING_COMPLETED,E,M)}(),M}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(18),c=r(f),h=n(3),g=r(h),p="loading",m="executed",_="failed";i.__dashjs_factory_name="FragmentModel";var v=d.default.getClassFactory(i);v.FRAGMENT_MODEL_LOADING=p,v.FRAGMENT_MODEL_EXECUTED=m,v.FRAGMENT_MODEL_CANCELED="canceled",v.FRAGMENT_MODEL_FAILED=_,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){return i}function t(e){i=e,e&&r.trigger(u.default.MANIFEST_LOADED,{data:e})}var n=this.context,r=(0,o.default)(n).getInstance(),i=void 0;return{getValue:e,setValue:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="ManifestModel",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){function e(e){return e}function t(e){return e}return{modifyRequestURL:e,modifyRequestHeader:t}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RequestModifier",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return e.prefix}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function a(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function o(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function s(t,n,r){if(e.datetimeAccessFormPaths.length>0){var a=r.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,a)?o(t):t}return t}function u(t,n,r,a){return!(n==b.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,t,r,a)}function l(r,i){if(r.nodeType==b.DOCUMENT_NODE){for(var o=new Object,d=r.childNodes,f=0;f<d.length;f++){var c=d.item(f);if(c.nodeType==b.ELEMENT_NODE)if(e.ignoreRoot)o=l(c);else{o={};var h=t(c);o[h]=l(c)}}return o}if(r.nodeType==b.ELEMENT_NODE){var o=new Object;o.__cnt=0;for(var g=[],d=r.childNodes,f=0;f<d.length;f++){var c=d.item(f),h=t(c);if(c.nodeType!=b.COMMENT_NODE){var p=i+"."+h;if(u(o,c.nodeType,h,p))if(o.__cnt++,null==o[h]){var m=l(c,p);if("#text"!=h||/[^\s]/.test(m)){var _={};_[h]=m,g.push(_)}o[h]=m,a(o,h,p)}else{null!=o[h]&&(o[h]instanceof Array||(o[h]=[o[h]],a(o,h,p)));var m=l(c,p);if("#text"!=h||/[^\s]/.test(m)){var _={};_[h]=m,g.push(_)}o[h][o[h].length]=m}}}o.__children=g;for(var v=t(r),y=0;y<r.attributes.length;y++){var T=r.attributes.item(y);o.__cnt++;for(var E=T.value,S=0,I=e.matchers.length;S<I;S++){var R=e.matchers[S];R.test(T,v)&&(E=R.converter(T.value))}o[e.attributePrefix+T.name]=E}var A=n(r);return null!=A&&""!=A&&(o.__cnt++,o.__prefix=A),null!=o["#text"]&&(o.__text=o["#text"],o.__text instanceof Array&&(o.__text=o.__text.join("\n")),e.stripWhitespaces&&(o.__text=o.__text.trim()),delete o["#text"],"property"==e.arrayAccessForm&&delete o["#text_asArray"],o.__text=s(o.__text,h,i+"."+h)),null!=o["#cdata-section"]&&(o.__cdata=o["#cdata-section"],delete o["#cdata-section"],"property"==e.arrayAccessForm&&delete o["#cdata-section_asArray"]),0==o.__cnt&&"text"==e.emptyNodeForm?o="":1==o.__cnt&&null!=o.__text?o=o.__text:1!=o.__cnt||null==o.__cdata||e.keepCData?o.__cnt>1&&null!=o.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==o.__text||""==o.__text.trim())&&delete o.__text:o=o.__cdata,delete o.__cnt,!e.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),o}if(r.nodeType==b.TEXT_NODE||r.nodeType==b.CDATA_SECTION_NODE)return r.nodeValue}function d(t,n,i,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var u=i[s],l=t[u];e.escapeMode&&(l=r(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+=a?"/>":">"}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function h(t,n){return!!("property"==e.arrayAccessForm&&c(n.toString(),"_asArray")||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function)}function g(e){var t=0;if(e instanceof Object)for(var n in e)h(e,n)||t++;return t}function p(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||i(e.jsonPropertiesFilter,t,n,r)}function m(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function _(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=r(t.__text):n+=t.__text),n}function v(t){var n="";return t instanceof Object?n+=_(t):null!=t&&(e.escapeMode?n+=r(t):n+=t),n}function y(e,t){return""===e?t:e+"."+t}function T(e,t,n,r){var i="";if(0==e.length)i+=d(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=d(e[a],t,m(e[a]),!1),i+=E(e[a],y(r,t)),i+=f(e[a],t);return i}function E(e,t){var n="";if(g(e)>0)for(var r in e)if(!h(e,r)&&(""==t||p(e,r,y(t,r)))){var i=e[r],a=m(i);if(null==i||void 0==i)n+=d(i,r,a,!0);else if(i instanceof Object)if(i instanceof Array)n+=T(i,r,a,t);else if(i instanceof Date)n+=d(i,r,a,!1),n+=i.toISOString(),n+=f(i,r);else{var o=g(i);o>0||null!=i.__text||null!=i.__cdata?(n+=d(i,r,a,!1),n+=E(i,y(t,r)),n+=f(i,r)):n+=d(i,r,a,!0)}else n+=d(i,r,a,!1),n+=v(i),n+=f(i,r)}return n+=v(e)}e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var b={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var n;if(window.DOMParser){var r=new window.DOMParser,i=null;if(!t)try{i=r.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){i=null}try{n=r.parseFromString(e,"text/xml"),null!=i&&n.getElementsByTagNameNS(i,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e);return n},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(e){return l(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return E(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){I=0,R=!1,A=NaN,S.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,y,this)}function t(){return R}function n(e){R=e}function r(){return I}function i(e){I=e}function a(){return A}function s(e){A=e}function l(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-I)):t.availabilityStartTime}function d(e,t,n){return l.call(this,e,t,n)}function f(e,t,n){return l.call(this,e,t,n,!0)}function c(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*I)/1e3}function h(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function g(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset}function p(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i}function m(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!R&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=c(new Date,n),o=n.start+n.duration;return r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start),r.end=a>=o&&a-i<o?o-i:a-i,r}function _(e,t){return t-e.adaptation.period.start}function v(e,t){return t+e.adaptation.period.start}function y(e){R||void 0!==e.offset&&(i(e.offset/1e3),R=!0)}function T(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t}function E(){S.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,y,this),I=0,R=!1,A=NaN}var b=this.context,S=(0,o.default)(b).getInstance(),I=void 0,R=void 0,A=void 0;return{initialize:e,isTimeSyncCompleted:t,setTimeSyncCompleted:n,getClientTimeOffset:r,setClientTimeOffset:i,getExpectedLiveEdge:a,setExpectedLiveEdge:s,calcAvailabilityStartTimeFromPresentationTime:d,calcAvailabilityEndTimeFromPresentationTime:f,calcPresentationTimeFromWallTime:c,calcPresentationTimeFromMediaTime:h,calcPeriodRelativeTimeFromMpdRelativeTime:_,calcMpdRelativeTimeFromPeriodRelativeTime:v,calcMediaTimeFromPresentationTime:g,calcSegmentAvailabilityRange:m,calcWallTimeForSegment:p,calcMSETimeOffset:T,reset:E}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="TimelineConverter",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.maxPlayoutRate=NaN}return i(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||("BaseURL"!==e.segmentInfoType||"SegmentBase"!==e.segmentInfoType)&&null!==e.range}},{key:"hasSegments",value:function(e){return"BaseURL"!==e.segmentInfoType&&"SegmentBase"!==e.segmentInfoType&&!e.indexRange}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){O=window.VTTCue||window.TextTrackCue,D=[],w=[],N=-1,x=0,L=0,F=0,B=0,U=null,k=null,q=!1,z=2147483647,j=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?H="fullscreenElement":void 0!==document.webkitIsFullScreen?H="webkitIsFullScreen":document.msFullscreenElement?H="msFullscreenElement":document.mozFullScreen&&(H="mozFullScreen")}function t(e){var t=D[e].kind,n=void 0!==D[e].label?D[e].label:D[e].lang,r=D[e].lang,i=j?document.createElement("track"):P.addTextTrack(t,n,r);return j&&(i.kind=t,i.label=n,i.srclang=r),i}function n(e){q=e,U&&!document[H]&&(U.style.zIndex=e?z:null)}function r(e,n){if(D.length===n)return void M("Trying to add too many tracks.");if(D.push(e),void 0===P&&(P=e.video),D.length===n){D.sort(function(e,t){return e.index-t.index}),U=C.getTTMLRenderingDiv();for(var r=-1,i=0;i<D.length;i++){var a=t.call(this,i);w.push(a),D[i].defaultTrack&&(a.default=!0,r=i),j&&P.appendChild(a);var o=P.textTracks[i];o.nonAddedCues=[],U&&(D[i].isTTML||D[i].isEmbedded)?o.renderingType="html":o.renderingType="default",this.addCaptions(i,0,D[i].captionData),A.trigger(u.default.TEXT_TRACK_ADDED)}if(m.call(this,r),r>=0){for(var s=0;s<P.textTracks.length;s++)P.textTracks[s].mode=s===r?"showing":"hidden";this.addCaptions(r,0,null)}A.trigger(u.default.TEXT_TRACKS_ADDED,{index:N,tracks:D})}}function i(e,t,n,r,i,a){var o=e/t,s=n/r,u=0,l=0;o>s?(l=t,u=l/r*n):(u=e,l=u/n*r);var d=0,f=0,c=0,h=0;return u/l>i?(h=l,c=l/(1/i),d=(e-c)/2,f=0):(c=u,h=u/i,d=0,f=(t-h)/2),a?{x:d+.1*c,y:f+.1*h,w:.8*c,h:.8*h}:{x:d,y:f,w:c,h:h}}function a(){var e=this.getCurrentTextTrack();if(e&&"html"===e.renderingType){var t=P.clientWidth/P.clientHeight,n=!1;e.isFromCEA608&&(t=3.5/3,n=!0);var r=i.call(this,P.clientWidth,P.clientHeight,P.videoWidth,P.videoHeight,t,n),a=r.w,o=r.h;if(a!=F||o!=B){x=r.x,L=r.y,F=a,B=o,U.style.left=x+"px",U.style.top=L+"px",U.style.width=F+"px",U.style.height=B+"px";for(var s=0;e.activeCues&&s<e.activeCues.length;++s){var u=e.activeCues[s];u.scaleCue(u)}H&&document[H]||q?U.style.zIndex=z:U.style.zIndex=null}}}function s(e,t){return Math.round(.01*e*t).toString()+"px"}function l(e){var t=F,n=B;if(t*n!=0&&e.layout){var r=e.layout,i=s(r.left,t),a=s(r.top,n),o=s(r.width,t),u=s(r.height,n);U.style.left=i,U.style.top=a,U.style.width=o,U.style.height=u;var l=U.firstChild;l&&l.style&&(l.style.left="0px",l.style.top="0px",l.style.width=o,l.style.height=u)}}function d(e){var t,n,r,i,a,o=F,s=B,u=[o/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){var l=e.linePadding[t];n=(l*u[0]).toString();for(var d=document.getElementsByClassName("spanPadding"),f=0;f<d.length;f++)d[f].style.cssText=d[f].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),d[f].style.cssText=d[f].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize)for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?r=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.fontSize[t][1]),n=(r*u[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),n=(i*u[1]).toString(),a=document.getElementsByClassName(t);for(var h=0;h<a.length;h++)a[h].style.cssText=a[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}function f(e,t,n){var r=e>=0?P.textTracks[e]:null,i=this;if(r){if("showing"!==r.mode)return void(n&&n.length>0&&(r.nonAddedCues=r.nonAddedCues.concat(n)));if(n||(n=r.nonAddedCues,r.nonAddedCues=[]),n&&0!==n.length)for(var o in n){var s,u=n[o];r.cellResolution=u.cellResolution,r.isFromCEA608=u.isFromCEA608,k||"html"!==u.type&&"image"!==u.type||(k=setInterval(a.bind(this),500)),"image"===u.type?(s=new O(u.start-t,u.end-t,""),s.image=u.data,s.id=u.id,s.size=0,s.type="image",s.layout=u.layout,s.scaleCue=l.bind(i),s.onenter=function(){if(U&&"showing"===r.mode){var e=new Image;e.id="ttmlImage_"+this.id,e.src=this.image,e.style.cssText="z-index: 2147483648; pointer-events: none; display: block; visibility: visible !important; position: relative !important;",U.appendChild(e),l.call(i,this)}},s.onexit=function(){if(U)for(var e=U.childNodes,t=0;t<e.length;t++)e[t].id==="ttmlImage_"+this.id&&U.removeChild(e[t])}):"html"===u.type?(s=new O(u.start-t,u.end-t,""),s.cueHTMLElement=u.cueHTMLElement,s.regions=u.regions,s.regionID=u.regionID,s.cueID=u.cueID,s.videoWidth=u.videoWidth,s.videoHeight=u.videoHeight,s.cellResolution=u.cellResolution,s.fontSize=u.fontSize,s.lineHeight=u.lineHeight,s.linePadding=u.linePadding,s.scaleCue=d.bind(i),U.style.left=x+"px",U.style.top=L+"px",U.style.width=F+"px",U.style.height=B+"px",s.onenter=function(){"showing"===r.mode&&(M("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),U.appendChild(this.cueHTMLElement),d.call(i,this))},s.onexit=function(){for(var e=U.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&U.removeChild(e[t])}):(s=new O(u.start-t,u.end-t,u.data),u.styles&&(void 0!==u.styles.align&&s.hasOwnProperty("align")&&(s.align=u.styles.align),void 0!==u.styles.line&&s.hasOwnProperty("line")&&(s.line=u.styles.line),void 0!==u.styles.position&&s.hasOwnProperty("position")&&(s.position=u.styles.position),void 0!==u.styles.size&&s.hasOwnProperty("size")&&(s.size=u.styles.size))),r.addCue(s)}}}function h(){return N>=0?P.textTracks[N]:null}function g(){return N}function p(e){for(var t=-1,n=0;n<P.textTracks.length;n++)if(P.textTracks[n].label===e){t=n;break}return t}function m(e){if(N=e,S.call(this),e>=0){"html"===P.textTracks[e].renderingType?E.call(this):b.call(this)}else b.call(this)}function _(e){return P.textTracks[e]}function v(e){if(e.cues){for(var t=e.cues,n=t.length-1,r=n;r>=0;r--)e.removeCue(t[r]);e.mode="disabled"}}function y(){for(var e=w.length,t=0;t<e;t++)if(j)P.removeChild(w[t]);else{var n=_.call(this,t);n.nonAddedCues=[],v.call(this,n)}w=[],D=[],k&&(clearInterval(k),k=null),S.call(this)}function T(e){P.removeChild(w[e]),w.splice(e,1)}function E(){if(j){var e=document.getElementById("native-cue-style");if(!e){e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);var t=e.sheet;P.id?t.insertRule("#"+P.id+"::cue {background: transparent}",0):0!==P.classList.length?t.insertRule("."+P.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0)}}}function b(){if(j){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}}function S(){if(U)for(;U.firstChild;)U.removeChild(U.firstChild)}function I(e){e&&e.videoModel&&(C=e.videoModel)}var R=this.context,A=(0,o.default)(R).getInstance(),M=(0,c.default)(R).getInstance().log,O=void 0,C=void 0,P=void 0,D=void 0,w=void 0,N=void 0,x=void 0,L=void 0,F=void 0,B=void 0,U=void 0,k=void 0,j=void 0,H=void 0,q=void 0,z=void 0;return{initialize:e,displayCConTop:n,addTextTrack:r,addCaptions:f,getTextTrack:_,getCurrentTextTrack:h,getCurrentTrackIdx:g,setCurrentTrackIdx:m,getTrackIdxForId:p,deleteTrackCues:v,deleteAllTextTracks:y,deleteTextTrack:T,setConfig:I}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(3),c=r(f);i.__dashjs_factory_name="TextTracks",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){a=new o.default,s=[],u=!1}function t(){return a}function n(){return s}function r(){return u}function i(e){function t(e,t,n,r){var i=r[0].split(/[=]/);return r.push({key:i[0],value:i[1]}),r.shift(),r}function n(e,t,n){return t>0&&(d&&0===s.length?s=n[t].split(/[&]/):f&&(r=n[t].split(/[&]/))),n}if(!e)return null;var r=[],i=new RegExp(/[?]/),o=new RegExp(/[#]/),l=new RegExp(/^(https:)?\/\//i),d=i.test(e),f=o.test(e);return u=l.test(e),e.split(/[?#]/).map(n),s.length>0&&(s=s.reduce(t,null)),r.length>0&&(r=r.reduce(t,null),r.forEach(function(e){a[e.key]=e.value})),e}var a=void 0,s=void 0,u=void 0;return{initialize:e,parseURI:i,getURIFragmentData:t,getURIQueryData:n,isManifestHTTPS:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(151),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="URIQueryAndFragmentModel",t.default=u.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var n=d.default.parseBuffer(e),r=(0,o.default)(t).create();return r.setData(n),r}var t=this.context;return{parse:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(137),o=r(a),s=n(0),u=r(s),l=n(41),d=r(l);i.__dashjs_factory_name="BoxParser",t.default=u.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){if(void 0!==v)return v;v=!1;var t;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return m("Warning: DOMStorage access denied: "+e.message),v}if(!t||e!==g&&e!==p)return v;try{t.setItem("1","1"),t.removeItem("1"),v=!0}catch(e){m("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return v}function t(){e(g)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){m(e.message)}}})}function n(){return 6e5*Math.round((new Date).getTime()/6e5)}function r(t,n){return e(t)&&y["get"+n+"CachingInfo"]().enabled}function i(e){if(!r(g,"LastMediaSettings"))return null;var t=h.replace(/\?/,e),n=JSON.parse(localStorage.getItem(t))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=y.getLastMediaSettingsCachingInfo().ttl||!1,a=n.settings;return i&&(localStorage.removeItem(t),a=null),a}function a(e){var t=NaN;if(r(g,"LastBitrate")){var n=c.replace(/\?/,e),i=JSON.parse(localStorage.getItem(n))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=y.getLastBitrateCachingInfo().ttl||!1,o=parseInt(i.bitrate,10);isNaN(o)||a?a&&localStorage.removeItem(n):(t=o,m("Last saved bitrate for "+e+" was "+o))}return t}function o(e,t){if(r(g,"LastMediaSettings")){var i=h.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({settings:t,timestamp:n()}))}catch(e){m(e.message)}}}function s(e,t){if(r(g,"LastBitrate")&&t){var i=c.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({bitrate:t/1e3,timestamp:n()}))}catch(e){m(e.message)}}}var l=this.context,m=(0,d.default)(l).getInstance().log,_=void 0,v=void 0,y=void 0;return _={getSavedBitrateSettings:a,setSavedBitrateSettings:s,getSavedMediaSettings:i,setSavedMediaSettings:o,isSupported:e},function(){y=(0,u.default)(l).getInstance(),t()}(),_}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(4),u=r(s),l=n(3),d=r(l),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],c="dashjs_?_bitrate",h="dashjs_?_settings",g="localStorage",p="sessionStorage";i.__dashjs_factory_name="DOMStorage";var m=o.default.getSingletonFactory(i);t.default=m},function(e,t,n){"use strict";function r(){function e(e,t){r=e,i=t}function t(){var e=i.getCurrentRepresentationInfo(),t=e.DVRWindow.end;return e.useCalculatedLiveEdgeTime&&(t=r.getExpectedLiveEdge(),r.setClientTimeOffset(t-e.DVRWindow.end)),t}function n(){r=null,i=null}var r=void 0,i=void 0;return{initialize:e,getLiveEdge:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="LiveEdgeFinder";var o=a.default.getSingletonFactory(r);t.default=o},function(e,t,n){"use strict";/*! codem-isoboxer v0.2.7 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var r={};r.parseBuffer=function(e){return new i(e).parse()},r.addBoxParser=function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxParsers[e]=t)},r.Utils={},r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},t.parseBuffer=r.parseBuffer,t.addBoxParser=r.addBoxParser,t.Utils=r.Utils,r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._raw=new DataView(e),this._cursor=new r.Cursor,this.boxes=[]};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){this.type&&this.type==e&&t.push(this);for(var r in this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}};var a=function(){this._cursor=new r.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.prototype._readInt=function(e){var t=null;switch(e){case 8:t=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),r=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t=null;switch(e){case 8:t=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:var n=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset),r=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2);t=(n<<8)+r;break;case 32:t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),r=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},a.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0==t)break;e+=String.fromCharCode(t)}return e},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this.size=this._readUint(32),this.type=this._readString(4),1==this.size&&(this.largesize=this._readUint(64)),"uuid"==this.type&&(this.usertype=this._readString(16)),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}!this._incomplete&&this._boxParsers[this.type]&&this._boxParsers[this.type].call(this)},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._boxParsers={},a.prototype._boxParsers.avc1=function(){this.version=this._readUint(16),this.revision_level=this._readUint(16),this.vendor=this._readUint(32),this.temporal_quality=this._readUint(32),this.spatial_quality=this._readUint(32),this.width=this._readUint(16),this.height=this._readUint(16),this.horizontal_resolution=this._readUint(32),this.vertical_resolution=this._readUint(32),this.data_size=this._readUint(32),this.frame_count=this._readUint(16),this.compressor_name=this._readUint(32),this.depth=this._readUint(16),this.color_table_id=this._readUint(16)},["moov","trak","tref","mdia","minf","stbl","edts","dinf","mvex","moof","traf","mfra","udta","meco","strk","vttc"].forEach(function(e){a.prototype._boxParsers[e]=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))}}),a.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=1;e<=this.entry_count;e++){var t={};1==this.version?(t.segment_duration=this._readUint(64),t.media_time=this._readInt(64)):(t.segment_duration=this._readUint(32),t.media_time=this._readInt(32)),t.media_rate_integer=this._readInt(16),t.media_rate_fraction=this._readInt(16),this.entries.push(t)}},a.prototype._boxParsers.emsg=function(){this._parseFullBox(),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.message_data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.free=a.prototype._boxParsers.skip=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.ftyp=a.prototype._boxParsers.styp=function(){for(this.major_brand=this._readString(4),this.minor_versions=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))},a.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},a.prototype._boxParsers.mdat=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},a.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var e=this._readUint(16);this.pad=e>>15,this.language=String.fromCharCode(96+(e>>10&31),96+(e>>5&31),96+(31&e)),this.pre_defined=this._readUint(16)},a.prototype._boxParsers.mehd=function(){this._parseFullBox(),1==this.version?this.fragment_duration=this._readUint(64):this.fragment_duration=this._readUint(32)},a.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},a.prototype._boxParsers.mfro=function(){this._parseFullBox(),this.mfra_size=this._readUint(32)},a.prototype._boxParsers.mp4a=function(){this.reserved1=[this._readUint(32),this._readUint(32)],this.channelcount=this._readUint(16),this.samplesize=this._readUint(16),this.pre_defined=this._readUint(16),this.reserved2=this._readUint(16),this.sample_rate=this._readUint(32)},a.prototype._boxParsers.mvhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this._readTemplate(32));this.pre_defined=[];for(var e=0;e<6;e++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},a.prototype._boxParsers.payl=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.cue_text=r.Utils.dataViewToString(e)},a.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0==this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var e=0;e<this.reference_count;e++){var t={},n=this._readUint(32);t.reference_type=n>>31&1,t.referenced_size=2147483647&n,t.subsegment_duration=this._readUint(32);var r=this._readUint(32);t.starts_with_SAP=r>>31&1,t.SAP_type=r>>28&7,t.SAP_delta_time=268435455&r,this.references.push(t)}},a.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var e=0;e<this.subsegment_count;e++){var t={};t.ranges_count=this._readUint(32),t.ranges=[];for(var n=0;n<t.ranges_count;n++){var r={};r.level=this._readUint(8),r.range_size=this._readUint(24),t.ranges.push(r)}this.subsegments.push(t)}},a.prototype._boxParsers.stsd=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=0;e<this.entry_count;e++)this.entries.push(a.parse(this))},a.prototype._boxParsers.subs=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.samples_with_subsamples=[];for(var e=0,t=0;t<this.entry_count;t++){e+=this._readUint(32);var n=this._readUint(16);if(n>0){for(var r={nr:e,subsamples:[]},i=0;i<n;i++){var a={};1&this.version?a.size=this._readUint(32):a.size=this._readUint(16),a.priority=this._readUint(8),a.discardable=this._readUint(8),a.codec_specific_parameters=this._readUint(32),r.subsamples.push(a)}this.samples_with_subsamples.push(r)}}},a.prototype._boxParsers.tfdt=function(){this._parseFullBox(),1==this.version?this.baseMediaDecodeTime=this._readUint(64):this.baseMediaDecodeTime=this._readUint(32)},a.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags&&(this.base_data_offset=this._readUint(64)),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},a.prototype._boxParsers.tfra=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this._packed=this._readUint(32),this.reserved=this._packed>>>6,this.length_size_of_traf_num=(this._packed&&0xffff00000000)>>>4,this.length_size_of_trun_num=(this._packed&&4294901760)>>>2,this.length_size_of_sample_num=this._packed&&255,this.number_of_entry=this._readUint(32),this.entries=[];for(var e=0;e<this.number_of_entry;e++){var t={};1==this.version?(t.time=this._readUint(64),t.moof_offset=this._readUint(64)):(t.time=this._readUint(32),t.moof_offset=this._readUint(32)),t.traf_number=this._readUint(8*(this.length_size_of_traf_num+1)),t.trun_number=this._readUint(8*(this.length_size_of_trun_num+1)),t.sample_number=this._readUint(8*(this.length_size_of_sample_num+1)),this.entries.push(t)}},a.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var e=0;e<9;e++)this.matrix.push(this._readTemplate(32));this.width=this._readUint(32),this.height=this._readUint(32)},a.prototype._boxParsers.trex=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this.default_sample_description_index=this._readUint(32),this.default_sample_duration=this._readUint(32),this.default_sample_size=this._readUint(32),this.default_sample_flags=this._readUint(32)},a.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var e=0;e<this.sample_count;e++){var t={};256&this.flags&&(t.sample_duration=this._readUint(32)),512&this.flags&&(t.sample_size=this._readUint(32)),1024&this.flags&&(t.sample_flags=this._readUint(32)),2048&this.flags&&(0==this.version?t.sample_composition_time_offset=this._readUint(32):t.sample_composition_time_offset=this._readInt(32)),this.samples.push(t)}},a.prototype._boxParsers.vlab=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.source_label=r.Utils.dataViewToString(e)},a.prototype._boxParsers.vttC=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.config=r.Utils.dataViewToString(e)},a.prototype._boxParsers.vtte=function(){}},function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},o={25:2,26:4,29:6,30:8,31:10,27:13,28:15},s=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},d=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var f=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new d(t,n,r,i,a)};f.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var c=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new f);this.pos=0,this.currPenState=new d};c.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(u.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(u.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);if(this.pos>=32)return void u.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var h=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new c);this.currRow=14,this.nrRollUpRows=null,this.reset()};h.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){u.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){u.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){u.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null===this.nrRollUpRows)return void u.log("DEBUG","roll_up but nrRollUpRows not set yet");u.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),u.log("INFO","Rolling up")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var g=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};g.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,u.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";u.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(u.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){u.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){u.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){u.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){u.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){u.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){u.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){u.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){u.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){u.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){u.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){u.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(u.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,u.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){u.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}u.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=u.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var p=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new g(1,t),new g(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};p.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,u.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(u.log("DATA","["+l([t[o],t[o+1]])+"] -> ("+l([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else u.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,u.log("WARNING","Couldn't parse cleaned data "+l([r,i])+" orig: "+l([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,u.log("DEBUG","Repeated command ("+l([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.cc_RCL():33===t?a.cc_BS():34===t?a.cc_AOF():35===t?a.cc_AON():36===t?a.cc_DER():37===t?a.cc_RU(2):38===t?a.cc_RU(3):39===t?a.cc_RU(4):40===t?a.cc_FON():41===t?a.cc_RDC():42===t?a.cc_TR():43===t?a.cc_RTD():44===t?a.cc_EDM():45===t?a.cc_CR():46===t?a.cc_ENM():47===t&&a.cc_EOC():a.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return u.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[n-1].cc_MIDROW(t),u.log("DEBUG","MIDROW ("+l([e,t])+")"),!0}return!1},parsePAC:function(e,t){var n=null,s=null,u=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,l=(16===e||24===e)&&64<=t&&t<=95;if(!u&&!l)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,s=64<=t&&t<=95?1===n?r[e]:a[e]:1===n?i[e]:o[e];var d=this.interpretPAC(s,t);return this.channels[n-1].setPAC(d),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,u.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o]}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var s=l(i);u.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},parseBackgroundAttributes:function(e,t){var n,r,i,a,o=(16===e||24===e)&&32<=t&&t<=47,u=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!u)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=s[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var m=function(e,t,n){for(var r=0,i=t,a=[];i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+r-1;){s=0;for(var u=255;255===u;)u=e.getUint8(o),s+=u,o++;var l=0;for(u=255;255===u;)u=e.getUint8(o),l+=u,o++;(function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s})(s,l,e,o)&&a.push([o,l]),o+=l}i+=r+4}return a},_=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!=0&&(0===u?(r[0].push(l),r[0].push(d)):1===u&&(r[1].push(l),r[1].push(d)))}return r};e.logger=u,e.PenState=d,e.CaptionScreen=h,e.Cea608Parser=p,e.findCea608Nalus=m,e.extractCea608DataFromRange=_}(t)},function(e,t,n){"use strict";function r(){return i}Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionString=r;var i="2.4.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TCP_CONNECTION="TcpList",t.HTTP_REQUEST="HttpList",t.TRACK_SWITCH="RepSwitchList",t.BUFFER_LEVEL="BufferLevel",t.BUFFER_STATE="BufferState",t.DVR_INFO="DVRInfo",t.DROPPED_FRAMES="DroppedFrames",t.SCHEDULING_INFO="SchedulingInfo",t.REQUESTS_QUEUE="RequestsQueue",t.MANIFEST_UPDATE="ManifestUpdate",t.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",t.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",t.PLAY_LIST="PlayList",t.DVB_ERRORS="DVBErrors"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(70),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i,a,s){var u=this;r(this,e),this._name=t||"",this._properties=[],this._children=i||[],this._isRoot=a||!1,this._isArray=s||!0,Array.isArray(n)&&n.forEach(function(e){u._properties.push(new o.default(e))})}return i(e,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i,a){r(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=i||1,this.dvb_weight=a||1};i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,n){if(pn=(0,T.default)(Xt).getInstance(),gn=(0,v.default)(Xt).getInstance(),!pn.supportsMediaSource())return void gn.capabilityError("mediasource");rn||(rn=!0,sn=(0,U.default)(Xt).getInstance(),vn=(0,u.default)(Xt).getInstance(),un=(0,c.default)(Xt).getInstance(),un.initialize(),Tn=(0,he.default)(Xt).getInstance(),yn=(0,pe.default)(Xt).getInstance(),cn=(0,F.default)(Xt).getInstance(),cn.setConfig({adapter:kt()}),at(),me(void 0===n||n),e&&Ct(e),t&&Nt(t),Jt("[dash.js "+z()+"] MediaPlayer has been initialized"))}function t(){return!!En&&!!tn}function n(){if(!an)throw Yt;(!on||i()&&an)&&vn.play()}function r(){if(!an)throw Yt;vn.pause()}function i(){if(!an)throw Yt;return vn.isPaused()}function a(){if(!an)throw Yt;return vn.isSeeking()}function s(){if(!an)throw Yt;return vn.getIsDynamic()}function l(e){if(!En)throw Kt;Ot().muted=e}function f(){if(!En)throw Kt;return Ot().muted}function h(e){if(!En)throw Kt;Ot().volume=e}function p(){if(!En)throw Kt;return Ot().volume}function _(e){var t=["video","audio","fragmentedText"];if(e){if(-1!==t.indexOf(e)){var n=Ee().getCurrentBufferLevel(be(e));return n||NaN}return Jt("Warning  - getBufferLength requested for invalid type"),NaN}return t.map(function(e){return Ue(e).length>0?Ee().getCurrentBufferLevel(be(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)})}function y(){var e=qt();return e?e.manifestInfo.DVRWindowSize:0}function E(e){var t=qt();if(!t)return 0;var n=t.range.start+e;return n>t.range.end&&(n=t.range.end),n}function S(e){if(!an)throw Yt;var t=vn.getIsDynamic()?E(e):e;vn.seek(t)}function R(e){if(!an)throw Yt;var t=Ot().currentTime;if(void 0!==e)t=mn.getTimeRelativeToStreamId(t,e);else if(vn.getIsDynamic()){var n=qt();t=null===n?0:M()-(n.range.end-n.time)}return t}function M(){if(!an)throw Yt;var e=Ot().duration;if(vn.getIsDynamic()){var t,n=qt();if(!n)return 0;t=n.range.end-n.range.start,e=t<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function C(){if(!an)throw Yt;return R()<0?NaN:zt(R())}function D(){if(!an)throw Yt;return zt(M())}function N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o}function L(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())}function B(e,t,n){oe.default.extend(e,t,n,Xt)}function k(e,t,n){Zt.on(e,t,n)}function H(e,t,n){Zt.off(e,t,n)}function z(){return(0,se.getVersionString)()}function V(){return $t}function K(){if(!En)throw Kt;return En}function W(e){hn.setLiveDelayFragmentCount(e)}function Z(e){hn.setLiveDelay(e)}function J(){return hn.getLiveDelay()}function te(e){hn.setUseSuggestedPresentationDelay(e)}function re(e,t){hn.setLastBitrateCachingInfo(e,t)}function ae(e,t){hn.setLastMediaSettingsCachingInfo(e,t)}function ue(e,t){sn.setMaxAllowedBitrateFor(e,t)}function de(e){return sn.getMaxAllowedBitrateFor(e)}function ce(e,t){sn.setMaxAllowedRepresentationRatioFor(e,t)}function ge(e){return sn.getMaxAllowedRepresentationRatioFor(e)}function me(e){on=e}function ve(){return on}function ye(e){hn.setScheduleWhilePaused(e)}function Te(){return hn.getScheduleWhilePaused()}function Ee(){return yn}function be(e){return cn.getReadOnlyMetricsFor(e)}function Se(e){if(!an)throw Yt;return sn.getQualityFor(e,mn.getActiveStreamInfo())}function Ie(e,t){if(!an)throw Yt;sn.setPlaybackQuality(e,mn.getActiveStreamInfo(),t)}function Re(){sn.setElementSize(),sn.setWindowResizeEventCalled(!0)}function Ae(){return sn.getLimitBitrateByPortal()}function Me(e){sn.setLimitBitrateByPortal(e)}function Oe(){return sn.getUsePixelRatioInLimitBitrateByPortal()}function Ce(e){sn.setUsePixelRatioInLimitBitrateByPortal(e)}function Pe(e){if(!an)throw Yt;void 0===bn&&(bn=(0,O.default)(Xt).getInstance());for(var t=Ot().textTracks,n=t.length,r=0;r<n;r++){var i=t[r],a=e===r?"showing":"hidden";i.mode!==a&&(i.mode=a)}bn.setTextTrack()}function De(){var e=NaN;return bn&&(e=bn.getCurrentTrackIdx()),e}function we(e){if(!an)throw Yt;var t=Gt();return t?t.getBitrateListFor(e):[]}function Ne(e,t){sn.setInitialBitrateFor(e,t)}function xe(e){if(!an)throw Yt;return sn.getInitialBitrateFor(e)}function Le(e,t){sn.setInitialRepresentationRatioFor(e,t)}function Fe(e){return sn.getInitialRepresentationRatioFor(e)}function Be(e){if(!an)throw Yt;return fn.getStreamsInfo(e)}function Ue(e){if(!an)throw Yt;var t=mn.getActiveStreamInfo();return t?un.getTracksFor(e,t):[]}function ke(e,t,n){if(!an)throw Yt;return n=n||fn.getStreamsInfo(t)[0],n?fn.getAllMediaInfoForType(t,n,e):[]}function je(e){if(!an)throw Yt;var t=mn.getActiveStreamInfo();return t?un.getCurrentTrackFor(e,t):null}function He(e,t){un.setInitialSettings(e,t)}function qe(e){return un.getInitialSettings(e)}function ze(e){if(!an)throw Yt;un.setTrack(e)}function Ge(e){return un.getSwitchMode(e)}function Ve(e,t){un.setSwitchMode(e,t)}function Ye(e){un.setSelectionModeForInitialTrack(e)}function Ke(){return un.getSelectionModeForInitialTrack()}function Qe(){return sn.getAutoSwitchBitrateFor("video")||sn.getAutoSwitchBitrateFor("audio")}function We(e){sn.setAutoSwitchBitrateFor("video",e),sn.setAutoSwitchBitrateFor("audio",e)}function Xe(e){return sn.getAutoSwitchBitrateFor(e)}function Ze(e,t){sn.setAutoSwitchBitrateFor(e,t)}function $e(e){hn.setFastSwitchEnabled(e)}function Je(){return hn.getFastSwitchEnabled()}function et(e){hn.setBufferOccupancyABREnabled(e)}function tt(e,t){var n=Bt(),r=this,i=function e(i){i.error?t(null,i.error):t(i.manifest),Zt.off(ne.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()};Zt.on(ne.default.INTERNAL_MANIFEST_LOADED,i,r);var a=(0,P.default)(Xt).getInstance();a.initialize(),n.load(a.parseURI(e))}function nt(e,t){rt(e,t);var n=new o.default;n.schemeIdUri=e,n.value=t,hn.getUTCTimingSources().push(n)}function rt(e,t){var n=hn.getUTCTimingSources();n.forEach(function(r,i){r.schemeIdUri===e&&r.value===t&&n.splice(i,1)})}function it(){hn.setUTCTimingSources([])}function at(){nt(x.default.DEFAULT_UTC_TIMING_SOURCE.scheme,x.default.DEFAULT_UTC_TIMING_SOURCE.value)}function ot(e){hn.setUseManifestDateHeaderTimeSource(e)}function st(e){hn.setBufferToKeep(e)}function ut(e){hn.setBufferPruningInterval(e)}function lt(e){hn.setStableBufferTime(e)}function dt(e){hn.setBufferTimeAtTopQuality(e)}function ft(e){hn.setBufferTimeAtTopQualityLongForm(e)}function ct(e){hn.setLongFormContentDurationThreshold(e)}function ht(e){hn.setRichBufferThreshold(e)}function gt(e){hn.setBandwidthSafetyFactor(e)}function pt(){return hn.getBandwidthSafetyFactor()}function mt(e){hn.setAbandonLoadTimeout(e)}function _t(e){hn.setFragmentRetryAttempts(e)}function vt(e){hn.setFragmentRetryInterval(e)}function yt(e){Tt(void 0,e)}function Tt(e,t){hn.setXHRWithCredentialsForType(e,t)}function Et(e){return hn.getXHRWithCredentialsForType(e)}function bt(){return jt()}function St(e){ln=e}function It(e){nn=e}function Rt(e){var t=(0,b.default)(Xt).getInstance();t.setConfig({videoModel:En}),t.initialize(),t.displayCConTop(e)}function At(){return En?En.getVideoContainer():null}function Mt(e){if(!En)throw Kt;En.setVideoContainer(e)}function Ot(){if(!En)throw Kt;return En.getElement()}function Ct(e){if(!rn)throw Wt;En=null,e&&(En=(0,G.default)(Xt).getInstance(),En.initialize(),En.setElement(e),jt(),Ht()),Lt()}function Pt(){return En?En.getTTMLRenderingDiv():null}function Dt(e){if(!En)throw Kt;En.setTTMLRenderingDiv(e)}function wt(){if(!tn)throw Qt;return tn}function Nt(e){if(!rn)throw Wt;if("string"==typeof e){var t=(0,P.default)(Xt).getInstance();t.initialize(),tn=t.parseURI(e)}else tn=e;Lt()}function xt(){Nt(null),Ct(null),nn=null,ln=null}function Lt(){an?(an=!1,fn.reset(),mn.reset(),vn.reset(),sn.reset(),_n.reset(),un.reset(),mn=null,dn=null,t()&&Vt()):t()&&Vt()}function Ft(){var e=(0,q.default)(Xt).getInstance();e.initialize(),(0,I.default)(Xt).getInstance().setConfig({dashManifestModel:Tn}),un.initialize(),un.setConfig({errHandler:gn}),_n=(0,Y.default)(Xt).getInstance(),_n.initialize(),_n.setConfig({abrRulesCollection:e}),mn=(0,d.default)(Xt).getInstance(),mn.setConfig({capabilities:pn,manifestLoader:Bt(),manifestModel:(0,w.default)(Xt).getInstance(),dashManifestModel:Tn,protectionController:ln,adapter:fn,metricsModel:cn,dashMetrics:yn,liveEdgeFinder:(0,m.default)(Xt).getInstance(),mediaSourceController:(0,Q.default)(Xt).getInstance(),timeSyncController:(0,j.default)(Xt).getInstance(),baseURLController:(0,X.default)(Xt).getInstance(),errHandler:gn,timelineConverter:(0,_e.default)(Xt).getInstance()}),mn.initialize(on,nn),sn.setConfig({abrRulesCollection:e,rulesController:_n,streamController:mn})}function Bt(){return(0,g.default)(Xt).create({errHandler:gn,parser:Ut(),metricsModel:cn,requestModifier:(0,A.default)(Xt).getInstance()})}function Ut(){return(0,fe.default)(Xt).create()}function kt(){return fn=(0,le.default)(Xt).getInstance(),fn.initialize(),fn.setConfig({dashManifestModel:Tn}),fn}function jt(){if(ln)return ln;var e=dashjs.Protection;if("function"==typeof e){var t=e(Xt).create();return ne.default.extend(e.events),ie.default.extend(e.events,{publicOnly:!0}),ln=t.createProtectionSystem({log:Jt,videoModel:En,capabilities:pn,eventBus:Zt,adapter:fn})}return null}function Ht(){if(dn)return dn;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Xt).create();return dn=t.createMetricsReporting({log:Jt,eventBus:Zt,mediaElement:Ot(),dashManifestModel:Tn,metricsModel:cn})}return null}function qt(){var e=cn.getReadOnlyMetricsFor("video")||cn.getReadOnlyMetricsFor("audio");return yn.getCurrentDVRInfo(e)}function zt(e){var t,n=qt();return n?(t=n.manifestInfo.availableFrom.getTime()/1e3,e+(t+n.range.start)):0}function Gt(){if(!an)throw Yt;var e=mn.getActiveStreamInfo();return e?mn.getStreamById(e.id):null}function Vt(){an||(an=!0,Jt("Playback Initialized"),Ft(),"string"==typeof tn?mn.load(tn):mn.loadWithManifest(tn))}var Yt="You must first call play() to init playback before calling this method",Kt="You must first call attachView() to set the video element before calling this method",Qt="You must first call attachSource() with a valid source before calling this method",Wt="MediaPlayer not initialized!",Xt=this.context,Zt=(0,ee.default)(Xt).getInstance(),$t=(0,$.default)(Xt).getInstance(),Jt=$t.log,en=void 0,tn=void 0,nn=void 0,rn=void 0,an=void 0,on=void 0,sn=void 0,un=void 0,ln=void 0,dn=void 0,fn=void 0,cn=void 0,hn=void 0,gn=void 0,pn=void 0,mn=void 0,_n=void 0,vn=void 0,yn=void 0,Tn=void 0,En=void 0,bn=void 0;return en={initialize:e,on:k,off:H,extend:B,attachView:Ct,attachSource:Nt,isReady:t,play:n,isPaused:i,pause:r,isSeeking:a,isDynamic:s,seek:S,setMute:l,isMuted:f,setVolume:h,getVolume:p,time:R,duration:M,timeAsUTC:C,durationAsUTC:D,getActiveStream:Gt,getDVRWindowSize:y,getDVRSeekOffset:E,convertToTimeCode:L,formatUTC:N,getVersion:z,getDebug:V,getBufferLength:_,getVideoModel:K,getVideoContainer:At,getTTMLRenderingDiv:Pt,getVideoElement:Ot,getSource:wt,setLiveDelayFragmentCount:W,setLiveDelay:Z,getLiveDelay:J,useSuggestedPresentationDelay:te,enableLastBitrateCaching:re,enableLastMediaSettingsCaching:ae,setMaxAllowedBitrateFor:ue,getMaxAllowedBitrateFor:de,setMaxAllowedRepresentationRatioFor:ce,getMaxAllowedRepresentationRatioFor:ge,setAutoPlay:me,getAutoPlay:ve,setScheduleWhilePaused:ye,getScheduleWhilePaused:Te,getDashMetrics:Ee,getMetricsFor:be,getQualityFor:Se,setQualityFor:Ie,updatePortalSize:Re,getLimitBitrateByPortal:Ae,setLimitBitrateByPortal:Me,getUsePixelRatioInLimitBitrateByPortal:Oe,setUsePixelRatioInLimitBitrateByPortal:Ce,setTextTrack:Pe,getBitrateInfoListFor:we,setInitialBitrateFor:Ne,getInitialBitrateFor:xe,setInitialRepresentationRatioFor:Le,getInitialRepresentationRatioFor:Fe,getStreamsFromManifest:Be,getTracksFor:Ue,getTracksForTypeFromManifest:ke,getCurrentTrackFor:je,setInitialMediaSettingsFor:He,getInitialMediaSettingsFor:qe,setCurrentTrack:ze,getTrackSwitchModeFor:Ge,setTrackSwitchModeFor:Ve,setSelectionModeForInitialTrack:Ye,getSelectionModeForInitialTrack:Ke,getAutoSwitchQuality:Qe,setAutoSwitchQuality:We,setFastSwitchEnabled:$e,getFastSwitchEnabled:Je,getAutoSwitchQualityFor:Xe,setAutoSwitchQualityFor:Ze,enableBufferOccupancyABR:et,setBandwidthSafetyFactor:gt,getBandwidthSafetyFactor:pt,setAbandonLoadTimeout:mt,retrieveManifest:tt,addUTCTimingSource:nt,removeUTCTimingSource:rt,clearDefaultUTCTimingSources:it,restoreDefaultUTCTimingSources:at,setBufferToKeep:st,setBufferPruningInterval:ut,setStableBufferTime:lt,setBufferTimeAtTopQuality:dt,setFragmentLoaderRetryAttempts:_t,setFragmentLoaderRetryInterval:vt,setXHRWithCredentials:yt,setXHRWithCredentialsForType:Tt,getXHRWithCredentialsForType:Et,setBufferTimeAtTopQualityLongForm:ft,setLongFormContentDurationThreshold:ct,setRichBufferThreshold:ht,getProtectionController:bt,attachProtectionController:St,setProtectionData:It,enableManifestDateHeaderTimeSource:ot,displayCaptionsOnTop:Rt,attachVideoContainer:Mt,attachTTMLRenderingDiv:Dt,getCurrentTextTrackIndex:De,reset:xt},function(){rn=!1,an=!1,on=!0,ln=null,nn=null,fn=null,ne.default.extend(ie.default),hn=(0,x.default)(Xt).getInstance()}(),en}Object.defineProperty(t,"__esModule",{value:!0});var a=n(48),o=r(a),s=n(7),u=r(s),l=n(22),d=r(l),f=n(13),c=r(f),h=n(87),g=r(h),p=n(40),m=r(p),_=n(14),v=r(_),y=n(135),T=r(y),E=n(36),b=r(E),S=n(26),I=r(S),R=n(30),A=r(R),M=n(15),O=r(M),C=n(37),P=r(C),D=n(29),w=r(D),N=n(4),x=r(N),L=n(8),F=r(L),B=n(12),U=r(B),k=n(100),j=r(k),H=n(55),q=r(H),z=n(17),G=r(z),V=n(54),Y=r(V),K=n(97),Q=r(K),W=n(93),X=r(W),Z=n(3),$=r(Z),J=n(1),ee=r(J),te=n(2),ne=r(te),re=n(20),ie=r(re),ae=n(0),oe=r(ae),se=n(43),ue=n(19),le=r(ue),de=n(69),fe=r(de),ce=n(11),he=r(ce),ge=n(10),pe=r(ge),me=n(33),_e=r(me);i.__dashjs_factory_name="MediaPlayer";var ve=oe.default.getClassFactory(i);ve.events=ie.default,t.default=ve},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t,n){var r,u=t.match(a);if(u){try{r=s[u[1]](o).create({eventBus:e.eventBus}),r.initialize(u[1],n,u[3],u[5])}catch(e){r=null,i("MetricsHandlerFactory: Could not create handler for type "+u[1]+" with args "+u[3]+", "+u[5]+" ("+e.message+")")}return r}}function n(e,t){s[e]=t}function r(e){delete s[e]}var i=e.log,a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,s={BufferLevel:u.default,DVBErrors:d.default,HttpList:c.default,PlayList:g.default,RepSwitchList:g.default,TcpList:g.default};return{create:t,register:n,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(108),u=r(s),l=n(109),d=r(l),f=n(111),c=r(f),h=n(110),g=r(h);i.__dashjs_factory_name="MetricsHandlerFactory",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var n;try{n=i[e.schemeIdUri](a).create(),n.initialize(e,t)}catch(t){n=null,o("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return n}function n(e,t){i[e]=t}function r(e){delete i[e]}var i={"urn:dvb:dash:reporting:2014":u.default},a=this.context,o=e.log;return{create:t,register:n,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(112),u=r(s);i.__dashjs_factory_name="ReportingFactory",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="HandlerHelpers",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){function t(){return c.mediaInfo.streamInfo}function n(){return c.mediaInfo}function r(){return c}function i(){return g}function a(){return c.mediaInfo.streamInfo.manifestInfo}function o(){return h}function s(){return p}function u(){return m}function l(){return _}function d(){return v}function f(){return y}var c=e.streamProcessor.getCurrentRepresentationInfo(),h=e.streamProcessor,g=e.currentValue,p=e.playbackIndex,m=e.switchHistory,_=e.droppedFramesHistory,v=e.currentRequest,y=e.hasRichBuffer;return{getCurrentValue:i,getManifestInfo:a,getMediaInfo:n,getPlaybackIndex:s,getDroppedFramesHistory:l,getCurrentRequest:d,getSwitchHistory:u,getStreamInfo:t,getStreamProcessor:o,getTrackInfo:r,hasRichBuffer:f}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RulesContext",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){s={}}function t(e){e&&e.abrRulesCollection&&(s[h]=e.abrRulesCollection)}function n(e,t,n,r,a,o){var s,l,d={},f={},c=e.length,h=c,g=i(t,r),p=function(e){var t,i,a;if(e.value!==u.default.NO_CHANGE){var s=o(d[e.priority],e.value);s!==d[e.priority]&&(d[e.priority]=s,f[e.priority]=e.reason)}--c||(d[u.default.WEAK]!==u.default.NO_CHANGE&&(a=u.default.WEAK,t=d[u.default.WEAK],i=f[u.default.WEAK]),d[u.default.DEFAULT]!==u.default.NO_CHANGE&&(a=u.default.DEFAULT,t=d[u.default.DEFAULT],i=f[u.default.DEFAULT]),d[u.default.STRONG]!==u.default.NO_CHANGE&&(a=u.default.STRONG,t=d[u.default.STRONG],i=f[u.default.STRONG]),a!=u.default.STRONG&&a!=u.default.WEAK&&(a=u.default.DEFAULT),n(void 0!==t?{value:t,confidence:a,reason:i}:{value:r,confidence:a,reason:{name:"NO_CHANGE"}}))};for(d[u.default.STRONG]=u.default.NO_CHANGE,d[u.default.WEAK]=u.default.NO_CHANGE,d[u.default.DEFAULT]=u.default.NO_CHANGE,l=0;l<h;l++)s=e[l],s.execute(g,p)}function r(){var e,t,n=s[h],r=(n.getRules(d.default.QUALITY_SWITCH_RULES)||[]).concat(n.getRules(d.default.ABANDON_FRAGMENT_RULES)||[]),i=r.length;for(t=0;t<i;t++)e=r[t],"function"==typeof e.reset&&e.reset();s={}}function i(e,t){return(0,o.default)(a).create({streamProcessor:e,currentValue:t})}var a=this.context,s=void 0;return{initialize:e,setConfig:t,applyRules:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(53),o=r(a),s=n(6),u=r(s),l=n(55),d=r(l),f=n(0),c=r(f),h=0;i.__dashjs_factory_name="RulesController";var g=c.default.getSingletonFactory(i);g.ABR_RULE=h,t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){l=[],f=[];var e=(0,b.default)(s).getInstance(),t=(0,I.default)(s).getInstance();(0,T.default)(s).getInstance().getBufferOccupancyABREnabled()?(l.push((0,m.default)(s).create({metricsModel:e,dashMetrics:(0,I.default)(s).getInstance()})),f.push((0,v.default)(s).create({metricsModel:e,dashMetrics:(0,I.default)(s).getInstance()}))):(l.push((0,o.default)(s).create({metricsModel:e,dashMetrics:t})),l.push((0,u.default)(s).create({metricsModel:e})),l.push((0,g.default)(s).create()),l.push((0,c.default)(s).create()),f.push((0,d.default)(s).create()))}function t(e){switch(e){case C:return l;case P:return f;default:return null}}function n(e){return e.filter(function(e){return e.value>O.default.NO_CHANGE})}function r(e){if(0!==e.length)return e.reduce(function(e,t){return e.value<t.value?e:t})}function i(e){return r(n(l.map(function(t){return t.getMaxIndex(e)})))||(0,O.default)(s).create()}function a(e){return r(n(f.map(function(t){return t.shouldAbandon(e)})))||(0,O.default)(s).create()}var s=this.context,l=void 0,f=void 0;return{initialize:e,getRules:t,getMaxQuality:i,shouldAbandonFragment:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(129),o=r(a),s=n(127),u=r(s),l=n(124),d=r(l),f=n(126),c=r(f),h=n(128),g=r(h),p=n(56),m=r(p),_=n(125),v=r(_),y=n(4),T=r(y),E=n(8),b=r(E),S=n(10),I=r(S),R=n(0),A=r(R),M=n(6),O=r(M),C="qualitySwitchRules",P="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var D=A.default.getSingletonFactory(i);D.QUALITY_SWITCH_RULES=C,D.ABANDON_FRAGMENT_RULES=P,t.default=D},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){j={},H={},q={},z=[],G=(0,d.default)(x).getInstance(),V=(0,c.default)(x).getInstance(),Y=(0,p.default)(x).getInstance(),U.on(y.default.BUFFER_EMPTY,m,k),U.on(y.default.PLAYBACK_SEEKING,v,k),U.on(y.default.PERIOD_SWITCH_STARTED,T,k),U.on(y.default.MEDIA_FRAGMENT_LOADED,C,k)}function n(e){return e.map(function(e){return Math.log(e)})}function r(e,t,r,i){var a=NaN;if(i?(a=0,i.forEach(function(e,t){e>i[a]&&(a=t)})):(i=n(r),a=i.length-1),0===a)return null;var o=1-i[0]+(i[a]-i[0])/(t/e-1),s=e/(i[0]+o-1);return{utilities:i,gp:o,Vp:s}}function a(e){var t={},n=e.getMediaInfo(),i=e.getStreamProcessor(),a=e.getStreamInfo(),o=e.getTrackInfo(),s=i.isDynamic(),u=a.manifestInfo.duration,l=o.fragmentDuration,d=n.bitrateList.map(function(e){return e.bandwidth}),f=r(A,M,d,null);if(null===f)return t.state=b,t;if(t.state=S,t.bitrates=d,t.utilities=f.utilities,t.Vp=f.Vp,t.gp=f.gp,t.isDynamic=s,t.movieDuration=u,t.fragmentDuration=l,t.bandwidthSafetyFactor=G.getBandwidthSafetyFactor(),t.rebufferSafetyFactor=O,t.bufferTarget=G.getStableBufferTime(),t.lastQuality=0,t.placeholderBuffer=0,t.throughputCount=s?w:N,R){for(var c="",h=0;h<d.length;++h){var g=f.utilities[h],p=d[h],m=0;if(h>0){var _=f.utilities[h-1],v=d[h-1];m=f.Vp*((_*p-g*v)/(p-v)+f.gp)}var y=f.Vp*(g+f.gp);c+="\n"+h+":"+(1e-6*d[h]).toFixed(3)+"Mbps "+m.toFixed(3)+"/"+y.toFixed(3)}L("BolaDebug "+n.type+" bitrates"+c)}return t}function s(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||o>=i)&&(i=o,r=a)}return r}function u(e,t){for(var n=F.getHttpRequests(e),r=[],i=n.length-1;i>=0&&r.length<t;--i){var a=n[i];a.type===h.HTTPRequest.MEDIA_SEGMENT_TYPE&&a._tfinish&&a.tresponse&&a.trace&&r.push(a)}return r}function l(e,t,n){var r=u(e,t);if(0===r.length)return 0;for(var i=0,a="",o=0;o<r.length;++o){var s=.001*(r[o]._tfinish.getTime()-r[o].trequest.getTime()),l=8*r[o].trace.reduce(function(e,t){return e+t.b[0]},0);R&&(a+=" "+(1e-6*l).toFixed(3)+"/"+s.toFixed(3)+"="+(1e-6*l/s).toFixed(3)+"Mbps"),i+=s/l}return R&&L("BolaDebug "+n+" BolaRule recent throughput = "+(r.length/(1e6*i)).toFixed(3)+"Mbps:"+a),r.length/i}function f(e,t){var n=0;return e.bitrates.some(function(e,r){return e>t||(n=r,!1)}),n}function g(e,t){var n=Date.now(),r=j[t],i=q[t],a=NaN;if(j[t]=n,q[t]=!1,!i){var o=u(e,1);o.length>0&&(a=o[0]._tfinish.getTime())>n&&(a=n)}var s=0;return s=i||r>a?n-r:n-a,isNaN(s)||s<=0?0:.001*s}function m(){R&&L("BolaDebug BUFFER_EMPTY"),z.forEach(function(e){var t=B.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state===I&&(n.placeholderBuffer=0,B.updateBolaState(e,n))}})}function v(e){R&&L("BolaDebug PLAYBACK_SEEKING "+e.seekTime.toFixed(3)),z.forEach(function(e){var t=B.getReadOnlyMetricsFor(e);if(0!==t.BolaState.length){var n=t.BolaState[0]._s;n.state!==b&&(n.state=S),B.updateBolaState(e,n)}}),H={},q={}}function T(){}function C(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=e.chunk.mediaInfo.type,n=e.chunk.start;void 0===t||isNaN(n)||(n<=H[t]?q[t]=!0:(q[t]=!1,H[t]=n))}}function P(e){var t=e.getStreamProcessor();t.getScheduleController().setTimeToLoadDelay(0);var n=(0,o.default)(x).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name}),r=e.getMediaInfo(),u=r.type,d=B.getReadOnlyMetricsFor(u);if(0===d.BolaState.length){R&&L("BolaDebug "+u+"\nBolaDebug "+u+" BolaRule for state=- fragmentStart="+Y.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var c=a(e);B.updateBolaState(u,c);var h=0;if(c.state!==b){z.push(u);var p=l(d,c.throughputCount,u);if(0===p)return R&&L("BolaDebug "+u+" BolaRule quality unchanged for INITIALIZE"),n;h=f(c,p*c.bandwidthSafetyFactor),c.lastQuality=h,n.value=h,n.reason.state=c.state,n.reason.throughput=p}return R&&L("BolaDebug "+u+" BolaRule quality "+h+" for INITIALIZE"),n}var m=d.BolaState[0]._s;if(m.state===b)return R&&L("BolaDebug "+u+" BolaRule quality 0 for ONE_BITRATE"),n;var _=m.bitrates,v=m.utilities;R&&L("BolaDebug "+u+"\nBolaDebug "+u+" EXECUTE BolaRule for state="+m.state+" fragmentStart="+Y.getIndexHandlerTime(e.getStreamProcessor()).toFixed(3));var y=F.getCurrentBufferLevel(d)?F.getCurrentBufferLevel(d):0,T=l(d,m.throughputCount,u);y<=.1&&(m.placeholderBuffer=0);var E=g(d,u);E>0&&(m.placeholderBuffer+=E),m.placeholderBuffer<0&&(m.placeholderBuffer=0);var A=y+m.placeholderBuffer,M=s(m,A);if(R&&L("BolaDebug "+u+" BolaRule bufferLevel="+y.toFixed(3)+"(+"+m.placeholderBuffer.toFixed(3)+"="+A.toFixed(3)+") recentThroughput="+(1e-6*T).toFixed(3)+" tentativeQuality="+M),m.state===S){var C=f(m,T*m.bandwidthSafetyFactor);if(y>m.fragmentDuration/O){m.state=I;for(var P=0,D=0;D<C;++D){var w=m.Vp*(m.gp+(_[C]*v[D]-_[D]*v[C])/(_[C]-_[D]));w>P&&(P=w)}P>y&&(m.placeholderBuffer=P-y)}return R&&L("BolaDebug "+u+" BolaRule quality "+C+" for STARTUP"),m.lastQuality=C,B.updateBolaState(u,m),n.value=C,n.reason.state=S,n.reason.throughput=T,n}if(M>m.lastQuality){var N=f(m,T);M>N&&(N<m.lastQuality&&(N=m.lastQuality),M=N)}if(T>0)for(var U=O*T*y/m.fragmentDuration;M>0&&_[M]>U;)--M;var k=0;return k=A-m.Vp*(v[M]+m.gp),k>0&&(k>m.placeholderBuffer?(k-=m.placeholderBuffer,m.placeholderBuffer=0):(m.placeholderBuffer-=k,k=0)),k>0?M===_.length-1?k=0:t.getScheduleController().setTimeToLoadDelay(1e3*k):k=0,m.lastQuality=M,B.updateBolaState(u,m),n.value=M,n.reason.state=m.state,n.reason.throughput=T,n.reason.bufferLevel=y,R&&L("BolaDebug "+u+" BolaRule quality "+M+" delay="+k.toFixed(3)+" for STEADY"),n}function D(){U.off(y.default.BUFFER_EMPTY,m,k),U.off(y.default.PLAYBACK_SEEKING,v,k),U.off(y.default.PERIOD_SWITCH_STARTED,T,k),U.off(y.default.MEDIA_FRAGMENT_LOADED,C,k),t()}var w=2,N=3,x=this.context,L=(0,E.default)(x).getInstance().log,F=e.dashMetrics,B=e.metricsModel,U=(0,_.default)(x).getInstance(),k=void 0,j=void 0,H=void 0,q=void 0,z=void 0,G=void 0,V=void 0,Y=void 0;return k={getMaxIndex:P,reset:D},t(),k}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(0),u=r(s),l=n(4),d=r(l),f=n(7),c=r(f),h=n(5),g=n(19),p=r(g),m=n(1),_=r(m),v=n(2),y=r(v),T=n(3),E=r(T),b=0,S=1,I=2,R=!1,A=10,M=30,O=.5;i.__dashjs_factory_name="BolaRule";var C=u.default.getClassFactory(i);C.BOLA_STATE_ONE_BITRATE=b,C.BOLA_STATE_STARTUP=S,C.BOLA_STATE_STEADY=I,C.BOLA_DEBUG=R,t.default=C},function(e,t,n){"use strict";function r(){function e(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length}function t(){this.customTimeRangeArray=[],this.length=0}function n(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length}function r(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)}function i(e){return this.customTimeRangeArray[e].start}function a(e){return this.customTimeRangeArray[e].end}return{customTimeRangeArray:[],length:0,add:e,clear:t,remove:n,mergeRanges:r,start:i,end:a}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="CustomTimeRanges",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(){function e(e){var t=e.streamId,n=e.mediaInfo.type,i=e.quality;r[t]=r[t]||{},r[t][n]=r[t][n]||{},r[t][n][i]=e}function t(e,t,n){return r[e][t][n]}function n(){r={}}var r={};return{save:e,extract:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="InitCache",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e,n){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.url=e||null,a.type=n||null,a.mediaType="stream",a.responseType="text",a}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",t.PlayList=i,t.PlayListTrace=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(164),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default},function(e,t,n){"use strict";function r(e){var t,n,r;for(t=[],r=0,n=e.length;r<n;r+=1)e[r].isRoot?t.push("root"):t.push(e[r].name);var a=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},o=function(e,t,n){var r,o,s,u,l;if(null!==e&&0!==e.length)for(r=0,o=e.length;r<o;r+=1)s=e[r],t.hasOwnProperty(s.name)&&(n.hasOwnProperty(s.name)?s.merge&&(u=t[s.name],l=n[s.name],"object"===(void 0===u?"undefined":i(u))&&"object"===(void 0===l?"undefined":i(l))?a(u,l):null!=s.mergeFunction?n[s.name]=s.mergeFunction(u,l):n[s.name]=u+l):n[s.name]=t[s.name])},s=function e(t,n){var r,i,a,s,u,l,d,f=t;if(null!==f.children&&0!==f.children.length)for(r=0,i=f.children.length;r<i;r+=1)if(l=f.children[r],n.hasOwnProperty(l.name))if(l.isArray)for(u=n[l.name+"_asArray"],a=0,s=u.length;a<s;a+=1)d=u[a],o(f.properties,n,d),e(l,d);else d=n[l.name],o(f.properties,n,d),e(l,d)};return{run:function n(r){var a,o,u,l,d,f,c;if(null===r)return r;if("object"!==(void 0===r?"undefined":i(r)))return r;for(a=0,o=t.length;a<o;a+=1)"root"===t[a]&&(d=e[a],f=r,s(d,f));for(l in r)if(r.hasOwnProperty(l)&&"__children"!=l){if(-1!==(u=t.indexOf(l)))if(d=e[u],d.isArray)for(c=r[l+"_asArray"],a=0,o=c.length;a<o;a+=1)f=c[a],s(d,f);else f=r[l],s(d,f);n(r[l])}return r}}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPlayerFactory=t.MetricsReporting=t.MediaPlayer=void 0;var i=n(49),a=r(i),o=n(102),s=r(o),u=n(89),l=r(u),d=n(43),f="undefined"!=typeof window&&window||e,c=f.dashjs;c||(c=f.dashjs={}),c.MediaPlayer=a.default,c.MetricsReporting=s.default,c.MediaPlayerFactory=l.default,c.Version=(0,d.getVersionString)(),t.default=c,t.MediaPlayer=a.default,t.MetricsReporting=s.default,t.MediaPlayerFactory=l.default}).call(t,n(163))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.BYTES_APPENDED="bytesAppended",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.DATA_UPDATE_STARTED="dataUpdateStarted",e.INITIALIZATION_LOADED="initializationLoaded",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_REQUESTED="initRequested",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.QUOTA_EXCEEDED="quotaExceeded",e.REPRESENTATION_UPDATED="representationUpdated",e.SEGMENTS_LOADED="segmentsLoaded",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",e.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_COMPLETED="streamCompleted",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TIMED_TEXT_REQUESTED="timedTextRequested",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){$=t,W=$.getType(),Q=$.isDynamic(),J=(0,I.default)(F).create(e,Q)}function n(){return $}function r(e){X=e}function i(){return X}function a(){return Y}function s(){return Z}function d(){J=null,X=0,Z=NaN,K=NaN,Y=-1,Q=null,W=null,$=null,U.off(f.default.INITIALIZATION_LOADED,x,V),U.off(f.default.SEGMENTS_LOADED,L,V)}function c(e){return e?e.split("$$").join("$"):e}function g(e,t){if(null===t||null===e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function p(e,t,n){var r,i,a=G.resolve(n.path);return a&&t!==a.url&&k.isRelative(t)?(r=a.url,i=a.serviceLocation,t&&(r=k.resolve(t,r))):r=t,!k.isRelative(r)&&(e.url=r,e.serviceLocation=i,!0)}function m(e,t){var n=new o.default,r=e.adaptation.period,i=r.start;if(n.mediaType=t,n.type=l.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=H.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,Q),n.availabilityEndTime=H.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,Q),n.quality=e.index,n.mediaInfo=$.getMediaInfo(),p(n,e.initialization,e))return n}function v(e){return e?m(e,W):null}function T(e){var t=!1;if(Q||Y!==e.availableSegmentsNumber){var n=(0,b.getSegmentByIndex)(Y,e);if(n){var r=n.presentationStartTime-e.adaptation.period.start,i=e.adaptation.period.duration;B(e.segmentInfoType+": "+r+" / "+i),t=("SegmentTimeline"!==e.segmentInfoType||!Q)&&r>=i}}else t=!0;return t}function S(e){return J.getSegments(e,K,Y,A)}function A(e,t){if(e.segments=t,t&&t.length>0&&(Z=isNaN(Z)?t[0].presentationStartTime:Math.min(t[0].presentationStartTime,Z)),Q&&isNaN(H.getExpectedLiveEdge())){var n=t[t.length-1],r=n.presentationStartTime,i=z.getMetricsFor("stream");H.setExpectedLiveEdge(r),z.updateManifestUpdateInfo(q.getCurrentManifestUpdate(i),{presentationStartTime:r})}}function M(e){if(!e)throw new u.default("no representation");return e.segments=null,S(e),e}function O(e,t){var n,r=E.default.hasInitialization(e),i=E.default.hasSegments(e);if(e.segmentDuration||e.segments||M(e),e.segmentAvailabilityRange=null,e.segmentAvailabilityRange=H.calcSegmentAvailabilityRange(e,Q),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return n=new u.default(R,"no segments are available yet",{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:n});t||(Y=-1),e.segmentDuration&&M(e),r||j.loadInitialization(e),i||j.loadSegments(e,W,e.indexRange),r&&i&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:e})}function C(e,t,n){var r,i,a,o,s,u=t.segments,l=u?u.length:null,d=-1;if(u&&l>0)for(s=0;s<l;s++)if(i=u[s],a=i.presentationStartTime,o=i.duration,r=void 0===n||null===n?o/2:n,e+r>=a&&e-r<a+o){d=i.availabilityIdx;break}return d}function P(e){if(null===e||void 0===e)return null;var t=new o.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,b.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,b.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,b.replaceTokenForTemplate)(i,"Bandwidth",r),i=g(i,n.id),i=c(i),t.mediaType=W,t.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=$.getMediaInfo(),t.adaptationIndex=n.adaptation.index,p(t,i,n)?t:void 0}function D(e,t,n){var r,i,a,s=Y,u=!!n&&n.keepIdx,l=n?n.timeThreshold:null,d=!(!n||!n.ignoreIsFinished);return e?(K!==t&&(K=t,B("Getting the request for "+W+" time : "+t)),S(e),Y=C(t,e,l),Y<0&&(S(e),Y=C(t,e,l)),Y>0&&B("Index for "+W+" time "+t+" is "+Y),a=!d&&T(e),a?(r=new o.default,r.action=o.default.ACTION_COMPLETE,r.index=Y,r.mediaType=W,r.mediaInfo=$.getMediaInfo(),B("Signal complete.",r)):(i=(0,b.getSegmentByIndex)(Y,e),r=P(i)),u&&s>=0&&(Y="SegmentTimeline"===e.segmentInfoType&&Q?Y:s),r):null}function w(e,t){var n=(e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start)/2;return e.segments=null,e.segmentAvailabilityRange={start:t-n,end:t+n},D(e,t,{keepIdx:!1,ignoreIsFinished:!0})}function N(e){var t,n,r;return e&&-1!==Y?(K=null,Y++,B("Getting the next request at index: "+Y),r=T(e),r?(t=new o.default,t.action=o.default.ACTION_COMPLETE,t.index=Y,t.mediaType=W,t.mediaInfo=$.getMediaInfo(),B("Signal complete.")):(S(e),n=(0,b.getSegmentByIndex)(Y,e),t=P(n),!n&&Q&&Y--),t):null}function x(e){var t=e.representation;t.segments&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function L(e){if(!e.error&&W===e.mediaType){var t,n,r,i,a=e.segments,o=e.representation,s=[],u=0;for(t=0,n=a.length;t<n;t++)r=a[t],i=(0,b.getTimeBasedSegment)(H,Q,o,r.startTime,r.duration,r.timescale,r.media,r.mediaRange,u),s.push(i),i=null,u++;o.segmentAvailabilityRange={start:s[0].presentationStartTime,end:s[n-1].presentationStartTime},o.availableSegmentsNumber=n,A(o,s),E.default.hasInitialization(o)&&U.trigger(f.default.REPRESENTATION_UPDATED,{sender:this,representation:o})}}var F=this.context,B=(0,_.default)(F).getInstance().log,U=(0,h.default)(F).getInstance(),k=(0,y.default)(F).getInstance(),j=e.segmentBaseLoader,H=e.timelineConverter,q=e.dashMetrics,z=e.metricsModel,G=e.baseURLController,V=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,Z=void 0,$=void 0,J=void 0;return V={initialize:t,getStreamProcessor:n,getInitRequest:v,getSegmentRequestForTime:D,getNextSegmentRequest:N,generateSegmentRequestForTime:w,updateRepresentation:O,setCurrentTime:r,getCurrentTime:i,getCurrentIndex:a,getEarliestTime:s,reset:d},function(){Y=-1,X=0,Z=NaN,U.on(f.default.INITIALIZATION_LOADED,x,V),U.on(f.default.SEGMENTS_LOADED,L,V)}(),V}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=r(a),s=n(9),u=r(s),l=n(5),d=n(2),f=r(d),c=n(1),h=r(c),g=n(0),p=r(g),m=n(3),_=r(m),v=n(23),y=r(v),T=n(34),E=r(T),b=n(25),S=n(79),I=r(S),R=1;i.__dashjs_factory_name="DashHandler";var A=p.default.getClassFactory(i);A.SEGMENTS_UNAVAILABLE_ERROR_CODE=R,t.default=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){y=(0,c.default)(h).getInstance(),T=(0,v.default)(h).getInstance(),E=(0,o.default)(h).getInstance(),A=(0,M.default)(h).create({errHandler:y,metricsModel:I,requestModifier:E})}function t(e){e.baseURLController&&(O=e.baseURLController),e.metricsModel&&(I=e.metricsModel)}function n(e,t){var r=null,i=null,a=O.resolve(e.path),o=t||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};p("Start searching for initialization.");var u=l(o),d=function(t){o.bytesLoaded=o.range.end,i=T.parse(t),r=s(i),r?(e.range=r,_.trigger(g.default.INITIALIZATION_LOADED,{representation:e})):(o.range.end=o.bytesLoaded+o.bytesToLoad,n(e,o))},f=function(){_.trigger(g.default.INITIALIZATION_LOADED,{representation:e})};A.load({request:u,success:d,error:f}),p("Perform init search: "+o.url)}function r(e,t,n,i,o){if(n&&(void 0===n.start||void 0===n.end)){var s=n?n.toString().split("-"):null;n=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o||f;var u=null,d=null,c=!!n,h=O.resolve(e.path),g={init:!1,url:h?h.url:void 0,range:c?n:{start:0,end:1500},searching:!c,bytesLoaded:i?i.bytesLoaded:0,bytesToLoad:1500},m=l(g),_=function(n){var i=g.bytesToLoad,s=n.byteLength;if(g.bytesLoaded=g.range.end-g.range.start,u=T.parse(n),(d=u.getBox("sidx"))&&d.isComplete){var l,f,c=d.references;if(null!==c&&void 0!==c&&c.length>0&&(l=1===c[0].reference_type),l){p("Initiate multiple SIDX load."),g.range.end=g.range.start+d.size;var h,m,_,v,y,E=[],b=0,S=(d.offset||g.range.start)+d.size,I=function(n){n?(E=E.concat(n),++b>=m&&o(E,e,t)):o(null,e,t)};for(h=0,m=c.length;h<m;h++)_=S,v=S+c[h].referenced_size-1,S+=c[h].referenced_size,y={start:_,end:v},r(e,null,y,g,I)}else p("Parsing segments from SIDX."),f=a(d,g),o(f,e,t)}else{if(d)g.range.start=d.offset||g.range.start,g.range.end=g.range.start+(d.size||i);else{if(s<g.bytesLoaded)return void o(null,e,t);var R=u.getLastBox();R&&R.size?(g.range.start=R.offset+R.size,g.range.end=g.range.start+i):g.range.end+=i}r(e,t,g.range,g,o)}},v=function(){o(null,e,t)};A.load({request:m,success:_,error:v}),p("Perform SIDX load: "+g.url)}function i(){A.abort(),A=null,y=null,T=null,E=null}function a(e,t){for(var n,r,i,a,o=e.references,s=o.length,l=e.timescale,d=e.earliest_presentation_time,f=t.range.start+e.offset+e.first_offset+e.size,c=[],h=0;h<s;h++)i=o[h].subsegment_duration,a=o[h].referenced_size,n=new u.default,n.duration=i,n.startTime=d,n.timescale=l,r=f+a-1,n.mediaRange=f+"-"+r,c.push(n),d+=i,f+=a;return c}function s(e){var t,n,r=e.getBox("ftyp"),i=e.getBox("moov"),a=null;return p("Searching for initialization."),i&&i.isComplete&&(t=r?r.offset:i.offset,n=i.offset+i.size-1,a=t+"-"+n,p("Found the initialization.  Range: "+a)),a}function l(e){if(e.url){var t=new R.default;return t.type=e.init?S.HTTPRequest.INIT_SEGMENT_TYPE:S.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function f(e,t,n){e?_.trigger(g.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):_.trigger(g.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new d.default(null,"error loading segments",null)})}var h=this.context,p=(0,b.default)(h).getInstance().log,_=(0,m.default)(h).getInstance(),y=void 0,T=void 0,E=void 0,I=void 0,A=void 0,O=void 0;return{setConfig:t,initialize:e,loadInitialization:n,loadSegments:r,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(30),o=r(a),s=n(35),u=r(s),l=n(9),d=r(l),f=n(14),c=r(f),h=n(2),g=r(h),p=n(1),m=r(p),_=n(38),v=r(_),y=n(0),T=r(y),E=n(3),b=r(E),S=n(5),I=n(18),R=r(I),A=n(21),M=r(A);i.__dashjs_factory_name="SegmentBaseLoader",t.default=T.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){I=(0,m.default)(h).getInstance(),A=(0,v.default)(h).getInstance(),O=(0,R.default)(h).create({errHandler:I,metricsModel:M,requestModifier:A})}function t(e){if(!e.baseURLController||!e.metricsModel)throw new Error("Missing config parameter(s)");C=e.baseURLController,M=e.metricsModel}function n(e){var t=[],n=void 0,r=void 0,i=void 0,a=(0,d.default)(h).create({data:e}),o=void 0;for(a.consumeTag(b.Segment.Cues),r=a.getMatroskaCodedNum();a.moreData()&&a.consumeTagAndSize(b.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=a.parseTag(b.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];a.moreData()&&a.consumeTagAndSize(b.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(i={},i.Track=a.parseTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=a.parseTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),a.getPos()+4>r||!a.consumeTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?n.CueTracks.push(i):(o=a.getMatroskaCodedNum(),i.BlockNumber=a.getMatroskaUint(o),n.CueTracks.push(i))}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}function r(e,t,r,i){var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,f=void 0,c=void 0;for(o=n(e),s=[],l=0,d=o.length;l<d;l+=1)u=new T.default,a=0,a=l<o.length-1?o[l+1].CueTime-o[l].CueTime:i-o[l].CueTime,u.duration=a,u.startTime=o[l].CueTime,u.timescale=1e3,f=o[l].CueTracks[0].ClusterPosition+t,c=l<o.length-1?o[l+1].CueTracks[0].ClusterPosition+t-1:r-1,u.mediaRange=f+"-"+c,s.push(u);return p("Parsed cues: "+s.length+" cues."),s}function i(e,t,n,i){var a=(0,d.default)(h).create({data:e}),o=void 0,s=void 0,u=n.split("-"),l=null,c={url:t,range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:l},g=void 0,m=void 0;for(p("Parse EBML header: "+c.url),a.skipOverElement(b.EBML),a.consumeTag(b.Segment),g=a.getMatroskaCodedNum(),g+=a.getPos(),m=a.getPos();a.moreData()&&!a.consumeTagAndSize(b.Segment.Info,!0);)if(!(a.skipOverElement(b.Segment.SeekHead,!0)||a.skipOverElement(b.Segment.Tracks,!0)||a.skipOverElement(b.Segment.Cues,!0)||a.skipOverElement(b.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var _=a.getMatroskaCodedNum(!0),v=a.getMatroskaCodedNum();switch(_){case b.Segment.Info.Duration.tag:o=a[b.Segment.Info.Duration.parse](v);break;default:a.setPos(a.getPos()+v)}}l=f(c);var y=function(e){s=r(e,m,g,o),i(s)},T=function(){p("Download Error: Cues "+c.url),i(null)};O.load({request:l,success:y,error:T}),p("Perform cues load: "+c.url+" bytes="+c.range.start+"-"+c.range.end)}function a(e,t){var n=null,r=C.resolve(e.path),i=r?r.url:void 0,a=e.range.split("-"),s=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:i,init:!0};p("Start loading initialization."),n=f(s);var u=function(){_.trigger(o.default.INITIALIZATION_LOADED,{representation:e})},l=function(){_.trigger(o.default.INITIALIZATION_LOADED,{representation:e})};O.load({request:n,success:u,error:l}),p("Perform init load: "+s.url)}function s(e,t,n,r){var a=null,o=C.resolve(e.path),s=o?o.url:void 0,u={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:a,url:s,init:!1};r=r||l,a=f(u),p("Parsing ebml header");var d=function(a){i(a,s,n,function(n){r(n,e,t)})},c=function(){r(null,e,t)};O.load({request:a,success:d,error:c})}function l(e,t,n){e?_.trigger(o.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):_.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new Error(null,"error loading segments",null)})}function f(e){var t=new S.default;return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}function c(){I=null,A=null,p=null}var h=this.context,p=(0,g.default)(h).getInstance().log,_=(0,u.default)(h).getInstance(),y=void 0,b=void 0,I=void 0,A=void 0,M=void 0,O=void 0,C=void 0;return y={setConfig:t,initialize:e,loadInitialization:a,loadSegments:s,reset:c},function(){b={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}(),y}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(1),u=r(s),l=n(136),d=r(l),f=n(0),c=r(f),h=n(3),g=r(h),p=n(14),m=r(p),_=n(30),v=r(_),y=n(35),T=r(y),E=n(5),b=n(18),S=r(b),I=n(21),R=r(I);i.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=c.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e.abrController&&(K=e.abrController)}function t(e){Y=e,Q=Y.getIndexHandler()}function n(){return Y}function r(){return H}function i(){return q}function a(){return z}function s(){return V}function l(){k.off(P.default.QUALITY_CHANGE_REQUESTED,L,j),k.off(P.default.REPRESENTATION_UPDATED,D,j),k.off(P.default.WALLCLOCK_TIME_UPDATED,N,j),k.off(P.default.BUFFER_LEVEL_UPDATED,x,j),H=null,q=-1,z=!0,G=[],K=null,W=null,X=null,Z=null,$=null,J=null,ee=null,te=null,ne=null,re=null}function f(e,t,n){var r,i,a=null,o=Y.getStreamInfo(),s=K.getTopQualityIndexFor(n,o.id);if(z=!0,k.trigger(P.default.DATA_UPDATE_STARTED,{sender:this}),G=S(t),null===H&&"fragmentedText"!==n?(i=K.getAverageThroughput(n),a=i||K.getInitialBitrateFor(n,o),r=K.getQualityForBitrate(Y.getMediaInfo(),a)):r=K.getQualityFor(n,o),r>s&&(r=s),V=_(r),H=e,"video"!==n&&"audio"!==n&&"fragmentedText"!==n)return z=!1,void k.trigger(P.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:V});for(var u=0;u<G.length;u++)Q.updateRepresentation(G[u],!0)}function h(){var e=new Date,t=s(),n=1e3*X.getTime();$.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function p(){var e=ee.calcSegmentAvailabilityRange(V,Y.isDynamic());$.addDVRInfo(Y.getType(),X.getTime(),Y.getStreamInfo().manifestInfo,e)}function _(e){return G[e]}function y(e){return G.indexOf(e)}function E(){for(var e=0,t=G.length;e<t;e++){var n=G[e].segmentInfoType;if(null===G[e].segmentAvailabilityRange||!F.default.hasInitialization(G[e])||("SegmentBase"===n||"BaseURL"===n)&&!G[e].segments)return!1}return!0}function S(e){var t=Z.getValue();return q=te.getIndexForAdaptation(H,t,e.period.index),te.getRepresentationsForAdaptation(t,e)}function R(e){for(var t,n=0,r=G.length;n<r;n++)t=G[n],t.segmentAvailabilityRange=ee.calcSegmentAvailabilityRange(t,e)}function M(){G.forEach(function(e){e.segmentAvailabilityRange=null})}function C(e){var t=e,n=function(){if(!a()){z=!0,k.trigger(P.default.DATA_UPDATE_STARTED,{sender:j}),M();for(var e=0;e<G.length;e++)Q.updateRepresentation(G[e],!0)}};z=!1,k.trigger(w.default.AST_IN_FUTURE,{delay:t}),setTimeout(n,t)}function D(e){if(e.sender.getStreamProcessor()===Y&&a()){var t,n,r,i=e.representation,o=$.getMetricsFor("stream"),u=$.getMetricsFor(s().adaptation.type),l=ne.getCurrentManifestUpdate(o),d=!1,f=0;if("dynamic"===i.adaptation.period.mpd.manifest.type){var c=i.segmentAvailabilityRange.end-i.segmentAvailabilityRange.start;f=1e3*(X.computeLiveDelay(V.segmentDuration,Y.getStreamInfo().manifestInfo.DVRWindowSize)-c)}if(f>0)return p(),C(f),n=new A.default(B,"Segments update failed",null),void k.trigger(P.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:V,error:n});if(l){for(var g=0;g<l.trackInfo.length;g++)if(t=l.trackInfo[g],t.index===i.index&&t.mediaType===Y.getType()){d=!0;break}d||$.addManifestUpdateRepresentationInfo(l,i.id,i.index,i.adaptation.period.index,Y.getType(),i.presentationTimeOffset,i.startNumber,i.segmentInfoType)}E()&&(z=!1,K.setPlaybackQuality(Y.getType(),Y.getStreamInfo(),y(V)),$.updateManifestUpdateInfo(l,{latency:V.segmentAvailabilityRange.end-X.getTime()}),r=ne.getCurrentRepresentationSwitch(u),r||h(),k.trigger(P.default.DATA_UPDATE_COMPLETED,{sender:this,data:H,currentRepresentation:V}))}}function N(e){e.isDynamic&&R(e.isDynamic)}function x(e){e.sender.getStreamProcessor()===Y&&p()}function L(e){e.mediaType===Y.getType()&&Y.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality&&(V=_(e.newQuality),J.setSavedBitrateSettings(e.mediaType,V.bandwidth),h())}var B=1,U=this.context,k=(0,O.default)(U).getInstance(),j=void 0,H=void 0,q=void 0,z=void 0,G=void 0,V=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,Z=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0;return j={initialize:t,setConfig:e,getData:r,getDataIndex:i,isUpdating:a,updateData:f,getStreamProcessor:n,getCurrentRepresentation:s,getRepresentationForQuality:_,reset:l},function(){H=null,q=-1,z=!0,G=[],K=(0,c.default)(U).getInstance(),W=(0,m.default)(U).getInstance(),X=(0,g.default)(U).getInstance(),Z=(0,v.default)(U).getInstance(),$=(0,T.default)(U).getInstance(),J=(0,I.default)(U).getInstance(),ee=(0,d.default)(U).getInstance(),te=(0,o.default)(U).getInstance(),ne=(0,u.default)(U).getInstance(),re=(0,b.default)(U).getInstance(),k.on(P.default.QUALITY_CHANGE_REQUESTED,L,j),k.on(P.default.REPRESENTATION_UPDATED,D,j),k.on(P.default.WALLCLOCK_TIME_UPDATED,N,j),k.on(P.default.BUFFER_LEVEL_UPDATED,x,j)}(),j}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),o=r(a),s=n(10),u=r(s),l=n(33),d=r(l),f=n(12),c=r(f),h=n(7),g=r(h),p=n(22),m=r(p),_=n(29),v=r(_),y=n(8),T=r(y),E=n(4),b=r(E),S=n(39),I=r(S),R=n(9),A=r(R),M=n(1),O=r(M),C=n(2),P=r(C),D=n(20),w=r(D),N=n(0),x=r(N),L=n(34),F=r(L);i.__dashjs_factory_name="RepresentationController",t.default=x.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){var i;try{var o=window.performance.now();if(!(i=s.xml_str2json(e)))throw new Error("parser error");var l=window.performance.now();u.run(i);var d=window.performance.now();t.setMatchers(a),t.setIron(u),n("Parsing complete: ( xml2json: "+(l-o).toPrecision(3)+"ms, objectiron: "+(d-l).toPrecision(3)+"ms, total: "+((d-o)/1e3).toPrecision(3)+"s)")}catch(t){return r.manifestError("parsing the manifest failed","parse",e,t),null}return i}var t=this.context,n=(0,d.default)(t).getInstance().log,r=(0,o.default)(t).getInstance(),i=void 0,a=void 0,s=void 0,u=void 0;return i={parse:e},function(){a=[new v.default,new T.default,new b.default,new m.default],s=new g.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:a}),u=new c.default([new I.default,new A.default])}(),i}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),o=r(a),s=n(0),u=r(s),l=n(3),d=r(l),f=n(62),c=r(f),h=n(31),g=r(h),p=n(76),m=r(p),_=n(74),v=r(_),y=n(73),T=r(y),E=n(75),b=r(E),S=n(71),I=r(S),R=n(72),A=r(R);i.__dashjs_factory_name="DashParser",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e);this._name=t,this._merge=void 0!==n?n:function(e){return e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}(t)}return i(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"AdaptationSet",e,[new s.default("Representation",e,[new s.default("SubRepresentation",e)])]))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){r(this,t);var e=["SegmentBase","SegmentTemplate","SegmentList"];return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Period",e,[new s.default("AdaptationSet",e,[new s.default("Representation",e)])]))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=60,l=60,d=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){return f.test(e.value)},function(e){var t=f.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&parseFloat(t[7])*d||0),t[9]&&t[10]){var r=parseInt(t[9],10)*l+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*u*d}return new Date(n)}))}return a(t,e),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=31536e3,d=2592e3,f=86400,c=3600,h=60,g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){for(var t=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return u.test(e.value);return!1},function(e){var t=u.exec(e),n=parseFloat(t[2]||0)*l+parseFloat(t[4]||0)*d+parseFloat(t[6]||0)*f+parseFloat(t[8]||0)*c+parseFloat(t[10]||0)*h+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n}))}return a(t,e),t}(s.default);t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){return u.test(e.value)},function(e){return parseFloat(e)}))}return a(t,e),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e,t){var n={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(n.hasOwnProperty(t)){var r=n[t];return void 0!==r&&r.indexOf(e.name)>=0}return!1},function(e){return String(e)}))}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(){function e(e){e&&e.boxParser&&(r=e.boxParser)}function t(e){var t,n,i,a,o,s,u,l,d,f,c,h,g,p=r.parse(e),m=p.getBox("tfhd"),_=p.getBox("tfdt"),v=p.getBox("trun"),y=p.getBox("moof"),T=p.getBox("mfhd"),E=p.getBox("subs");for(c=T.sequence_number,i=v.sample_count,o=_.baseMediaDecodeTime,f=(m.base_data_offset||0)+(v.data_offset||0),s=[],g=0,l=0;l<i;l++){u=v.samples[l],t=void 0!==u.sample_duration?u.sample_duration:m.default_sample_duration,a=void 0!==u.sample_size?u.sample_size:m.default_sample_size,n=void 0!==u.sample_composition_time_offset?u.sample_composition_time_offset:0;var b={dts:o,cts:o+n,duration:t,offset:y.offset+f,size:a,subSizes:[a]};if(E&&g<E.samples_with_subsamples.length&&E.samples_with_subsamples[g].nr==l+1){for(b.subSizes=[],d=0;d<E.samples_with_subsamples[g].subsamples.length;d++){var S=E.samples_with_subsamples[g].subsamples[d].size;b.subSizes.push(S)}g++}s.push(b),f+=a,o+=t}return h=o-_.baseMediaDecodeTime,{sampleList:s,sequenceNumber:c,totalDuration:h}}function n(e){var t=r.parse(e),n=t.getBox("mdhd");return n?n.timescale:NaN}var r=void 0;return{getSamplesInfo:t,getMediaTimescaleFromMoov:n,setConfig:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="FragmentedTextBoxParser",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c,h,g=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,p=g.SegmentURL_asArray.length,m=[];for(h=e.startNumber,d=(0,o.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),f=Math.max(d.start,0),c=Math.min(d.end,g.SegmentURL_asArray.length-1),s=f;s<=c;s++)l=g.SegmentURL_asArray[s],u=(0,o.getIndexBasedSegment)(r,t,e,s),u.replacementTime=(h+s-1)*e.segmentDuration,u.media=l.media?l.media:"",u.mediaRange=l.mediaRange,u.index=l.index,u.indexRange=l.indexRange,m.push(u),u=null;return e.availableSegmentsNumber=p,m}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(25);r.__dashjs_factory_name="ListSegmentsGetter";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e,t,n,i,a){var u,d=e.segmentInfoType;return"SegmentBase"!==d&&"BaseURL"!==d&&r(e,n)?("SegmentTimeline"===d?u=o.getSegments(e,t,n,a):"SegmentTemplate"===d?u=s.getSegments(e,t,n,a):"SegmentList"===d&&(u=l.getSegments(e,t,n,a)),i&&i(e,u)):u=e.segments,u}function r(e,t){var n,r,i=e.segments,a=!1;return i&&0!==i.length?(r=i[0].availabilityIdx,n=i[i.length-1].availabilityIdx,a=t<r||t>n):a=!0,a}var i=this.context,a=void 0,o=void 0,s=void 0,l=void 0;return a={getSegments:n},function(){o=(0,u.default)(i).create(e,t),s=(0,d.default)(i).create(e,t),l=(0,c.default)(i).create(e,t)}(),a}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(81),u=r(s),l=n(80),d=r(l),f=n(78),c=r(f);i.__dashjs_factory_name="SegmentsGetter";var h=o.default.getClassFactory(i);t.default=h},function(e,t,n){"use strict";function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,h=e.segmentDuration,g=e.segmentAvailabilityRange,p=[],m=null,_=null;for(f=e.startNumber,s=isNaN(h)&&!t?{start:f,end:f}:(0,o.decideSegmentListRangeForTemplate)(r,t,e,n,i,a),l=s.start,d=s.end,u=l;u<=d;u++)_=(0,o.getIndexBasedSegment)(r,t,e,u),_.replacementTime=(f+u-1)*e.segmentDuration,m=c.media,m=(0,o.replaceTokenForTemplate)(m,"Number",_.replacementNumber),m=(0,o.replaceTokenForTemplate)(m,"Time",_.replacementTime),_.media=m,p.push(_),_=null;return isNaN(h)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((g.end-g.start)/h),p}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(25);r.__dashjs_factory_name="TemplateSegmentsGetter";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e,t){function n(e,n,i,a){var s,u,l,d,f,c,h,g,p,m,_,v,y,T,E=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,b=E.SegmentTimeline,S=E.SegmentURL_asArray,I=e.availableSegmentsNumber>0,R=0,A=0,M=-1,O=[],C=!1,P=function(n,i){var a=E.media,s=n.mediaRange;return S&&(a=S[i].media||"",s=S[i].mediaRange),(0,o.getTimeBasedSegment)(r,t,e,R,n.d,T,a,s,M)};for(T=e.timescale,s=b.S_asArray,p=(0,o.decideSegmentListRangeForTimeline)(r,t,n,i,a),p?(v=p.start,y=p.end):_=r.calcMediaTimeFromPresentationTime(n||0,e),l=0,d=s.length;l<d;l++){if(u=s[l],c=0,u.hasOwnProperty("r")&&(c=u.r),u.hasOwnProperty("t")&&(R=u.t,A=R/T),c<0){if((g=s[l+1])&&g.hasOwnProperty("t"))h=g.t/T;else{var D=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:r.calcSegmentAvailabilityRange(e,t).end;h=r.calcMediaTimeFromPresentationTime(D,e),e.segmentDuration=u.d/T}c=Math.ceil((h-A)/(u.d/T))-1}if(m){if(I)break;M+=c+1}else for(f=0;f<=c;f++){if(M++,p){if(M>y){if(m=!0,I)break;continue}M>=v&&O.push(P(u,M))}else{if(O.length>10){if(m=!0,I)break;continue}C?O.push(P(u,M)):A>=_-u.d/T*1.5&&(C=!0,O.push(P(u,M)))}R+=u.d,A=R/T}}return I||(e.availableSegmentsNumber=M+1),O}var r=e.timelineConverter;return{getSegments:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(25);r.__dashjs_factory_name="TimelineSegmentsGetter";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.period=null,this.index=-1,this.type=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};i.DEFAULT_ID="defaultId",t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=function(t){s.trigger(g.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new u.default(e.url);f.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)}function n(e){var t=function(t,n){s.trigger(g.default.LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:l})};e?f.load({request:e,progress:function(){s.trigger(g.default.LOADING_PROGRESS,{request:e})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new d.default(_,r,n))}}):t(void 0,new d.default(v,y))}function r(){f&&f.abort()}function i(){f&&(f.abort(),f=null)}var a=this.context,s=(0,c.default)(a).getInstance(),l=void 0,f=void 0;return l={checkForExistence:t,load:n,abort:r,reset:i},function(){f=(0,o.default)(a).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(21),o=r(a),s=n(143),u=r(s),l=n(9),d=r(l),f=n(1),c=r(f),h=n(2),g=r(h),p=n(0),m=r(p),_=1,v=2,y="request is null";i.__dashjs_factory_name="FragmentLoader";var T=m.default.getClassFactory(i);T.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=_,T.FRAGMENT_LOADER_ERROR_NULL_REQUEST=v,t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){a.trigger(y.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}function n(e){var t=new c.default(e,p.HTTPRequest.MPD_TYPE);h.load({request:t,success:function(t,n,r){var i,o;r.responseURL&&r.responseURL!==e?(o=s.parseBaseUrl(r.responseURL),i=r.responseURL):(s.isRelative(e)&&(e=s.resolve(e,window.location.href)),o=s.parseBaseUrl(e));var u=l.parse(t,m);u?(u.url=i||e,u.originalUrl||(u.originalUrl=u.url),u.baseUri=o,u.loadedTime=new Date,m.resolveManifestOnLoad(u)):a.trigger(y.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new g.default(b,I)})},error:function(t,n,r){a.trigger(y.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new g.default(S,"Failed loading manifest: "+e+", "+r)})}})}function r(){a.off(y.default.XLINK_READY,t,f),m&&(m.reset(),m=null),h&&(h.abort(),h=null)}var i=this.context,a=(0,_.default)(i).getInstance(),s=(0,d.default)(i).getInstance(),l=e.parser,f=void 0,h=void 0,m=void 0;return f={load:n,reset:r},function(){a.on(y.default.XLINK_READY,t,f),h=(0,u.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier}),m=(0,o.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),f}Object.defineProperty(t,"__esModule",{value:!0});var a=n(101),o=r(a),s=n(21),u=r(s),l=n(23),d=r(l),f=n(59),c=r(f),h=n(9),g=r(h),p=n(5),m=n(1),_=r(m),v=n(2),y=r(v),T=n(0),E=r(T),b=1,S=2,I="parsing failed";i.__dashjs_factory_name="ManifestLoader";var R=E.default.getClassFactory(i);R.MANIFEST_LOADER_ERROR_PARSING_FAILURE=b,R.MANIFEST_LOADER_ERROR_LOADING_FAILURE=S,t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&(e.manifestModel&&(A=e.manifestModel),e.dashManifestModel&&(M=e.dashManifestModel))}function t(e){R=e,E=NaN,b=null,I=!1,S=!0,O=(0,c.default)(v).getInstance(),T.on(u.default.STREAMS_COMPOSED,_,this),T.on(u.default.PLAYBACK_STARTED,p,this),T.on(u.default.PLAYBACK_PAUSED,m,this),T.on(u.default.INTERNAL_MANIFEST_LOADED,h,this)}function n(e){d(e)}function r(){return R}function i(){T.off(u.default.PLAYBACK_STARTED,p,this),T.off(u.default.PLAYBACK_PAUSED,m,this),T.off(u.default.STREAMS_COMPOSED,_,this),T.off(u.default.INTERNAL_MANIFEST_LOADED,h,this),a(),S=!0,I=!1,E=NaN,O=null}function a(){null!==b&&(clearInterval(b),b=null)}function s(){a(),isNaN(E)||(y("Refresh manifest in "+E+" seconds."),b=setTimeout(f,1e3*E))}function l(){I=!0;var e=A.getValue(),t=e.url,n=M.getLocation(e);n&&(t=n),R.load(t)}function d(e){A.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;E=M.getManifestUpdatePeriod(e,n),T.trigger(u.default.MANIFEST_UPDATED,{manifest:e}),y("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),S||s()}function f(){S&&!O.getScheduleWhilePaused()||I||l()}function h(e){e.error||d(e.manifest)}function p(){S=!1,s()}function m(){S=!0,a()}function _(){I=!1}var v=this.context,y=(0,g.default)(v).getInstance().log,T=(0,o.default)(v).getInstance(),E=void 0,b=void 0,S=void 0,I=void 0,R=void 0,A=void 0,M=void 0,O=void 0;return{initialize:t,setManifest:n,getManifestLoader:r,refreshManifest:l,setConfig:e,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l),f=n(4),c=r(f),h=n(3),g=r(h);i.__dashjs_factory_name="ManifestUpdater",t.default=d.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){window.removeEventListener("load",r),s.createAll()}function i(){window.dashjs&&(window.clearInterval(u),s.createAll())}Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(e,t,n){if(!e||"VIDEO"!==e.nodeName)return null;if(e._dashjs_player)return e._dashjs_player;var i,a=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==r})[0])&&e.src)t=document.createElement("source"),t.src=e.src;else if(!t&&!e.src)return null;return n=n||{},i=(0,o.default)(n).create(),i.initialize(e,t.src,e.autoplay),i.getDebug().log("Converted "+a+" to dash.js player and added content: "+t.src),e._dashjs_player=i,i}function t(t,i){var a=[];t=t||"[data-dashjs-player]",i=i||document;for(var o=i.querySelectorAll(t),s=0;s<o.length;s++){var u=e(o[s],null);a.push(u)}for(var l=i.querySelectorAll('source[type="'+r+'"]'),d=0;d<l.length;d++){var f=n(l[d]),c=e(f,null);a.push(c)}return a}function n(e){return"video"===e.nodeName.toLowerCase()?e:n(e.parentNode)}var r="application/dash+xml";return{create:e,createAll:t}}(),u=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?s.createAll():u=window.setInterval(i,500):window.addEventListener("load",r)),t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){fe=e,(pe=t)&&(J.on(x.default.KEY_ERROR,M,se),J.on(x.default.SERVER_CERTIFICATE_UPDATED,M,se),J.on(x.default.LICENSE_REQUEST_COMPLETE,M,se),J.on(x.default.KEY_SYSTEM_SELECTED,M,se),J.on(x.default.KEY_SESSION_CREATED,M,se))}function n(e){le||(J.on(x.default.CURRENT_TRACK_CHANGED,N,se),H(e),le=!0)}function r(){for(var e=ue.length,t=0;t<e;t++)ue[t].reset();ue=[],le=!1,de=!1,E(),J.off(x.default.CURRENT_TRACK_CHANGED,N,se)}function i(){_e&&(_e.pause(),_e=null),ye&&(ye.reset(),ye=null),r(),ve=null,Ee=null,te=null,ee=null,ne=null,re=null,$=null,ie=null,he=!1,ge=!1,ce={},J.off(x.default.DATA_UPDATE_COMPLETED,Y,se),J.off(x.default.BUFFERING_COMPLETED,V,se),J.off(x.default.KEY_ERROR,M,se),J.off(x.default.SERVER_CERTIFICATE_UPDATED,M,se),J.off(x.default.LICENSE_REQUEST_COMPLETE,M,se),J.off(x.default.KEY_SYSTEM_SELECTED,M,se),J.off(x.default.KEY_SESSION_CREATED,M,se)}function a(){return fe.duration}function s(){return fe.start}function l(){return fe.index}function f(){return fe.id}function h(){return fe}function p(e){return null!==z(e)}function _(e){var t=z(e);return Ee.getBitrateList(t)}function y(){Te&&Te.start()}function E(){Te&&Te.clear()}function S(){return le}function R(){return ge}function M(e){e.error&&(ie.mediaKeySessionError(e.error),$(e.error),i())}function C(e){return"text"===e.type?e.mimeType:e.type}function D(e,t,n){var r,i,a=e.type;if("muxed"===a&&e)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",$(i),ie.manifestError(i,"multiplexedrep",ee.getValue()),!1;if("text"===a||"fragmentedText"===a||"embeddedText"===a)return!0;if(r=e.codec,$(a+" codec: "+r),e.contentProtection&&!re.supportsEncryptedMedia())ie.capabilityError("encryptedmedia");else if(!re.supportsCodec((0,v.default)(Z).getInstance().getElement(),r))return i=a+"Codec ("+r+") is not supported.",ie.manifestError(i,"codec",n),$(i),!1;return!0}function N(e){if(e.newMediaInfo.streamInfo.id===fe.id){var t=K(e.oldMediaInfo);if(t){var n=_e.getTime(),r=t.getBuffer(),i=e.newMediaInfo,a=ee.getValue(),o=ue.indexOf(t),s=t.getMediaSource();"fragmentedText"!==i.type?(t.reset(!0),U(i,a,s,{buffer:r,replaceIdx:o,currentTime:n}),_e.seek(_e.getTime())):t.updateMediaInfo(a,i)}}}function L(e){return"webm"===e.split("/")[1].toLowerCase()}function B(e){var t=L(e.mimeType)?(0,O.default)(Z).getInstance():(0,A.default)(Z).getInstance();return t.setConfig({baseURLController:oe,metricsModel:(0,T.default)(Z).getInstance()}),t.initialize(),(0,I.default)(Z).create({segmentBaseLoader:t,timelineConverter:ae,dashMetrics:(0,P.default)(Z).getInstance(),metricsModel:(0,T.default)(Z).getInstance(),baseURLController:oe})}function U(e,t,n,r){var i=(0,u.default)(Z).create({indexHandler:B(e),timelineConverter:ae,adapter:ne,manifestModel:ee}),a=ne.getAllMediaInfoForType(t,fe,e.type);if(i.initialize(C(e),ye,n,se,Te),Ee.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),i.getIndexHandler().setCurrentTime(r.currentTime),ue[r.replaceIdx]=i):ue.push(i),"text"===e.type||"fragmentedText"===e.type){for(var o,s=0;s<a.length;s++)a[s].index===e.index&&(o=s),i.updateMediaInfo(t,a[s]);"fragmentedText"===e.type&&i.updateMediaInfo(t,a[o])}else i.updateMediaInfo(t,e);return i}function k(e,t){var n,r=ee.getValue(),i=ne.getAllMediaInfoForType(r,fe,e),a=null;if(!i||0===i.length)return void $("No "+e+" data.");for(var o=0,s=i.length;o<s;o++)if(a=i[o],"embeddedText"===e)be.addEmbeddedTrack(a);else{if(!D(a,t,r))continue;ve.isMultiTrackSupportedByType(a.type)&&ve.addTrack(a,fe)}"embeddedText"!==e&&0!==ve.getTracksFor(e,fe).length&&(ve.checkInitialMediaSettingsForType(e,fe),n=ve.getCurrentTrackFor(e,fe),U(n,r,t))}function H(e){var t,n=ee.getValue();if(Te=(0,c.default)(Z).getInstance(),Te.initialize(),Te.setConfig({manifestModel:ee,manifestUpdater:te}),t=ne.getEventsFor(n,fe),Te.addInlineEvents(t),he=!0,k("video",e),k("audio",e),k("text",e),k("fragmentedText",e),k("embeddedText",e),k("muxed",e),G(),de=!0,he=!1,0===ue.length){var r="No streams to play.";ie.manifestError(r,"nostreams",n),$(r)}else me.initialize(ae,ue[0]),q()}function q(){var e=ue.length,t=!!ce.audio||!!ce.video,n=t?new Error(X,"Data update failed",null):null,r=0;for(r;r<e;r++)if(ue[r].isUpdating()||he)return;ge=!0,de&&(pe&&pe.initialize(ee.getValue(),z("audio"),z("video")),J.trigger(x.default.STREAM_INITIALIZED,{streamInfo:fe,error:n}))}function z(e){for(var t=ue.length,n=null,r=0;r<t;r++)if(n=ue[r],n.getType()===e)return n.getMediaInfo();return null}function G(){for(var e=0,t=ue.length;e<t;e++)ue[e].createBuffer()}function V(e){if(e.streamInfo===fe){var t=Q(),n=t.length,r=0;for(r;r<n;r++)if(!t[r].isBufferingCompleted())return;J.trigger(x.default.STREAM_BUFFERING_COMPLETED,{streamInfo:fe})}}function Y(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===fe&&(ce[t.getType()]=e.error,q())}function K(e){return!!e&&Q().filter(function(t){return t.getType()===e.type})[0]}function Q(){var e,t,n=ue.length,r=[],i=0;for(i;i<n;i++)t=ue[i],"audio"!==(e=t.getType())&&"video"!==e&&"fragmentedText"!==e||r.push(t);return r}function W(e){$("Manifest updated... updating data system wide.");var t=ee.getValue();if(le=!1,he=!0,ge=!1,fe=e,Te){var n=ne.getEventsFor(t,fe);Te.addInlineEvents(n)}for(var r=0,i=ue.length;r<i;r++){var a=ue[r],o=ne.getMediaInfoForType(t,fe,a.getType());Ee.updateTopQualityIndex(o),a.updateMediaInfo(t,o)}he=!1,q()}var X=1,Z=this.context,$=(0,F.default)(Z).getInstance().log,J=(0,w.default)(Z).getInstance(),ee=e.manifestModel,te=e.manifestUpdater,ne=e.adapter,re=e.capabilities,ie=e.errHandler,ae=e.timelineConverter,oe=e.baseURLController,se=void 0,ue=void 0,le=void 0,de=void 0,fe=void 0,ce=void 0,he=void 0,ge=void 0,pe=void 0,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0;return se={initialize:t,activate:n,deactivate:r,getDuration:a,getStartTime:s,getStreamIndex:l,getId:f,getStreamInfo:h,hasMedia:p,getBitrateListFor:_,startEventController:y,isActivated:S,isInitialized:R,updateData:W,reset:i,getProcessors:Q},function(){ue=[],le=!1,de=!1,fe=null,ce={},he=!1,ge=!1,me=(0,o.default)(Z).getInstance(),_e=(0,b.default)(Z).getInstance(),Ee=(0,m.default)(Z).getInstance(),ve=(0,d.default)(Z).getInstance(),ye=(0,g.default)(Z).create(),be=(0,j.default)(Z).getInstance(),J.on(x.default.BUFFERING_COMPLETED,V,se),J.on(x.default.DATA_UPDATE_COMPLETED,Y,se)}(),se}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=r(a),s=n(91),u=r(s),l=n(13),d=r(l),f=n(95),c=r(f),h=n(96),g=r(h),p=n(12),m=r(p),_=n(17),v=r(_),y=n(8),T=r(y),E=n(7),b=r(E),S=n(65),I=r(S),R=n(66),A=r(R),M=n(67),O=r(M),C=n(10),P=r(C),D=n(1),w=r(D),N=n(2),x=r(N),L=n(3),F=r(L),B=n(0),U=r(B),k=n(15),j=r(k);i.__dashjs_factory_name="Stream",t.default=U.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n,r,i){ee=e,ne=r,re=i,ue=t,$=ne.getStreamInfo().manifestInfo.isDynamic,K.initialize(this),ie=(0,o.default)(Y).getInstance(),ie.initialize(ee,this),ae=V(e),oe=(0,m.default)(Y).create({metricsModel:(0,b.default)(Y).getInstance(),manifestModel:X,adapter:W,dashMetrics:(0,x.default)(Y).getInstance(),dashManifestModel:(0,w.default)(Y).getInstance(),timelineConverter:Q,rulesController:(0,v.default)(Y).getInstance(),mediaPlayerModel:(0,T.default)(Y).getInstance()}),ae.initialize(ee,n,this),oe.initialize(ee,this),le=(0,I.default)(Y).create({metricsModel:(0,b.default)(Y).getInstance(),errHandler:(0,U.default)(Y).getInstance(),requestModifier:(0,A.default)(Y).getInstance()}),de=oe.getFragmentModel(),de.setLoader(le),se=(0,F.default)(Y).create(),se.initialize(this)}function n(e){K.reset(),ae&&(ae.reset(e),ae=null),oe&&(oe.reset(),oe=null),se&&(se.reset(),se=null),ue=null,le=null,re=null,ne=null,$=null,J=null,te=[],ee=null}function r(){return se.isUpdating()}function i(){return ee}function a(){return ie}function s(){return se}function l(){return le}function f(){return K}function h(){return ue}function p(){return ae.getBuffer()}function _(e){ae.setBuffer(e)}function y(){return ae}function E(){return de}function S(){return ne?ne.getStreamInfo():null}function R(e,t){t===J||t&&J&&t.type!==J.type||(J=t),-1===te.indexOf(t)&&te.push(t),W.updateData(e,this)}function M(){return te}function C(){return J}function D(){return ae.getMediaSource()}function N(){return oe}function L(){return re}function B(){oe.start()}function k(){oe.stop()}function j(){return W.getCurrentRepresentationInfo(X.getValue(),se)}function H(e){return W.getRepresentationInfoForQuality(X.getValue(),se,e)}function q(){return ae.getIsBufferingCompleted()}function z(){return ae.getBuffer()||ae.createBuffer(J)}function G(){return $}function V(e){return"video"===e||"audio"===e||"fragmentedText"===e?(0,u.default)(Y).create({metricsModel:(0,b.default)(Y).getInstance(),manifestModel:X,sourceBufferController:(0,O.default)(Y).getInstance(),errHandler:(0,U.default)(Y).getInstance(),streamController:(0,d.default)(Y).getInstance(),mediaController:(0,c.default)(Y).getInstance(),adapter:W,textSourceBuffer:(0,P.default)(Y).getInstance()}):(0,g.default)(Y).create({errHandler:(0,U.default)(Y).getInstance(),sourceBufferController:(0,O.default)(Y).getInstance()})}var Y=this.context,K=e.indexHandler,Q=e.timelineConverter,W=e.adapter,X=e.manifestModel,Z=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,de=void 0;return Z={initialize:t,isUpdating:r,getType:i,getBufferController:y,getABRController:a,getFragmentLoader:l,getFragmentModel:E,getScheduleController:N,getEventController:L,getFragmentController:h,getRepresentationController:s,getIndexHandler:f,getCurrentRepresentationInfo:j,getRepresentationInfoForQuality:H,isBufferingCompleted:q,createBuffer:z,getStreamInfo:S,updateMediaInfo:R,getMediaInfoArr:M,getMediaInfo:C,getMediaSource:D,getBuffer:p,setBuffer:_,start:B,stop:k,isDynamic:G,reset:n},function(){te=[]}(),Z}Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),o=r(a),s=n(16),u=r(s),l=n(22),d=r(l),f=n(13),c=r(f),h=n(99),g=r(h),p=n(98),m=r(p),_=n(54),v=r(_),y=n(4),T=r(y),E=n(8),b=r(E),S=n(86),I=r(S),R=n(30),A=r(R),M=n(26),O=r(M),C=n(15),P=r(C),D=n(11),w=r(D),N=n(10),x=r(N),L=n(68),F=r(L),B=n(14),U=r(B),k=n(0),j=r(k);i.__dashjs_factory_name="StreamProcessor",t.default=j.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){var i=function(r,i){t.resolved=!0,t.resolvedContent=r||null,a.trigger(p.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:n,error:r||i?null:new o.default(v,"Failed loading Xlink element: "+e)})};if(e===r)i(null,!0);else{var u=new f.default(e,l.HTTPRequest.XLINK_TYPE);s.load({request:u,success:function(e){i(e)},error:function(){i(null)}})}}function n(){s&&(s.abort(),s=null)}var r="urn:mpeg:dash:resolve-to-zero:2013",i=this.context,a=(0,h.default)(i).getInstance(),s=(0,u.default)(i).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier});return{load:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=r(a),s=n(21),u=r(s),l=n(5),d=n(59),f=r(d),c=n(1),h=r(c),g=n(2),p=r(g),m=n(0),_=r(m),v=1;i.__dashjs_factory_name="XlinkLoader";var y=_.default.getClassFactory(i);y.XLINK_LOADER_ERROR_LOADING_FAILURE=v,t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){g.invalidateSelectedIndexes(e.entry)}function t(e){e.baseURLTreeModel&&(g=e.baseURLTreeModel),e.baseURLSelector&&(p=e.baseURLSelector)}function n(e){g.update(e),p.chooseSelectorFromManifest(e)}function r(e){var t=g.getForPath(e),n=t.reduce(function(e,t){var n=p.select(t);return n?(h.isRelative(n.url)?e.url=h.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e):new c.default},new c.default);if(!h.isRelative(n.url))return n}function i(){g.reset(),p.reset()}function a(e){n(e)}var s=void 0,l=this.context,f=(0,m.default)(l).getInstance(),h=(0,d.default)(l).getInstance(),g=void 0,p=void 0;return s={reset:i,initialize:a,resolve:r,setConfig:t},function(){g=(0,o.default)(l).create(),p=(0,u.default)(l).create(),f.on(v.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,s)}(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(121),o=r(a),s=n(134),u=r(s),l=n(23),d=r(l),f=n(46),c=r(f),h=n(0),g=r(h),p=n(1),m=r(p),_=n(2),v=r(_);i.__dashjs_factory_name="BaseURLController",t.default=g.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){return!!(a.length&&e&&e.length)&&-1!==a.indexOf(e)}function n(e){-1===a.indexOf(e)&&(a.push(e),o.trigger(s,{entry:e}))}function r(e){e.error&&n(e.request.serviceLocation)}function i(){a=[]}var a=[],o=(0,u.default)(this.context).getInstance(),s=e.updateEventName,l=e.loadFailedEventName;return function(){l&&o.on(l,r,this)}(),{add:n,contains:t,reset:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(1),u=r(s);i.__dashjs_factory_name="BlackListController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){O=!1,y={},T={},E={},b=null,S=100,I=S/1e3,M=(0,o.default)(m).getInstance()}function t(){null!==b&&O&&(clearInterval(b),b=null,O=!1)}function n(){_("Start Event Controller"),O||isNaN(S)||(O=!0,b=setInterval(s,S))}function r(e){if(y={},e)for(var t=0;t<e.length;t++){var n=e[t];y[n.id]=n,_("Add inline event with id "+n.id)}_("Added "+e.length+" inline events")}function i(e){for(var t=0;t<e.length;t++){var n=e[t];n.id in T?_("Repeated event with id "+n.id):(T[n.id]=n,_("Add inband event with id "+n.id))}}function a(){if(E)for(var e=M.getTime(),t=Object.keys(E),n=0;n<t.length;n++){var r=t[n],i=E[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(_("Remove Event "+r+" at time "+e),i=null,delete E[r])}}function s(){l(T),l(y),a()}function u(){var e=R.getValue(),t=e.url;e.hasOwnProperty("Location")&&(t=e.Location),_("Refresh manifest @ "+t),A.getManifestLoader().load(t)}function l(e){var t,n=M.getTime();if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=e[a];void 0!==o&&(0===(t=o.presentationTime/o.eventStream.timescale)||t<=n&&t+I>n)&&(_("Start Event "+a+" at "+n),o.duration>0&&(E[a]=o),o.eventStream.schemeIdUri==g&&o.eventStream.value==p?u():v.trigger(o.eventStream.schemeIdUri,{event:o}),delete e[a])}}function f(e){e&&(e.manifestModel&&(R=e.manifestModel),e.manifestUpdater&&(A=e.manifestUpdater))}function h(){t(),y=null,T=null,E=null,M=null}var g="urn:mpeg:dash:event:2012",p=1,m=this.context,_=(0,d.default)(m).getInstance().log,v=(0,c.default)(m).getInstance(),y=void 0,T=void 0,E=void 0,b=void 0,S=void 0,I=void 0,R=void 0,A=void 0,M=void 0,O=void 0;return{initialize:e,addInlineEvents:r,addInbandEvents:i,clear:t,start:n,setConfig:f,reset:h}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=r(a),s=n(0),u=r(s),l=n(3),d=r(l),f=n(1),c=r(f);i.__dashjs_factory_name="EventController",t.default=u.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t=g[e];return t||(t=(0,l.default)(o).create({metricsModel:(0,f.default)(o).getInstance()}),g[e]=t),t}function t(e){return e&&e.type&&e.type===a.HTTPRequest.INIT_SEGMENT_TYPE}function n(){d.off(p.default.FRAGMENT_LOADING_COMPLETED,i,this);for(var e in g)g[e].reset();g={}}function r(e,t,n){var r=new s.default;return r.streamId=n,r.mediaInfo=t.mediaInfo,r.segmentType=t.type,r.start=t.startTime,r.duration=t.duration,r.end=r.start+r.duration,r.bytes=e,r.index=t.index,r.quality=t.quality,r}function i(e){if(g[e.request.mediaType]===e.sender){var n=e.sender.getScheduleController(),i=e.request,a=e.response,o=t(i),s=n.getStreamProcessor().getStreamInfo();if(!a||!s)return void u("No "+i.mediaType+" bytes to push or stream is inactive.");var l=r(a,i,s.id);d.trigger(o?p.default.INIT_FRAGMENT_LOADED:p.default.MEDIA_FRAGMENT_LOADED,{chunk:l,fragmentModel:e.sender})}}var o=this.context,u=(0,y.default)(o).getInstance().log,d=(0,h.default)(o).getInstance(),c=void 0,g=void 0;return c={getModel:e,isInitializationRequest:t,reset:n},function(){g={},d.on(p.default.FRAGMENT_LOADING_COMPLETED,i,c)}(),c}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=n(142),s=r(o),u=n(28),l=r(u),d=n(8),f=r(d),c=n(1),h=r(c),g=n(2),p=r(g),m=n(0),_=r(m),v=n(3),y=r(v);i.__dashjs_factory_name="FragmentController",t.default=_.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null}function t(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n}function n(e){e.setSource(null)}function r(e,t){return e.duration!=t&&(e.duration=t),e.duration}function i(e){var t=e.sourceBuffers,n=t.length,r=0;if("open"===e.readyState){for(r;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}e.endOfStream()}}return{createMediaSource:e,attachMediaSource:t,detachMediaSource:n,setDuration:r,signalEndOfStream:i}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="MediaSourceController",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){_e=e,Ne=t,Pe=(0,s.default)(oe).getInstance(),De=(0,h.default)(oe).getInstance(),we=(0,l.default)(oe).getInstance(),xe=(0,k.default)(oe).getInstance(),Le=Ne.getFragmentController(),Fe=Ne.getBufferController(),ve=Le.getModel(_e),ve.setScheduleController(this),ye=Ne.isDynamic(),ke=pe.getScheduleWhilePaused(),Be=(0,p.default)(oe).create({dashMetrics:(0,R.default)(oe).getInstance(),metricsModel:(0,E.default)(oe).getInstance(),textSourceBuffer:(0,y.default)(oe).getInstance()}),Ue=(0,_.default)(oe).create({adapter:(0,M.default)(oe).getInstance(),sourceBufferController:(0,C.default)(oe).getInstance(),textSourceBuffer:(0,y.default)(oe).getInstance()}),he.getIsTextTrack(_e)&&ue.on(L.default.TIMED_TEXT_REQUESTED,G,this),ue.on(L.default.QUALITY_CHANGE_REQUESTED,v,this),ue.on(L.default.DATA_UPDATE_STARTED,B,this),ue.on(L.default.DATA_UPDATE_COMPLETED,b,this),ue.on(L.default.FRAGMENT_LOADING_COMPLETED,P,this),ue.on(L.default.STREAM_COMPLETED,O,this),ue.on(L.default.STREAM_INITIALIZED,I,this),ue.on(L.default.BUFFER_LEVEL_STATE_CHANGED,j,this),ue.on(L.default.BUFFER_CLEARED,U,this),ue.on(L.default.BYTES_APPENDED,x,this),ue.on(L.default.INIT_REQUESTED,c,this),ue.on(L.default.QUOTA_EXCEEDED,q,this),ue.on(L.default.BUFFER_LEVEL_STATE_CHANGED,j,this),ue.on(L.default.PLAYBACK_SEEKING,Y,this),ue.on(L.default.PLAYBACK_STARTED,V,this),ue.on(L.default.PLAYBACK_RATE_CHANGED,K,this),ue.on(L.default.PLAYBACK_TIME_UPDATED,w,this),ue.on(L.default.URL_RESOLUTION_FAILED,z,this),ue.on(L.default.FRAGMENT_LOADING_ABANDONED,F,this)}function n(){Te&&!Fe.getIsBufferingCompleted()&&(ie(),be=!1,Ee?(Ee=!1,g(Te.quality)):d(0),se("Schedule controller starting for "+_e))}function r(){be||(be=!0,clearTimeout(Oe),se("Schedule controller stopping for "+_e))}function i(e,t){He[t]=He[t]||{};var n=we.getTopQualityIndexFor(e,t);return He[t][e]!=n&&(se("Top quality"+e+" index has changed from "+He[t][e]+" to "+n),He[t][e]=n,!0)}function o(){if(!(be||Ae||!Fe||Pe.isPaused()&&!ke)){u();var e=ze.length>0;if(e||i(Te.mediaInfo.type,Ne.getStreamInfo().id)||Be.execute(Ne,_e,xe.isVideoTrackPresent())){var t=function(){if(Te.quality!==qe)qe=Te.quality,Fe.switchInitData(Ne.getStreamInfo().id,Te.quality);else{var e=ze.shift();if(Le.isInitializationRequest(e))g(e.quality);else{var t=Ue.execute(Ne,e);t?ve.executeRequest(t):(Ae=!1,d(500))}}};Ae=!0,e?t():(we.getPlaybackQuality(Ne),t())}else d(500)}}function u(){var e=1.5*Te.fragmentDuration,t=ve.getRequests({state:S.default.FRAGMENT_MODEL_EXECUTED,time:Pe.getTime()+e,threshold:0})[0];t&&-1===ze.indexOf(t)&&!he.getIsTextTrack(_e)&&(!De.isCurrentTrack(t.mediaInfo)||pe.getFastSwitchEnabled()&&t.quality<Te.quality&&Fe.getBufferLevel()>=e&&we.getAbandonmentStateFor(_e)!==l.default.ABANDON_LOAD?(m(t),se("Reloading outdated fragment at index: ",t.index)):t.quality>Te.quality&&W(Pe.getTime()+Fe.getBufferLevel()))}function d(e){clearTimeout(Oe),Oe=setTimeout(o,e)}function c(e){e.sender.getStreamProcessor()===Ne&&g(Te.quality)}function g(e){qe=e;var t=fe.getInitRequest(Ne,e);t&&(Ae=!0,ve.executeRequest(t))}function m(e){ze.push(e)}function v(e){if(_e===e.mediaType&&Ne.getStreamInfo().id===e.streamInfo.id){if(null===(Te=Ne.getRepresentationInfoForQuality(e.newQuality))||void 0===Te)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");re(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ie()}}function T(e){var t=ve.getRequests({state:S.default.FRAGMENT_MODEL_EXECUTED,time:Pe.getTime(),threshold:0})[0];t&&Pe.getTime()>=t.startTime&&(t.quality!==je&&e&&ue.trigger(L.default.QUALITY_CHANGE_RENDERED,{mediaType:_e,oldQuality:je,newQuality:t.quality}),je=t.quality)}function b(e){e.error||e.sender.getStreamProcessor()!==Ne||(Te=fe.convertDataToTrack(de.getValue(),e.currentRepresentation))}function I(e){e.error||Ne.getStreamInfo().id!==e.streamInfo.id||(Te=Ne.getCurrentRepresentationInfo(),ye&&Ee&&(ge.setTimeSyncCompleted(!0),A()),be&&n())}function A(){var e=(0,D.default)(oe).getInstance().getLiveEdge(),t=Te.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,n=e-Pe.computeLiveDelay(Te.fragmentDuration,t),r=fe.getFragmentRequestForTime(Ne,Te,n,{ignoreIsFinished:!0});Ce=Pe.getLiveStartTime(),(isNaN(Ce)||r.startTime>Ce)&&(Pe.setLiveStartTime(r.startTime),Ce=r.startTime);var i=ce.getCurrentManifestUpdate(le.getMetricsFor("stream"));le.updateManifestUpdateInfo(i,{currentTime:Ce,presentationStartTime:e,latency:e-Ce,clientTimeOffset:ge.getClientTimeOffset()})}function O(e){e.fragmentModel===ve&&(r(),Ae=!1,se("Stream is complete"))}function P(e){e.sender===ve&&(he.getIsTextTrack(_e)&&(Ae=!1),e.error&&e.request.serviceLocation&&!be&&(m(e.request),Ae=!1,d(0)))}function w(){T(!0)}function x(e){e.sender.getStreamProcessor()===Ne&&(Ae=!1,d(0))}function F(e){e.streamProcessor===Ne&&(m(e.request),Ae=!1,d(0))}function B(e){e.sender.getStreamProcessor()===Ne&&r()}function U(e){e.sender.getStreamProcessor()===Ne&&(ve.removeExecutedRequestsBeforeTime(e.to),e.hasEnoughSpaceToAppend&&be&&n())}function j(e){e.sender.getStreamProcessor()!==Ne||e.state!==f.default.BUFFER_EMPTY||Pe.isSeeking()||(se("Buffer is empty! Stalling!"),re(new Date,a.PlayListTrace.REBUFFERING_REASON))}function q(e){e.sender.getStreamProcessor()===Ne&&r()}function z(){ve.abortRequests(),r()}function G(e){e.sender.getStreamProcessor()===Ne&&g(e.index)}function V(){!be&&ke||n()}function Y(e){Ce=e.seekTime,Z(0),be&&n();var t=ce.getCurrentManifestUpdate(le.getMetricsFor("stream")),r=Te.DVRWindow?Te.DVRWindow.end-Pe.getTime():NaN;le.updateManifestUpdateInfo(t,{latency:r})}function K(e){Ie&&(Ie.playbackspeed=e.playbackRate.toString())}function Q(){return Ce}function W(e){Ce=e}function X(){return ve}function Z(e){Me=e}function $(){return Me}function J(){return Ne}function ee(){return Be.getBufferTarget(Ne,_e,xe.isVideoTrackPresent())}function te(e){Se=e}function ne(e,t){re(e,t),Se=null}function re(e,t){if(Se&&!1===Re){var n=Ie.start,r=e.getTime()-n.getTime();Ie.duration=r,Ie.stopreason=t,Se.trace.push(Ie),Re=!0}}function ie(){Se&&!0===Re&&Te&&(Re=!1,Ie=new a.PlayListTrace,Ie.representationid=Te.id,Ie.start=new Date,Ie.mstart=1e3*Pe.getTime(),Ie.playbackspeed=Pe.getPlaybackRate().toString())}function ae(){ue.off(L.default.DATA_UPDATE_STARTED,B,this),ue.off(L.default.DATA_UPDATE_COMPLETED,b,this),ue.off(L.default.BUFFER_LEVEL_STATE_CHANGED,j,this),ue.off(L.default.QUALITY_CHANGE_REQUESTED,v,this),ue.off(L.default.FRAGMENT_LOADING_COMPLETED,P,this),ue.off(L.default.STREAM_COMPLETED,O,this),ue.off(L.default.STREAM_INITIALIZED,I,this),ue.off(L.default.QUOTA_EXCEEDED,q,this),ue.off(L.default.BYTES_APPENDED,x,this),ue.off(L.default.BUFFER_CLEARED,U,this),ue.off(L.default.INIT_REQUESTED,c,this),ue.off(L.default.PLAYBACK_RATE_CHANGED,K,this),ue.off(L.default.PLAYBACK_SEEKING,Y,this),ue.off(L.default.PLAYBACK_STARTED,V,this),ue.off(L.default.PLAYBACK_TIME_UPDATED,w,this),ue.off(L.default.URL_RESOLUTION_FAILED,z,this),ue.off(L.default.FRAGMENT_LOADING_ABANDONED,F,this),he.getIsTextTrack(_e)&&ue.off(L.default.TIMED_TEXT_REQUESTED,G,this),r(),T(!1),Ae=!1,Me=0,Ce=NaN,Pe=null,Se=null}var oe=this.context,se=(0,H.default)(oe).getInstance().log,ue=(0,N.default)(oe).getInstance(),le=e.metricsModel,de=e.manifestModel,fe=e.adapter,ce=e.dashMetrics,he=e.dashManifestModel,ge=e.timelineConverter,pe=e.mediaPlayerModel,me=void 0,_e=void 0,ve=void 0,ye=void 0,Te=void 0,Ee=void 0,be=void 0,Se=void 0,Ie=void 0,Re=void 0,Ae=void 0,Me=void 0,Oe=void 0,Ce=void 0,Pe=void 0,De=void 0,we=void 0,Ne=void 0,xe=void 0,Le=void 0,Fe=void 0,Be=void 0,Ue=void 0,ke=void 0,je=void 0,He=void 0,qe=void 0,ze=void 0;return me={initialize:t,getStreamProcessor:J,getSeekTarget:Q,setSeekTarget:W,getFragmentModel:X,setTimeToLoadDelay:Z,getTimeToLoadDelay:$,replaceRequest:m,start:n,stop:r,reset:ae,setPlayList:te,getBufferTarget:ee,finalisePlayList:ne},function(){Ee=!0,qe=NaN,je=NaN,He={},ze=[],be=!1,Se=null,Ie=null,Re=!0,Ae=!1,Me=0,Ce=NaN}(),me}Object.defineProperty(t,"__esModule",{value:!0});var a=n(60),o=n(7),s=r(o),u=n(12),l=r(u),d=n(16),f=r(d),c=n(13),h=r(c),g=n(132),p=r(g),m=n(133),_=r(m),v=n(15),y=r(v),T=n(8),E=r(T),b=n(28),S=r(b),I=n(10),R=r(I),A=n(19),M=r(A),O=n(26),C=r(O),P=n(40),D=r(P),w=n(1),N=r(w),x=n(2),L=r(x),F=n(0),B=r(F),U=n(22),k=r(U),j=n(3),H=r(j);i.__dashjs_factory_name="ScheduleController",t.default=B.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){b=e,a(t),S=n,I=S.getRepresentationController()}function n(e){try{E=p.createSourceBuffer(T,e),y||(E.hasOwnProperty("initialize")&&E.initialize(b,this),y=!0)}catch(e){m.mediaSourceError("Error creating "+b+" source buffer.")}return E}function r(){return E}function i(e){E=e}function a(e){T=e}function s(){return S}function l(e){g.off(u.default.DATA_UPDATE_COMPLETED,d,this),g.off(u.default.INIT_FRAGMENT_LOADED,f,this),e||(p.abort(T,E),p.removeSourceBuffer(T,E))}function d(e){e.sender.getStreamProcessor()===S&&g.trigger(u.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}function f(e){e.fragmentModel===S.getFragmentModel()&&e.chunk.bytes&&p.append(E,e.chunk)}function c(){return v}var h=this.context,g=(0,o.default)(h).getInstance(),p=e.sourceBufferController,m=e.errHandler,_=void 0,v=void 0,y=void 0,T=void 0,E=void 0,b=void 0,S=void 0,I=void 0;return _={initialize:t,createBuffer:n,getBuffer:r,setBuffer:i,getStreamProcessor:s,getIsBufferingCompleted:c,setMediaSource:a,reset:l},function(){y=!1,T=null,E=null,b=null,S=null,I=null,v=!1,g.on(u.default.DATA_UPDATE_COMPLETED,d,this),g.on(u.default.INIT_FRAGMENT_LOADED,f,this)}(),_}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="TextController",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t){w=t,C=0,P=!1,D=!1,N={"urn:mpeg:dash:utc:http-head:2014":E,"urn:mpeg:dash:utc:http-xsdate:2014":T.bind(null,c),"urn:mpeg:dash:utc:http-iso:2014":T.bind(null,h),"urn:mpeg:dash:utc:direct:2014":y,"urn:mpeg:dash:utc:http-head:2012":E,"urn:mpeg:dash:utc:http-xsdate:2012":T.bind(null,c),"urn:mpeg:dash:utc:http-iso:2012":T.bind(null,h),"urn:mpeg:dash:utc:direct:2012":y,"urn:mpeg:dash:utc:http-ntp:2014":v,"urn:mpeg:dash:utc:ntp:2014":v,"urn:mpeg:dash:utc:sntp:2014":v},i()||(I(e),a(!0))}function t(e){e&&(e.metricsModel&&(x=e.metricsModel),e.dashMetrics&&(L=e.dashMetrics))}function n(){return l()}function r(e){P=e}function i(){return P}function a(e){D=e}function s(e){C=e}function l(){return C}function f(e){var t,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,i=r.exec(e);return t=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&(parseInt(i[6],10)||0),i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]&&(n=60*parseInt(i[9],10)+parseInt(i[10],10),t+=("+"===i[8]?-1:1)*n*60*1e3),new Date(t).getTime()}function c(e){var t=Date.parse(e);return isNaN(t)&&(t=f(e)),t}function h(e){return Date.parse(e)}function _(e){return Date.parse(e)}function v(e,t,n){n()}function y(e,t,n){var r=c(e);if(!isNaN(r))return void t(r);n()}function T(e,t,n,r,i){var a,o,s=!1,u=new XMLHttpRequest,l=i?"HEAD":"GET",d=t.match(/\S+/g);t=d.shift(),a=function(){s||(s=!0,d.length?T(e,d.join(" "),n,r,i):r())},o=function(){var t,r;200===u.status&&(t=i?u.getResponseHeader("Date"):u.response,r=e(t),isNaN(r)||(n(r),s=!0))},u.open(l,t),u.timeout=m||0,u.onload=o,u.onloadend=a,u.send()}function E(e,t,n){T(_,e,t,n,!0)}function b(){var e=x.getReadOnlyMetricsFor("stream"),t=L.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?S(!0):(s(n-(new Date).getTime()),S(!1,n/1e3,C))}function S(e,t,n){r(!1),O.trigger(d.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new o.default(p):null})}function I(e,t){var n=t||0,i=e[n],a=function(e,t){var n=!e||!t;n&&w?b():S(n,e,t)};r(!0),i?N.hasOwnProperty(i.schemeIdUri)?N[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),M("Local time:      "+new Date(t)),M("Server time:     "+new Date(e)),M("Difference (ms): "+n),a(e,n)},function(){I(e,n+1)}):I(e,n+1):(s(0),a())}function R(){a(!1),r(!1)}var A=this.context,M=(0,g.default)(A).getInstance().log,O=(0,u.default)(A).getInstance(),C=void 0,P=void 0,D=void 0,w=void 0,N=void 0,x=void 0,L=void 0;return{initialize:e,getOffsetToDeviceTimeMs:n,setConfig:t,reset:R}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=r(a),s=n(1),u=r(s),l=n(2),d=r(l),f=n(0),c=r(f),h=n(3),g=r(h),p=1,m=5e3;i.__dashjs_factory_name="TimeSyncController";var _=c.default.getSingletonFactory(i);_.TIME_SYNC_FAILED_ERROR_CODE=p,_.HTTP_TIMEOUT_MS=m,t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){M=e}function n(e){O=e}function r(e){var t;P=new g.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:M}),C=e,t=f(C.Period_asArray,C,y,_),a(t,y,_)}function i(){I.off(d.default.XLINK_ELEMENT_LOADED,s,A),D&&(D.reset(),D=null)}function a(e,t,n){var r,i,a,o={};for(o.elements=e,o.type=t,o.resolveType=n,0===o.elements.length&&l(o),a=0;a<o.elements.length;a++)r=o.elements[a],i=R.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,D.load(i,r,o)}function s(e){var t,n,r,i="";t=e.element,n=e.resolveObject,t.resolvedContent&&(r=t.resolvedContent.indexOf(">")+1,i=t.resolvedContent.substr(0,r)+"<response>"+t.resolvedContent.substr(r)+"</response>",t.resolvedContent=P.xml_str2json(i)),p(n)&&l(n)}function l(e){var t,n,r=[];if(c(e),e.resolveType===v&&I.trigger(d.default.XLINK_READY,{manifest:C}),e.resolveType===_)switch(e.type){case y:for(t=0;t<C[y+"_asArray"].length;t++)n=C[y+"_asArray"][t],n.hasOwnProperty(T+"_asArray")&&(r=r.concat(f(n[T+"_asArray"],n,T,_))),n.hasOwnProperty(E+"_asArray")&&(r=r.concat(f(n[E+"_asArray"],n,E,_)));a(r,T,_);break;case T:I.trigger(d.default.XLINK_READY,{manifest:C})}}function f(e,t,n,r){var i,a,o,s=[];for(a=e.length-1;a>=0;a--)i=e[a],i.hasOwnProperty("xlink:href")&&i["xlink:href"]===b&&e.splice(a,1);for(a=0;a<e.length;a++)i=e[a],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o=h(i["xlink:href"],t,n,a,r,i),s.push(o));return s}function c(e){var t,n,r,i,a,o,s=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)r=t.resolvedContent[n][a],s.push(r)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],s.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),o=0;o<s.length;o++)t.parentElement[n].splice(t.index+o,0,s[o]);s=[]}e.elements.length>0&&O.run(C)}function h(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}function p(e){var t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0}var S=this.context,I=(0,u.default)(S).getInstance(),R=(0,m.default)(S).getInstance(),A=void 0,M=void 0,O=void 0,C=void 0,P=void 0,D=void 0;return A={resolveManifestOnLoad:r,setMatchers:t,setIron:n,reset:i},function(){I.on(d.default.XLINK_ELEMENT_LOADED,s,A),D=(0,o.default)(S).create({errHandler:e.errHandler,metricsModel:e.metricsModel,requestModifier:e.requestModifier})}(),A}Object.defineProperty(t,"__esModule",{value:!0});var a=n(92),o=r(a),s=n(1),u=r(s),l=n(2),d=r(l),f=n(0),c=r(f),h=n(31),g=r(h),p=n(23),m=r(p),_="onLoad",v="onActuate",y="Period",T="AdaptationSet",E="EventStream",b="urn:mpeg:dash:resolve-to-zero:2013";i.__dashjs_factory_name="XlinkController",t.default=c.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return i=(0,o.default)(r).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel}),(0,d.default)(r).create(e)}function t(){return(0,g.default)(r).getInstance()}function n(){return(0,c.default)(r).getInstance()}var r=this.context,i=void 0;return{createMetricsReporting:e,getReportingFactory:t,getMetricsHandlerFactory:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(113),o=r(a),s=n(27),u=r(s),l=n(103),d=r(l),f=n(50),c=r(f),h=n(51),g=r(h),p=n(0),m=r(p);i.__dashjs_factory_name="MetricsReporting";var _=m.default.getClassFactory(i);_.events=u.default,t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){if(!t.error){var n=Object.keys(r);(0,u.default)(i).getInstance({dashManifestModel:e.dashManifestModel}).getMetrics(t.manifest).forEach(function(t){var a=JSON.stringify(t);if(r.hasOwnProperty(a))n.splice(a,1);else try{var s=(0,o.default)(i).create(e);s.initialize(t),r[a]=s}catch(e){}}),n.forEach(function(e){r[e].reset(),delete r[e]}),a.trigger(c.default.METRICS_INITIALISATION_COMPLETE)}}function n(){Object.keys(r).forEach(function(e){r[e].reset()}),r={}}var r={},i=this.context,a=e.eventBus;return function(){a.on(g.default.MANIFEST_UPDATED,t),a.on(g.default.STREAM_TEARDOWN_COMPLETE,n)}(),{}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(104),o=r(a),s=n(114),u=r(s),l=n(0),d=r(l),f=n(27),c=r(f),h=n(2),g=r(h);i.__dashjs_factory_name="MetricsCollectionController",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t){try{a=(0,u.default)(o).create({mediaElement:e.mediaElement}),a.initialize(t.Range),i=(0,d.default)(o).create({log:e.log}),i.initialize(t.Reporting,a),r=(0,c.default)(o).create({log:e.log,eventBus:e.eventBus}),r.initialize(t.metrics,i)}catch(e){throw n(),e}}function n(){r&&r.reset(),i&&i.reset(),a&&a.reset()}var r=void 0,i=void 0,a=void 0,o=this.context;return{initialize:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(106),u=r(s),l=n(107),d=r(l),f=n(105),c=r(f);i.__dashjs_factory_name="MetricsController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){i.forEach(function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)})}function n(e,n){e.split(",").forEach(function(e,t,r){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=r[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete r[t+1])}(a=l.create(e,n))&&i.push(a)}),u.on(d.default.METRIC_ADDED,t,a),u.on(d.default.METRIC_UPDATED,t,a)}function r(){u.off(d.default.METRIC_ADDED,t,a),u.off(d.default.METRIC_UPDATED,t,a),i.forEach(function(e){return e.reset()}),i=[]}var i=[],a=void 0,s=this.context,u=e.eventBus,l=(0,o.default)(s).getInstance({log:e.log,eventBus:e.eventBus});return a={initialize:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(50),o=r(a),s=n(0),u=r(s),l=n(20),d=r(l);i.__dashjs_factory_name="MetricsHandlersController",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;s.add(t,n)}),i=!!e[0]._useWallClockTime)}function n(){s.clear()}function r(){var e,t=s.length;if(!t)return!0;e=i?(new Date).getTime()/1e3:l.currentTime;for(var n=0;n<t;n+=1){var r=s.start(n),a=s.end(n);if(r<=e&&e<a)return!0}return!1}var i=!1,a=this.context,o=void 0,s=void 0,l=e.mediaElement;return o={initialize:t,reset:n,isEnabled:r},function(){s=(0,u.default)(a).create()}(),o}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(57),u=r(s);i.__dashjs_factory_name="RangeController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){e.some(function(e){var n=a.create(e,t);if(n)return i.push(n),!0})}function n(){i.forEach(function(e){return e.reset()}),i=[]}function r(e,t){i.forEach(function(n){return n.report(e,t)})}var i=[],a=(0,u.default)(this.context).getInstance({log:e.log});return{initialize:t,reset:n,report:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(51),u=r(s);i.__dashjs_factory_name="ReportingController",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){try{return Object.keys(h).map(function(e){return h[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}function t(){var t=e();t&&d!==t.t&&(d=t.t,a.report(s,t))}function n(e,n,r){n&&(o=c.validateN(r),a=n,s=c.reconstructFullMetricName(e,r),l=setInterval(t,o))}function r(){clearInterval(l),l=null,o=0,a=null,d=null}function i(e,t,n){"BufferLevel"===e&&(h[n]=t)}var a=void 0,o=void 0,s=void 0,l=void 0,d=void 0,f=this.context,c=(0,u.default)(f).getInstance(),h=[];return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(52),u=r(s);i.__dashjs_factory_name="BufferLevelHandler",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){o.off(u.default.METRICS_INITIALISATION_COMPLETE,t,this),o.trigger(u.default.BECAME_REPORTING_PLAYER)}function n(e,n){n&&(a=n,o.on(u.default.METRICS_INITIALISATION_COMPLETE,t,this))}function r(){a=null}function i(e,t){"DVBErrors"===e&&a&&a.report(e,t)}var a=void 0,o=e.eventBus;return{initialize:n,reset:r,handleNewMetric:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(27),u=r(s);t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(e,t){r=e,i=t}function t(){i=null,r=void 0}function n(e,t){e===r&&i&&i.report(r,t)}var r=void 0,i=void 0;return{initialize:e,reset:t,handleNewMetric:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="GenericMetricHandler",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){var e=d;e.length&&i&&i.report(s,e),d=[]}function t(t,n,r,u){n&&(a=f.validateN(r),i=n,u&&u.length&&(o=u),s=f.reconstructFullMetricName(t,r,u),l=setInterval(e,a))}function n(){clearInterval(l),l=null,a=null,o=null,d=[],i=null}function r(e,t){"HttpList"===e&&(o&&o!==t.type||d.push(t))}var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,d=[],f=(0,u.default)(this.context).getInstance();return{initialize:t,reset:n,handleNewMetric:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(52),u=r(s);i.__dashjs_factory_name="HttpListHandler",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e,t,n){var r=new XMLHttpRequest,i=function(){var e=p.indexOf(r);-1!==e&&(p.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};p.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}function t(t,n){Array.isArray(n)||(n=[n]),l&&h.isEnabled()&&n.forEach(function(n){var r=a.serialise(n);s&&"DVBErrors"!==t&&(r="metricname="+t+"&"+r),r=c+"?"+r,e(r,null,function(){l=!1})})}function n(e,t){var n;if(h=t,!(c=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");f||(n=e["dvb:probability"]||e["dvb:priority"]||0,n&&(1e3===n||n/1e3>=o.random())&&(l=!0),f=!0)}function r(){g||(p.forEach(function(e){return e.abort()}),p=[]),f=!1,l=!1,c=null,h=null}var i=this.context,a=(0,u.default)(i).getInstance(),o=(0,d.default)(i).getInstance(),s=!0,l=!1,f=!1,c=null,h=null,g=!0,p=[];return{report:t,initialize:n,reset:r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(115),u=r(s),l=n(116),d=r(l);i.__dashjs_factory_name="DVBReporting",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=new o.default;if(_){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=_.originalUrl||_.url),t.terror||(t.terror=new Date),m.addDVBErrors(t)}}function n(e){e.error||(_=e.manifest)}function r(e){t({errorcode:o.default.BASE_URL_CHANGED,servicelocation:e.entry})}function i(){t({errorcode:o.default.BECAME_REPORTER})}function a(e){(0===e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&t({errorcode:e.responsecode||o.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function s(e){switch(e.metric){case"HttpList":a(e.value)}}function l(e){var n,r=e.error?e.error.code:0;switch(r){case MediaError.MEDIA_ERR_NETWORK:n=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:n=o.default.CORRUPT_MEDIA_OTHER;break;default:return}t({errorcode:n})}function f(){p.on(u.default.MANIFEST_UPDATED,n,g),p.on(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,r,g),p.on(d.default.METRIC_ADDED,s,g),p.on(d.default.METRIC_UPDATED,s,g),p.on(d.default.PLAYBACK_ERROR,l,g),p.on(c.default.BECAME_REPORTING_PLAYER,i,g)}function h(){p.off(u.default.MANIFEST_UPDATED,n,g),p.off(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,r,g),p.off(d.default.METRIC_ADDED,s,g),p.off(d.default.METRIC_UPDATED,s,g),p.off(d.default.PLAYBACK_ERROR,l,g),p.off(c.default.BECAME_REPORTING_PLAYER,i,g)}var g=void 0,p=e.eventBus,m=e.metricsModel,_=void 0;return g={initialise:f,reset:h},f(),g}Object.defineProperty(t,"__esModule",{value:!0});var a=n(117),o=r(a),s=n(2),u=r(s),l=n(20),d=r(l),f=n(27),c=r(f),h=n(0),g=r(h);i.__dashjs_factory_name="DVBErrorsTranslator",t.default=g.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){var i,a,o=r.getMpd(e),s=0;return t?s=o.availabilityStartTime.getTime()/1e3:(i=this.getRegularPeriods(e,o),i.length&&(s=i[0].start)),a=s,n&&n.hasOwnProperty("starttime")&&(a+=n.starttime),a}function n(e){var n=[];return e.Metrics_asArray&&e.Metrics_asArray.forEach(function(i){var a=new o.default,s=r.getIsDynamic(e);i.hasOwnProperty("metrics")&&(a.metrics=i.metrics,i.Range_asArray&&i.Range_asArray.forEach(function(n){var i=new u.default;i.starttime=t(e,s,n),n.hasOwnProperty("duration")?i.duration=n.duration:i.duration=r.getDuration(e),i._useWallClockTime=s,a.Range.push(i)}),i.Reporting_asArray&&(i.Reporting_asArray.forEach(function(e){var t=new d.default;if(e.hasOwnProperty("schemeIdUri")){t.schemeIdUri=e.schemeIdUri;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);a.Reporting.push(t)}}),n.push(a)))}),n}var r=e.dashManifestModel;return{getMetrics:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(118),o=r(a),s=n(119),u=r(s),l=n(120),d=r(l),f=n(0),c=r(f);i.__dashjs_factory_name="ManifestParsing",t.default=c.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(){function e(t){var n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=t[n],void 0!==r&&null!==r||(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach(function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))}),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}return{serialise:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="MetricSerialiser",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(){function e(){n&&(o||(o=new r(a)),n.getRandomValues(o),s=0)}function t(t,r){var a;return t||(t=0),r||(r=1),n?(s===o.length&&e(),a=o[s]/i,s+=1):a=Math.random(),a*(r-t)+t}var n=window.crypto||window.msCrypto,r=Uint32Array,i=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1,a=10,o=void 0,s=void 0,u=void 0;return u={random:t},e(),u}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="RNG",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.metrics="",this.Range=[],this.Reporting=[]};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.schemeIdUri="",this.value=""};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){function e(e,t,n){var r=g.getBaseURLsFromElement(n);e[t]?p.areSimpleEquivalent(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=c):e[t]=new h(r)}function t(t){var n=g.getBaseURLsFromElement(t);p.areSimpleEquivalent(n,d.data.baseUrls)||(d.data.baseUrls=n,d.data.selectedIdx=c),t.Period_asArray&&t.Period_asArray.forEach(function(t,n){e(d.children,n,t),t.AdaptationSet_asArray&&t.AdaptationSet_asArray.forEach(function(t,r){e(d.children[n].children,r,t),t.Representation_asArray&&t.Representation_asArray.sort(g.getRepresentationSortFunction()).forEach(function(t,i){e(d.children[n].children[r].children,i,t)})})})}function n(e,t){var r=t||d;e(r.data),r.children&&r.children.forEach(function(t){return n(e,t)})}function r(e){n(function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=c)})}function i(e){t(e)}function a(){d=new h}function o(e){var t=d,n=[t.data];return e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})}var u=void 0,d=void 0,f=this.context,g=(0,s.default)(f).getInstance(),p=(0,l.default)(f).getInstance();return u={reset:a,update:i,getForPath:o,invalidateSelectedIndexes:r},function(){d=new h}(),u}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),s=r(o),u=n(138),l=r(u),d=n(0),f=r(d),c=NaN,h=function e(t,n){i(this,e),this.data={baseUrls:t||null,selectedIdx:n||c},this.children=[]};a.__dashjs_factory_name="BaseURLTreeModel",t.default=f.default.getClassFactory(a)},function(e,t,n){"use strict";function r(){function e(e,t){var n=t.droppedVideoFrames-i;i=t.droppedVideoFrames;var o=t.totalVideoFrames-a;a=t.totalVideoFrames,r[e]?(r[e].droppedVideoFrames+=n,r[e].totalVideoFrames+=o):r[e]={droppedVideoFrames:n,totalVideoFrames:o}}function t(){return r}function n(e){r=[],i=e.droppedVideoFrames,a=e.totalVideoFrames}var r=[],i=0,a=0;return{push:e,getFrameHistory:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="DroppedFramesHistory";var o=a.default.getClassFactory(r);t.default=o},function(e,t,n){"use strict";function r(){function e(e){r[e.oldValue]||(r[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,a=n?-t:0,s=n?0:1;if(r[e.oldValue].drops+=n,r[e.oldValue].dropSize+=a,r[e.oldValue].noDrops+=s,i.push({idx:e.oldValue,noDrop:s,drop:n,dropSize:a}),i.length>o){var u=i.shift();r[u.idx].drops-=u.drop,r[u.idx].dropSize-=u.dropSize,r[u.idx].noDrops-=u.noDrop}}function t(){return r}function n(){r=[],i=[]}var r=[],i=[];return{push:e,getSwitchRequests:t,reset:n}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=8;r.__dashjs_factory_name="SwitchRequestHistory";var s=a.default.getClassFactory(r);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){p={},_={},v=[],y=(0,u.default)(h).getInstance(),T=(0,d.default)(h).getInstance(),E=(0,c.default)(h).getInstance()}function t(e,t){p[e]=p[e]||{},p[e][t]=p[e][t]||{}}function n(e,t){v[e]=v[e]||[],v[e].push(t)}function r(e){var r=e.getMediaInfo(),a=r.type,u=e.getCurrentRequest(),d=(0,o.default)(h).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(!isNaN(u.index)){t(a,u.index);var c=y.getStableBufferTime();if(T.getCurrentBufferLevel(E.getReadOnlyMetricsFor(a))>c)return d;var m=p[a][u.index];if(null===m||null===u.firstByteDate||_.hasOwnProperty(m.id))return d;if(void 0===m.firstByteTime&&(v[a]=[],m.firstByteTime=u.firstByteDate.getTime(),m.segmentDuration=u.duration,m.bytesTotal=u.bytesTotal,m.id=u.index),m.bytesLoaded=u.bytesLoaded,m.elapsedTime=(new Date).getTime()-m.firstByteTime,m.bytesLoaded>0&&m.elapsedTime>0&&n(a,Math.round(8*m.bytesLoaded/m.elapsedTime)),v[a].length>=f&&m.elapsedTime>l&&m.bytesLoaded<m.bytesTotal){var b=v[a].reduce(function(e,t){return e+t},0);if(m.measuredBandwidthInKbps=Math.round(b/v[a].length),m.estimatedTimeOfDownload=+(8*m.bytesTotal/m.measuredBandwidthInKbps/1e3).toFixed(2),m.estimatedTimeOfDownload<m.segmentDuration*s||0===e.getTrackInfo().quality)return d;if(!_.hasOwnProperty(m.id)){var S=e.getStreamProcessor().getABRController(),I=m.bytesTotal-m.bytesLoaded,R=S.getBitrateList(r),A=S.getQualityForBitrate(r,m.measuredBandwidthInKbps*y.getBandwidthSafetyFactor());I>m.bytesTotal*R[A].bitrate/R[S.getQualityFor(a,r.streamInfo)].bitrate&&(d.value=A,d.reason.throughput=m.measuredBandwidthInKbps,d.reason.fragmentID=m.id,_[m.id]=m,g("AbandonRequestsRule ( ",a,"frag id",m.id,") is asking to abandon and switch to quality to ",A," measured bandwidth was",m.measuredBandwidthInKbps),delete p[a][m.id])}}else m.bytesLoaded===m.bytesTotal&&delete p[a][m.id]}return d}function a(){e()}var s=1.8,l=500,f=5,h=this.context,g=(0,m.default)(h).getInstance().log,p=void 0,_=void 0,v=void 0,y=void 0,T=void 0,E=void 0,b={shouldAbandon:r,reset:a};return e(),b}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(4),u=r(s),l=n(10),d=r(l),f=n(8),c=r(f),h=n(0),g=r(h),p=n(3),m=r(p);i.__dashjs_factory_name="AbandonRequestsRule",t.default=g.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,n){_[e]={index:t,quality:n}}function n(e,t,n){var r=_[e];return!r||(t!==r.index||n<r.quality)}function r(e){var r=e.getMediaInfo(),a=r.type,u=p.getReadOnlyMetricsFor(a),c=e.getCurrentRequest(),m=(0,o.default)(d).create(o.default.NO_CHANGE,{name:i.__dashjs_factory_name});if(0===u.BolaState.length)return f("WARNING: executing BolaAbandonRule before initializing BolaRule"),_[a]=null,m;var v=u.BolaState[0]._s,y=c.index,T=c.quality;if(isNaN(y)||0===T||!n(a,y,T)||!c.firstByteDate)return m;var E=Date.now(),b=E-c.firstByteDate.getTime(),S=c.bytesLoaded,I=c.bytesTotal,R=I-S,A=c.duration,M=h.getCurrentBufferLevel(u)?h.getCurrentBufferLevel(u):0,O=M+v.placeholderBuffer,C=8*S/(.001*b),P=v.bandwidthSafetyFactor*C,D=.001*(c.firstByteDate.getTime()-c.requestStartDate.getTime());D<.001*l&&(D=.001*l);var w=D+8*I/P,N="";g.default.BOLA_DEBUG&&(N="index="+y+" quality="+T+" bytesLoaded/bytesTotal="+S+"/"+I+" bufferLevel="+M+" timeSince1stByte="+(b/1e3).toFixed(3)+" estThroughput="+(P/1e6).toFixed(3)+" latency="+D.toFixed(3));var x=I*v.bitrates[0]/v.bitrates[T],L=R-D*P/8;if(L<1&&(L=1),b<s||R<=x||M>v.bufferTarget||L<=x||w<=A)return m;var F=O-D;F<0&&(F=0);for(var B=0;B+1<T&&I*v.bitrates[B+1]/v.bitrates[T]<L;)++B;var U=T;if(v.state===g.default.BOLA_STATE_STARTUP){U=0;for(var k=0;k<=B&&!(8*(x=I*v.bitrates[k]/v.bitrates[T])/A>P);++k)U=k}else for(var j=(v.Vp*(v.utilities[T]+v.gp)-F)/L,H=0;H<=B;++H){x=I*v.bitrates[H]/v.bitrates[T];var q=(v.Vp*(v.utilities[H]+v.gp)-F)/x;q>j&&(U=H,j=q)}var z=v.rebufferSafetyFactor*C*(M-D)/8;if(U===T&&L>z&&(U=B),U===T)return m;for(;U>0&&!((x=I*v.bitrates[U]/v.bitrates[T])<=z);)--U;var G=NaN;if(U>0){var V=v.utilities[U],Y=v.utilities[U-1],K=v.bitrates[U],Q=v.bitrates[U-1];G=v.Vp*((K*Y-Q*V)/(K-Q)+v.gp)}else{var W=v.utilities[0],X=v.utilities[1],Z=v.bitrates[0],$=v.bitrates[1];G=v.Vp*((Z*X-$*W)/(Z-$)+v.gp),G-=A}return O>G&&(v.placeholderBuffer=G-M,v.placeholderBuffer<0&&(v.placeholderBuffer=0)),v.lastQuality=U,p.updateBolaState(a,v),g.default.BOLA_DEBUG&&f("BolaDebug "+a+" BolaAbandonRule abandon to "+U+" - "+N),t(a,y,T),m.value=U,m.reason.state=v.state,m.reason.throughput=C,m.reason.bufferLevel=M,m.reason.bytesLoaded=c.bytesLoaded,m.reason.bytesTotal=c.bytesTotal,m.reason.elapsedTimeMs=b,m}function a(){_={}}var s=500,l=200,d=this.context,f=(0,c.default)(d).getInstance().log,h=e.dashMetrics,p=e.metricsModel,m=void 0,_=void 0,v=void 0;return m={shouldAbandon:r,reset:a},function(){_={},v=(0,u.default)(d).getInstance()}(),m}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=r(a),s=n(4),u=r(s),l=n(0),d=r(l),f=n(3),c=r(f),h=n(56),g=r(h);i.__dashjs_factory_name="BolaAbandonRule",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var a=e.getDroppedFramesHistory();if(a){for(var o=a.getFrameHistory(),s=0,l=0,d=u.default.NO_CHANGE,f=1;f<o.length;f++)if(o[f]&&(s=o[f].droppedVideoFrames,(l=o[f].totalVideoFrames)>i&&s/l>r)){d=f-1,n("DroppedFramesRule, index: "+d+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,u.default)(t).create(d,{droppedFrames:s})}return(0,u.default)(t).create()}var t=this.context,n=(0,d.default)(t).getInstance().log,r=.15,i=375;return{getMaxIndex:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(6),u=r(s),l=n(3),d=r(l);i.__dashjs_factory_name="DroppedFramesRule";var f=o.default.getClassFactory(i);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=(new Date).getTime(),r=e.getMediaInfo().type,i=f.getReadOnlyMetricsFor(r),u=i.BufferState.length>0?i.BufferState[i.BufferState.length-1]:null,l=(0,m.default)(a).create();return t-p<_||null===u?l:(n(r,u.state),u.state===o.default.BUFFER_EMPTY&&void 0!==h[r].firstBufferLoadedEvent&&(s("Switch to index 0; buffer is empty."),l.value=0,l.reason="InsufficientBufferRule: Buffer is empty"),p=t,l)}function n(e,t){h[e]=h[e]||{},h[e].state=t,t!==o.default.BUFFER_LOADED||h[e].firstBufferLoadedEvent||(h[e].firstBufferLoadedEvent=!0)}function r(){h={}}function i(){l.off(d.default.PLAYBACK_SEEKING,r,c),h={},p=0}var a=this.context,s=(0,g.default)(a).getInstance().log,l=(0,u.default)(a).getInstance(),f=e.metricsModel,c=void 0,h=void 0,p=void 0,_=void 0;return c={getMaxIndex:t,reset:i},function(){h={},p=0,_=1e3,l.on(d.default.PLAYBACK_SEEKING,r,c)}(),c}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),o=r(a),s=n(1),u=r(s),l=n(2),d=r(l),f=n(0),c=r(f),h=n(3),g=r(h),p=n(6),m=r(p);i.__dashjs_factory_name="InsufficientBufferRule",t.default=c.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){for(var a=e.getSwitchHistory(),o=a.getSwitchRequests(),s=0,u=0,l=0,f=(0,d.default)(t).create(),c=0;c<o.length;c++)if(void 0!==o[c]&&(s+=o[c].drops,u+=o[c].noDrops,l+=o[c].dropSize,s+u>=i&&s/u>r)){f.value=c>0?c-1:0,f.reason={index:f.value,drops:s,noDrops:u,dropSize:l},n("Switch history rule index: "+f.value+" samples: "+(s+u)+" drops: "+s);break}return f}var t=this.context,n=(0,u.default)(t).getInstance().log,r=.075,i=6;return{getMaxIndex:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(3),u=r(s),l=n(6),d=r(l);i.__dashjs_factory_name="SwitchRequest";var f=o.default.getClassFactory(i);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){C=[],P=[],D=(0,d.default)(R).getInstance()}function n(e,t){C[e]=C[e]||[],C[e].push(t)}function r(e,t){if(P[e]||(P[e]=[]),P[e].push(t),P[e].length>y)return P[e].shift()}function i(e){var t=void 0;return P[e]&&P[e].length>0&&(t=P[e].reduce(function(e,t){return e+t})/P[e].length),t}function a(e,t){var n=Math.min(C[e].length,t?m:v),r=C[e].slice(-1*n,C[e].length);return r.length>1&&r.reduce(function(e,t){return(e*I<=t||e>=t*S)&&n++,t}),n=Math.min(C[e].length,n),C[e].slice(-1*n,C[e].length)}function s(e,t){var n=a(e,t),r=0;if(n.length>0){r=n.reduce(function(e,t){return e+t},0)/n.length}return C[e].length>=g&&C[e].shift(),r/1e3*D.getBandwidthSafetyFactor()}function l(e,t,n){var r=!1;if(e<b&&(r=!0),!r)switch(n){case"video":r=t<T;break;case"audio":r=t<E}return r}function c(e){var t=e.getMediaInfo(),a=t.type,d=O.getReadOnlyMetricsFor(a),c=e.getStreamProcessor(),h=c.getABRController(),g=c.isDynamic(),p=M.getCurrentHttpRequest(d),m=d.BufferState.length>0?d.BufferState[d.BufferState.length-1]:null,v=e.hasRichBuffer(),y=(0,_.default)(R).create();if(!d||!p||p.type!==f.HTTPRequest.MEDIA_SEGMENT_TYPE||!m||v)return y;var T=void 0,E=void 0;if(p.trace&&p.trace.length){E=p.tresponse.getTime()-p.trequest.getTime()||1,T=p._tfinish.getTime()-p.tresponse.getTime()||1;var b=p.trace.reduce(function(e,t){return e+t.b[0]},0),S=Math.round(8*b/(T/1e3)),I=void 0,D=void 0;l(E,T,a)?C[a]&&P[a]?(I=s(a,g),D=i(a)):(I=S/1e3,D=E):(n(a,S),I=s(a,g),r(a,E),D=i(a,g)),h.setAverageThroughput(a,I),h.getAbandonmentStateFor(a)!==u.default.ABANDON_LOAD&&(m.state===o.default.BUFFER_LOADED||g)&&(y.value=h.getQualityForBitrate(t,I,D),c.getScheduleController().setTimeToLoadDelay(0),A("ThroughputRule requesting switch to index: ",y.value,"type: ",a,"Average throughput",Math.round(I),"kbps"),y.reason={throughput:I,latency:D})}return y}function h(){t()}var g=20,m=3,v=4,y=v,T=50,E=5,b=50,S=1.3,I=1.3,R=this.context,A=(0,p.default)(R).getInstance().log,M=e.dashMetrics,O=e.metricsModel,C=void 0,P=void 0,D=void 0,w={getMaxIndex:c,reset:h};return t(),w}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),o=r(a),s=n(12),u=r(s),l=n(4),d=r(l),f=n(5),c=n(0),h=r(c),g=n(3),p=r(g),m=n(6),_=r(m);i.__dashjs_factory_name="ThroughputRule",t.default=h.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){function t(e){var t,r=0;return e&&e.some(function(e,t){return r=t,!n.contains(e.serviceLocation)})&&(t=e[r]),t}var n=e.blacklistController;return{select:t}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="BasicSelector",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e){function t(e){var t=[],n=function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)},r=function(e){return!i.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)};return e.filter(r).filter(n)}function n(e){var t,n,r=function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n},i=function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority},a=0,o=[],s=0;if(n=e.sort(r).filter(i),n.length)return n.length>1&&(n.forEach(function(e){a+=e.dvb_weight,o.push(a)}),t=Math.floor(Math.random()*(a-1)),o.every(function(e,n){return s=n,!(t<e)})),n[s]}function r(e){return e&&n(t(e))}var i=e.blacklistController;return{select:r}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="DVBSelector",t.default=a.default.getClassFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,r){return i.getCurrentBufferLevel(a.getReadOnlyMetricsFor(t))<n(e,t,r)}function n(e,t,n){var r=NaN,o=e.getCurrentRepresentationInfo();if("fragmentedText"===t)r=s.getAllTracksAreDisabled()?0:o.fragmentDuration;else if("audio"===t&&n){var u=i.getCurrentBufferLevel(a.getReadOnlyMetricsFor("video"));r=Math.floor(Math.max(u,o.fragmentDuration))}else{var d=o.mediaInfo.streamInfo,f=e.getABRController();if(f.isPlayingAtTopQuality(d)){var c=d.manifestInfo.duration>=l.getLongFormContentDurationThreshold();r=c?l.getBufferTimeAtTopQualityLongForm():l.getBufferTimeAtTopQuality()}else r=l.getStableBufferTime()}return r}var r=this.context,i=e.dashMetrics,a=e.metricsModel,s=e.textSourceBuffer,l=void 0,d=void 0,f={execute:t,getBufferTarget:n};return function(){l=(0,o.default)(r).getInstance(),d=(0,u.default)(r).getInstance()}(),f}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),s=n(7),u=r(s),l=n(0),d=r(l);i.__dashjs_factory_name="BufferLevelRule",t.default=d.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t){var n=e.getCurrentRepresentationInfo(),o=n.mediaInfo,u=o.type,l=e.getScheduleController(),d=l.getSeekTarget(),f=!isNaN(d),c=e.getBuffer(),h=f?d:i.getIndexHandlerTime(e);if(isNaN(h)||"fragmentedText"===u&&s.getAllTracksAreDisabled())return null;if(f&&l.setSeekTarget(NaN),c){var g=a.getBufferRange(e.getBuffer(),h);null!==g&&(r("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",h," was changed to ",g.end),h=g.end)}var p=void 0;return t?(h=t.startTime+t.duration/2,p=i.getFragmentRequestForTime(e,n,h,{timeThreshold:0,ignoreIsFinished:!0})):(p=i.getFragmentRequestForTime(e,n,h,{keepIdx:!f}),p&&e.getFragmentModel().isFragmentLoaded(p)&&(p=i.getNextFragmentRequest(e,n)),p&&(i.setIndexHandlerTime(e,p.startTime+p.duration),p.delayLoadingTime=(new Date).getTime()+l.getTimeToLoadDelay(),l.setTimeToLoadDelay(0))),p}var n=this.context,r=(0,o.default)(n).getInstance().log,i=e.adapter,a=e.sourceBufferController,s=e.textSourceBuffer;return{execute:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="NextFragmentRequestRule",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e.selector&&(_=e.selector)}function t(e){_=s.getIsDVB(e)?p:h}function n(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=_.select(t);return r?(e.selectedIdx=t.indexOf(r),r):void a.trigger(u.default.URL_RESOLUTION_FAILED,{error:new Error(y,T)})}function r(){f.reset()}var i=this.context,a=(0,o.default)(i).getInstance(),s=(0,d.default)(i).getInstance(),l=void 0,f=void 0,h=void 0,p=void 0,_=void 0;return l={chooseSelectorFromManifest:t,select:n,reset:r,setConfig:e},function(){f=(0,c.default)(i).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:u.default.FRAGMENT_LOADING_COMPLETED}),h=(0,m.default)(i).create({blacklistController:f}),p=(0,g.default)(i).create({blacklistController:f}),_=h}(),l}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a),s=n(2),u=r(s),l=n(11),d=r(l),f=n(94),c=r(f),h=n(131),g=r(h),p=n(130),m=r(p),_=n(0),v=r(_),y=1,T="Failed to resolve a valid URL";i.__dashjs_factory_name="BaseURLSelector";var E=v.default.getClassFactory(i);E.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=y,E.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=T,t.default=E},function(e,t,n){"use strict";function r(){function e(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function t(){return a}function n(e){a=e}function r(e,t){var n=e.canPlayType(t);return"probably"===n||"maybe"===n}var i=void 0,a=void 0;return i={supportsMediaSource:e,supportsEncryptedMedia:t,supportsCodec:r,setEncryptedMediaSupported:n},function(){a=!1}(),i}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="Capabilities",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){return g}function n(e){g=e}function r(e,t){var n=!0,r=0,i=void 0,a=void 0;if(void 0===t&&(t=!1),e.tag>16777215?(h.getUint32(g)!==e.tag&&(n=!1),r=4):e.tag>65535?(i=h.getUint16(g),a=h.getUint8(g+2),256*i+a!==e.tag&&(n=!1),r=3):e.tag>255?(h.getUint16(g)!==e.tag&&(n=!1),r=2):(h.getUint8(g)!==e.tag&&(n=!1),r=1),!n&&e.required&&!t)throw new u.default("required tag not found");return n&&(g+=r),n}function i(e,t){var n=r(e,t);return n&&s(),n}function a(e){var t=void 0;return r(e),t=s(),c[e.parse](t)}function o(e,t){var n=r(e,t),i=void 0;return n&&(i=s(),g+=i),n}function s(e){var t=1,n=128,r=-1,i=0,a=h.getUint8(g),o=void 0;for(o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&h.getUint8(g+t);return g+=t,i}function l(e){var t=void 0;switch(e){case 4:t=h.getFloat32(g),g+=4;break;case 8:t=h.getFloat64(g),g+=8}return t}function d(e){var t=0,n=void 0;for(n=0;n<e;n+=1)t<<=8,t|=255&h.getUint8(g+n);return g+=e,t}function f(){return g<h.byteLength}var c=void 0,h=new DataView(e.data),g=0;return c={getPos:t,setPos:n,consumeTag:r,consumeTagAndSize:i,parseTag:a,skipOverElement:o,getMatroskaCodedNum:s,getMatroskaFloat:l,getMatroskaUint:d,moreData:f}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(9),u=r(s);i.__dashjs_factory_name="EBMLParser",t.default=o.default.getClassFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e&&l&&l.boxes&&0!==l.boxes.length?s(l.fetch(e)):null}function t(e){for(var t,n=l.fetchAll(e),r=[],i=0,a=n.length;i<a;i++)(t=s(n[i]))&&r.push(t);return r}function n(e){l=e}function r(){if(!l||!l.boxes||!l.boxes.length)return null;var e=l.boxes[l.boxes.length-1].type,n=t(e);return n[n.length-1]}function i(){return l._cursor.offset}function a(e,t,n){for(var r in n)t[r]=e[n[r]]}function s(e){if(!e)return null;var t,n,r=new o.default;switch(a(e,r,d),e.hasOwnProperty("_incomplete")&&(r.isComplete=!e._incomplete),r.type){case"sidx":if(a(e,r,f),r.references)for(t=0,n=r.references.length;t<n;t++)a(e.references[t],r.references[t],c);break;case"emsg":a(e,r,h);break;case"mdhd":a(e,r,g);break;case"mfhd":a(e,r,p);break;case"subs":a(e,r,m);break;case"tfhd":a(e,r,_);break;case"tfdt":a(e,r,v);break;case"trun":if(a(e,r,y),r.samples)for(t=0,n=r.samples.length;t<n;t++)a(e.samples[t],r.samples[t],T)}return r}var u=void 0,l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,g=void 0,p=void 0,m=void 0,_=void 0,v=void 0,y=void 0,T=void 0;return u={getBox:e,getBoxes:t,setData:n,getLastBox:r,getOffset:i},function(){d={offset:"_offset",size:"size",type:"type"},f={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},c={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},h={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},g={timescale:"timescale"},p={sequence_number:"sequence_number"},m={samples_with_subsamples:"samples_with_subsamples"},_={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},v={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},y={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},T={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}(),u}Object.defineProperty(t,"__esModule",{value:!0});var a=n(144),o=r(a),s=n(0),u=r(s);i.__dashjs_factory_name="IsoFile",t.default=u.default.getClassFactory(i)},function(e,t,n){"use strict";function r(){function e(e,t){return JSON.stringify(e)===JSON.stringify(t)}return{areSimpleEquivalent:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.__dashjs_factory_name="ObjectUtils",t.default=a.default.getSingletonFactory(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){e&&e.videoModel&&(re=e.videoModel)}function t(e){if(e.hasOwnProperty("begin")&&e.hasOwnProperty("end")){return[g(e.begin),g(e.end)]}return null}function n(){var e="cue_TTML_"+ae;return ae++,e}function r(e,t,n){function r(e,t){if(e.hasOwnProperty(t)){var n=e[t];a.indexOf(n)<0&&a.push(n)}}for(var i=[],a=[],o=[],s=0;s<e.length;s++){var u=e[s];r(u,"begin"),r(u,"end")}if(0===a.length)return o;if(void 0!==t&&void 0!==n){for(var l=0;l<a.length;l++){var d=g(a[l]);t<d&&d<n&&i.push(d)}i.push(t),i.push(n)}else for(var f=0;f<a.length;f++)i.push(g(a[f]));i.sort(function(e,t){return e-t});for(var c=0;c<i.length-1;c++)o.push([i[c],i[c+1]]);return o}function i(e,t){return"undefined"!=typeof startInterval&&e<t&&(e=t),e}function o(e,t){return void 0!==t&&e>t&&(e=t),e}function s(e,t,n){var r=g(e.begin),a=g(e.end);return r=i(r,t),a=o(a,n),void 0!==t&&void 0!==n&&(a<t||r>n)?(k("TTML: Cue "+r+"-"+a+" outside interval "+t+"-"+n),null):[r,a]}function u(e,n){var r=!0;if(e.hasOwnProperty("span")){var i=t(e.span);null!==i&&(r=i[0]<n[1]&&i[1]>n[0])}return r}function d(e,i,a,o){var l=void 0,d=void 0,f=void 0,c=void 0,h=void 0,g="";if(!(q=ie.xml_str2json(e)))throw new Error("TTML document could not be parsed");if(re.getTTMLRenderingDiv()&&(c="html"),!(l=q.tt))throw new Error("TTML document lacks tt element");var _=p(l,"http://www.w3.org/ns/ttml");if(_&&m(l,_),f=l["tts:extent"],!(d=l.head))throw new Error("TTML document lacks head element");d.layout&&(G=d.layout.region_asArray),d.styling&&(z=d.styling.style_asArray);var v={};if(o)for(h=0;h<o.length;h++){var y="urn:mpeg:14496-30:subs:"+(h+1).toString(),S="data:image/png;base64,"+btoa(o[h]);v[y]=S}if(d.metadata){var I=d.metadata.image_asArray;if(I)for(h=0;h<I.length;h++){var R="#"+I[h]["xml:id"],A=I[h].imagetype.toLowerCase(),M="data:image/"+A+";base64,"+I[h].__text;v[R]=M}}if(!l.body)throw new Error("TTML document lacks body element");var D=w(),B=re.getElement().clientWidth,U=re.getElement().clientHeight,j=[B/D[0],U/D[1]];W["font-size"]=j[1]+"px;";var H=[];if(G)for(h=0;h<G.length;h++)H.push(C(JSON.parse(JSON.stringify(G[h])),j));var Q=p(q.tt,"http://www.w3.org/ns/ttml#parameter");l.hasOwnProperty(Q+":frameRate")&&(l.frameRate=parseInt(l[Q+":frameRate"],10));for(var X=[],Z=l.body_asArray[0].__children,$=0;$<Z.length;$++){var J=Z[$].div,ee=null;if(null===(ee=t(J))){var te=J.p_asArray;if(null===ee&&(!te||0===te.length))return g="TTML has div that contains no timing and no paragraphs.",k(g),X;for(var ne=0;ne<te.length;ne++){var ae=te[ne],oe=ae.span_asArray,se=[];if(ae.hasOwnProperty("begin")&&ae.hasOwnProperty("end")){var ue=s(ae,i,a);null!==ue&&se.push(ue)}else se=r(oe,i,a);if(0!==se.length)for(var le=ae.__children,de=0;de<se.length;de++){for(var fe=se[de],ce=[],he=0;he<le.length;he++){var ge=le[he];u(ge,fe)&&ce.push(ge)}if(0!==ce.length)if("html"===c){Y={},K={},V={};var pe=L(ae,J,j),me=F(ae,j),_e=me[1];me=me[0];var ve=document.createElement("div");ve.className=_e;var ye=x(ce,j);ye.className="cueDirUniWrapper",T("unicode-bidi",me)&&(ye.style.cssText+=E("unicode-bidi",me),b("unicode-bidi",me)),T("direction",me)&&(ye.style.cssText+=E("direction",me),b("direction",me)),T("padding-left",me)&&T("padding-right",me)&&(ye.innerHTML=N(ye,me)),T("padding-left",me)&&T("padding-right",me)&&(b("padding-left",me),b("padding-right",me));var Te="";if(T("regionID",pe)){var Ee=E("regionID",pe);Te=Ee.slice(Ee.indexOf(":")+1,Ee.length-1)}me&&(ve.style.cssText=me.join(" ")+"display:flex;"),pe&&(pe=pe.join(" ")),ve.appendChild(ye);var be=document.createElement("div");be.appendChild(ve),be.id=n(),be.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+pe,0===Object.keys(V).length&&(V.defaultFontSize="100"),X.push({start:fe[0],end:fe[1],type:"html",cueHTMLElement:be,regions:H,regionID:Te,cueID:be.id,videoHeight:U,videoWidth:B,cellResolution:D,fontSize:V||{defaultFontSize:"100"},lineHeight:Y,linePadding:K})}else{var Se="",Ie=ce;Ie.length&&Ie.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?Se+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(Se+="\n"))})}else e.hasOwnProperty("br")?Se+="\n":Se+=e["#text"].replace(/[\r\n]+/gm," ").trim()}),X.push({start:fe[0],end:fe[1],data:Se,type:"text"})}}else g="TTML: Empty paragraph"}}else{var Re=void 0;if(J.region){Re=O(P(G,J.region),f)}Re||(Re=O(J,f));var Ae=J["smpte:backgroundImage"];void 0!==Ae&&void 0!==v[Ae]&&X.push({start:ee[0],end:ee[1],id:n(),data:v[Ae],type:"image",layout:Re})}}if(""!==g&&k(g),X.length>0)return X;throw new Error(g)}function g(e){var t,n,r,i=H.test(e);if(!i)return NaN;if(t=e.split(":"),n=parseFloat(t[0])*c+parseFloat(t[1])*h+parseFloat(t[2]),t[3]){if(!(r=q.tt.frameRate)||isNaN(r))return NaN;n+=parseFloat(t[3])/r}return n}function p(e,t){var n=Object.keys(e).filter(function(n){return("xmlns"===n.split(":")[0]||"xmlns"===n.split(":")[1])&&e[n]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=n.length?null:n[0]}function m(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(("object"===a(e[n])||e[n]instanceof Object)&&!Array.isArray(e[n]))m(e[n],t);else if(Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)m(e[n][r],t);var i=t+":",o=n.indexOf(i);if(o>=0){var s=n.slice(o+i.length);e[s]=e[n],delete e[n]}}}function _(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function v(e){var t=e.slice(1),n=t.match(/.{2}/g),r=parseFloat(parseInt(parseInt(n[3],16)/255*1e3,10)/1e3);return"rgba("+n.slice(0,3).map(function(e){return parseInt(e,16)}).join(",")+","+r+");"}function y(e){var t=void 0,n=void 0;return t=e.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),n=parseInt(t[t.length-1],10)/255,"rgba("+t[0]+","+t[1]+","+t[2]+","+n+");"}function T(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return!0;return!1}function E(e,t){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>-1)return t[n];return null}function b(e,t){t.splice(t.indexOf(E(e,t)),1)}function S(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)e[n]&&e[n].split(":")[0].indexOf(t[r].split(":")[0])>-1&&e.splice(n,1);return e.concat(t)}function I(e){var t=new Array(2),n=-1===e.indexOf(":")?0:e.indexOf(":"),r=void 0;return-1===e.indexOf("%")?-1===e.indexOf("c")?-1===e.indexOf("p")?t[0]=t[1]=null:(t[0]="p",r=e.indexOf("p")):(t[0]="c",r=e.indexOf("c")):(t[0]="%",r=e.indexOf("%")),t[1]=e.slice(n,r),t}function R(e,t,n){var r,i,a=[];for(var o in e)if(e.hasOwnProperty(o)){var s=o.replace("ebutts:","");s=s.replace("xml:",""),s=s.replace("tts:",""),s=_(s),e[s]=e[o],delete e[o]}if("line-padding"in e){var u=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(K[e.id]=u);var l=u*t[0]+"px;";a.push("padding-left:"+l),a.push("padding-right:"+l)}if("font-size"in e){var d=I(e["font-size"]),f=parseFloat(d[1]);"id"in e&&(V[e.id]=d),"%"===d[0]?r=f/100*t[1]+"px;":"c"===d[0]&&(r=f*t[1]+"px;"),a.push("font-size:"+r)}if("line-height"in e)if("normal"===e["line-height"])a.push("line-height: normal;");else{var c=I(e["line-height"]),h=parseFloat(c[1]);"id"in e&&(Y[e.id]=c),"%"===c[0]?i=h/100*t[1]+"px;":"c"===c[0]&&(i=h*t[1]+"px;"),a.push("line-height:"+i)}"font-family"in e&&(e["font-family"]in X?a.push(X[e["font-family"]]):a.push("font-family:"+e["font-family"]+";")),"text-align"in e&&e["text-align"]in Z&&(a.push(Z[e["text-align"]][0]),a.push(Z[e["text-align"]][1])),"multi-row-align"in e&&(T("text-align",a)&&"auto"!=e["multi-row-align"]&&b("text-align",a),e["multi-row-align"]in $&&a.push($[e["multi-row-align"]]));var g;return"background-color"in e&&(g=e["background-color"].indexOf("#")>-1&&e["background-color"].length-1==8?v(e["background-color"]):e["background-color"].indexOf("rgba")>-1?y(e["background-color"]):e["background-color"]+";",a.push("background-color: "+g)),"color"in e&&(g=e.color.indexOf("#")>-1&&e.color.length-1==8?v(e.color):e.color.indexOf("rgba")>-1?y(e.color):e.color+";",a.push("color: "+g)),"wrap-option"in e&&(e["wrap-option"]in J?a.push(J[e["wrap-option"]]):a.push("white-space:"+e["wrap-option"])),"unicode-bidi"in e&&(e["unicode-bidi"]in ee?a.push(ee[e["unicode-bidi"]]):a.push("unicode-bidi:"+e["unicode-bidi"])),"font-style"in e&&a.push("font-style:"+e["font-style"]+";"),"font-weight"in e&&a.push("font-weight:"+e["font-weight"]+";"),"direction"in e&&a.push("direction:"+e.direction+";"),"text-decoration"in e&&a.push("text-decoration:"+e["text-decoration"]+";"),n&&(a=a.concat(C(e,t))),q.tt.hasOwnProperty("xml:space")&&"preserve"===q.tt["xml:space"]&&a.push("white-space: pre;"),a}function A(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function M(e,t,n){var r=[];return e.match(/\S+/g).forEach(function(e){var i=A(z,e);if(i){var a=R(JSON.parse(JSON.stringify(i)),t,n);r=r.concat(a)}}),r}function O(e,t){var n=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in e&&"tts:origin"in e){var r=n.exec(e["tts:extent"]),i=n.exec(e["tts:origin"]);if(null===r||null===i)return k("Bad extent or origin: "+e["tts:extent"]+" "+e["tts:origin"]),null;var a=parseFloat(r[1]),o=parseFloat(r[3]),s=parseFloat(i[1]),u=parseFloat(i[3]);if(t){var l=n.exec(t);if(null===l||"px"!==l[2]||"px"!==l[4])return k("Bad tt.extent: "+t),null;var d=parseFloat(l[1]),f=parseFloat(l[3]);"px"===r[2]&&(a=a/d*100),"px"===r[4]&&(o=o/f*100),"px"===i[2]&&(s=s/d*100),"px"===i[4]&&(u=u/f*100)}return{left:s,top:u,width:a,height:o}}return null}function C(e,t){var n=[];for(var r in e){var i=r.replace("tts:","");i=i.replace("xml:",""),i=_(i),e[i]=e[r],i!==r&&delete e[r]}if("extent"in e){var a=e.extent.split(/\s/);n.push("width: "+a[0]+";"),n.push("height: "+a[1]+";")}if("origin"in e){var o=e.origin.split(/\s/);n.push("left: "+o[0]+";"),n.push("top: "+o[1]+";")}if("display-align"in e&&n.push(te[e["display-align"]]),"writing-mode"in e&&n.push(ne[e["writing-mode"]]),"style"in e){var s=M(e.style,t,!0);n=n.concat(s)}return"padding"in e&&n.push("padding:"+e.padding+";"),"overflow"in e&&n.push("overflow:"+e.overflow+";"),"show-background"in e&&n.push("show-background:"+e["show-background"]+";"),"id"in e&&n.push("regionID:"+e.id+";"),n}function P(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r["xml:id"]===t||r.id===t)return r}return null}function D(e,t){var n=[];return e.match(/\S+/g).forEach(function(e){var r=P(G,e);if(r){var i=C(JSON.parse(JSON.stringify(r)),t);n=n.concat(i)}}),n}function w(){var e=[32,15];return q.tt.hasOwnProperty("ttp:cellResolution")?q.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function N(e,t){for(var n=E("padding-left",t),r=E("padding-right",t),i=n.concat(" "+r+" "),a="",o="",s="",u=Array.prototype.slice.call(e.children),l=e.getElementsByClassName("lineBreak")[0],d=u.indexOf(l),f=[];-1!=d;)f.push(d),d=u.indexOf(l,d+1);var c="<br>",h='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(f.length)f.forEach(function(e,t){if(0===t){for(var n="",r=0;r<e;r++)a+=u[r].outerHTML,0===r&&(n=i.concat(u[r].style.cssText));a=h+n+'">'+a}for(var l="",d=e+1;d<u.length;d++)o+=u[d].outerHTML,d===u.length-1&&(l+=i.concat(u[d].style.cssText));o=h+l+'">'+o,a&&o&&t===f.length-1?s+=a+"</span>"+c+o+"</span>":a&&o&&t!==f.length-1?s+=a+"</span>"+c+o+"</span>"+c:a&&!o?s+=a+"</span>":!a&&o&&t===f.length-1?s+=o+"</span>":!a&&o&&t!==f.length-1&&(s+=o+"</span>"+c)});else{for(var g="",p=0;p<u.length;p++)g+=u[p].style.cssText;s=h+i+g+'">'+e.innerHTML+"</span>"}return s}function x(e,t){var n=document.createElement("div");return e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var r=e.span.__children,i=document.createElement("span");if(e.span.hasOwnProperty("style")){var a=M(e.span.style,t);i.className="spanPadding "+e.span.style,i.style.cssText=a.join(" ")}r.forEach(function(e){if(!r.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var t=document.createTextNode(e["#text"]);i.appendChild(t)}else if("br"in e){i.hasChildNodes()&&n.appendChild(i);var a=document.createElement("br");a.className="lineBreak",n.appendChild(a);var o=document.createElement("span");o.className=i.className,o.style.cssText=i.style.cssText,i=o}}),n.appendChild(i)}else if(e.hasOwnProperty("br")){var o=document.createElement("br");o.className="lineBreak",n.appendChild(o)}else if(e.hasOwnProperty("#text")){var s=document.createElement("span");s.textContent=e["#text"],n.appendChild(s)}}),n}function L(e,t,n){var r,i,a=[],o=e.region,s=t.region;return s&&(r=D(s,n)),o?(i=a.concat(D(o,n)),a=r?S(r,i):i):r&&(a=r),B(a,Q),a}function F(e,t){var n,r,i,a=[],o=e.style,s=q.tt.body.style,u=q.tt.body.div.style,l="";return s&&(n=M(s,t),l="paragraph "+s),u&&(r=M(u,t),n?(r=S(n,r),l+=" "+u):l="paragraph "+u),o?(i=M(o,t),n&&r?(a=S(r,i),l+=" "+o):n?(a=S(n,i),l+=" "+o):r?(a=S(r,i),l+=" "+o):(a=i,l="paragraph "+o)):n&&!r?a=n:!n&&r&&(a=r),B(a,W),[a,l]}function B(e,t){for(var n in t)t.hasOwnProperty(n)&&(T(n,e)||e.push(n+":"+t[n]))}var U=this.context,k=(0,f.default)(U).getInstance().log,j=void 0,H=void 0,q=void 0,z=void 0,G=void 0,V=void 0,Y=void 0,K=void 0,Q=void 0,W=void 0,X=void 0,Z=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=0;return j={parse:d,setConfig:e},function(){H=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,V={},Y={},K={},Q={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},W={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},X={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;",default:"font-family: monospace, sans-serif;"},Z={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},$={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},J={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},ee={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},te={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},ne={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},ie=new l.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}(),j}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(0),s=r(o),u=n(31),l=r(u),d=n(3),f=r(d),c=3600,h=60;i.__dashjs_factory_name="TTMLParser",t.default=s.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var r,a,s=[];e=e.split(l),r=e.length,a=-1;for(var u=0;u<r;u++){var c=e[u];if(c.length>0&&"WEBVTT"!==c&&c.match(d)){var h=n(c),g=h.cuePoints,p=h.styles,m=i(e,u+1),_=t(g[0].replace(f,"")),v=t(g[1].replace(f,""));!isNaN(_)&&!isNaN(v)&&_>=a&&v>_?""!==m?(a=_,s.push({start:_,end:v,data:m,styles:p})):o("Skipping cue due to empty/malformed cue text"):o("Skipping cue due to incorrect cue timing")}}return s}function t(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function n(e){var t=e.split(d),n=t[1].split(c);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:r(n)}}function r(e){var t={};return e.forEach(function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}}),t}function i(e,t){for(var n,r=t,i="",a="";""!==e[r]&&r<e.length;)r++;if((n=r-t)>1)for(var o=0;o<n;o++){if(a=e[t+o],a.match(d)){i="";break}i+=a,o!==n-1&&(i+="\n")}else a=e[t],a.match(d)||(i=a);return decodeURI(i)}var a=this.context,o=(0,u.default)(a).getInstance().log,s=void 0,l=void 0,d=void 0,f=void 0,c=void 0;return s={parse:e},function(){l=/(?:\r\n|\r|\n)/gm,d=/-->/,f=/(^[\s]+|[\s]+$)/g,c=/\s\b/g}(),s}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(3),u=r(s);i.__dashjs_factory_name="VTTParser",t.default=o.default.getSingletonFactory(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.url=e||null,n.checkForExistenceOnly=!0,n}return a(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this._s=void 0};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.level=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function e(){r(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.range=null,this.manifestInfo=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.time=null,this.droppedFrames=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},a=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},o=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};t.ManifestUpdate=i,t.ManifestUpdateStreamInfo=a,t.ManifestUpdateTrackInfo=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.loadingRequests=[],this.executedRequests=[]};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};t.default=i},function(e,t,n){"use strict";var r=t.decimalAdjust=function(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+n:n))))};e.exports={round10:function(e,t){return r("round",e,t)},floor10:function(e,t){return r("floor",e,t)},ceil10:function(e,t){return r("ceil",e,t)}},e.exports.polyfill=function(){Math.round10||(Math.round10=e.exports.round10),Math.floor10||(Math.floor10=e.exports.floor10),Math.ceil10||(Math.ceil10=e.exports.ceil10)}},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(63),d=r(l),f=n(165),c=n(166),h=r(c),g=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.dash=null,r.foundBitrates=!1,r.gotFirstManifest=!1,r.drmSupportList=[],r.hasDrmSupportList=!1,r}return o(t,e),s(t,[{key:"isItemSupported",value:function(e){var t=this;return new Promise(function(n){return"dash"!==e.type&&"mpd"!==e.type?n({supported:!1,errorCode:Meister.ErrorCodes.WRONG_TYPE}):window.MediaSource?e.drm||e.drmConfig?(t.meister.one("drmKeySystemSupport",function(e){var t=!1;return Object.keys(e).forEach(function(n){"com.apple.fps"===n&&e[n]||"com.apple.fps.1_0"===n&&e[n]||"com.apple.fps.2_0"===n&&e[n]||"org.w3.clearkey"!==n&&e[n]&&(t=!0)}),n({supported:t,errorCode:t?null:Meister.ErrorCodes.NO_DRM})}),void t.meister.trigger("requestDrmKeySystemSupport",{})):n({supported:!0}):n({supported:!1,errorCode:Meister.ErrorCodes.NOT_SUPPORTED})})}},{key:"process",value:function(e){var t=this;return new Promise(function(n,r){t.player=t.meister.getPlayerByType("html5",e),t.player?n(e):r(t.name+": Unable to play item "+e.src+", no player available.")})}},{key:"load",value:function(e){var n=this;return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),new Promise(function(t){n.dash=d.default.MediaPlayer().create(),n.dash.getDebug().setLogToBrowserConsole(!1),n.dash.setFastSwitchEnabled(!0),n.dash.setLiveDelayFragmentCount(8),n.config.lowMemoryMode&&(n.dash.setBufferPruningInterval(15),n.dash.setBufferTimeAtTopQuality(10),n.dash.setBufferTimeAtTopQualityLongForm(10),n.dash.setBufferToKeep(10)),n.config.settings&&(0,f.setDashOptions)(n.name,n.dash,n.config.settings),e.startFromLive&&n.dash.setLiveDelayFragmentCount(0),n.on("requestGoLive",n.goLive.bind(n)),n.on("requestBitrate",n.onRequestBitrate.bind(n)),n.dash.on(d.default.MediaPlayer.events.MANIFEST_LOADED,n.onManifestLoaded.bind(n)),n.dash.on(d.default.MediaPlayer.events.STREAM_INITIALIZED,n.onStreamInitialized.bind(n)),n.dash.on(d.default.MediaPlayer.events.QUALITY_CHANGE_RENDERED,n.onQualityChanged.bind(n)),n.dash.on(d.default.MediaPlayer.events.ERROR,n.onError.bind(n)),n.dash.on(d.default.MediaPlayer.events.METRIC_ADDED,function(e){"HttpList"!==e.metric||"MPD"!==e.value.type||n.gotFirstManifest||(n.gotFirstManifest=!0,n.meister.trigger("showLoading",{code:"VIDEO_ACQUIRING_MANIFEST"}))}),n.didBeginSeek=!1,n.on("playerLoadedMetadata",function(){e.startFromBeginning&&!n.didBeginSeek&&(n.didBeginSeek=!0,n.meister.trigger("requestSeek",{relativePosition:0}))}),n.dash.initialize(n.player.mediaElement,e.src,!1),n.one("playerPlay",function(){n.dash.pause(),n.dash.play()}),n.one("requestPlay",function(){n.dash.play()}),t()})}},{key:"unload",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unload",this).call(this),this.gotFirstManifest=!1,this.dash&&this.dash.reset(),this.foundBitrates=!1,this.drmSupportList=[],this.hasDrmSupportList=!1}},{key:"_onPlayerTimeUpdate",value:function(){var e=this.dash.time();e=e<0?0:e,this.meister.trigger("playerTimeUpdate",{currentTime:e,duration:this.dash.duration()})}},{key:"_onPlayerSeek",value:function(){var e=this.dash.time(),t=this.dash.duration(),n=e/t;this.meister.trigger("playerSeek",{relativePosition:n,currentTime:e,duration:t})}},{key:"onError",value:function(e){"download"===e.error&&(this.meister.error("Could not download fragment after retry's","DSH-0001"),this.meister.pause())}},{key:"onManifestLoaded",value:function(e){if(e.data){var t=!1,n=!1,r=e.data.mediaPresentationDuration;r||(t=!0),e.data.timeShiftBufferDepth>this.config.dvrThreshold&&(this.liveSyncDelay=e.data.minBufferTime,n=!0,r=e.data.timeShiftBufferDepth),this.config.dvrEnabled||(n=!1),this.meister.trigger("itemTimeInfo",{isLive:t,hasDVR:n,duration:r});var i=e.data.Period.AdaptationSet,a=null,o=null;if(i.ContentProtection)o=i.ContentProtection;else{if(!i.length)return;if(!i[0].ContentProtection)return;o=i[0].ContentProtection}for(var s=0;s<o.length;s++){var u=o[s];u["cenc:default_KID"]&&(a=u["cenc:default_KID"])}if(a&&this.meister.trigger("drmKidAvailable",a),!this.hasDrmSupportList){var l=!0,d=!1,f=void 0;try{for(var c,h=o[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var g=c.value;"urn:uuid:EDEF8BA9-79D6-4ACE-A3C8-27DCD51D21ED"===g.schemeIdUri?this.drmSupportList.push("com.widevine.alpha"):"urn:uuid:9A04F079-9840-4286-AB92-E65BE0885F95"===g.schemeIdUri&&this.drmSupportList.push("com.microsoft.playready")}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}}this.drmSupportList.length&&!this.hasDrmSupportList&&(this.hasDrmSupportList=!0,this.meister.trigger("drmSupportedListAvailable",this.drmSupportList))}}},{key:"onStreamInitialized",value:function(){if(!this.foundBitrates){var e=this.dash.getBitrateInfoListFor("video"),t=[];t.push({bitrate:0,index:-1});for(var n=0;n<e.length;n++){var r=e[n];t.push({bitrate:r.bitrate,index:r.qualityIndex})}this.meister.trigger("itemBitrates",{bitrates:t,currentIndex:-1}),this.foundBitrates=!0}}},{key:"onQualityChanged",value:function(e){if("video"===e.mediaType){var t=e.newQuality,n=this.dash.getBitrateInfoListFor("video"),r=n.find(function(e){return e.qualityIndex===t});this.meister.trigger("playerAutoSwitchBitrate",{newBitrate:r.bitrate,newBitrateIndex:t})}}},{key:"onRequestBitrate",value:function(e){if(-1===e.bitrateIndex)return void this.dash.setAutoSwitchQualityFor("video",!0);this.dash.setAutoSwitchQualityFor("video",!1),this.dash.setQualityFor("video",e.bitrateIndex);for(var t=0,n=this.dash.getBitrateInfoListFor("video"),r=0;r<n.length;r++)if(e.bitrateIndex===n[r].qualityIndex){t=n[r].bitrate;break}this.meister.trigger("playerSwitchBitrate",{newBitrate:t,newBitrateIndex:e.bitrateIndex})}},{key:"onRequestSeek",value:function(e){var t=void 0;Number.isFinite(e.relativePosition)?t=e.relativePosition*this.dash.duration():Number.isFinite(e.timeOffset)?t=this.dash.time()+e.timeOffset:Number.isFinite(e.targetTime)&&(t=e.targetTime),!e.forcedStart&&this.blockSeekForward&&t>this.dash.time()||Number.isFinite(t)&&this.dash.seek(t)}},{key:"goLive",value:function(){var e=this.dash.duration(),t=e-30;this.player.currentTime=this.dash.getDVRSeekOffset(t)}},{key:"duration",get:function(){return this.dash?this.dash.duration():NaN}},{key:"currentTime",get:function(){return this.dash?this.dash.time():NaN},set:function(e){this.dash&&this.dash.seek(e)}}],[{key:"pluginName",get:function(){return"Dash"}},{key:"pluginVersion",get:function(){return h.default.version}}]),t}(Meister.MediaPlugin);Meister.registerPlugin(g.pluginName,g),Meister.registerPlugin("dash",g),t.default=g},function(e,t,n){"use strict";function r(e,t,n){return!(e<t)&&!(e>n)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("Dashjs instance is required.");var i=n.abandonLoadTimeout,a=n.bandwidthSafetyFactor,o=n.bufferPruningInterval,s=n.bufferTimeAtTopQuality,u=n.bufferTimeAtTopQualityLongForm,l=n.bufferToKeep,d=n.fastSwitchEnabled,f=n.fragmentLoaderRetryAttempts,c=n.fragmentLoaderRetryInterval,h=n.liveDelay,g=n.liveDelayFragmentCount,p=n.longFormContentDurationThreshold,m=n.richBufferThreshold,_=n.stableBufferTime,v=n.useSuggestedPresentationDelay;Number.isFinite(i)&&(i>0?t.setAbandonLoadTimeout(i):console.error(e+": incorrect abandonLoadTimeout. Please use a number in seconds higher than 0.")),Number.isFinite(a)&&(r(a,0,1)?t.setBandwidthSafetyFactor(a):console.error(e+": incorrect bandwidthSafetyFactor. Please use a percentage between 0.0 and 1.")),Number.isFinite(o)&&(o>0?t.setBufferPruningInterval(o):console.error(e+": incorrect bufferPruningInterval. Please use a number in seconds higher than 0.")),Number.isFinite(s)&&(s>0?t.setBufferTimeAtTopQuality(s):console.error(e+": incorrect bufferTimeAtTopQuality. Please use a number in seconds higher than 0.")),Number.isFinite(u)&&(u>0?t.setBufferTimeAtTopQualityLongForm(u):console.error(e+": incorrect bufferTimeAtTopQualityLongForm. Please use a number in seconds higher than 0.")),Number.isFinite(l)&&(l>0?t.setBufferToKeep(l):console.error(e+": incorrect bufferToKeep. Please use a number in seconds higher than 0.")),d&&t.setFastSwitchEnabled(!!d),Number.isFinite(f)&&(f>0?t.setFragmentLoaderRetryAttempts(f):console.error(e+": incorrect fragmentLoaderRetryAttempts. Please use a number in seconds higher than 0.")),Number.isFinite(c)&&(c>0?t.setFragmentLoaderRetryInterval(c):console.error(e+": incorrect fragmentLoaderRetryInterval. Please use a number in milliseconds higher than 0.")),Number.isFinite(h)&&(h>0?t.setLiveDelay(h):console.error(e+": incorrect liveDelay. Please use a number in seconds higher than 0.")),Number.isFinite(g)&&(g>0?t.setLiveDelayFragmentCount(g):console.error(e+": incorrect liveDelayFragmentCount. Please use a number higher than 0.")),Number.isFinite(p)&&(p>0?t.setLongFormContentDurationThreshold(p):console.error(e+": incorrect longFormContentDurationThreshold. Please use a number in seconds higher than 0.")),Number.isFinite(m)&&(m>0?t.setRichBufferThreshold(m):console.error(e+": incorrect richBufferThreshold. Please use a number in seconds higher than 0.")),Number.isFinite(_)&&(_>0?t.setStableBufferTime(_):console.error(e+": incorrect stableBufferTime. Please use a number in seconds higher than 0.")),v&&t.useSuggestedPresentationDelay(!!v)}Object.defineProperty(t,"__esModule",{value:!0}),t.setDashOptions=i,t.default=i},function(e,t){e.exports={name:"@meisterplayer/plugin-dash",version:"5.3.0",description:"Meister plugin wrapping the dashjs player.",main:"dist/Dash.js",keywords:["meister","video","plugin"],repository:{type:"git",url:"https://github.com/meisterplayer/media-dash.git"},author:"Triple",license:"Apache-2.0",dependencies:{dashjs:"git+https://github.com/meisterplayer/dashjs-fork.git#triple_2.4.1"},devDependencies:{"meister-gulp-webpack-tasks":"^1.0.6","meister-js-dev":"^3.1.0","babel-preset-es2015":"^6.24.0","babel-preset-es2017":"^6.22.0",gulp:"^3.9.1"},peerDependencies:{"@meisterplayer/meisterplayer":">= 5.1.0"}}},function(e,t,n){e.exports=n(61)}]);